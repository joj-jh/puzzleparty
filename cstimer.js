var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var Na=0;return function(){return Na<c.length?{done:!1,value:c[Na++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.makeIterator=function(c){var Na="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return Na?Na.call(c):$jscomp.arrayIterator(c)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,Na,z){c!=Array.prototype&&c!=Object.prototype&&(c[Na]=z.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,Na,z,r){if(Na){z=$jscomp.global;c=c.split(".");for(r=0;r<c.length-1;r++){var b=c[r];b in z||(z[b]={});z=z[b]}c=c[c.length-1];r=z[c];Na=Na(r);Na!=r&&null!=Na&&$jscomp.defineProperty(z,c,{configurable:!0,writable:!0,value:Na})}};$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(c,z,r){var b=this.length||0;0>z&&(z=Math.max(0,b+z));if(null==r||r>b)r=b;r=Number(r);0>r&&(r=Math.max(0,b+r));for(z=Number(z||0);z<r;z++)this[z]=c;return this}},"es6","es3");
$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function Na(){this.batch_=null}function z(a){return a instanceof b?a:new b(function(b,f){b(a)})}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;Na.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};Na.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var r=$jscomp.global.setTimeout;Na.prototype.asyncExecuteFunction=function(a){r(a,
0)};Na.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var f=a[b];a[b]=null;try{f()}catch(ab){this.asyncThrow_(ab)}}}this.batch_=null};Na.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var b=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(f){b.reject(f)}};b.prototype.createResolveAndReject_=
function(){function a(a){return function(h){f||(f=!0,a.call(b,h))}}var b=this,f=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};b.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var e=null!=a;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};b.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(f){this.reject_(f);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};b.prototype.reject_=function(a){this.settle_(2,a)};b.prototype.fulfill_=function(a){this.settle_(1,a)};b.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};b.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
0;a<this.onSettledCallbacks_.length;++a)e.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var e=new Na;b.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};b.prototype.settleSameAsThenable_=function(a,b){var f=this.createResolveAndReject_();try{a.call(b,f.resolve,f.reject)}catch(ab){f.reject(ab)}};b.prototype.then=function(a,e){function f(a,b){return"function"==typeof a?function(b){try{y(a(b))}catch(Ta){h(Ta)}}:
b}var y,h,Oa=new b(function(a,b){y=a;h=b});this.callWhenSettled_(f(a,y),f(e,h));return Oa};b.prototype["catch"]=function(a){return this.then(void 0,a)};b.prototype.callWhenSettled_=function(a,b){function f(){switch(y.state_){case 1:a(y.result_);break;case 2:b(y.result_);break;default:throw Error("Unexpected state: "+y.state_);}}var y=this;null==this.onSettledCallbacks_?e.asyncExecute(f):this.onSettledCallbacks_.push(f)};b.resolve=z;b.reject=function(a){return new b(function(b,f){f(a)})};b.race=function(a){return new b(function(b,
f){for(var e=$jscomp.makeIterator(a),h=e.next();!h.done;h=e.next())z(h.value).callWhenSettled_(b,f)})};b.all=function(a){var e=$jscomp.makeIterator(a),f=e.next();return f.done?z([]):new b(function(a,b){function h(b){return function(f){y[b]=f;x--;0==x&&a(y)}}var y=[],x=0;do y.push(void 0),x++,z(f.value).callWhenSettled_(h(y.length-1),b),f=e.next();while(!f.done)})};return b},"es6","es3");
$jscomp.checkStringArgs=function(c,Na,z){if(null==c)throw new TypeError("The 'this' value for String.prototype."+z+" must not be null or undefined");if(Na instanceof RegExp)throw new TypeError("First argument to String.prototype."+z+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.startsWith",function(c){return c?c:function(c,z){var r=$jscomp.checkStringArgs(this,c,"startsWith");c+="";for(var b=r.length,e=c.length,a=Math.max(0,Math.min(z|0,r.length)),y=0;y<e&&a<b;)if(r[a++]!=c[y++])return!1;return y>=e}},"es6","es3");$jscomp.findInternal=function(c,Na,z){c instanceof String&&(c=String(c));for(var r=c.length,b=0;b<r;b++){var e=c[b];if(Na.call(z,e,b,c))return{i:b,v:e}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,z){return $jscomp.findInternal(this,c,z).v}},"es6","es3");$jscomp.polyfill("String.prototype.endsWith",function(c){return c?c:function(c,z){var r=$jscomp.checkStringArgs(this,c,"endsWith");c+="";void 0===z&&(z=r.length);for(var b=Math.max(0,Math.min(z|0,r.length)),e=c.length;0<e&&0<b;)if(r[--b]!=c[--e])return!1;return 0>=e}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var c=0;return function(Na){return $jscomp.SYMBOL_PREFIX+(Na||"")+c++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};
$jscomp.iteratorFromArray=function(c,Na){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var z=0,r={next:function(){if(z<c.length){var b=z++;return{value:Na(b,c[b]),done:!1}}r.next=function(){return{done:!0,value:void 0}};return r.next()}};r[Symbol.iterator]=function(){return r};return r};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
$jscomp.polyfill("Math.log10",function(c){return c?c:function(c){return Math.log(c)/Math.LN10}},"es6","es3");$jscomp.polyfill("String.prototype.repeat",function(c){return c?c:function(c){var z=$jscomp.checkStringArgs(this,null,"repeat");if(0>c||1342177279<c)throw new RangeError("Invalid count value");c|=0;for(var r="";c;)if(c&1&&(r+=z),c>>>=1)z+=z;return r}},"es6","es3");
$jscomp.stringPadding=function(c,Na){var z=void 0!==c?String(c):" ";return 0<Na&&z?z.repeat(Math.ceil(Na/z.length)).substring(0,Na):""};$jscomp.polyfill("String.prototype.padStart",function(c){return c?c:function(c,z){var r=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(z,c-r.length)+r}},"es8","es3");
$jscomp.polyfill("Promise.prototype.finally",function(c){return c?c:function(c){return this.then(function(z){return Promise.resolve(c()).then(function(){return z})},function(z){return Promise.resolve(c()).then(function(){throw z;})})}},"es9","es3");var isInNode="object"===typeof process&&"function"===typeof require&&"object"===typeof global,isInWorker="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||isInNode;
function execBoth(c,Na,z){return!isInWorker&&c?c.apply(this,z||[]):isInWorker&&Na?Na.apply(this,z||[]):{}}function execWorker(c,Na){return execBoth(void 0,c,Na)}function execMain(c,Na){return execBoth(c,void 0,Na)}execWorker(function(){isInNode&&(global.self=global);self.$={isArray:Array.isArray||function(c){return"array"===jQuery.type(c)},noop:function(){}}});
execMain(function(){window.onerror=function(c,r,b,e,a){if((b||e)&&!/extension|adsbygoogle/i.exec(r)&&/\.js/i.exec(r)){void 0==a&&(a={});var y="";try{y=$.fingerprint()}catch(f){}$.post("bug.php",{version:CSTIMER_VERSION,fp:y,msg:c,url:r,line:b,col:e,stack:a.stack});DEBUG&&console.log(CSTIMER_VERSION,y,c,r,b,e,a)}};for(var c="CSTIMER_VERSION LANG_SET LANG_STR LANG_CUR OK_LANG CANCEL_LANG RESET_LANG ABOUT_LANG ZOOM_LANG BUTTON_TIME_LIST BUTTON_OPTIONS BUTTON_EXPORT BUTTON_DONATE PROPERTY_SR PROPERTY_USEINS PROPERTY_USEINS_STR PROPERTY_SHOWINS PROPERTY_VOICEINS PROPERTY_VOICEINS_STR PROPERTY_VOICEVOL PROPERTY_PHASES PROPERTY_TIMERSIZE PROPERTY_USEMILLI PROPERTY_SMALLADP PROPERTY_SCRSIZE PROPERTY_SCRMONO PROPERTY_SCRLIM PROPERTY_SCRALIGN PROPERTY_SCRALIGN_STR PROPERTY_SCRFAST PROPERTY_SCRKEYM PROPERTY_SCRCLK PROPERTY_SCRCLK_STR PROPERTY_WNDSCR PROPERTY_WNDSTAT PROPERTY_WNDTOOL PROPERTY_WND_STR EXPORT_DATAEXPORT EXPORT_TOFILE EXPORT_FROMFILE EXPORT_TOSERV EXPORT_FROMSERV EXPORT_FROMOTHER EXPORT_USERID EXPORT_INVID EXPORT_ERROR EXPORT_NODATA EXPORT_UPLOADED EXPORT_CODEPROMPT EXPORT_ONLYOPT EXPORT_ACCOUNT EXPORT_LOGINGGL EXPORT_LOGINWCA EXPORT_LOGOUTCFM EXPORT_LOGINAUTHED IMPORT_FINAL_CONFIRM BUTTON_SCRAMBLE BUTTON_TOOLS IMAGE_UNAVAILABLE TOOLS_SELECTFUNC TOOLS_CROSS TOOLS_EOLINE TOOLS_ROUX1 TOOLS_222FACE TOOLS_GIIKER TOOLS_IMAGE TOOLS_STATS TOOLS_HUGESTATS TOOLS_DISTRIBUTION TOOLS_TREND TOOLS_METRONOME TOOLS_BATTLE TOOLS_BATTLE_HEAD TOOLS_BATTLE_TITLE TOOLS_BATTLE_STATUS TOOLS_BATTLE_INFO TOOLS_BATTLE_JOINALERT TOOLS_BATTLE_LEAVEALERT TOOLS_CFMTIME TOOLS_SOLVERS TOOLS_RECONS TOOLS_RECONS_NODATA TOOLS_TRAINSTAT TOOLS_BLDHELPER TOOLS_SYNCSEED TOOLS_SYNCSEED_SEED TOOLS_SYNCSEED_INPUT TOOLS_SYNCSEED_30S TOOLS_SYNCSEED_HELP TOOLS_SYNCSEED_DISABLE TOOLS_SYNCSEED_INPUTA OLCOMP_UPDATELIST OLCOMP_VIEWRESULT OLCOMP_VIEWMYRESULT OLCOMP_START OLCOMP_SUBMIT OLCOMP_SUBMITAS OLCOMP_WCANOTICE OLCOMP_OLCOMP OLCOMP_ANONYM OLCOMP_ME OLCOMP_WCAACCOUNT OLCOMP_ABORT OLCOMP_WITHANONYM PROPERTY_IMGSIZE TIMER_INSPECT TIMER_SOLVE PROPERTY_USEMOUSE PROPERTY_TIMEU PROPERTY_TIMEU_STR PROPERTY_PRETIME PROPERTY_ENTERING PROPERTY_ENTERING_STR PROPERTY_INTUNIT PROPERTY_INTUNIT_STR PROPERTY_COLOR PROPERTY_COLORS PROPERTY_VIEW PROPERTY_VIEW_STR PROPERTY_UIDESIGN PROPERTY_UIDESIGN_STR COLOR_EXPORT COLOR_IMPORT COLOR_FAIL PROPERTY_FONTCOLOR_STR PROPERTY_COLOR_STR PROPERTY_FONT PROPERTY_FONT_STR PROPERTY_FORMAT PROPERTY_USEKSC PROPERTY_NTOOLS PROPERTY_AHIDE SCRAMBLE_LAST SCRAMBLE_NEXT SCRAMBLE_SCRAMBLE SCRAMBLE_SCRAMBLING SCRAMBLE_LENGTH SCRAMBLE_INPUT PROPERTY_VRCSPEED PROPERTY_VRCMP PROPERTY_VRCMPS PROPERTY_GIIKERVRC PROPERTY_GIISOK_DELAY PROPERTY_GIISOK_DELAYS PROPERTY_GIISOK_KEY PROPERTY_GIISOK_MOVE PROPERTY_GIISOK_MOVES PROPERTY_GIISBEEP PROPERTY_GIIRST PROPERTY_GIIRSTS CONFIRM_GIIRST PROPERTY_GIIAED scrdata SCRAMBLE_NOOBST SCRAMBLE_NOOBSS SCROPT_TITLE SCROPT_BTNALL SCROPT_BTNNONE SCROPT_EMPTYALT STATS_CFM_RESET STATS_CFM_DELSS STATS_CFM_DELMUL STATS_CFM_DELETE STATS_COMMENT STATS_REVIEW STATS_DATE STATS_SSSTAT STATS_CURROUND STATS_CURSESSION STATS_CURSPLIT STATS_EXPORTCSV STATS_SSMGR_TITLE STATS_SSMGR_NAME STATS_SSMGR_DETAIL STATS_SSMGR_OPS STATS_SSMGR_ORDER STATS_SSMGR_ODCFM STATS_SSMGR_SORTCFM STATS_ALERTMG STATS_PROMPTSPL STATS_ALERTSPL STATS_AVG STATS_SUM STATS_SOLVE STATS_TIME STATS_SESSION STATS_SESSION_NAME STATS_SESSION_NAMEC STATS_STRING STATS_PREC STATS_PREC_STR STATS_TYPELEN STATS_STATCLR STATS_ABSIDX STATS_XSESSION_DATE STATS_XSESSION_NAME STATS_XSESSION_SCR STATS_XSESSION_CALC STATS_RSFORSS PROPERTY_PRINTSCR PROPERTY_PRINTDATE PROPERTY_SUMMARY PROPERTY_IMRENAME PROPERTY_SCR2SS PROPERTY_SS2SCR PROPERTY_SS2PHASES PROPERTY_STATINV PROPERTY_STATSSUM PROPERTY_STATTHRES PROPERTY_STATAL PROPERTY_STATALU PROPERTY_HLPBS PROPERTY_HLPBS_STR PROPERTY_DELMUL PROPERTY_TOOLSFUNC PROPERTY_TRIM PROPERTY_TRIMR PROPERTY_TRIM_MED PROPERTY_STKHEAD PROPERTY_TOOLPOS PROPERTY_TOOLPOS_STR PROPERTY_HIDEFULLSOL PROPERTY_IMPPREV PROPERTY_AUTOEXP PROPERTY_AUTOEXP_OPT PROPERTY_SCRASIZE MODULE_NAMES BGIMAGE_URL BGIMAGE_INVALID BGIMAGE_OPACITY BGIMAGE_IMAGE BGIMAGE_IMAGE_STR SHOW_AVG_LABEL SHOW_DIFF_LABEL SHOW_DIFF_LABEL_STR USE_LOGOHINT TOOLS_SCRGEN SCRGEN_NSCR SCRGEN_PRE SCRGEN_GEN TOOLS_RECONS_TITLE TOOLS_DLYSTAT TOOLS_DLYSTAT1 TOOLS_DLYSTAT_OPT1 TOOLS_DLYSTAT_OPT2 PROPERTY_GIIMODE PROPERTY_GIIMODES PROPERTY_VRCAH PROPERTY_VRCAHS VRCREPLAY_TITLE VRCREPLAY_ORI VRCREPLAY_SHARE GIIKER_CONNECT GIIKER_RESET PROPERTY_SHOWAD PROPERTY_GIIORI".split(" "),
Na=0;Na<c.length;Na++)window[c[Na]]=window[c[Na]]||"|||||||||||||||";window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(c,r){return window.setTimeout(c,1E3/60)}}();window.localStorage||(window.localStorage={});"properties"in localStorage||"https:"==location.protocol||"localhost"==location.hostname||(location.href="https:"+location.href.substring(location.protocol.length));
window.performance&&window.performance.now&&($.now=function(){return Math.floor(window.performance.now())});$.urlParam=function(c){c=(new RegExp("[?&]"+c+"=([^&#]*)")).exec(window.location.href);return null==c?null:c[1]||0};$.hashParam=function(c){c=(new RegExp("[#&]"+c+"=([^&#]*)")).exec(window.location.hash);return null==c?null:c[1]||0};$.clearUrl=function(c){var z=(new RegExp("[?&]("+c+"=[^&#]*&?)")).exec(window.location.href);c=c?location.href.replace(z[1],"").replace(/\?$/,""):location.pathname;
history&&history.replaceState?history.replaceState(void 0,void 0,c):location.href=c};$.clearHash=function(c){var z=(new RegExp("[#&]("+c+"=[^&#]*&?)")).exec(window.location.href);c=c?location.href.replace(z[1],"").replace(/#$/,""):location.pathname+location.search;history&&history.replaceState?history.replaceState(void 0,void 0,c):location.href=c};$.clipboardCopy=function(c,r){var b=$("<textarea>"+c+"</textarea>").appendTo(document.body);b.focus().select();var e=!1;try{e=document.execCommand("copy")}catch(a){}b.remove();
return e};$.fingerprint=function(){var c=window.screen&&[Math.max(screen.height,screen.width),Math.min(screen.height,screen.width),screen.colorDepth].join("x"),r=(new Date).getTimezoneOffset(),b=$.map(navigator.plugins,function(b){return[b.name,b.description,$.map(b,function(a){return[a.type,a.suffixes].join("~")}).sort().join(",")].join("::")}).sort().join(";");c=[navigator.userAgent,navigator.language,!!window.sessionStorage,!!window.localStorage,!!window.indexedDB,navigator.doNotTrack,c,r,b].join("###");
return $.sha256(c)};$.ctxDrawPolygon=function(c,r,b,e){if(c){e=e||[1,0,0,0,1,0];b=$.ctxTransform(b,e);c.beginPath();c.fillStyle=r;c.moveTo(b[0][0],b[1][0]);for(r=1;r<b[0].length;r++)c.lineTo(b[0][r],b[1][r]);c.closePath();c.fill();c.stroke()}};$.ctxRotate=function(c,r){return $.ctxTransform(c,[Math.cos(r),-Math.sin(r),0,Math.sin(r),Math.cos(r),0])};$.ctxTransform=function(c){for(var r,b=1;b<arguments.length;b++){var e=arguments[b];3==e.length&&(e=[e[0],0,e[1]*e[0],0,e[0],e[2]*e[0]]);r=[[],[]];for(b=
0;b<c[0].length;b++)r[0][b]=c[0][b]*e[0]+c[1][b]*e[1]+e[2],r[1][b]=c[0][b]*e[3]+c[1][b]*e[4]+e[5]}return r};$.delayExec=function(){var c={};return function(r,b,e){c[r]&&(clearTimeout(c[r][0]),delete c[r]);e=setTimeout(b,e);c[r]=[e,b]}}();$.waitUser=function(){var c=[];return{reg:function(r){c.push(r)},call:function(){for(var r=0;r<c.length;r++)c[r]();c=[]}}}();"serviceWorker"in navigator?$(function(){navigator.serviceWorker.register("sw.js")}):window.applicationCache&&$(function(){applicationCache.addEventListener("updateready",
function(c){applicationCache.status==applicationCache.UPDATEREADY&&(applicationCache.swapCache(),location.reload())},!1)});navigator.storage&&navigator.storage.persisted&&navigator.storage.persisted().then(function(c){if(c)return Promise.resolve(c);if(navigator.storage.persist)return navigator.storage.persist()}).then(function(c){$.persistent=c})});var DEBUGM=!1,DEBUGWK=!1,DEBUG=isInWorker?DEBUGWK:DEBUGM&&!!$.urlParam("debug");
Array.prototype.indexOf||(Array.prototype.indexOf=function(c){for(var Na=0;Na<this.length;Na++)if(this[Na]==c)return Na;return-1});
Function.prototype.bind||(Function.prototype.bind=function(c){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var Na=Array.prototype.slice.call(arguments,1),z=this,r=function(){},b=function(){return z.apply(this instanceof r?this:c,Na.concat(Array.prototype.slice.call(arguments)))};this.prototype&&(r.prototype=this.prototype);b.prototype=new r;return b});execBoth(function(){var c=function(c,r){var b=(c&65535)+(r&65535);return(c>>16)+(r>>16)+(b>>16)<<16|b&65535},Na=function(c,r){return c>>>r|c<<32-r};$.sha256=function(z){/[\x80-\xFF]/.test(z)&&(z=unescape(encodeURI(z)));for(var r=z,b=[],e=0;e<8*r.length;e+=8)b[e>>5]|=(r.charCodeAt(e/8)&255)<<24-e%32;var a=8*z.length;r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,
4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];
z=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];e=[64];b[a>>5]|=128<<24-a%32;b[(a+64>>9<<4)+15]=a;for(a=0;a<b.length;a+=16){for(var y=z[0],f=z[1],ab=z[2],h=z[3],Oa=z[4],Ra=z[5],x=z[6],Wa=z[7],Ta=0;64>Ta;Ta++){var Za=Ta;if(16>Ta)var Sa=b[a+Ta];else{Sa=e[Ta-2];Sa=Na(Sa,17)^Na(Sa,19)^Sa>>>10;Sa=c(Sa,e[Ta-7]);var Pa=e[Ta-15];Pa=Na(Pa,7)^Na(Pa,18)^Pa>>>3;Sa=c(c(Sa,Pa),e[Ta-16])}e[Za]=Sa;Za=Oa;Za=Na(Za,6)^Na(Za,11)^Na(Za,25);Za=c(c(c(c(Wa,Za),Oa&Ra^~Oa&x),r[Ta]),
e[Ta]);Wa=y;Wa=Na(Wa,2)^Na(Wa,13)^Na(Wa,22);Sa=c(Wa,y&f^y&ab^f&ab);Wa=x;x=Ra;Ra=Oa;Oa=c(h,Za);h=ab;ab=f;f=y;y=c(Za,Sa)}z[0]=c(y,z[0]);z[1]=c(f,z[1]);z[2]=c(ab,z[2]);z[3]=c(h,z[3]);z[4]=c(Oa,z[4]);z[5]=c(Ra,z[5]);z[6]=c(x,z[6]);z[7]=c(Wa,z[7])}b="";for(r=0;r<4*z.length;r++)b+="0123456789abcdef".charAt(z[r>>2]>>8*(3-r%4)+4&15)+"0123456789abcdef".charAt(z[r>>2]>>8*(3-r%4)&15);return b}});
execBoth(function(){function c(a,c){for(var f=a.slice(),h=0;16>h;h++)a[h]=b[f[e[h]]]^c[h]}function Na(a,b){for(var c=a.slice(),f=0;16>f;f++)a[e[f]]=r[c[f]^b[f]]}function z(c){if(0==a.length){for(var f=0;256>f;f++)b[r[f]]=f;for(f=0;128>f;f++)a[f]=f<<1,a[128+f]=f<<1^27}c=c.slice();f=1;for(var e=16;176>e;e+=4){var h=c.slice(e-4,e);0==e%16&&(h=[r[h[1]]^f,r[h[2]],r[h[3]],r[h[0]]],f=a[f]);for(var y=0;4>y;y++)c[e+y]=c[e+y-16]^h[y]}this.key=c}var r=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,
118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,
94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],b=[],e=[0,13,10,7,4,1,14,11,8,5,2,15,12,9,6,3],a=[];z.prototype.decrypt=function(b){for(var f=this.key.slice(160,176),e=0;16>e;e++)b[e]^=f[e];for(f=
144;16<=f;f-=16){c(b,this.key.slice(f,f+16));e=b;for(var h=0;16>h;h+=4){var y=e[h+0],Ra=e[h+1],x=e[h+2],Wa=e[h+3],r=y^Ra^x^Wa,z=a[r],Sa=a[a[z^y^x]]^r;r^=a[a[z^Ra^Wa]];e[h+0]=e[h+0]^Sa^a[y^Ra];e[h+1]=e[h+1]^r^a[Ra^x];e[h+2]=e[h+2]^Sa^a[x^Wa];e[h+3]=e[h+3]^r^a[Wa^y]}}c(b,this.key.slice(0,16));return b};z.prototype.encrypt=function(b){Na(b,this.key.slice(0,16));for(var c=16;160>c;c+=16){for(var e=b,h=12;0<=h;h-=4){var y=e[h+0],r=e[h+1],x=e[h+2],Wa=e[h+3],Ta=y^r^x^Wa;e[h+0]=e[h+0]^Ta^a[y^r];e[h+1]=e[h+
1]^Ta^a[r^x];e[h+2]=e[h+2]^Ta^a[x^Wa];e[h+3]=e[h+3]^Ta^a[Wa^y]}Na(b,this.key.slice(c,c+16))}c=this.key.slice(160,176);for(e=0;16>e;e++)b[e]^=c[e];return b};$.aes128=function(a){return new z(a)}});function MersenneTwisterObject(c,Na){function z(a,b){var e=a&65535,c=b&65535;var f=e*c;var h=f>>>16;h=h+e*((b&4294901760)>>>16)&65535;h+=((a&4294901760)>>>16)*c;h&=65535;e=h<<16|f&65535;return 0>e?e+4294967296:e}function r(b){var e=0<arguments.length&&isFinite(b)?b&4294967295:5489,c;a=[e];y=624;for(c=1;624>c;a[c]=e=z(e^e>>>30,1812433253)+c++);}function b(b,e){var c=b.length,f;r(1<arguments.length&&isFinite(e)?e:19650218);var h=a[0];var y=1;var ab=0;for(f=Math.max(624,c);f;ab%=c,f--)a[y]=h=(a[y++]^
z(h^h>>>30,1664525))+b[ab]+ab++&4294967295,623<y&&(a[0]=h=a[623],y=1);for(f=623;f;f--)a[y]=h=(a[y]^z(h^h>>>30,1566083941))-y++&4294967295,623<y&&(a[0]=h=a[623],y=1);a[0]=2147483648}function e(){for(var b,e;624<=y||0>y;){y=Math.max(0,y-624);for(e=0;227>e;b=a[e]&2147483648|a[e+1]&2147483647,a[e]=a[e+397]^b>>>1^f[b&1],e++);for(;623>e;b=a[e]&2147483648|a[e+1]&2147483647,a[e]=a[e+-227]^b>>>1^f[b&1],e++);b=a[623]&2147483648|a[0]&2147483647;a[623]=a[396]^b>>>1^f[b&1]}b=a[y++];b^=b>>>11;b^=b<<7&2636928640;
b^=b<<15&4022730752;b^=b>>>18;return 0>b?b+4294967296:b}var a=[],y=NaN,f=[0,2567483615];1<arguments.length?b(Na,c):0<arguments.length?r(c):r();return function(){return(67108864*(e()>>>5)+(e()>>>6))/9007199254740992}}Math.random=new MersenneTwisterObject((new Date).getTime());var mathlib=function(){function c(a,w,n,Ua,Ya,b){var Va=a[w];a[w]=a[Ya]^b;a[Ya]=a[Ua]^b;a[Ua]=a[n]^b;a[n]=Va^b}function Na(a){for(var w=arguments.length-1,n=a[arguments[w]];1<w;w--)a[arguments[w]]=a[arguments[w-1]];a[arguments[1]]=n;return Na}function z(a,w,n,Ua){n=n||1;for(var Ya=w.length,Va=[],b=0;b<Ya;b++)Va[b]=a[w[b]];for(b=0;b<Ya;b++){var e=(b+n)%Ya;a[w[e]]=Va[b];Ua&&(a[w[e]]+=Ua[e]-Ua[b]+Ua[Ua.length-1])}return z}function r(a,w){return a[w>>3]>>((w&7)<<2)&15}function b(a,w){var n,Ua,Ya;for(n=
Ua=0;n<w;++n)for(Ua*=w-n,Ya=n+1;Ya<w;++Ya)a[Ya]<a[n]&&++Ua;return Ua}function e(a,w){var n;var Ua=0;for(n=w-2;0<=n;--n)Ua^=a%(w-n),a=~~(a/(w-n));return Ua&1}function a(a,w,n){w=w||8;for(var Ua=0,Ya=1985229328,b=0;b<w-1;++b){var Va=a[b]<<2;Ua=(w-b)*Ua+(Ya>>Va&7);Ya-=286331152<<Va}return 0>n?Ua>>1:Ua}function y(a,w,n,Ua){n=(n||8)-1;var Ya=1985229328,b=0;0>Ua&&(w<<=1);for(var Va=0;Va<n;++Va){var e=$a[n-Va],c=~~(w/e);b^=c;w%=e;c<<=2;a[Va]=Ya>>c&7;e=(1<<c)-1;Ya=(Ya&e)+(Ya>>4&~e)}0>Ua&&0!=(b&1)?(a[n]=a[n-
1],a[n-1]=Ya&7):a[n]=Ya&7;return a}function f(b,w,n){this.length=w;this.evenbase=n;this.get="p"==b?function(n){return a(n,this.length,this.evenbase)}:function(n){var a=this.evenbase,w=Math.abs(a);a=0>a?0:n[0]%w;for(var Ua=this.length-1;0<Ua;Ua--)a=a*w+n[Ua]%w;return a};this.set="p"==b?function(n,a){return y(n,a,this.length,this.evenbase)}:function(n,a){for(var w=a,Ua=this.length,b=this.evenbase,Ya=Math.abs(b),Va=Ya*Ua,e=1;e<Ua;e++)n[e]=w%Ya,Va-=n[e],w=~~(w/Ya);n[0]=(0>b?Va:w)%Ya;return n}}function ab(a,
w,n,Ua){Ua=Ua||6;if($.isArray(n)){var b=new f(n[1],n[2],n[3]);n=n[0];for(var Va=0;Va<Ua;Va++){a[Va]=[];for(var e=0;e<w;e++){var c=b.set([],e);n(c,Va);a[Va][e]=b.get(c)}}}else for(Va=0;Va<Ua;Va++)for(a[Va]=[],e=0;e<w;e++)a[Va][e]=n(e,Va)}function h(){this.ca=[0,1,2,3,4,5,6,7];this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}function Oa(a,w){this.sgs=[];this.sgsi=[];this.Tk=[];this.gen=a;this.invMap={};var n=a[0].length;this.e=[];for(var Ua=0;Ua<n;Ua++)this.e[Ua]=Ua;for(Ua=0;Ua<n;Ua++)this.sgs.push([]),this.sgsi.push([]),
this.Tk.push([]),this.sgs[Ua][Ua]=this.e,this.sgsi[Ua][Ua]=this.e;for(Ua=0;Ua<a.length;Ua++){var b=a[Ua];w&&(b=this.permMult(this.permMult(this.permInv(w),b),w));this.knutha(n-1,b)}}function Ra(a,w,n,Ua,b,e,c,f){var Ya=$.isArray(b);e=e||6;c=c||3;f=f||256;Ua=Ua||256;for(var Va=0,h=n+7>>>3;Va<h;Va++)a[Va]=-1;a[w>>3]^=15<<((w&7)<<2);for(Va=w=0;Va<=Ua;Va++){h=0;var fb=Va>=f,Pa=Va+1^15,x=fb?15:Va,y=fb?Va:15,Qa=0;a:for(;Qa<n;Qa++,w>>=4){if(0==(Qa&7)&&(w=a[Qa>>3],!fb&&-1==w)){Qa+=7;continue}if((w&15)==x)for(var $a=
0;$a<e;$a++)for(var Oa=Qa,Wa=0;Wa<c;Wa++)if(Oa=Ya?b[$a][Oa]:b(Oa,$a),r(a,Oa)==y){++h;if(fb){a[Qa>>3]^=Pa<<((Qa&7)<<2);continue a}a[Oa>>3]^=Pa<<((Oa&7)<<2)}}if(0==h)break;DEBUG&&console.log("[prun]",h)}}function x(a,w,n){this.N_STATES=n.length;this.N_MOVES=a;this.N_POWER=w;this.state_params=n;this.inited=!1}function Wa(a){return a}function Ta(a,w,n,Ua,b){this.solvedStates=a;this.doMove=w;this.movesList=[];for(var Ya in n)this.movesList.push([Ya,n[Ya]]);this.state2Idxs=[];this.moveTables=[];this.prunTables=
[];this.isPartial=b||!1;this.prunHashs=Ua||[Wa]}function Za(a,w,n){this.solvedStates=a;this.doMove=w;this.movesList=[];for(var Ua in n)this.movesList.push([Ua,n[Ua]]);this.prunTable={};this.toUpdateArr=null;this.prunTableSize=0;this.prunDepth=-1;this.cost=0;this.MAX_PRUN_SIZE=1E5}function Sa(a){return~~(Xa.random()*a)}for(var Pa=[],$a=[1],Qa=0;32>Qa;++Qa){Pa[Qa]=[];for(var gb=0;32>gb;++gb)Pa[Qa][gb]=0}for(Qa=0;32>Qa;++Qa)for(Pa[Qa][0]=Pa[Qa][Qa]=1,$a[Qa+1]=$a[Qa]*(Qa+1),gb=1;gb<Qa;++gb)Pa[Qa][gb]=
Pa[Qa-1][gb-1]+Pa[Qa-1][gb];h.SOLVED=new h;h.EdgeMult=function(a,w,n){for(var Ua=0;12>Ua;Ua++)n.ea[Ua]=a.ea[w.ea[Ua]>>1]^w.ea[Ua]&1};h.CornMult=function(a,w,n){for(var Ua=0;8>Ua;Ua++)n.ca[Ua]=a.ca[w.ca[Ua]&7]&7|((a.ca[w.ca[Ua]&7]>>3)+(w.ca[Ua]>>3))%3<<3};h.CubeMult=function(a,w,n){h.CornMult(a,w,n);h.EdgeMult(a,w,n)};h.prototype.init=function(a,w){this.ca=a.slice();this.ea=w.slice();return this};h.prototype.hashCode=function(){for(var a=0,w=0;20>w;w++)a=0|31*a+(12>w?this.ea[w]:this.ca[w-12]);return a};
h.prototype.isEqual=function(a){a=a||h.SOLVED;for(var w=0;8>w;w++)if(this.ca[w]!=a.ca[w])return!1;for(w=0;12>w;w++)if(this.ea[w]!=a.ea[w])return!1;return!0};var mb=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],hb=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];h.prototype.toFaceCube=function(a,w){a=a||mb;w=w||hb;for(var n=[],Ua=0;54>Ua;Ua++)n[Ua]="URFDLB"[~~(Ua/9)];for(var b=0;8>b;b++){Ua=this.ca[b]&7;for(var e=this.ca[b]>>
3,Va=0;3>Va;Va++)n[a[b][(Va+e)%3]]="URFDLB"[~~(a[Ua][Va]/9)]}for(b=0;12>b;b++)for(Ua=this.ea[b]>>1,e=this.ea[b]&1,Va=0;2>Va;Va++)n[w[b][(Va+e)%2]]="URFDLB"[~~(w[Ua][Va]/9)];return n.join("")};h.prototype.invFrom=function(a){for(var w=0;12>w;w++)this.ea[a.ea[w]>>1]=w<<1|a.ea[w]&1;for(w=0;8>w;w++)this.ca[a.ca[w]&7]=w|32>>(a.ca[w]>>3)&24;return this};h.prototype.fromFacelet=function(a,w,n){w=w||mb;n=n||hb;for(var b=0,Ya=[],e=a[4]+a[13]+a[22]+a[31]+a[40]+a[49],Va=0;54>Va;++Va){Ya[Va]=e.indexOf(a[Va]);
if(-1==Ya[Va])return-1;b+=1<<(Ya[Va]<<2)}if(10066329!=b)return-1;var c;for(Va=0;8>Va;++Va){for(c=0;3>c&&0!=Ya[w[Va][c]]&&3!=Ya[w[Va][c]];++c);a=Ya[w[Va][(c+1)%3]];b=Ya[w[Va][(c+2)%3]];for(e=0;8>e;++e)if(a==~~(w[e][1]/9)&&b==~~(w[e][2]/9)){this.ca[Va]=e|c%3<<3;break}}for(Va=0;12>Va;++Va)for(e=0;12>e;++e){if(Ya[n[Va][0]]==~~(n[e][0]/9)&&Ya[n[Va][1]]==~~(n[e][1]/9)){this.ea[Va]=e<<1;break}if(Ya[n[Va][0]]==~~(n[e][1]/9)&&Ya[n[Va][1]]==~~(n[e][0]/9)){this.ea[Va]=e<<1|1;break}}return this};h.prototype.verify=
function(){for(var a=0,w=0,n=0;12>n;n++)a|=256<<(this.ea[n]>>1),w^=this.ea[n]&1;n=[];for(var Ua=0;8>Ua;Ua++)a|=1<<(this.ca[Ua]&7),w+=this.ca[Ua]>>3<<1,n.push(this.ca[Ua]&7);return 1048575!=a||0!=w%6||e(b(this.ea,12),12)!=e(b(n,8),8)?-1:0};h.moveCube=function(){for(var a=[],w=0;18>w;w++)a[w]=new h;a[0].init([3,0,1,2,4,5,6,7],[6,0,2,4,8,10,12,14,16,18,20,22]);a[3].init([20,1,2,8,15,5,6,19],[16,2,4,6,22,10,12,14,8,18,20,0]);a[6].init([9,21,2,3,16,12,6,7],[0,19,4,6,8,17,12,14,3,11,20,22]);a[9].init([0,
1,2,3,5,6,7,4],[0,2,4,6,10,12,14,8,16,18,20,22]);a[12].init([0,10,22,3,4,17,13,7],[0,2,20,6,8,10,18,14,16,4,12,22]);a[15].init([0,1,11,23,4,5,18,14],[0,2,4,23,8,10,12,21,16,18,7,15]);for(w=0;18>w;w+=3)for(var n=0;2>n;n++)h.EdgeMult(a[w+n],a[w],a[w+n+1]),h.CornMult(a[w+n],a[w],a[w+n+1]);return a}();h.rotCube=function(){for(var a=(new h).init([3,0,1,2,7,4,5,6],[6,0,2,4,14,8,10,12,23,17,19,21]),w=(new h).init([5,4,7,6,1,0,3,2],[12,10,8,14,4,2,0,6,18,16,22,20]),n=(new h).init([8,20,13,17,19,15,22,10],
[3,16,11,18,7,22,15,20,1,9,13,5]),b=new h,e=new h,c=[],f=0;24>f;f++)c[f]=(new h).init(b.ca,b.ea),h.CornMult(b,a,e),h.EdgeMult(b,a,e),b.init(e.ca,e.ea),3==f%4&&(h.CornMult(b,w,e),h.EdgeMult(b,w,e),b.init(e.ca,e.ea)),7==f%8&&(h.CornMult(b,n,e),h.EdgeMult(b,n,e),b.init(e.ca,e.ea));a=[];w=[];n=[];var Pa=[],x=[];for(f=0;24>f;f++)w[f]=c[f].hashCode(),n[f]=[],Pa[f]=[],x[f]=[];for(f=0;18>f;f++)a[f]=h.moveCube[f].hashCode();for(f=0;24>f;f++)for(var y=0;24>y;y++){h.CornMult(c[f],c[y],b);h.EdgeMult(c[f],c[y],
b);var bb=w.indexOf(b.hashCode());n[f][y]=bb;Pa[bb][y]=f}for(f=0;24>f;f++)for(y=0;18>y;y++)h.CornMult(c[Pa[0][f]],h.moveCube[y],b),h.EdgeMult(c[Pa[0][f]],h.moveCube[y],b),h.CornMult(b,c[f],e),h.EdgeMult(b,c[f],e),bb=a.indexOf(e.hashCode()),x[f][y]=bb;h.rotMult=n;h.rotMulI=Pa;h.rotMulM=x;h.rot2str=";y';y2;y;z2;y' z2;y2 z2;y z2;y' x';y2 x';y x';x';y' x;y2 x;y x;x;y z;z;y' z;y2 z;y' z';y2 z';y z';z'".split(";");return c}();h.prototype.edgeCycles=function(){for(var a=[],w=[0,0,0],n=0,b=!1,e=0;12>e;++e)if(!a[e]){var c=
-1,f=!1,h=e;do a[h]=!0,++c,f^=this.ea[h]&1,h=this.ea[h]>>1;while(h!=e);n+=c>>1;c&1&&(b=!b,++n);f&&(0==c?++w[0]:c&1?w[2]^=1:++w[1])}w[1]+=w[2];n=w[0]<w[1]?n+(w[0]+w[1]>>1):n+(w[1]+[0,2,3,5,6,8,9][w[0]-w[1]>>1]);return n-b};var kb=/^\s*([URFDLB]w?|[EMSyxz]|2-2[URFDLB]w)(['2]?)(@\d+)?\s*$/,ib=new h;h.prototype.selfMoveStr=function(a,w){var n=kb.exec(a);if(n){var b=n[1],e="2'".indexOf(n[2]||"-")+2;w&&(e=4-e);n[3]&&(this.tstamp=~~n[3].slice(1));this.ori=this.ori||0;var c="URFDLB".indexOf(b);if(-1!=c)return n=
h.rotMulM[this.ori][3*c+e%4-1],h.EdgeMult(this,h.moveCube[n],ib),h.CornMult(this,h.moveCube[n],ib),this.init(ib.ca,ib.ea),n;c="UwRwFwDwLwBw".indexOf(b);if(-1!=c){c>>=1;n=h.rotMulM[this.ori][(c+3)%6*3+e%4-1];h.EdgeMult(this,h.moveCube[n],ib);h.CornMult(this,h.moveCube[n],ib);this.init(ib.ca,ib.ea);c=[3,15,17,1,11,23][c];for(b=0;b<e;b++)this.ori=h.rotMult[c][this.ori];return n}c="2-2Uw 2-2Rw 2-2Fw 2-2Dw 2-2Lw 2-2Bw".split(" ").indexOf(b);-1==c&&(c=[null,null,"S","E","M",null].indexOf(b));if(-1!=c){b=
(c+3)%6*3+e%4-1;n=h.rotMulM[this.ori][3*c+(4-e)%4-1];h.EdgeMult(this,h.moveCube[n],ib);h.CornMult(this,h.moveCube[n],ib);this.init(ib.ca,ib.ea);b=h.rotMulM[this.ori][b];h.EdgeMult(this,h.moveCube[b],ib);h.CornMult(this,h.moveCube[b],ib);this.init(ib.ca,ib.ea);c=[3,15,17,1,11,23][c];for(b=0;b<e;b++)this.ori=h.rotMult[c][this.ori];return n+18}c="yxz".indexOf(b);if(-1!=c)for(c=[3,15,17][c],b=0;b<e;b++)this.ori=h.rotMult[c][this.ori]}};h.prototype.selfConj=function(a){void 0===a&&(a=this.ori);0!=a&&(h.CornMult(h.rotCube[a],
this,ib),h.EdgeMult(h.rotCube[a],this,ib),h.CornMult(ib,h.rotCube[h.rotMulI[0][a]],this),h.EdgeMult(ib,h.rotCube[h.rotMulI[0][a]],this),this.ori=h.rotMulI[this.ori][a]||0)};Qa=function(){var a=[11,8,9,10,6,7,4,5,1,2,3,0],b=[[5,1,2,3,4],[10,6,2,0,5],[6,7,3,0,1],[7,8,4,0,2],[8,9,5,0,3],[9,10,1,0,4],[11,7,2,1,10],[11,8,3,2,6],[11,9,4,3,7],[11,10,5,4,8],[11,6,1,5,9],[6,10,9,8,7]];return{doMove:function(n,w,e,c){e=(e%5+5)%5;if(0!=e){for(var Ua=11*w,Ya=[[],[],[],[],[]],f=0;5>f;f++){var Va=b[w][f],h=b[Va].indexOf(w);
if(0==c||1==c)Ya[f].push(Ua+f),Ya[f].push(Ua+f+5),Ya[f].push(11*Va+h%5+5),Ya[f].push(11*Va+h%5),Ya[f].push(11*Va+(h+1)%5);if(1==c||2==c){Ya[f].push(11*Va+10);for(var y=1;5>y;y++)Ya[f].push(11*Va+(h+y)%5+5);for(y=2;5>y;y++)Ya[f].push(11*Va+(h+y)%5);y=4-f;var Pa=a[w];Va=b[Pa][y];h=b[Va].indexOf(Pa);Ya[f].push(11*Pa+y);Ya[f].push(11*Pa+y+5);Ya[f].push(11*Va+10);for(y=0;5>y;y++)Ya[f].push(11*Va+(h+y)%5+5),Ya[f].push(11*Va+(h+y)%5)}}for(f=0;f<Ya[0].length;f++)mathlib.acycle(n,[Ya[0][f],Ya[1][f],Ya[2][f],
Ya[3][f],Ya[4][f]],e)}},oppFace:a,adjFaces:b}}();Oa.prototype.permMult=function(a,b){for(var n=[],w=0;w<a.length;w++)n[w]=b[a[w]];return n};Oa.prototype.permInv=function(a){for(var b=[],n=0;n<a.length;n++)b[a[n]]=n;return b};Oa.prototype.isMember=function(a,b){b=b||0;for(var n=a.length-1;n>=b;n--){var w=a[n];if(!this.sgs[n][w])return!1;w!==n&&(a=this.permMult(a,this.sgsi[n][w]))}return!0};Oa.prototype.minkwitz=function(){var a=[],b=8,n=0;this.words=[];this.isNew=[];for(var e=0;e<this.e.length;e++){this.words[e]=
[];this.words[e][e]=[];this.isNew[e]=[];for(var c=0;c<e;c++)this.sgs[e][c]&&!this.words[e][c]&&(this.words[e][c]=null,n++)}this.invMap={};for(e=0;e<this.gen.length;e++){var f=this.gen[e];for(c=e;c<this.gen.length;c++){for(var h=!0,y=0;y<this.e.length;y++)if(f[this.gen[c][y]]!=y){h=!1;break}h&&(this.invMap[e]=c,this.invMap[c]=e)}void 0==this.invMap[e]&&(this.invMap[e]=~e,this.invMap[~e]=e)}var Pa=function(a,n){for(var w=-1,e=a.length-1;0<=e;e--){var c=a[e];if(!this.sgs[e][c])return-2;if(!this.words[e][c])return this.words[e][c]=
n,this.isNew[e][c]=3,this.sgs[e][c]=a,this.sgsi[e][c]=this.permInv(a),1;n.length<this.words[e][c].length&&(w=this.sgs[e][c],this.sgs[e][c]=a,this.sgsi[e][c]=this.permInv(a),a=w,w=this.words[e][c],this.words[e][c]=n,this.isNew[e][c]=3,n=w,w=0);if(n.length+this.words[e][c].length>b)return w;a=this.permMult(a,this.sgsi[e][c]);for(var f=this.words[e][c].length-1;0<=f;f--)n.push(this.invMap[this.words[e][c][f]])}},x=function(b,e,w){if(0>=e)return w.call(this,b,a);for(var c=0;c<this.gen.length&&0<n;c++){a.push(c);
var f=x.call(this,this.permMult(b,this.gen[c]),e-1,w);a.pop();0>f||(a.push(this.invMap[c]),x.call(this,this.permMult(b,this.permInv(this.gen[c])),e-1,w),a.pop())}},bb=function(){for(var a=0,e=0,w=0;w<this.e.length;w++)for(var c=0;c<w;c++)0<this.isNew[w][c]&&this.isNew[w][c]--,this.isNew[w][c]&&e++;console.log("newCnt",e);for(w=0;w<this.e.length;w++){e=!0;for(c=0;c<w;c++)if(this.sgs[w][c]&&!this.words[w][c]){e=!1;break}for(c=0;c<w;c++)if(this.words[w][c])for(var f=w;f<this.e.length;f++)if(!e||w==f)for(var Ya=
w==f?c:0;Ya<f;Ya++)if(this.words[f][Ya]){var Ua=this.words[w][c].length+this.words[f][Ya].length;if(!(Ua>b||0==this.isNew[w][c]&&0==this.isNew[f][Ya]&&w==f)){var Va=this.sgs[w][c][this.sgs[f][Ya][w]];this.words[w][Va]&&this.words[w][Va].length<1.5*Ua&&w!=f||(Ua=Pa.call(this,this.permMult(this.sgs[f][Ya],this.sgs[w][c]),this.words[f][Ya].concat(this.words[w][c])),-1<Ua&&a++,0<Ua&&n--)}}}return a};c=$.now();var Qa=0;for(e=1;100>e&&0<n;e++)x.call(this,this.e,e,function(a,w){var e=Pa.call(this,a,w.slice());
Qa++;0<e&&n--;if(0==Qa%1E3){var c=bb.call(this);b=Math.round(1.25*b);console.log(c,n,b)}return e});console.log("final",$.now()-c);bb.call(this);console.log("init minkwitz",$.now()-c);window.sgs1=this};Oa.prototype.getGen=function(a){for(var b=[],n=a.length-1;0<=n;n--){var e=a[n];if(!this.sgs[n][e])return null;e!==n&&(a=this.permMult(a,this.sgsi[n][e]),b.push(this.words[n][e]))}return b.reverse()};Oa.prototype.knutha=function(a,b){this.Tk[a].push(b);for(var n=0;n<this.sgs[a].length;n++)this.sgs[a][n]&&
this.knuthb(a,this.permMult(this.sgs[a][n],b))};Oa.prototype.knuthb=function(a,b){var n=b[a];if(this.sgs[a][n])n=this.permMult(b,this.sgsi[a][n]),this.isMember(n)||this.knutha(a-1,n);else for(this.sgs[a][n]=b,this.sgsi[a][n]=this.permInv(b),n=0;n<this.Tk[a].length;n++)this.knuthb(a,this.permMult(b,this.Tk[a][n]))};Oa.prototype.size=function(){for(var a=this.sgs.length,b=1,n=0;n<a;n++){for(var e=0,c=0;c<a;c++)this.sgs[n][c]&&e++;b*=e}return b};Oa.prototype.intersect=function(a,b){if(this.size()>a.size())return a.intersect(this,
b);b=b||1E5;for(var n=new Oa([this.sgs[0][0]]),e=this.sgs.length,w=n.cnt=0;w<e;w++)for(var c=0;c<w;c++)if(this.sgs[w][c]&&!n.sgs[w][c]&&(this.enumDFS(w-1,this.sgs[w][c],function(a){n.knutha(e-1,a);return!0},function(e,w){if(n.cnt>b||-1==n.cnt)return n.cnt=-1,!1;n.cnt++;if(!a.isMember(w,e))return!1;for(var c=0;c<n.sgs[e].length-1;c++)if(n.sgs[e][c]&&n.permMult(w,n.sgs[e][c])[e]<w[e])return!1;return!0}),-1==n.cnt))return n;return n};Oa.prototype.enumDFS=function(a,b,n,e){if(!e||e(a+1,b)){if(0==a)return n(b);
for(var w=0;w<=a;w++)if(this.sgs[a][w]){var c=this.enumDFS(a-1,this.permMult(this.sgs[a][w],b),n,e);if(c)return c}}};Oa.prototype["enum"]=function(a){this.enumDFS(this.sgs.length-1,this.sgs[0][0],a)};Oa.prototype.rndElem=function(){for(var a=this.e.slice(),b=this.e.length-1;0<=b;b--){for(var n=0,e=0,c=0;c<=b;c++)this.sgs[b][c]&&1>Sa(++n)&&(e=c);e!==b&&(a=this.permMult(a,this.sgsi[b][e]))}return a};gb=x.prototype;gb.search=function(a,b,n){n=(n||99)+1;if(!this.inited){this.move=[];this.prun=[];for(var e=
0;e<this.N_STATES;e++){var w=this.state_params[e],c=w[0],f=w[1],h=w[2],Va=w[3];w=w[4];this.move[e]=[];this.prun[e]=[];ab(this.move[e],h,f,this.N_MOVES);Ra(this.prun[e],c,h,Va,this.move[e],this.N_MOVES,this.N_POWER,w)}this.inited=!0}for(this.sol=[];b<n&&!this.idaSearch(a,b,-1);b++);return b==n?null:this.sol.reverse()};gb.toStr=function(a,b,n){for(var e=[],w=0;w<a.length;w++)e.push(b[a[w][0]]+n[a[w][1]]);return e.join(" ").replace(/ +/g," ")};gb.idaSearch=function(a,b,n){for(var e=this.N_STATES,w=0;w<
e;w++)if(r(this.prun[w],a[w])>b)return!1;if(0==b)return!0;for(var c=a[0]+b+n+1,f=0;f<this.N_MOVES;f++){var h=(f+c)%this.N_MOVES;if(h!=n)for(var y=a.slice(),Va=0;Va<this.N_POWER;Va++){for(w=0;w<e;w++)y[w]=this.move[w][h][y[w]];if(this.idaSearch(y,b-1,h))return this.sol.push([h,Va]),!0}}return!1};gb=Ta.prototype;gb.initPrun=function(){if(0==this.moveTables.length)for(var a=0;a<this.prunHashs.length;a++){for(var b={},n=[null],e=[],c=0;c<this.solvedStates.length;c++){var f=this.prunHashs[a](this.solvedStates[c]);
f in b||(b[f]=n.length<<8,n.push(f))}c=1;for(var h=0,y=+new Date;c!=n.length;){f=n[c];var Pa=(b[f]&255)+1;Pa!=h&&(DEBUG&&console.log("[phSolver] initPrun",h,n.length-1,+new Date-y),h=Pa,e.push(n.length-1));for(var x=[],bb=0;bb<this.movesList.length;bb++){var Qa=this.doMove(f,this.movesList[bb][0]);Qa&&(Qa in b||(b[Qa]=n.length<<8|Pa,n.push(Qa)),x[bb]=b[Qa]>>8)}n[c]=x;c++}this.moveTables[a]=n;this.prunTables[a]=e;this.state2Idxs[a]=b}};gb.search=function(a,b,n){this.initPrun();this.sol=[];this.subOpt=
!1;this.rawState=a;this.state=[];for(var e=0;e<this.prunHashs.length;e++){var c=this.prunHashs[e](a);this.state.push(this.state2Idxs[e][c]>>8)}this.visited={};this.maxl=b||0;return this.searchNext(n)};gb.searchNext=function(a,b){this.initPrun();a=a+1||99;this.prevSolStr=this.solArr?this.solArr.join(","):null;this.solArr=null;for(this.cost=b||-1;this.maxl<a;this.maxl++){if(0==this.cost)return null;if(this.idaSearch(this.state,this.maxl,null,0))break}return this.solArr};gb.idaSearch=function(a,b,n,
e){if(this.getPruning(a)>b)return!1;if(0==b){b=this.rawState;var c=[],w=[];for(n=0;n<this.sol.length;n++){var f=this.movesList[this.sol[n]][0];b=this.doMove(b,f);c.push(f);w.push(b);if(!this.subOpt&&b in this.visited&&this.visited[a]<e)return!1}if(-1==this.solvedStates.indexOf(b))return!1;for(n=0;n<w.length;n++)this.visited[w[n]]=n;this.subOpt=!0;if(c.join(",")==this.prevSolStr)return!1;this.solArr=c;return!0}if(0<=this.cost){if(0==this.cost)return!0;this.cost--}c=null==n?"":this.movesList[n][0];
w=null==n?-1:this.movesList[n][1];for(var h=this.sol[e]||0;h<this.movesList.length;h++)if(f=this.movesList[h],n=f[1]^w,f=f[0],!(0==n||0==(n&15)&&f<=c)){f=!1;var Ua=!0,y=[];for(n=0;n<a.length;n++){var Pa=this.moveTables[n][a[n]][h];if(Pa)Pa!=a[n]&&(Ua=!1);else{f=!0;break}y.push(Pa)}if(!(f||Ua&&!this.isPartial)){this.sol[e]=h;if(this.idaSearch(y,b-1,h,e+1))return!0;this.sol.pop()}}return!1};gb.getPruning=function(a){for(var b=0,n=0;n<a.length;n++)for(var e=this.prunTables[n];e[b]<a[n];)b++;return b};
gb=Za.prototype;gb.calcNumOfStates=function(){for(var a=this.solvedStates[0].length,b=[],n=0;n<this.movesList.length;n++){for(var e=[],c=0;c<a;c++)e.push(c+32);var f=this.doMove(String.fromCharCode.apply(null,e),this.movesList[n][0]);if(f&&!(f in this.prunTable)){for(c=0;c<a;c++)e[c]=f.charCodeAt(c)-32;b.push(e)}}n=[];e=this.solvedStates[0];var h=[];for(c=0;c<a;c++)h[c]=c;var y=[];for(c=0;c<a;c++)if(!y[c])for(f=c+1;f<a;f++)if(e[c]==e[f]&&c%9%2==f%9%2){var Pa=h.slice();Pa[c]=f;Pa[f]=c;y[f]=1;n.push(Pa)}for(e=
0;100>e;e++){var x=[];for(c=0;c<a;c++)x[c]=c;for(c=0;c<a;c++){f=~~(Math.random()*(a-c))+c;var bb=x[c];x[c]=x[f];x[f]=bb}bb=new Oa(n,x);x=new Oa(b,x);var Qa=bb.intersect(x);if(-1!=Qa.cnt){console.log(e);break}}console.log(Qa.cnt,bb.size(),x.size(),Qa.size(),x.size()/Qa.size())};gb.updatePrun=function(a){a=void 0===a?this.prunDepth+1:a;for(var b=this.prunDepth+1;b<=a;b++){if(this.prevSize>=this.MAX_PRUN_SIZE){DEBUG&&console.log("[gSolver] skipPrun",b,this.prunTableSize);break}var n=+new Date;if(1>b)for(var e=
this.prevSize=0;e<this.solvedStates.length;e++){var c=this.solvedStates[e];c in this.prunTable||(this.prunTable[c]=b,this.prunTableSize++)}else this.updatePrunBFS(b-1);if(0==this.cost)break;this.prunDepth=b;DEBUG&&console.log("[gSolver] updatePrun",b,this.prunTableSize-this.prevSize,+new Date-n);this.prevSize=this.prunTableSize}};gb.updatePrunBFS=function(a){if(null==this.toUpdateArr){this.toUpdateArr=[];for(var b in this.prunTable)this.prunTable[b]==a&&this.toUpdateArr.push(b)}for(;0!=this.toUpdateArr.length;){b=
this.toUpdateArr.pop();for(var n=0;n<this.movesList.length;n++){var e=this.doMove(b,this.movesList[n][0]);!e||e in this.prunTable||(this.prunTable[e]=a+1,this.prunTableSize++)}if(0<=this.cost){if(0==this.cost)return;this.cost--}}this.toUpdateArr=null};gb.search=function(a,b,n){this.sol=[];this.subOpt=!1;this.state=a;this.visited={};this.maxl=b||0;return this.searchNext(n)};gb.searchNext=function(a,b){a=a+1||99;this.prevSolStr=this.solArr?this.solArr.join(","):null;this.solArr=null;for(this.cost=b||
-1;this.maxl<a;this.maxl++){this.updatePrun(Math.ceil(this.maxl/2));if(0==this.cost)return null;if(this.idaSearch(this.state,this.maxl,null,0))break}return this.solArr};gb.getPruning=function(a){a=this.prunTable[a];return void 0===a?this.prunDepth+1:a};gb.idaSearch=function(a,b,n,e){if(this.getPruning(a)>b)return!1;if(0==b){if(-1==this.solvedStates.indexOf(a))return!1;a=this.getSolArr();this.subOpt=!0;if(a.join(",")==this.prevSolStr)return!1;this.solArr=a;return!0}if(!this.subOpt){if(a in this.visited&&
this.visited[a]<e)return!1;this.visited[a]=e}if(0<=this.cost){if(0==this.cost)return!0;this.cost--}var c=null==n?"":this.movesList[n][0];n=null==n?-1:this.movesList[n][1];for(var w=this.sol[e]||0;w<this.movesList.length;w++){var f=this.movesList[w],h=f[1]^n;f=f[0];if(!(0==h||0==(h&15)&&f<=c)&&(h=this.doMove(a,f))&&h!=a){this.sol[e]=w;if(this.idaSearch(h,b-1,w,e+1))return!0;this.sol.pop()}}return!1};gb.getSolArr=function(){for(var a=[],b=0;b<this.sol.length;b++)a.push(this.movesList[this.sol[b]][0]);
return a};var Xa=function(){function a(a,c){if(c&&(c!=e||n>a)){for(var w=[],f=0;f<c.length;f++)w[f]=c.charCodeAt(f);b=new MersenneTwisterObject(w[0],w);n=0;e=c}for(;n<a;)b(),n++}var b,n,e;a(0,""+(new Date).getTime());return{random:function(){n++;return b()},getSeed:function(){return[n,e]},setSeed:a}}(),db=/^\s*(\d+)-(\d+)-(\d+) (\d+):(\d+):(\d+)\s*$/;Math.TAU=2*Math.PI;return{Cnk:Pa,fact:$a,getPruning:r,setNPerm:function(a,b,n){var e,c;a[n-1]=0;for(e=n-2;0<=e;--e)for(a[e]=b%(n-e),b=~~(b/(n-e)),c=
e+1;c<n;++c)a[c]>=a[e]&&++a[c]},getNPerm:b,getNParity:e,get8Perm:a,set8Perm:y,coord:f,createMove:ab,edgeMove:function(a,b){0==b?c(a,0,7,8,4,1):1==b?c(a,3,6,11,7,0):2==b?c(a,0,1,2,3,0):3==b?c(a,2,5,10,6,1):4==b?c(a,1,4,9,5,0):5==b&&c(a,11,10,9,8,0)},circle:Na,circleOri:c,acycle:z,schreierSims:Oa,createPrun:Ra,CubieCube:h,minx:Qa,SOLVED_FACELET:"UUUUUUUUURRRRRRRRRFFFFFFFFFDDDDDDDDDLLLLLLLLLBBBBBBBBB",fillFacelet:function(a,b,n,e,c){for(var w=0;w<a.length;w++)for(var f=0;f<a[w].length;f++)b[a[w][(f+
e[w])%a[w].length]]=~~(a[n[w]][f]/c)},rn:Sa,rndEl:function(a){return a[~~(Xa.random()*a.length)]},rndProb:function(a){for(var b=0,n=0,e=0;e<a.length;e++)0!=a[e]&&(Xa.random()<a[e]/(b+a[e])&&(n=e),b+=a[e]);return n},rndHit:function(a){return Xa.random()<a},time2str:function(a,b){if(!a)return"N/A";var e=new Date(1E3*a);return(b||"%Y-%M-%D %h:%m:%s").replace("%Y",e.getFullYear()).replace("%M",("0"+(e.getMonth()+1)).slice(-2)).replace("%D",("0"+e.getDate()).slice(-2)).replace("%h",("0"+e.getHours()).slice(-2)).replace("%m",
("0"+e.getMinutes()).slice(-2)).replace("%s",("0"+e.getSeconds()).slice(-2))},str2time:function(a){a=db.exec(a);if(!a)return null;var b=new Date(0);b.setFullYear(~~a[1]);b.setMonth(~~a[2]-1);b.setDate(~~a[3]);b.setHours(~~a[4]);b.setMinutes(~~a[5]);b.setSeconds(~~a[6]);return~~(b.getTime()/1E3)},obj2str:function(a){return"string"==typeof a?a:JSON.stringify(a)},str2obj:function(a){return"string"!=typeof a?a:JSON.parse(a)},valuedArray:function(a,b){for(var e=[],c=0;c<a;c++)e[c]=b;return e},idxArray:function(a,
b){for(var e=[],c=0;c<a.length;c++)e.push(a[c][b]);return e},Solver:x,rndPerm:function(a,b){for(var e=0,c=[],f=0;f<a;f++)c[f]=f;for(f=0;f<a-1;f++){var w=Sa(a-f);Na(c,f,f+w);e^=0!=w}b&&e&&Na(c,0,1);return c},gSolver:Za,phSolver:Ta,getSeed:Xa.getSeed,setSeed:Xa.setSeed}}();var sbtree=function(){function c(e,a,c,f){this.k=e;this.v=a;this.left=c||b;this.right=f||b;this.size=1;this.sum=e;this.sk2=Math.pow(e,2)}function Na(e){this.root=b;this.cmp=e}function z(e,a,c){return e==b||z(e.get(c),a,c)&&a(e)&&z(e.get(c^1),a,c)}function r(b,a){var e=b.get(a^1);b.set(a^1,e.get(a));e.set(a,b);e.size=b.size;b.size=b.get(0).size+b.get(1).size+1;e.sum=b.sum;b.sum=b.get(0).sum+b.get(1).sum+b.k;e.sk2=b.sk2;b.sk2=b.get(0).sk2+b.get(1).sk2+Math.pow(b.k,2);return e}var b=null;b=new c(0,0);
b.left=b;b.right=b;b.size=0;c.prototype.get=function(b){return b?this.right:this.left};c.prototype.set=function(b,a){b?this.right=a:this.left=a};Na.prototype.find=function(e){for(var a=this.root;a!=b;){if(e==a.k)return a.v;a=a.get(0>this.cmp(a.k,e)^0)}};Na.prototype.cumSum=function(b){if(b>=this.root.size||0==this.root.size)return this.root.sum;for(var a=this.root,e=0;0<b;){var c=a.get(0).size;if(b<c)a=a.get(0);else{e+=a.get(0).sum;if(b==c)break;e+=a.k;b-=c+1;a=a.get(1)}}return e};Na.prototype.cumSk2=
function(b){if(b>=this.root.size||0==this.root.size)return this.root.sk2;for(var a=this.root,e=0;0<b;){var c=a.get(0).size;if(b<c)a=a.get(0);else{e+=a.get(0).sk2;if(b==c)break;e+=Math.pow(a.k,2);b-=c+1;a=a.get(1)}}return e};Na.prototype.rank=function(e){for(var a=this.root;a!=b;){var c=a.get(0).size;if(e<c)a=a.get(0);else{if(e==c)return a.k;e-=c+1;a=a.get(1)}}return 0>e?-1E300:1E300};Na.prototype.rankOf=function(e){for(var a=this.root,c=0;a!=b;)0>this.cmp(a.k,e)?(c+=a.get(0).size+1,a=a.get(1)):a=
a.get(0);return c};Na.prototype.traverse=function(b,a){return z(this.root,b,a^0)};Na.prototype.insertR=function(e,a,y){if(e==b)return new c(a,y);e.size+=1;e.sum+=a;e.sk2+=Math.pow(a,2);var f=0>this.cmp(e.k,a)^0;e.set(f,this.insertR(e.get(f),a,y));e.get(f).get(f).size>e.get(f^1).size?e=r(e,f^1):e.get(f).get(f^1).size>e.get(f^1).size&&(f^=1,e.set(f^1,r(e.get(f^1),f^1)),e=r(e,f));return e};Na.prototype.insert=function(b,a){this.root=this.insertR(this.root,b,a);return this};Na.prototype.remove=function(b){this.root=
this.removeR(this.root,b);return this};Na.prototype.removeR=function(c,a){if(c==b)return b;--c.size;c.sum-=a;c.sk2-=Math.pow(a,2);if(c.k==a){if(c.get(0)==b||c.get(1)==b)return c.get(c.get(0)==b^0);for(var e=c.get(0);e.get(1)!=b;)e=e.get(1);c.k=e.k;c.v=e.v;a=e.k}e=0>this.cmp(c.k,a)^0;c.set(e,this.removeR(c.get(e),a));return c};return{tree:function(b){return new Na(b)}}}();var SQLFile=execMain(function(){function c(c,r,b){var e=0;if(b)for(var a=0;a<b;a++)e=e<<8|c[r[0]++];else{do e=e<<7|c[r[0]]&127;while(128<=c[r[0]++])}return e}function Na(z,r,b){r=1==r?100:(r-1)*c(z,[16],2);var e=z[r],a=z[r+3]<<8|z[r+4],y=[r+8],f=-1;e&8||(f=c(z,y,4));for(var ab=0;ab<a;ab++){var h=[(100==r?0:r)+c(z,[y[0]+2*ab],2)];if(2!=e&&10!=e)if(5==e)h=c(z,h,4),Na(z,h,b);else if(13==e){var Oa=c(z,h),Ra=z,x=h[0],Wa=b,Ta=[x],Za=c(Ra,Ta),Sa=x+Za;x=Ta;Ta=[];for(Za=[];x[0]<Sa;)Ta.push(c(Ra,x));for(Sa=
0;Sa<Ta.length;Sa++){var Pa=Ta[Sa];0==Pa?Za[Sa]=null:1<=Pa&&4>=Pa?Za[Sa]=c(Ra,x,Pa):5==Pa?(Za[Sa]=void 0,c(Ra,x,6)):6==Pa?(Za[Sa]=void 0,c(Ra,x,8)):7==Pa?(Za[Sa]=void 0,c(Ra,x,8)):8==Pa?Za[Sa]=0:9==Pa?Za[Sa]=1:10!=Pa&&11!=Pa&&(0==Ta[Sa]%2?(Za[Sa]=Ra.slice(x[0],x[0]+(Pa-12)/2),x[0]+=(Pa-12)/2):(Za[Sa]=String.fromCharCode.apply(null,Ra.slice(x[0],x[0]+(Pa-13)/2)),x[0]+=(Pa-13)/2))}Wa(Za);h[0]+=Oa}}-1!=f&&Na(z,f,b)}return{loadTableList:function(c){var r={};Na(c,1,function(b){r[b[2]]=[b[3],b[4]]});return r},
loadPage:Na}});var TimerDataConverter=execMain(function(){function c(b){try{return decodeURIComponent(escape(b))}catch(e){}return b}function Na(b,e){b=c(b).split(/\r?\n/g);for(var a=[],y=[],f=[],r=0,h=0;h<b.length;h++){for(var Oa=b[h].split(e),Ra=0;Ra<Oa.length;Ra++)f.push(Oa[Ra]),r+=(Oa[Ra].match(/"/g)||[]).length,0==r%2&&(f=f.join(","),'"'==f[0]&&(f=f.replace(/""/g,'"').slice(1,-1)),y.push(f),f=[]);0==r%2&&(a.push(y),y=[],f=[],r=0)}return a}var z=/^(DNF)?\(?(\d*?):?(\d*?):?(\d*\.?\d*?)(\+)?\)?$/,r={csTimer:[/^{"session1"/i,
function(b){b=JSON.parse(c(b));var e={};try{e=mathlib.str2obj(mathlib.str2obj(b.properties).sessionData)}catch(Wa){}var a=[],y;for(y in b){var f=/^session(\d+)$/.exec(y);if(f){var r={},h=[];try{h=mathlib.str2obj(b[y])}catch(Wa){}if($.isArray(h)&&0!=h.length){for(var Oa=[],Ra=0;Ra<h.length;Ra++){var x=h[Ra];$.isArray(x)&&$.isArray(x[0])&&(x[0]=$.map(x[0],Number),Oa.push(x))}r.times=Oa;~~f[1]in e?(h=e[~~f[1]],r.name=h.name||f[1],r.opt=h.opt||{scrType:h.scr||"333",phases:h.phases||1},r.rank=h.rank):
(r.name=f[1],r.opt={},r.rank=a.length+1);a.push(r)}}}a.sort(function(a,b){return a.rank-b.rank});return a}],csTimerCSV:[/^No\.;Time;Comment;Scramble;Date;P\.1/i,function(b){b=Na(b,";");for(var c=[],a=b[0].length-5,y=1;y<b.length;y++){var f=b[y],r=[],h=z.exec(f[1]);if(h){for(r[0]=h[1]?-1:h[5]?2E3:0;""==f[f.length-1];)f.pop();for(var Oa=5;Oa<f.length;Oa++)h=z.exec(f[Oa]),h=Math.round(36E5*~~h[2]+6E4*~~h[3]+1E3*parseFloat(h[4])),r[f.length-Oa]=(r[f.length-Oa+1]||0)+h;r=[r,f[3],f[2],mathlib.str2time(f[4])];
c.push(r)}else console.log("Invalid data detected")}return[{name:"import",opt:{phases:a},times:c}]}],ZYXTimer:[/^Session: /i,function(b){}],TwistyTimer:[/^Puzzle,Category,Time\(millis\),Date\(millis\),Scramble,Penalty,Comment/i,function(b){b=Na(b,";");for(var c={333:"333",222:"222so",444:"444wca",555:"555wca",pyra:"pyrso",skewb:"skbso",mega:"mgmp",sq1:"sqrs",clock:"clkwca",666:"666wca",777:"777wca"},a={},y=[],f=1;f<b.length;f++){var r=b[f];if(7==r.length){var h=r[0]+"-"+r[1],Oa=[{0:0,1:2E3,2:-1}[r[5]],
Math.round(r[2])];h in a||(a[h]=y.length,y.push({name:h,opt:{scrType:c[r[0]]||"333"},times:[]}));y[a[h]].times.push([Oa,r[4],r[6],Math.round(r[3]/1E3)])}}return y}],BlockKeeper:[/^{"puzzles":\[{"name":/i,function(b){b=JSON.parse(c(b)).puzzles;var e={"3x3x3":"333","2x2x2":"222so","4x4x4":"444wca","5x5x5":"555wca",Pyraminx:"pyrso",Skewb:"skbso",Megaminx:"mgmp","Square-1":"sqrs",Clock:"clkwca","6x6x6":"666wca","7x7x7":"777wca","3x3x3 BLD":"333ni","4x4x4 BLD":"444bld","5x5x5 BLD":"555bld"},a=[];$.each(b,
function(b,c){var f=c.name,h=c.scrambler,y=c.splits;$.each(c.sessions,function(b,c){var x=c.name,Oa=[];$.each(c.records,function(a,b){var c=[{OK:0,"+2":2E3,DNF:-1}[b.result],Math.round(1E3*b.time)];Array.prototype.push.apply(c,$.map(b.split.reverse(),function(a){return Math.round(1E3*a)}));Oa.push([c,b.scramble,b.comment||"",Math.round(b.date/1E3)])});0!=Oa.length&&a.push({name:f+"-"+x,opt:{phases:y,scrType:e[h]||"333"},times:Oa})})});return a}],PrismaTimer:[/^[^\t\n]*(\t[^\t\n]*){4}\n/i,function(b){}],
"DCTimer.raw":[/^\d+[\r\n]+[^\t\n]*(\t[^\t\n]*){11}[\r\n]+/i,function(b){b=c(b).split(/[\r\n]+/);for(var e={},a=0,y=[],f=0;f<b.length;f++)if(/^\d+$/.exec(b[f]))a=~~b[f],e[a]=y.length,y.push({name:a,opt:{},times:[]});else{var r=b[f].split("\t");6>r.length||y[e[a]].times.push([["1"==r[2]?"1"==r[1]?2E3:0:-1,~~r[0]],r[3],r[5],mathlib.str2time(r[4])])}return y}],"DCTimer.sqlite":[/^SQLite format 3\0/i,function(b){for(var e=new Uint8Array(b.length),a=0;a<b.length;a++)e[a]=b.charCodeAt(a);b=SQLFile.loadTableList(e);
var y={},f=[],r=function(a,b){a in y||(y[a]=f.length,f.push({name:b||a+1,opt:{},times:[]}))};SQLFile.loadPage(e,b.sessiontb[0],function(a){r(a[0],c(a[1]))});for(var h in b)if(a=/^result(\d+|tb)$/.exec(h)){var Oa=("tb"==a[1]?1:~~a[1])-1;SQLFile.loadPage(e,b[h][0],function(a){r(Oa);f[y[Oa]].times.push([["1"==a[3]?"1"==a[2]?2E3:0:-1,~~a[1]],c(a[4]||""),c(a[6]||""),mathlib.str2time(a[5])])})}SQLFile.loadPage(e,b.resultstb[0],function(a){var b=a[1];r(b);f[y[b]].times.push([["1"==a[4]?"1"==a[3]?2E3:0:-1,
~~a[2]],c(a[5]||""),c(a[7]||""),mathlib.str2time(a[6])])});return f}],"mateus.cubetimer":[/^"Category";"Time \(MM:SS\.SSS\)";"Scrambler";"Date";"Penalty \+2 \(yes or no\)";"DNF \(yes or no\)";"Section"\n/i,function(b){b=Na(b,";");for(var c={"3x3x3":"333","2x2x2":"222so","4x4x4":"444wca","5x5x5":"555wca",Pyraminx:"pyrso",Skewb:"skbso",Megaminx:"mgmp","Square-1":"sqrs","Rubik's Clock":"clkwca","6x6x6":"666wca","7x7x7":"777wca","3x3x3 Blindfolded":"333ni","4x4x4 Blindfolded":"444bld","5x5x5 Blindfolded":"555bld",
"3x3x3 One-Handed":"333oh","3x3x3 Multi-Blindfolded":"r3ni","3x3x3 With Feet":"333ft","3x3x3 Fewest Moves":"333fm"},a={},y=[],f=1;f<b.length;f++){var r=b[f];if(!(7>r.length)){var h=r[0]+"-"+r[6],Oa=z.exec(r[1]);if(Oa){Oa=Math.round(36E5*~~Oa[2]+6E4*~~Oa[3]+1E3*parseFloat(Oa[4]));var Ra=r[2],x=0;"yes"==r[5]?x=-1:"yes"==r[4]&&(x=2E3);h in a||(a[h]=y.length,y.push({name:h,opt:{scrType:c[r[0]]||"333"},times:[]}));y[a[h]].times.push([[x,Oa],Ra,"",mathlib.str2time(r[3]+":00")])}else console.log("Invalid data detected")}}return y}],
"CubeDesk.new":[/^{"sessions":\[/i,function(b){b=JSON.parse(c(b));var e={},a={};$.each(b.sessions,function(b,c){e[c.id]=c.name;a[c.id]=c.order});var y={222:"222so",333:"333",444:"444wca",555:"555wca",pyram:"pyrso",skewb:"skbso",minx:"mgmp",sq1:"sqrs",clock:"clkwca",666:"666wca",777:"777wca","333mirror":"333","222oh":"222so","333oh":"333oh","333bl":"333ni"},f=[],r={};$.each(b.solves,function(b,c){var h=c.session_id+"-"+c.cube_type;h in r||(r[h]=f.length,f.push({name:(e[c.session_id]||c.session_id)+
"-"+c.cube_type,opt:{scrType:y[c.cube_type]||"333"},rank:a[c.session_id],times:[]}));h=f[r[h]];var x=0;c.dnf?x=-1:c.plus_two&&(x=2E3);h.times.push([[x,1E3*c.raw_time],c.scramble,c.notes||"",Math.round(c.started_at/1E3)]);(x=y[c.cube_type])&&(h.opt.scrType=x)});$.each(f,function(a,b){b.times.sort(function(a,b){return a[3]-b[3]})});f.sort(function(a,b){return a.rank-b.rank});return f}]};return function(b){var c=void 0,a;for(a in r)if(r[a][0].exec(b)){console.log("try read by "+a);try{c=r[a][1](b);break}catch(y){console.log(y)}}return c}});var LZString=function(){function c(b,c){if(!z[b]){z[b]={};for(var a=0;a<b.length;a++)z[b][b.charAt(a)]=a}return z[b][c]}var Na=String.fromCharCode,z={},r={compressToBase64:function(b){if(null==b)return"";b=r._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)});switch(b.length%4){default:case 0:return b;case 1:return b+"===";case 2:return b+"==";case 3:return b+"="}},decompressFromBase64:function(b){return null==b?"":""==b?null:r._decompress(b.length,
32,function(e){return c("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b.charAt(e))})},compressToUTF16:function(b){return null==b?"":r._compress(b,15,function(b){return Na(b+32)})+" "},decompressFromUTF16:function(b){return null==b?"":""==b?null:r._decompress(b.length,16384,function(c){return b.charCodeAt(c)-32})},compressToUint8Array:function(b){b=r.compress(b);for(var c=new Uint8Array(2*b.length),a=0,y=b.length;a<y;a++){var f=b.charCodeAt(a);c[2*a]=f>>>8;c[2*a+1]=f%256}return c},
decompressFromUint8Array:function(b){if(null===b||void 0===b)return r.decompress(b);for(var c=Array(b.length/2),a=0,y=c.length;a<y;a++)c[a]=256*b[2*a]+b[2*a+1];var f=[];c.forEach(function(a){f.push(Na(a))});return r.decompress(f.join(""))},compressToEncodedURIComponent:function(b){return null==b?"":r._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(b)})},decompressFromEncodedURIComponent:function(b){if(null==b)return"";if(""==b)return null;
b=b.replace(/ /g,"+");return r._decompress(b.length,32,function(e){return c("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",b.charAt(e))})},compress:function(b){return r._compress(b,16,function(b){return Na(b)})},_compress:function(b,c,a){if(null==b)return"";var e,f={},r={},h="",Oa=2,Ra=3,x=2,Wa=[],Ta=0,z=0,Sa;for(Sa=0;Sa<b.length;Sa+=1){var Pa=b.charAt(Sa);Object.prototype.hasOwnProperty.call(f,Pa)||(f[Pa]=Ra++,r[Pa]=!0);var $a=h+Pa;if(Object.prototype.hasOwnProperty.call(f,$a))h=
$a;else{if(Object.prototype.hasOwnProperty.call(r,h)){if(256>h.charCodeAt(0)){for(e=0;e<x;e++)Ta<<=1,z==c-1?(z=0,Wa.push(a(Ta)),Ta=0):z++;var Qa=h.charCodeAt(0);for(e=0;8>e;e++)Ta=Ta<<1|Qa&1,z==c-1?(z=0,Wa.push(a(Ta)),Ta=0):z++,Qa>>=1}else{Qa=1;for(e=0;e<x;e++)Ta=Ta<<1|Qa,z==c-1?(z=0,Wa.push(a(Ta)),Ta=0):z++,Qa=0;Qa=h.charCodeAt(0);for(e=0;16>e;e++)Ta=Ta<<1|Qa&1,z==c-1?(z=0,Wa.push(a(Ta)),Ta=0):z++,Qa>>=1}Oa--;0==Oa&&(Oa=Math.pow(2,x),x++);delete r[h]}else for(Qa=f[h],e=0;e<x;e++)Ta=Ta<<1|Qa&1,z==
c-1?(z=0,Wa.push(a(Ta)),Ta=0):z++,Qa>>=1;Oa--;0==Oa&&(Oa=Math.pow(2,x),x++);f[$a]=Ra++;h=String(Pa)}}if(""!==h){if(Object.prototype.hasOwnProperty.call(r,h)){if(256>h.charCodeAt(0)){for(e=0;e<x;e++)Ta<<=1,z==c-1?(z=0,Wa.push(a(Ta)),Ta=0):z++;Qa=h.charCodeAt(0);for(e=0;8>e;e++)Ta=Ta<<1|Qa&1,z==c-1?(z=0,Wa.push(a(Ta)),Ta=0):z++,Qa>>=1}else{Qa=1;for(e=0;e<x;e++)Ta=Ta<<1|Qa,z==c-1?(z=0,Wa.push(a(Ta)),Ta=0):z++,Qa=0;Qa=h.charCodeAt(0);for(e=0;16>e;e++)Ta=Ta<<1|Qa&1,z==c-1?(z=0,Wa.push(a(Ta)),Ta=0):z++,
Qa>>=1}Oa--;0==Oa&&(Oa=Math.pow(2,x),x++);delete r[h]}else for(Qa=f[h],e=0;e<x;e++)Ta=Ta<<1|Qa&1,z==c-1?(z=0,Wa.push(a(Ta)),Ta=0):z++,Qa>>=1;Oa--;0==Oa&&x++}Qa=2;for(e=0;e<x;e++)Ta=Ta<<1|Qa&1,z==c-1?(z=0,Wa.push(a(Ta)),Ta=0):z++,Qa>>=1;for(;;)if(Ta<<=1,z==c-1){Wa.push(a(Ta));break}else z++;return Wa.join("")},decompress:function(b){return null==b?"":""==b?null:r._decompress(b.length,32768,function(c){return b.charCodeAt(c)})},_decompress:function(b,c,a){var e=[],f=4,r=4,h=3,Oa=[],z,x,Wa=a(0),Ta=c,
Za=1;for(z=0;3>z;z+=1)e[z]=z;var Sa=0;var Pa=Math.pow(2,2);for(x=1;x!=Pa;){var $a=Wa&Ta;Ta>>=1;0==Ta&&(Ta=c,Wa=a(Za++));Sa|=(0<$a?1:0)*x;x<<=1}switch(Sa){case 0:Sa=0;Pa=Math.pow(2,8);for(x=1;x!=Pa;)$a=Wa&Ta,Ta>>=1,0==Ta&&(Ta=c,Wa=a(Za++)),Sa|=(0<$a?1:0)*x,x<<=1;var Qa=Na(Sa);break;case 1:Sa=0;Pa=Math.pow(2,16);for(x=1;x!=Pa;)$a=Wa&Ta,Ta>>=1,0==Ta&&(Ta=c,Wa=a(Za++)),Sa|=(0<$a?1:0)*x,x<<=1;Qa=Na(Sa);break;case 2:return""}z=e[3]=Qa;for(Oa.push(Qa);;){if(Za>b)return"";Sa=0;Pa=Math.pow(2,h);for(x=1;x!=
Pa;)$a=Wa&Ta,Ta>>=1,0==Ta&&(Ta=c,Wa=a(Za++)),Sa|=(0<$a?1:0)*x,x<<=1;switch(Qa=Sa){case 0:Sa=0;Pa=Math.pow(2,8);for(x=1;x!=Pa;)$a=Wa&Ta,Ta>>=1,0==Ta&&(Ta=c,Wa=a(Za++)),Sa|=(0<$a?1:0)*x,x<<=1;e[r++]=Na(Sa);Qa=r-1;f--;break;case 1:Sa=0;Pa=Math.pow(2,16);for(x=1;x!=Pa;)$a=Wa&Ta,Ta>>=1,0==Ta&&(Ta=c,Wa=a(Za++)),Sa|=(0<$a?1:0)*x,x<<=1;e[r++]=Na(Sa);Qa=r-1;f--;break;case 2:return Oa.join("")}0==f&&(f=Math.pow(2,h),h++);if(e[Qa])Qa=e[Qa];else if(Qa===r)Qa=z+z.charAt(0);else return null;Oa.push(Qa);e[r++]=
z+Qa.charAt(0);f--;z=Qa;0==f&&(f=Math.pow(2,h),h++)}}};return r}();var min2phase=function(){function c(){this.move=[];this.moveSol=[];this.nodeUD=[];this.valid1=0;this.allowShorter=!1;this.cc=new a;this.urfCubieCube=[];this.urfCoordCube=[];this.phase1Cubie=[];this.preMoveCubes=[];this.preMoves=[];this.maxPreMoves=this.preMoveLen=0;this.isRec=!1;for(var b=0;21>b;b++)this.nodeUD[b]=new Wa,this.phase1Cubie[b]=new a;for(b=0;6>b;b++)this.urfCubieCube[b]=new a,this.urfCoordCube[b]=new Wa;for(b=0;20>b;b++)this.preMoveCubes[b+1]=new a}function Na(a,b,c){return c?b<<1|a&
1:b|a&248}function z(a,b){return b?a>>1:a&7}function r(a,b,c){a[b>>3]^=c<<(b<<2)}function b(a,b,c){return Math.min(a,b[c>>3]>>(c<<2)&15)}function e(a,b,c){a=Bb[a];c&&(a^=14540032>>((a&15)<<1)&3);return a&65520|cb[a&15][b]}function a(){this.ca=[0,1,2,3,4,5,6,7];this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}function y(a,b,c,n){c--;for(var e=1985229328,f=0;f<c;++f){var w=gb[c-f],h=~~(b/w);b%=w;h<<=2;a[f]=Na(a[f],e>>h&15,n);w=(1<<h)-1;e=(e&w)+(e>>4&~w)}a[c]=Na(a[c],e&15,n)}function f(a,b,c){for(var n=0,e=
1985229328,f=0;f<b-1;++f){var w=z(a[f],c)<<2;n=(b-f)*n+(e>>w&15);e-=286331152<<w}return n}function ab(a,b,c,n){a[c-1]=Na(a[c-1],0,n);for(var e=c-2;0<=e;--e){a[e]=Na(a[e],b%(c-e),n);b=~~(b/(c-e));for(var f=e+1;f<c;++f)z(a[f],n)>=z(a[e],n)&&(a[f]=Na(a[f],z(a[f],n)+1,n))}}function h(a,b,c){for(var n=0,e=0;e<b;++e){n*=b-e;for(var f=e+1;f<b;++f)z(a[f],c)<z(a[e],c)&&++n}return n}function Oa(a,b,c){for(var n=0,e=4,f=a.length-1;0<=f;f--)(z(a[f],c)&12)==b&&(n+=Qa[f][e--]);return n}function Ra(a,b,c,n){for(var e=
a.length-1,f=4,w=e;0<=e;e--)b>=Qa[e][f]?(b-=Qa[e][f--],a[e]=Na(a[e],f|c,n)):((w&12)==c&&(w-=4),a[e]=Na(a[e],w--,n))}function x(a,b){for(var c=0,e=b-2;0<=e;e--)c^=a%(b-e),a=~~(a/(b-e));return c&1}function Wa(){this.flipc=this.twistc=this.prun=this.slice=this.fsym=this.flip=this.tsym=this.twist=0}function Ta(){function b(b,c,e,n,f,w,h){for(var Pa=new a,x=new a,bb=0,Ua=2<=f?1:2,Qa=1!=f?a.EdgeConjugate:a.CornConjugate,Ya=0;Ya<b;Ya++)if(void 0===e[Ya]){w.call(Pa,Ya);for(var r=0;16>r;r+=Ua){Qa(Pa,r,x);
var y=h.call(x);0==f&&(Eb[bb<<3|r>>1]=y);y==Ya&&(n[bb]|=1<<r/Ua);e[y]=(bb<<4|r)/Ua}c[bb++]=Ya}return bb}function c(a,b,c,f,w,h,Pa,x){for(var bb=0;bb<c;bb++){a[bb]=[];w.call(e,b[bb]);for(var Ua=0;Ua<f;Ua++)Pa(e,fb[x?x[Ua]:Ua],n),a[bb][Ua]=h.call(n)}}var e=new a,n=new a,f,w=(new a).initCoord(28783,0,259268407,0),h=(new a).initCoord(15138,0,119765538,7),Pa=(new a).initCoord(5167,0,83473207,0);for(f=0;8>f;f++)Pa.ca[f]|=24;for(f=0;16>f;f++)ob[f]=(new a).init(e.ca,e.ea),a.CornMultFull(e,h,n),a.EdgeMult(e,
h,n),e.init(n.ca,n.ea),3==f%4&&(a.CornMultFull(e,Pa,n),a.EdgeMult(e,Pa,n),e.init(n.ca,n.ea)),7==f%8&&(a.CornMultFull(e,w,n),a.EdgeMult(e,w,n),e.init(n.ca,n.ea));for(f=0;16>f;f++)cb[f]=[],eb[f]=[],lb[f]=[],sb[f]=[],bb[f]=[];for(f=0;16>f;f++)for(w=0;16>w;w++)cb[f][w]=f^w^84660>>w&f<<1&2,eb[cb[f][w]][w]=f;e=new a;for(h=0;16>h;h++)for(w=0;18>w;w++){a.CornConjugate(fb[w],eb[0][h],e);Pa=0;a:for(;18>Pa;Pa++){for(f=0;8>f;f++)if(fb[Pa].ca[f]!=e.ca[f])continue a;lb[h][w]=Pa;bb[h][kb[w]]=kb[Pa];break}0==h%2&&
(sb[w<<3|h>>1]=lb[h][w])}b(2048,nb,rb,yb,0,a.prototype.setFlip,a.prototype.getFlip);b(2187,vb,ub,Fb,1,a.prototype.setTwist,a.prototype.getTwist);b(40320,wb,zb,pb,2,a.prototype.setEPerm,a.prototype.getEPerm);w=new a;for(f=0;2768>f;f++)y(w.ea,wb[f],8,!0),Cb[f]=Oa(w.ea,0,!0)+70*x(wb[f],8),e.invFrom(w),Bb[f]=zb[e.getEPerm()];e=new a;n=new a;c(tb,nb,336,18,a.prototype.setFlip,a.prototype.getFlipSym,a.EdgeMult);c(Ab,vb,324,18,a.prototype.setTwist,a.prototype.getTwistSym,a.CornMult);c(Gb,wb,2768,10,a.prototype.setEPerm,
a.prototype.getEPermSym,a.EdgeMult,hb);c(Hb,wb,2768,10,a.prototype.setCPerm,a.prototype.getCPermSym,a.CornMult,hb);for(f=0;495>f;f++){Kb[f]=[];qb[f]=[];e.setUDSlice(f);for(w=0;18>w;w++)a.EdgeMult(e,fb[w],n),Kb[f][w]=n.getUDSlice();for(w=0;16>w;w+=2)a.EdgeConjugate(e,eb[0][w],n),qb[f][w>>1]=n.getUDSlice()}for(f=0;24>f;f++){Jb[f]=[];Ob[f]=[];e.setMPerm(f);for(w=0;10>w;w++)a.EdgeMult(e,fb[hb[w]],n),Jb[f][w]=n.getMPerm();for(w=0;16>w;w++)a.EdgeConjugate(e,eb[0][w],n),Ob[f][w]=n.getMPerm()}for(f=0;140>
f;f++){Rb[f]=[];Pb[f]=[];e.setCComb(f%70);for(w=0;10>w;w++)a.CornMult(e,fb[hb[w]],n),Rb[f][w]=n.getCComb()+70*(165>>w&1^~~(f/70));for(w=0;16>w;w++)a.CornConjugate(e,eb[0][w],n),Pb[f][w]=n.getCComb()+70*~~(f/70)}}function Za(a,b,c,e,n,f,w,h){var Pa=h&15,x=1==(h>>4&1)?14540032:0,bb=h>>8&15,Ua=h>>12&15,Ya=h>>16&15,Qa=(1<<Pa)-1,y=null==e;c*=b;h=1==(h>>5&1)?10:18;var Wa=10==h?66:599186,Oa=(a[c>>3]>>(c<<2)&15)-1;if(-1==Oa){for(var Sa=0;Sa<(c>>3)+1;Sa++)a[Sa]=4294967295;r(a,0,15);Oa=0}else r(a,c,15^Oa+1);
for(Ua=0<$a?Math.min(Math.max(Oa+1,Ya),Ua):Ua;Oa<Ua;){var Va=(Ya=Oa>bb)?15:Oa,z=286331153*Va,fb=Ya?Oa:15;Oa++;Qb++;var Xa=Oa^15,eb=0,lb=0;for(Sa=0;Sa<c;Sa++,lb>>=4){if(0==(Sa&7)){lb=a[Sa>>3];var Ta=lb^z;if(0==(Ta-286331153&~Ta&2290649224)){Sa+=7;continue}}if((lb&15)==Va){Ta=Sa%b;var nb=~~(Sa/b),Ra=0,kb=0;y&&(Ra=rb[Ta],kb=Ra&7,Ra>>=3);for(var ab=0;ab<h;ab++){var db=f[nb][ab];var hb=y?Eb[tb[Ra][sb[ab<<3|kb]]^kb^db&Qa]:n[e[Ta][ab]][db&Qa];db>>=Pa;var cb=db*b+hb,Za=a[cb>>3]>>(cb<<2)&15;if(Za!=fb)Za<Oa-
1&&(ab+=Wa>>ab&3);else{eb++;if(Ya){r(a,Sa,Xa);break}r(a,cb,Xa);cb=1;for(Za=w[db];0!=(Za>>=1);cb++)if(1==(Za&1)){var gb=db*b;gb=y?gb+Eb[rb[hb]^cb]:gb+n[hb][cb^x>>(cb<<1)&3];(a[gb>>3]>>(gb<<2)&15)==fb&&(r(a,gb,Xa),eb++)}}}}}}r(a,c,Oa+1^15);return Oa+1}function Sa(a){Nb=Za(xb,2048,324,null,null,Ab,Fb,103939);Qb>a||(ac=Za(Ib,495,324,Kb,qb,Ab,Fb,431619),Qb>a||(Vb=Za(Mb,495,336,Kb,qb,tb,yb,431619),Qb>a||(Sb=Za(Lb,24,2768,Jb,Ob,Hb,pb,584244),Qb>a||(Wb=Za(Tb,140,2768,Rb,Pb,Gb,pb,514084)))))}function Pa(){0>
Qb&&(Ta(),Qb=0);if(0==Qb)Sa(99);else if(54>Qb)Sa(Qb);else return!0;return!1}for(var $a=2,Qa=[],gb=[1],mb="U ;U2;U';R ;R2;R';F ;F2;F';D ;D2;D';L ;L2;L';B ;B2;B'".split(";"),hb=[0,1,2,4,7,9,10,11,13,16,3,5,6,8,12,14,15,17],kb=[],ib=[],Xa=[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],[6,7,8,0,1,2,3,4,5,15,16,17,9,10,11,12,13,14],[3,4,5,6,7,8,0,1,2,12,13,14,15,16,17,9,10,11],[2,1,0,5,4,3,8,7,6,11,10,9,14,13,12,17,16,15],[8,7,6,2,1,0,5,4,3,17,16,15,11,10,9,14,13,12],[5,4,3,8,7,6,2,1,0,14,13,12,17,16,
15,11,10,9]],db=0;18>db;db++)kb[hb[db]]=db;for(db=0;10>db;db++)for(var Va=~~(hb[db]/3),w=ib[db]=0;10>w;w++){var n=~~(hb[w]/3);ib[db]|=(Va==n||Va%3==n%3&&Va>=n?1:0)<<w}for(db=ib[10]=0;13>db;db++)for(Qa[db]=[],gb[db+1]=gb[db]*(db+1),w=Qa[db][0]=Qa[db][db]=1;13>w;w++)Qa[db][w]=w<=db?Qa[db-1][w-1]+Qa[db-1][w]:0;a.EdgeMult=function(a,b,c){for(var e=0;12>e;e++)c.ea[e]=a.ea[b.ea[e]>>1]^b.ea[e]&1};a.CornMult=function(a,b,c){for(var e=0;8>e;e++)c.ca[e]=a.ca[b.ca[e]&7]&7|((a.ca[b.ca[e]&7]>>3)+(b.ca[e]>>3))%
3<<3};a.CornMultFull=function(a,b,c){for(var e=0;8>e;e++){var n=a.ca[b.ca[e]&7]>>3,f=b.ca[e]>>3,w=n+(3>n?f:6-f);w=w%3+(3>n==3>f?0:3);c.ca[e]=a.ca[b.ca[e]&7]&7|w<<3}};a.CornConjugate=function(a,b,c){var e=ob[eb[0][b]];b=ob[b];for(var n=0;8>n;n++){var f=a.ca[b.ca[n]&7]>>3;c.ca[n]=e.ca[a.ca[b.ca[n]&7]&7]&7|(3>e.ca[a.ca[b.ca[n]&7]&7]>>3?f:(3-f)%3)<<3}};a.EdgeConjugate=function(a,b,c){var e=ob[eb[0][b]];b=ob[b];for(var n=0;12>n;n++)c.ea[n]=e.ea[a.ea[b.ea[n]>>1]>>1]^a.ea[b.ea[n]>>1]&1^b.ea[n]&1};a.prototype.init=
function(a,b){this.ca=a.slice();this.ea=b.slice();return this};a.prototype.initCoord=function(a,b,c,e){y(this.ca,a,8,!1);this.setTwist(b);ab(this.ea,c,12,!0);this.setFlip(e);return this};a.prototype.isEqual=function(a){for(var b=0;8>b;b++)if(this.ca[b]!=a.ca[b])return!1;for(b=0;12>b;b++)if(this.ea[b]!=a.ea[b])return!1;return!0};a.prototype.setFlip=function(a){for(var b=0,c,e=10;0<=e;e--,a>>=1)b^=c=a&1,this.ea[e]=this.ea[e]&254|c;this.ea[11]=this.ea[11]&254|b};a.prototype.getFlip=function(){for(var a=
0,b=0;11>b;b++)a=a<<1|this.ea[b]&1;return a};a.prototype.getFlipSym=function(){return rb[this.getFlip()]};a.prototype.setTwist=function(a){for(var b=15,c,e=6;0<=e;e--,a=~~(a/3))b-=c=a%3,this.ca[e]=this.ca[e]&7|c<<3;this.ca[7]=this.ca[7]&7|b%3<<3};a.prototype.getTwist=function(){for(var a=0,b=0;7>b;b++)a+=(a<<1)+(this.ca[b]>>3);return a};a.prototype.getTwistSym=function(){return ub[this.getTwist()]};a.prototype.setCPerm=function(a){y(this.ca,a,8,!1)};a.prototype.getCPerm=function(){return f(this.ca,
8,!1)};a.prototype.getCPermSym=function(){var a=zb[f(this.ca,8,!1)];return a^14540032>>((a&15)<<1)&3};a.prototype.setEPerm=function(a){y(this.ea,a,8,!0)};a.prototype.getEPerm=function(){return f(this.ea,8,!0)};a.prototype.getEPermSym=function(){return zb[f(this.ea,8,!0)]};a.prototype.getUDSlice=function(){return 494-Oa(this.ea,8,!0)};a.prototype.setUDSlice=function(a){Ra(this.ea,494-a,8,!0)};a.prototype.getMPerm=function(){return h(this.ea,12,!0)%24};a.prototype.setMPerm=function(a){ab(this.ea,a,
12,!0)};a.prototype.getCComb=function(){return Oa(this.ca,0,!1)};a.prototype.setCComb=function(a){Ra(this.ca,a,0,!1)};a.prototype.URFConjugate=function(){var b=new a;a.CornMult(a.urf2,this,b);a.CornMult(b,a.urf1,this);a.EdgeMult(a.urf2,this,b);a.EdgeMult(b,a.urf1,this)};var Ua=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],Ya=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];a.prototype.toFaceCube=function(a,b){a=a||
Ua;b=b||Ya;for(var c=[],e=0;54>e;e++)c[e]="URFDLB"[~~(e/9)];for(var n=0;8>n;n++){e=this.ca[n]&7;for(var f=this.ca[n]>>3,w=0;3>w;w++)c[a[n][(w+f)%3]]="URFDLB"[~~(a[e][w]/9)]}for(n=0;12>n;n++)for(e=this.ea[n]>>1,f=this.ea[n]&1,w=0;2>w;w++)c[b[n][(w+f)%2]]="URFDLB"[~~(b[e][w]/9)];return c.join("")};a.prototype.invFrom=function(a){for(var b=0;12>b;b++)this.ea[a.ea[b]>>1]=b<<1|a.ea[b]&1;for(b=0;8>b;b++)this.ca[a.ca[b]&7]=b|32>>(a.ca[b]>>3)&24;return this};a.prototype.fromFacelet=function(a,b,c){b=b||Ua;
c=c||Ya;for(var e=0,n=[],f=a[4]+a[13]+a[22]+a[31]+a[40]+a[49],w=0;54>w;++w){n[w]=f.indexOf(a[w]);if(-1==n[w])return-1;e+=1<<(n[w]<<2)}if(10066329!=e)return-1;var h;for(w=0;8>w;++w){for(h=0;3>h&&0!=n[b[w][h]]&&3!=n[b[w][h]];++h);a=n[b[w][(h+1)%3]];e=n[b[w][(h+2)%3]];for(f=0;8>f;++f)if(a==~~(b[f][1]/9)&&e==~~(b[f][2]/9)){this.ca[w]=f|h%3<<3;break}}for(w=0;12>w;++w)for(f=0;12>f;++f){if(n[c[w][0]]==~~(c[f][0]/9)&&n[c[w][1]]==~~(c[f][1]/9)){this.ea[w]=f<<1;break}if(n[c[w][0]]==~~(c[f][1]/9)&&n[c[w][1]]==
~~(c[f][0]/9)){this.ea[w]=f<<1|1;break}}};Wa.prototype.set=function(a){this.twist=a.twist;this.tsym=a.tsym;this.flip=a.flip;this.fsym=a.fsym;this.slice=a.slice;this.prun=a.prun;this.twistc=a.twistc;this.flipc=a.flipc};Wa.prototype.calcPruning=function(a){this.prun=Math.max(Math.max(b(ac,Ib,495*this.twist+qb[this.slice][this.tsym]),b(Vb,Mb,495*this.flip+qb[this.slice][this.fsym])),Math.max(b(Nb,xb,this.twistc>>3<<11|Eb[this.flipc^this.twistc&7]),b(Nb,xb,this.twist<<11|Eb[this.flip<<3|this.fsym^this.tsym])))};
Wa.prototype.setWithPrun=function(c,e){this.twist=c.getTwistSym();this.flip=c.getFlipSym();this.tsym=this.twist&7;this.twist>>=3;this.prun=b(Nb,xb,this.twist<<11|Eb[this.flip^this.tsym]);if(this.prun>e)return!1;this.fsym=this.flip&7;this.flip>>=3;this.slice=c.getUDSlice();this.prun=Math.max(this.prun,Math.max(b(ac,Ib,495*this.twist+qb[this.slice][this.tsym]),b(Vb,Mb,495*this.flip+qb[this.slice][this.fsym])));if(this.prun>e)return!1;var n=new a;a.CornConjugate(c,1,n);a.EdgeConjugate(c,1,n);this.twistc=
n.getTwistSym();this.flipc=n.getFlipSym();this.prun=Math.max(this.prun,b(Nb,xb,this.twistc>>3<<11|Eb[this.flipc^this.twistc&7]));return this.prun<=e};Wa.prototype.doMovePrun=function(a,c,e){this.slice=Kb[a.slice][c];this.flip=tb[a.flip][sb[c<<3|a.fsym]];this.fsym=this.flip&7^a.fsym;this.flip>>=3;this.twist=Ab[a.twist][sb[c<<3|a.tsym]];this.tsym=this.twist&7^a.tsym;this.twist>>=3;return this.prun=Math.max(Math.max(b(ac,Ib,495*this.twist+qb[this.slice][this.tsym]),b(Vb,Mb,495*this.flip+qb[this.slice][this.fsym])),
b(Nb,xb,this.twist<<11|Eb[this.flip<<3|this.fsym^this.tsym]))};Wa.prototype.doMovePrunConj=function(a,c){c=lb[3][c];this.flipc=tb[a.flipc>>3][sb[c<<3|a.flipc&7]]^a.flipc&7;this.twistc=Ab[a.twistc>>3][sb[c<<3|a.twistc&7]]^a.twistc&7;return b(Nb,xb,this.twistc>>3<<11|Eb[this.flipc^this.twistc&7])};c.prototype.solution=function(a,b,c,e,n,f,w){Pa();a=this.verify(a);if(0!=a)return"Error "+Math.abs(a);void 0===b&&(b=21);void 0===c&&(c=1E9);void 0===e&&(e=0);void 0===n&&(n=0);this.sol=b+1;this.probe=0;this.probeMax=
c;this.probeMin=Math.min(e,c);this.verbose=n;this.moveSol=null;this.isRec=!1;this.firstFilters=[0,0,0,0,0,0];this.lastFilters=[0,0,0,0,0,0];for(b=0;3>b;b++)void 0!==f&&(this.firstFilters[b]|=3591<<3*~~(Xa[(3-b)%3][3*f]/3),this.lastFilters[b+3]|=3591<<3*~~(Xa[(3-b)%3][3*f]/3)),void 0!==w&&(this.lastFilters[b]|=3591<<3*~~(Xa[(3-b)%3][3*w]/3),this.firstFilters[b+3]|=3591<<3*~~(Xa[(3-b)%3][3*w]/3));this.initSearch();return this.search()};c.prototype.initSearch=function(){this.conjMask=0;this.maxPreMoves=
7<this.conjMask?0:20;for(var b=0;6>b;b++)if(this.urfCubieCube[b].init(this.cc.ca,this.cc.ea),this.urfCoordCube[b].setWithPrun(this.urfCubieCube[b],20),this.cc.URFConjugate(),2==b%3){var c=(new a).invFrom(this.cc);this.cc.init(c.ca,c.ea)}};c.prototype.next=function(a,b,c){this.probe=0;this.probeMax=a;this.probeMin=Math.min(b,a);this.moveSol=null;this.isRec=!0;this.verbose=c;return this.search()};c.prototype.verify=function(a){if(-1==this.cc.fromFacelet(a))return-1;for(var b=a=0,c=0;12>c;c++)b|=1<<
(this.cc.ea[c]>>1),a^=this.cc.ea[c]&1;if(4095!=b)return-2;if(0!=a)return-3;for(c=a=b=0;8>c;c++)b|=1<<(this.cc.ca[c]&7),a+=this.cc.ca[c]>>3;return 255!=b?-4:0!=a%3?-5:0!=(x(h(this.cc.ea,12,!0),12)^x(this.cc.getCPerm(),8))?-6:0};c.prototype.phase1PreMoves=function(b,c,e){if(b==this.maxPreMoves-1&&0!=(this.lastFilter>>c&1))return 1;this.preMoveLen=this.maxPreMoves-b;if(this.isRec?this.depth1==this.length1-this.preMoveLen:0==this.preMoveLen||0==(225207>>c&1))if(this.depth1=this.length1-this.preMoveLen,
this.phase1Cubie[0].init(e.ca,e.ea),this.allowShorter=7==this.depth1&&0!=this.preMoveLen,this.nodeUD[this.depth1+1].setWithPrun(e,this.depth1)&&0==this.phase1(this.nodeUD[this.depth1+1],this.depth1,-1))return 0;if(0==b||this.preMoveLen+7>=this.length1)return 1;var n=0;if(1==b||this.preMoveLen+1+7>=this.length1)n|=225207;c=3*~~(c/3);for(var f=0;18>f;f++)if(f==c||f==c-9||f==c+9)f+=2;else if(!(this.isRec&&f!=this.preMoves[this.maxPreMoves-b]||0!=(n&1<<f))&&(a.CornMult(fb[f],e,this.preMoveCubes[b]),a.EdgeMult(fb[f],
e,this.preMoveCubes[b]),this.preMoves[this.maxPreMoves-b]=f,0==this.phase1PreMoves(b-1,f,this.preMoveCubes[b])))return 0;return 1};c.prototype.search=function(){for(this.length1=this.isRec?this.length1:0;this.length1<this.sol;this.length1++)for(this.urfIdx=this.isRec?this.urfIdx:0;6>this.urfIdx;this.urfIdx++)if(0==(this.conjMask&1<<this.urfIdx)&&(this.firstFilter=this.firstFilters[this.urfIdx],this.lastFilter=this.lastFilters[this.urfIdx],0==this.phase1PreMoves(this.maxPreMoves,-30,this.urfCubieCube[this.urfIdx],
0)))return null==this.moveSol?"Error 8":this.moveSol;return null==this.moveSol?"Error 7":this.moveSol};c.prototype.initPhase2Pre=function(){this.isRec=!1;if(this.probe>=(null==this.moveSol?this.probeMax:this.probeMin))return 0;++this.probe;for(var b=this.valid1;b<this.depth1;b++)a.CornMult(this.phase1Cubie[b],fb[this.move[b]],this.phase1Cubie[b+1]),a.EdgeMult(this.phase1Cubie[b],fb[this.move[b]],this.phase1Cubie[b+1]);this.valid1=this.depth1;b=this.initPhase2(this.phase1Cubie[this.depth1]);if(0==
b||0==this.preMoveLen||2==b)return b;b=3*~~(this.preMoves[this.preMoveLen-1]/3)+1;a.CornMult(fb[b],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]);a.EdgeMult(fb[b],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]);this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2;b=this.initPhase2(this.phase1Cubie[this.depth1+1]);this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2;return b};c.prototype.initPhase2=function(a){var c=a.getCPermSym(),
e=c&15;c>>=4;var n=a.getEPermSym(),f=n&15;n>>=4;a=a.getMPerm();var w=Math.max(b(Wb,Tb,140*n+Pb[Cb[c]&255][eb[f][e]]),b(Sb,Lb,24*c+Ob[a][e])),h=Math.min(13,this.sol-this.length1);if(w>=h)return w>h?2:1;var Pa;for(Pa=h-1;Pa>=w;Pa--){var x=this.phase2(n,f,c,e,a,Pa,this.depth1,10);if(0>x)break;Pa-=x;this.moveSol=[];for(x=0;x<this.depth1+Pa;x++)this.appendSolMove(this.move[x]);for(x=this.preMoveLen-1;0<=x;x--)this.appendSolMove(this.preMoves[x]);this.sol=this.moveSol.length;this.moveSol=this.solutionToString()}return Pa!=
h-1?this.probe>=this.probeMin?0:1:1};c.prototype.phase1=function(a,b,c){if(b==this.depth1-1&&0!=(this.firstFilter>>c&1))return 1;if(0==a.prun&&5>b){if(this.allowShorter||0==b){this.depth1-=b;var e=this.initPhase2Pre();this.depth1+=b;return e}return 1}for(var n=0;18>n;n+=3)if(n!=c&&n!=c-9)for(var f=0;3>f;f++)if(e=n+f,!this.isRec||e==this.move[this.depth1-b]){var w=this.nodeUD[b].doMovePrun(a,e,!0);if(w>b)break;else if(w==b)continue;w=this.nodeUD[b].doMovePrunConj(a,e);if(w>b)break;else if(w==b)continue;
this.move[this.depth1-b]=e;this.valid1=Math.min(this.valid1,this.depth1-b);e=this.phase1(this.nodeUD[b],b-1,n);if(0==e)return 0;if(2==e)break}return 1};c.prototype.appendSolMove=function(a){if(0==this.moveSol.length)this.moveSol.push(a);else{var b=~~(a/3),c=~~(this.moveSol[this.moveSol.length-1]/3);b==c?(a=(a%3+this.moveSol[this.moveSol.length-1]%3+1)%4,3==a?this.moveSol.pop():this.moveSol[this.moveSol.length-1]=3*b+a):1<this.moveSol.length&&b%3==c%3&&b==~~(this.moveSol[this.moveSol.length-2]/3)?
(a=(a%3+this.moveSol[this.moveSol.length-2]%3+1)%4,3==a?(this.moveSol[this.moveSol.length-2]=this.moveSol[this.moveSol.length-1],this.moveSol.pop()):this.moveSol[this.moveSol.length-2]=3*b+a):this.moveSol.push(a)}};c.prototype.phase2=function(a,c,n,f,w,h,Pa,x){if(0==this.depth1&&1==Pa&&0!=(this.firstFilter>>hb[x]&1))return-1;if(0==a&&0==n&&0==w&&(0<this.preMoveLen||0==(this.lastFilter>>hb[x]&1)))return h;x=ib[x];for(var Ua=0;10>Ua;Ua++)if(0!=(x>>Ua&1))Ua+=66>>Ua&3;else{var Ya=Jb[w][Ua],Qa=Hb[n][bb[f][Ua]],
r=cb[Qa&15][f];Qa>>=4;if(!(b(Sb,Lb,24*Qa+Ob[Ya][r])>=h)){var y=Gb[a][bb[c][Ua]],$a=cb[y&15][c];y>>=4;if(!(b(Wb,Tb,140*y+Pb[Cb[Qa]&255][eb[$a][r]])>=h)){var Oa=e(y,$a,!1),Sa=e(Qa,r,!0);if(!(b(Wb,Tb,140*(Oa>>4)+Pb[Cb[Sa>>4]&255][eb[Oa&15][Sa&15]])>=h)&&(Ya=this.phase2(y,$a,Qa,r,Ya,h-1,Pa+1,Ua),0<=Ya))return this.move[Pa]=hb[Ua],Ya}}}return-1};c.prototype.solutionToString=function(){var a="",b=0!=(this.verbose&2)?(this.urfIdx+3)%6:this.urfIdx;if(3>b)for(var c=0;c<this.moveSol.length;++c)a+=mb[Xa[b][this.moveSol[c]]]+
" ";else for(c=this.moveSol.length-1;0<=c;--c)a+=mb[Xa[b][this.moveSol[c]]]+" ";return a};var fb=[],ob=[],cb=[],eb=[],lb=[],bb=[],sb=[],nb=[],rb=[],vb=[],ub=[],wb=[],zb=[],yb=[],Fb=[],pb=[],Eb=[],Cb=[],Bb=[],Kb=[],Ab=[],tb=[],qb=[],Ib=[],Mb=[],xb=[],Hb=[],Gb=[],Jb=[],Ob=[],Rb=[],Pb=[],Lb=[],Tb=[],Nb=15,ac=15,Vb=15,Sb=15,Wb=15;for(db=0;18>db;db++)fb[db]=new a;fb[0].initCoord(15120,0,119750400,0);fb[3].initCoord(21021,1494,323403417,0);fb[6].initCoord(8064,1236,29441808,550);fb[9].initCoord(9,0,5880,
0);fb[12].initCoord(1230,412,2949660,0);fb[15].initCoord(224,137,328552,137);for(db=0;18>db;db+=3)for(Va=0;2>Va;Va++)a.EdgeMult(fb[db+Va],fb[db],fb[db+Va+1]),a.CornMult(fb[db+Va],fb[db],fb[db+Va+1]);a.urf1=(new a).initCoord(2531,1373,67026819,1367);a.urf2=(new a).initCoord(2089,1906,322752913,2040);var Qb=-1;return{Search:c,solve:function(a){return(new c).solution(a)},randomCube:function(){var b=~~(2048*Math.random()),c=~~(2187*Math.random());do{var e=~~(Math.random()*gb[12]);var n=~~(Math.random()*
gb[8])}while(x(n,8)!=x(e,12));return(new a).initCoord(n,c,e,b).toFaceCube()},initFull:function(){$a=0;Pa()}}}();"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports=min2phase);var cubeutil=function(){function c(a){for(var b={},c=0;c<a.length;c++){var e=a[c];"-"!=e&&(b[e]=b[e]||[],b[e].push(c))}a=[];for(e in b)1<b[e].length&&a.push(b[e]);return a}function Na(a,b){var c=Xa[a[1]],e=a[0];b=b||ib;for(var n=0;n<b.length;n++)for(var f=b[n],w=e[c[f[0]]],h=1;h<f.length;h++)if(e[c[f[h]]]!=w)return 1;return 0}function z(a){return Na(a,Ra)?9:Na(a,Sa)?4+Na(a,x)+Na(a,Wa)+Na(a,Ta)+Na(a,Za):Na(a,$a)?4:Na(a,Pa)?3:Na(a,Qa)?2:Na(a)?1:0}function r(a){return Na(a,Ra)?7:Na(a,Sa)?2+Na(a,x)+Na(a,
Wa)+Na(a,Ta)+Na(a,Za):Na(a,Pa)?2:Na(a)?1:0}function b(a){return Na(a,Ra)?4:Na(a,Sa)?3:Na(a,Pa)?2:Na(a)?1:0}function e(a){return Na(a,Sa)?2:Na(a)?1:0}function a(a){return Na(a,gb)?4:Na(a,mb)?3:Na(a,hb)?2:Na(a)?1:0}function y(a,b){return a in db?Na(b,db[a][1]):Na(b)}function f(a,b,c){for(var e=99,n=0;n<c;n++)e=Math.min(e,b([a,n]));return e}function ab(a){var b=[0,1,2,3,4,5];return $.map(a,function(a,c){function e(a,b){0==n.length||~~(n[n.length-1]/3)!=a?n.push(3*a+b):(b=(b+n[n.length-1]%3+1)%4,3==b?
n.pop():n[n.length-1]=3*a+b)}for(var n=[],f=0;f<a.length;f++){var w=b.indexOf("URFDLB".indexOf(a[f][0][0])),h=" 2'".indexOf(a[f][0][1])%3;if(f==a.length-1||100<a[f+1][1]-a[f][1])e(w,h);else{var Pa=b.indexOf("URFDLB".indexOf(a[f+1][0][0])),x=" 2'".indexOf(a[f+1][0][1])%3;if(w!=Pa&&w%3==Pa%3&&2==h+x){Pa=w%3;w=(h-1)*[1,1,-1,-1,-1,1][w]+1;e(Pa+6,w);for(h=0;h<w+1;h++){x=[];for(var Ua=0;6>Ua;Ua++)x[Ua]=b[Va[Pa][Ua]];b=x}f++}else e(w,h)}}return[[$.map(n,function(a){return"URFDLBEMS".charAt(~~(a/3))+" 2'".charAt(a%
3)}).join(""),n.length]]})}function h(a,b,c){for(var e=[],n=0;24>n;n++)0==Na([a,n],b)&&e.push(n);for(b=0;b<c.length;b++)for(n=0;n<e.length;n++)if(0==Na([a,e[n]],c[b]))return b;return-1}function Oa(a){switch(a){case "cfop":return["pll","oll","f2l","cross"];case "fp":return["op","cf"];case "cf4op":return"pll oll f2l-4 f2l-3 f2l-2 f2l-1 cross".split(" ");case "roux":return["l6e","cmll","sb","fb"];case "cf4o2p2":return"pll cpll oll eoll f2l-4 f2l-3 f2l-2 f2l-1 cross".split(" ");case "n":return["solve"]}}
var Ra=c("----U--------R--R-----F--F--D-DDD-D-----L--L-----B--B-"),x=c("----U-------RR-RR-----FF-FF-DDDDD-D-----L--L-----B--B-"),Wa=c("----U--------R--R----FF-FF-DD-DDD-D-----LL-LL----B--B-"),Ta=c("----U--------RR-RR----F--F--D-DDD-DD----L--L----BB-BB-"),Za=c("----U--------R--R-----F--F--D-DDDDD----LL-LL-----BB-BB"),Sa=c("----U-------RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB"),Pa=c("UUUUUUUUU---RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB"),$a=c("-U-UUU-U----RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB"),
Qa=c("UUUUUUUUUr-rRRRRRRf-fFFFFFFDDDDDDDDDl-lLLLLLLb-bBBBBBB"),gb=c("---------------------F--F--D--D--D-----LLLLLL-----B--B"),mb=c("------------RRRRRR---F-FF-FD-DD-DD-D---LLLLLL---B-BB-B"),hb=c("U-U---U-Ur-rRRRRRRf-fF-FF-FD-DD-DD-Dl-lLLLLLLb-bB-BB-B"),kb=c("---------------R-R------F-FD-D---D-D------L-L------B-B"),ib=c(mathlib.SOLVED_FACELET),Xa=function(){function a(a,b){for(var c=[],e=0;54>e;e++)c[b[e]]=a[e];return c}for(var b=[2,5,8,1,4,7,0,3,6,18,19,20,21,22,23,24,25,26,36,37,38,39,40,41,42,43,
44,33,30,27,34,31,28,35,32,29,45,46,47,48,49,50,51,52,53,9,10,11,12,13,14,15,16,17],c=[53,52,51,50,49,48,47,46,45,11,14,17,10,13,16,9,12,15,0,1,2,3,4,5,6,7,8,18,19,20,21,22,23,24,25,26,42,39,36,43,40,37,44,41,38,35,34,33,32,31,30,29,28,27],e=[11,14,17,10,13,16,9,12,15,29,32,35,28,31,34,27,30,33,20,23,26,19,22,25,18,21,24,38,41,44,37,40,43,36,39,42,2,5,8,1,4,7,0,3,6,51,48,45,52,49,46,53,50,47],n=[],f=[],w=0;54>w;w++)f[w]=w;for(w=0;24>w;w++)n[w]=f.slice(),f=a(f,w&1?c:e),5==w%6&&(f=a(f,e),f=a(f,e)),
11==w%12&&(f=a(f,b),f=a(f,b));return n}(),db={cross:[6,Ra],f2l:[6,Sa],oll:[6,Pa],eoll:[6,$a],cpll:[6,Qa],fb:[24,gb],sb:[24,mb],cmll:[24,hb]},Va=[[0,2,4,3,5,1],[5,1,0,2,4,3],[4,0,2,1,3,5]],w=function(){var a=[];return function(b){if(0==a.length)for(var e=0;22>e;e++){var n=21==e?"UUUUUUUUUFFFRRRBBBLLL":scramble_333.getPLLImage(e)[0];a.push(c("012345678cdeRRRRRR9abFFFFFFDDDDDDDDDijkLLLLLLfghBBBBBB".replace(/[0-9a-z]/g,function(a){return n[parseInt(a,36)].toLowerCase()})))}return h(b,Pa,a)}}(),n=function(){var a=
[];return function(b){if(0==a.length)for(var e=0;58>e;e++){var n=scramble_333.getOLLImage(e)[0].replace(/G/g,"-");a.push(c("012345678cdeRRRRRR9abFFFFFFDDDDDDDDDijkLLLLLLfghBBBBBB".replace(/[0-9a-z]/g,function(a){return n[parseInt(a,36)].toLowerCase()})))}return h(b,Sa,a)}}(),Ua=function(){var a=[];return function(b){if(0==a.length)for(var e=0;40>e;e++){var n=scramble_222.getEGLLImage(e)[0].replace(/G/g,"-");a.push(c("0-1---2-36-7---R-R4-5---F-FD-D---D-Da-b---L-L8-9---B-B".replace(/[0-9a-z]/g,function(a){return n[parseInt(a,
36)].toLowerCase()})))}return h(b,kb,a)}}();return{getProgress:function(c,n){switch(n){case "cfop":return f(c,b,6);case "fp":return f(c,e,6);case "cf4op":return f(c,r,6);case "roux":return f(c,a,24);case "cf4o2p2":return f(c,z,6);case "n":return f(c,Na,1)}},getStepNames:Oa,getStepCount:function(a){return(a=Oa(a))?a.length:0},getStepProgress:function(a,b,c){c||(c=a in db?db[a][0]:1);return f(b,y.bind(null,a),c)},getPrettyMoves:ab,getPrettyReconstruction:function(a,b){for(var c="",e=ab(a),n=Oa(b).reverse(),
f=0,w=0;w<e.length;w++)f+=e[w][1],c+=e[w][0].replace(/ /g,"")+(n[w]?" // "+n[w]+" "+e[w][1]+" move(s)":"")+"\n";return{prettySolve:c,totalMoves:f}},moveSeq2str:function(a){return $.map(a,function(a){return a[0].trim()+"@"+a[1]}).join(" ")},getScrambledState:function(a,b){var c=a[1];if(tools.isPuzzle("333",a)){c=kernel.parseScramble(c,"URFDLB");for(var e=new mathlib.CubieCube,n=new mathlib.CubieCube,f=e.ori=0;f<c.length;f++){var w=c[f][0],h=c[f][2],Pa=3*w+h-1;if(!(0>Pa||18<=Pa)){if(2==c[f][1]){Pa=
[3,15,17,1,11,23][w];for(var x=0;x<h;x++)e.ori=mathlib.CubieCube.rotMult[Pa][e.ori];Pa=mathlib.CubieCube.rotMulM[e.ori][(w+3)%6*3+h-1]}mathlib.CubieCube.EdgeMult(e,mathlib.CubieCube.moveCube[Pa],n);mathlib.CubieCube.CornMult(e,mathlib.CubieCube.moveCube[Pa],n);e.init(n.ca,n.ea)}}return b?e.toFaceCube():e}},identStep:function(a,b){switch(a){case "PLL":return w(b);case "OLL":return n(b);case "C2CLL":return Ua(b)}},getIdentData:function(a){var b={PLL:[w,scramble_333.getPLLImage,0,21,0],OLL:[n,scramble_333.getOLLImage,
1,58,1],CLL:[Ua,scramble_222.getEGLLImage,0,40,1]};return a?b[a]:b}}}();var puzzleFactory=execMain(function(){function c(a,b){this.twistyScene=a;this.twisty=b}function Na(y,f,ab,h){if(void 0==window.twistyjs)e=Na.bind(null,y,f,ab,h),!r&&document.createElement("canvas").getContext?(r=!0,$.getScript("js/twisty.js",function(){e&&e()})):h(void 0,!0);else{for(var Oa=/^q[2l]?$/.exec(y.style)?"q":"v",Ra=null,x=0;x<a.length;x++)if(a[x][0]==ab){Ra=a[x];break}if(x=!Ra||Ra[1]!=Oa)Ra?Ra[1]=Oa:(Ra=[ab,Oa],a.push(Ra)),b="q"==Oa?new twistyjs.qcube.TwistyScene:new twistyjs.TwistyScene,
Ra[2]=new c(b,null),ab.empty().append(Ra[2].getDomElement()),Ra[2].addMoveListener(f);f=y.puzzle;f.startsWith("cube")?(y.type="cube",y.faceColors=z(kernel.getProp("colcube"),[3,4,5,0,1,2]),y.dimension=~~f.slice(4)||3,y.stickerWidth=1.7):"skb"==f?(y.type="skewb",y.faceColors=z(kernel.getProp("colskb"),[0,5,4,2,1,3])):"mgm"==f?(y.type="mgm",y.faceColors=z(kernel.getProp("colmgm"),[0,2,1,5,4,3,11,9,8,7,6,10])):"pyr"==f?(y.type="pyr",y.faceColors=z(kernel.getProp("colpyr"),[3,1,2,0])):"sq1"==f?(y.type=
"sq1",y.faceColors=z(kernel.getProp("colsq1"),[0,5,4,2,1,3])):"clk"==f&&(y.type="clk",y.faceColors=z(kernel.getProp("colclk"),[1,2,0,3,4]));y.scale=.9;Ra[2].twistyScene.initializeTwisty(y);Ra[2].twisty=Ra[2].twistyScene.getTwisty();Ra[2].resize();h(Ra[2],x)}}function z(a,b){var c=[];a=(a||"").match(/#[0-9a-fA-F]{3}/g)||[];for(var e=0;e<a.length;e++)c.push(~~kernel.ui.nearColor(a[b[e]],0,!0).replace("#","0x"));return c}var r=!1,b;c.prototype.keydown=function(a){return this.twistyScene.keydown(a)};
c.prototype.resize=function(){return this.twistyScene.resize()};c.prototype.addMoves=function(a){return this.twistyScene.addMoves(a)};c.prototype.applyMoves=function(a){return this.twistyScene.applyMoves(a)};c.prototype.addMoveListener=function(a){return this.twistyScene.addMoveListener(a)};c.prototype.getDomElement=function(){return this.twistyScene.getDomElement()};c.prototype.isRotation=function(a){return this.twisty.isInspectionLegalMove(this.twisty,a)};c.prototype.move2str=function(a){return this.twisty.move2str(a)};
c.prototype.moveInv=function(a){return this.twisty.moveInv(a)};c.prototype.toggleColorVisible=function(a){return this.twisty.toggleColorVisible(this.twisty,a)};c.prototype.isSolved=function(a){return this.twisty.isSolved(this.twisty,a)};c.prototype.moveCnt=function(a){return this.twisty.moveCnt(a)};c.prototype.parseScramble=function(a,b){return this.twisty.parseScramble(a,b)};var e=null,a=[];return{init:Na}});var gripRecons=execBoth(function(){function c(){for(var b=[[2,0,"R ",100,3,null],[0,1,"R ",100,3,null],[2,1,"R2",150,4,null],[1,2,"R2",150,4,null],[1,0,"R'",100,5,null],[0,2,"R'",100,5,null],[2,2,"F ",150,6,null],[2,2,"F'",200,8,null],[0,0,"M ",300,21,11],[0,0,"M2",300,22,6],[0,0,"M'",200,23,15],[1,4,"x'",30,null,11],[2,3,"x ",30,null,15],[0,0,"y ",150,null,3],[0,0,"y'",150,null,1],[1,1,"y ",100,null,3],[1,1,"y'",100,null,1],[2,2,"y ",100,null,3],[2,2,"y'",100,null,1],[0,1,"G01",80,null,null],[1,
0,"G10",80,null,null],[0,2,"G02",80,null,null],[2,0,"G20",80,null,null],[1,2,"G12",120,null,null],[2,1,"G21",120,null,null]],c=0;3>c;c++){var a=[0,3,4][c];b.push([a,a,"D ",300,9,null]);b.push([a,a,"D2",250,10,null]);b.push([a,a,"D'",150,11,null]);b.push([a,a,"U ",100,0,null]);b.push([a,a,"U2",150,1,null]);b.push([a,a,"U'",200,2,null])}var r={U:"U",R:"L",D:"D",F:"F",E:"E",S:"S",y:"y"},f={" ":"'",2:"2","'":" "},z={0:0,1:3,2:4,3:1,4:2};a=[/^([URFDLBESyz])([ 2'])|G(\d)(\d)$/,function(a,b,c,e,h){return"G"==
a[0]?"G"+z[~~e]+z[~~h]:b in r?r[b]+f[c]:a}];var h=function(a){return null==a||7==~~(a/3)?a:3*[0,4,2,3,1,5,6,7,8][~~(a/3)]+(2-a%3)},Oa=function(a){return null==a?a:{3:1,1:3}[a]||a},Ra=b.length;for(c=0;c<Ra;c++){var x=b[c];b.push([z[x[0]],z[x[1]],x[2].replace(a[0],a[1]),x[3]+30,h(x[4]),Oa(x[5])])}return b}function Na(b,c,a){var e=new r,f={};e.push([0,b]);f[b]=[0,b,null];for(b=0;;){var z=e.pop();if(!z)break;else if(z[1]==a)break;else if(z[0]>f[z[1]][0])continue;b++;for(var h=f[z[1]][0],Oa=c(z[1]),Ra=
0;Ra<Oa.length;Ra++){var x=Oa[Ra];if(!(x[1]in f)||h+x[0]<f[x[1]][0])f[x[1]]=[h+x[0],z[1],x[2]],e.push([h+x[0],x[1]])}}return f}function z(b,e,a){for(var r=c(),f=Na(-1,function(c){var f=[];if(-1==c){for(c=0;24>c;c++)if(!(e>>c&1))for(var h=0;5>h;h++)f.push([0,c<<3|h,[0,0,mathlib.CubieCube.rot2str[c]]]);return f}h=c>>8;var y=c>>3&31,Oa=c&7;h==b.length&&(a>>y&1||f.push([0,-2,[0,0,"Gend ori="+y+" hand="+Oa]]));for(c=0;c<r.length;c++){var Sa=r[c];if(Sa[0]==Oa){var Pa=Sa[1],$a=y,Qa=h;if(null!=Sa[4]){if(mathlib.CubieCube.rotMulM[y][Sa[4]%
18]+(18<=Sa[4]?18:0)!=b[h])continue;Qa++}null!=Sa[5]&&($a=mathlib.CubieCube.rotMult[Sa[5]][$a]);f.push([Sa[3],Qa<<8|$a<<3|Pa,Sa])}}return f},-2),z=-2,h=[];-1!=z;){var Oa=f[z];if(!Oa)break;Oa.splice(2,0,z);h.push(Oa);z=Oa[1]}h.reverse();return h}var r=function(){function b(){this.arr=[]}b.prototype.pop=function(){var b=this.arr,a=b.pop();if(!b.length)return a;for(var c=b[0],f=0;;){var r=2*f+1;r+1<b.length&&b[r][0]>b[r+1][0]&&r++;if(r>=b.length||a[0]<=b[r][0])break;b[f]=b[r];f=r}b[f]=a;return c};b.prototype.push=
function(b){for(var a=this.arr,c=a.length,e;0<=(e=c-1>>1)&&b[0]<a[e][0];)a[c]=a[e],c=e;a[c]=b};return b}();return{getBestAlgorithmStr:function(b,c,a){var e=new mathlib.CubieCube;e.ori=0;b=b.split(/ +/);for(var f=[],r=0;r<b.length;r++){var h=e.selfMoveStr(b[r]);void 0!=h&&f.push(h)}return z(f,c,a)},getBestAlgorithm:z,getPrettyReconstruction:function(b,c){var a="",e=[],f=new mathlib.CubieCube;f.ori=0;var r=[];b=cubeutil.getPrettyMoves(b);for(var h=0;h<b.length;h++){for(var Oa=b[h][0],Ra=0;Ra<Oa.length;Ra+=
2){var x=f.selfMoveStr(Oa.slice(Ra,Ra+2));void 0!=x&&e.push(x)}r.push(e.length)}f=z(e);var Wa=Oa=0;Ra=cubeutil.getStepNames(c).reverse();for(h=0;h<f.length;h++)for(x=f[h][2];x>>8>=r[Oa];){Wa=f.slice(Wa,h+1);for(var Ta=[],Za=0;Za<Wa.length;Za++){var Sa=Wa[Za];"G"!=Sa[3][2][0]&&Ta.push(Sa[3][2])}Wa=Ta.join(" ").replace(/ +/g," ");a+=Wa+(Ra[Oa]?" // "+Ra[Oa]+" "+(r[Oa]-(r[Oa-1]||0))+" move(s)":"")+"\n";Wa=h+1;Oa++}return{prettySolve:a,totalMoves:e.length}},updateReconsOri:function(b){var c=b.split(" "),
a=[];b=[];for(var r=new mathlib.CubieCube,f=r.ori=0;f<c.length;f++){var ab=/^(.*)@(\d+)$/.exec(c[f]);if(ab){var h=r.selfMoveStr(ab[1]);void 0!=h&&(a.push(h),b.push(~~ab[2]))}}c=z(a);a=[];r=[];var Oa=0;for(f=ab=0;f<c.length;f++){var Ra=c[f];if("G"!=Ra[3][2][0]){var x=Ra[2]>>8;if(x==Oa)for(Ra=Ra[3][2].split(" "),h=0;h<Ra.length;h++)Ra[h]&&r.push(Ra[h]);else{var Wa=b[x-1];for(h=0;h<r.length;h++)Oa=ab+Math.floor((Wa-ab)*(h+1)/(r.length+1)),a.push(r[h].trim()+"@"+Oa);a.push(Ra[3][2].trim()+"@"+Wa);Oa=
x;ab=Wa;r=[]}}}return a.join(" ").replace(/[EMS]/g,function(a){return["2-2Dw","2-2Lw","2-2Fw"]["EMS".indexOf(a)]})}}});var JSON;JSON||(JSON={});
(function(){function c(a){return 10>a?"0"+a:a}function Na(a){b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var b=y[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function z(b,c){var h,r,x=e,y=c[b];y&&"object"===typeof y&&"function"===typeof y.toJSON&&(y=y.toJSON(b));"function"===typeof f&&(y=f.call(c,b,y));switch(typeof y){case "string":return Na(y);case "number":return isFinite(y)?""+y:"null";case "boolean":case "null":return""+y;
case "object":if(!y)return"null";e+=a;var Ta=[];if("[object Array]"===Object.prototype.toString.apply(y)){var Za=y.length;for(h=0;h<Za;h+=1)Ta[h]=z(h,y)||"null";var Sa=0===Ta.length?"[]":e?"[\n"+e+Ta.join(",\n"+e)+"\n"+x+"]":"["+Ta.join(",")+"]";e=x;return Sa}if(f&&"object"===typeof f)for(Za=f.length,h=0;h<Za;h+=1)"string"===typeof f[h]&&(r=f[h],(Sa=z(r,y))&&Ta.push(Na(r)+(e?": ":":")+Sa));else for(r in y)Object.prototype.hasOwnProperty.call(y,r)&&(Sa=z(r,y))&&Ta.push(Na(r)+(e?": ":":")+Sa);Sa=0===
Ta.length?"{}":e?"{\n"+e+Ta.join(",\n"+e)+"\n"+x+"}":"{"+Ta.join(",")+"}";e=x;return Sa}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var r=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,a,y={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,r){var h;a=e="";if("number"===typeof r)for(h=0;h<r;h+=1)a+=" ";else"string"===typeof r&&(a=r);if((f=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return z("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,e){var f,h,x=a[e];if(x&&"object"===typeof x)for(f in x)Object.prototype.hasOwnProperty.call(x,f)&&(h=c(x,f),void 0!==h?x[f]=h:delete x[f]);return b.call(a,e,x)}var e;a=""+a;r.lastIndex=0;r.test(a)&&(a=a.replace(r,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");})})();var kernel=execMain(function(){function c(a,b){DEBUG&&console.log("[signal]",a,b);if(void 0!=f[a])for(var c in f[a])if(void 0===f[a][c][1]||f[a][c][1].exec(b[0]))f[a][c][0](a,b)}function Na(a,b,c,e){void 0==f[b]&&(f[b]={});f[b][a]=[c,e]}function z(a,b){if(0>a)return"DNF";var c=h("useMilli");a=Math.floor(a/(c?1:10));var e=a%(c?1E3:100);a=Math.floor(a/(c?1E3:100));var f=h("timeFormat"),x=0,Pa=0;"h"==f?(f=a%60,x=Math.floor(a/60)%60,Pa=Math.floor(a/3600)):"m"==f?(f=a%60,x=Math.floor(a/60)):f=a;var r=
(b=b&&h("smallADP"))?["</span>"]:[];r.push(e);10>e&&r.push("0");100>e&&c&&r.push("0");r.push(f+"."+(b?'<span style="font-size:0.75em;">':""));10>f&&0<x+Pa&&r.push("0");0<x+Pa&&r.push(x+":");10>x&&0<Pa&&r.push("0");0<Pa&&r.push(Pa+":");return r.reverse().join("")}function r(){for(var a=h(tools.isCurTrainScramble()?"preScrT":"preScr","").split(" "),b=new mathlib.CubieCube,c=0;c<a.length;c++)b.selfMoveStr(a[c]);return b.ori||0}function b(a){if(0>=a)return a;var b=h("useMilli")?1:10;return Math.round(a/
b)*b}function e(){timer.refocus()}$.ajaxSetup({cache:!0});var a=$("<div />").css("visibility","hidden"),y=$('<div id="wndctn" />'),f={},ab=function(){function a(){var a=$(this).data("module");b(a);e(a)}function b(a){if(!Ya[a][0].hasClass("enable")){for(var b in Ya)Ya[b][0].removeClass("enable");Ya[a][0].addClass("enable");sb=a}}function e(a){setTimeout(function(){Ta.scrollTop(a?Ta.scrollTop()+Ya[a][1].position().top-3:nb)},0)}function f(){nb=Ta.scrollTop();var a="kernel",c;for(c in Ya)50<Ya[c][1].position().top||
(a=c);b(a)}function h(a){a=$(this);var b=a.prop("name");if(a.is(".opthelp"))" [?] "==a.html()?a.html("<br> [?] "+$('strong[data="opt_'+a.attr("data")+'"]').parent().html().split("</strong>. ")[1]):a.html(" [?] ");else if(a.is("select"))Oa(b,a.val());else switch(a.prop("type")){case "checkbox":Oa(b,a.prop("checked"));break;case "color":if(a.attr("data")){var c=4*~~a.attr("data")-4,e=Sa(b);Oa(b,[e.slice(0,c),x.nearColor(a.val()),e.slice(c+4)].join(""))}else Oa(b,a.val());break;case "text":case "button":for(c in Ua)if(b in
Ua[c]){c=Ua[c][b];e=Sa(b);switch(a.val()){case "+":e=Math.min(e+1,c[3][2]);break;case "-":e=Math.max(e-1,c[3][1]);break;default:a.val().match(/^\d+$/)&&(e=+a.val().match(/^0*(.+)$/)[1],e=Math.max(Math.min(e,c[3][2]),c[3][1]))}c[0].val(e);Oa(b,e);break}}}function r(){Ya={};lb.empty();Ra.empty();Ta.unbind("scroll").scroll(f);for(var b in MODULE_NAMES){0===sb&&(sb=b);var c=Ya[b]=[$("<div>"),$("<tr>")];c[0].html('<span class="icon" style="font-size:1em;">'+Za[b]+"</span><span>"+MODULE_NAMES[b]+"</span>").addClass("tab").data("module",
b).click(a).appendTo(lb);c[1].append($("<th>").html('<span class="icon">'+Za[b]+"</span> "+MODULE_NAMES[b].replace(/-?<br>-?/g,"")),$('<th class="sr">').html(PROPERTY_SR),$('<th class="sr">').html('<span class="icon"></span>'));Ra.append(c[1]);for(var e in Ua[b]){c=Ua[b][e];var n=Sa(e),w=c[1],Pa=Sa("sr_"+e),r=$('<td class="sr">');c[4]&1&&r.append($('<input type="checkbox" name="sr_'+e+'"'+(Pa?" checked":"")+">").click(h));Pa=$("<td colspan=2>");if(0>w)if($.urlParam("debug"))w=~w;else continue;if(0==
w)c[0]=$('<input type="checkbox" name="'+e+'">').prop("checked",n).click(h),Pa.append($("<label>").append(c[0],c[2]));else if(1==w){c[0]=$('<select name="'+e+'">');var Qa=c[3][1],bb=c[3][2];for(w=0;w<Qa.length;w++)c[0].append($("<option />").val(Qa[w]).html(bb[w]));c[0].val(n);c[0].change(h);Pa.append(c[2],": ",c[0])}else if(2==w)c[0]=$('<input type="text" maxlength="4" name="'+e+'">').val(n).change(h),n=$('<input type="button" style="width: 1.5em;" value="+" name="'+e+'">').click(h),w=$('<input type="button" style="width: 1.5em;" value="-" name="'+
e+'">').click(h),Pa.append(c[2]+"("+c[3][1]+"~"+c[3][2]+")",$("<span>").css("white-space","nowrap").append(w,c[0],n));else if(3==w)c[0]=$('<input type="color" name="'+e+'">').val(n).change(h),Pa.append(c[2],": ",c[0]);else if(4==w){Qa=n.match(/#[0-9a-fA-F]{3}/g)||[];c[0]=$('<input type="text" name="'+e+'" style="display:none">').val(n);n=[];for(w=0;w<Qa.length;w++)n.push($('<input type="color" name="'+e+'" data="'+(w+1)+'" class="mulcolor">').val(x.nearColor(Qa[w],0,!0)).change(h));Pa.append(c[2],
": ",c[0],n)}else 5==w&&($.urlParam("debug")?(c[0]=$('<input type="text" name="'+e+'" readonly>').val(n),Pa.append(c[2]+" ("+e+"): ",c[0])):(c[0]=$('<input type="text" name="'+e+'" style="display:none">').val(n),Pa.append(c[2],c[0])));0<$('strong[data="opt_'+e+'"]').length&&Pa.append($('<span class="click opthelp" data="'+e+'"/>').html(" [?] ").click(h));Ra.append($("<tr>").append(Pa,r))}}Ra.append($('<tr style="height: 10em;">'));Ya[sb][0].click()}function y(){Wa&&(r(),Wa=!1);$(".opthelp").html(" [?] ");
e();x.showDialog([eb,$.noop,void 0,$.noop,[RESET_LANG,function(){for(var a in n){var b=n[a];void 0===b||Sa(a)===b||a.startsWith("session")||(delete w[a],c("property",[a,b,"reset"]))}r();return!1}],[BUTTON_EXPORT.replace(/-?<br>-?/g,""),exportFunc.exportProperties]],"option",BUTTON_OPTIONS.replace(/-?<br>-?/g,""),function(){bb.find('select[name="lang"]').focus().blur();e()})}function Sa(a,b){void 0!=b&&void 0==n[a]&&(n[a]=b,c("property",[a,Sa(a),"set"]));w[a]===n[a]&&delete w[a];return a in w?w[a]:
n[a]}function Oa(a,b,e){for(var n in Ua)if(a in Ua[n]&&void 0!==Ua[n][a][0]&&Ua[n][a][0].val()!=b){Ua[n][a][0].val(b);break}Sa(a)!==b&&(w[a]=b,c("property",[a,Sa(a),e||"modify"]))}function z(){localStorage.properties=JSON.stringify(w)}function Va(){var a=localStorage.properties;void 0!=a&&""!=a&&(w=JSON.parse(a))}var w={},n={},Ua={},Ya={},Wa=!0,Ta=$('<div class="noScrollBar">'),Ra=$('<table class="opttable">'),eb=$('<table class="options" />'),lb=$("<td />"),bb=$("<td />").addClass("tabValue");eb.append($("<tr />").append(lb,
bb.append(Ta.append(Ra))));var sb=0,nb=0,Za={kernel:"",ui:"",color:"",timer:"",scramble:"",stats:"",tools:"",vrc:""};$(function(){Va();x.addButton("property",BUTTON_OPTIONS,y,1);Na("property","property",z)});return{get:Sa,set:Oa,reg:function(a,b,e,f,w,h){Wa=!0;void 0==Ua[a]&&(Ua[a]={});Ua[a][b]=[void 0,e,f,w,h];n[b]=w[0];n["sr_"+b]=2==(h&2);c("property",[b,Sa(b),"set"])},getSProps:function(){var a={},b;for(b in w)0!=b.indexOf("sr_")&&Sa("sr_"+b,!1)&&(a[b]=Sa(b));return a},setSProps:function(a){for(var b in n)0!=
b.indexOf("sr_")&&Sa("sr_"+b,!1)&&(b in a?Oa(b,a[b],"session"):Oa(b,n[b],"session"))},load:Va,reload:r}}(),h=ab.get,Oa=ab.set,Ra=ab.reg;$(function(){var a=LANG_CUR||"en-us";Ra("kernel","lang",1,"Language",[a,(LANG_SET+"|h").split("|").slice(1),(LANG_STR+"|help translation").split("|")]);Oa("lang",a);Ra("kernel","showad",0,PROPERTY_SHOWAD,[!0]);Na("kernel","property",function(b,c){c[1]!=a&&"modify"==c[2]&&("h"==c[1]?confirm("Press OK to redirect to crowdin for translating cstimer")&&(window.location.href=
"https://crowdin.com/project/cstimer"):window.location.href="?lang="+c[1],Oa("lang",a))},/^lang$/);if($.urlParam("lang")){var b="lang="+$.urlParam("lang");document.cookie=b+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/";$.clearUrl("lang")}});var x=function(){function b(a,b,c,e){rb=rb||$("#leftbar");rb.children(".c"+e).click(c).find("span:first").html(b)}function f(){var a=$(this),b=a.data("module");lb[b].button?(a.removeClass("enable"),bb&&lb[b].auto||lb[b].div.stop(!0,!0).fadeOut(200,function(a){return function(){c("button",
[a,!1])}}(b))):(a.addClass("enable"),c("button",[b,!0]),lb[b].div.stop(!0,!0).fadeIn(200),bb&&lb[b].auto&&lb[b].div.hide());lb[b].button=!lb[b].button;Oa(b,lb[b].button)}function x(){var a=$(this).attr("data");Oa(a,!h(a,!1))}function r(){if(document.fullscreenElement)document.exitFullscreen&&document.exitFullscreen();else{var a=$("body")[0];a.requestFullscreen&&a.requestFullscreen()}}function Sa(b,c,e,n){sb=!0;wb.removeClass().addClass("dialog").addClass("dialog"+c);zb.html(e);"option"==c?zb.prepend(Cb.unbind("click").click(r)):
"logo"==c&&zb.prepend(Bb.unbind("click").click(function(){location.reload(!0)}));yb.children().appendTo(a);b[0].appendTo(yb.empty());Fb.empty();2>b.length?yb.css("bottom","0"):yb.css("bottom","2.5em");void 0!=b[1]&&Fb.append(pb.unbind("click").click(function(){$.waitUser.call();b[1]&&b[1]();z()}));void 0!=b[2]&&Fb.append(Eb.unbind("click").click(function(){$.waitUser.call();b[2]&&b[2]();z()}));nb.unbind("click");void 0!=b[3]&&nb.click(function(){$.waitUser.call();b[3]&&b[3]();z()});for(c=4;c<b.length;c++)Fb.append($('<input type="button" class="buttonOK">').val(b[c][0]).unbind("click").click(function(a){return function(){$.waitUser.call();
a()&&z()}}(b[c][1])));wb.stop(!0,!0).fadeTo(100,.98,function(){b[0].focus();n&&n()});nb.stop(!0,!0).fadeTo(100,.25)}function z(){wb.stop(!0,!0).fadeOut(100,function(){sb||(yb.children().appendTo(a),wb.removeClass(),e())});nb.hide();sb=!1}function Wa(){if(!bb){bb=!0;Xa();for(var a in lb)lb[a].auto&&lb[a].button&&lb[a].div.stop(!0,!0).fadeOut(100);c("ashow",!1)}}function Ta(){if(bb){bb=!1;Xa();for(var a in lb)lb[a].auto&&lb[a].button&&lb[a].div.stop(!0,!0).fadeIn(100);c("ashow",!0)}}function Xa(a){var b=
!1,c;for(c in lb)if(lb[c].button){b=!0;break}b&&!bb||a||jQuery.fx.off?rb.stop(!0,!0).fadeTo(200,1):rb.stop(!0,!0).fadeTo(200,.01)}function db(a){for(var b=0;7>b;b++)qb[b]=w(a.substr(4*b,4));Oa("col-font",w(qb[0],0,!0));Oa("col-back",w(qb[1],0,!0));Oa("col-board",w(qb[2],0,!0));Oa("col-button",w(qb[3],0,!0));Oa("col-link",w(qb[4],0,!0));Oa("col-logo",w(qb[5],0,!0));Oa("col-logoback",w(qb[6],0,!0));Va()}function Va(){for(var a="ns"==h("uidesign")||"mtns"==h("uidesign")?Ab[1]:Ab[0],b="#000"==w(qb[0])?
-1:1,c=0;c<Ib.length;c++)a=a.replace("?",w(qb[Ib[c]&15],(Ib[c]<<20>>24)*b));Kb[0].styleSheet?Kb[0].styleSheet.cssText=a:Kb[0].innerHTML=a}function w(a,b,c){var e,n;b=b||0;(n=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/.exec(a))&&(e=[n[1]+n[1],n[2]+n[2],n[3]+n[3]]);(n=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/.exec(a))&&(e=[n[1],n[2],n[3]]);for(a=0;3>a;a++)e[a]=parseInt(e[a],16),e[a]+=b,e[a]=Math.min(Math.max(e[a],0),255),e[a]=Math.round(e[a]/17).toString(16);return"#"+(c?e[0]+e[0]+e[1]+
e[1]+e[2]+e[2]:e[0]+e[1]+e[2])}function n(a){return(a=/^\s*((#[0-9a-fA-F]{3}){7})\s*$/.exec(a))?(db(a[1]),!0):!1}function Ua(){return qb.join("")}function Ya(){"mt"==h("uidesign")||"mtns"==h("uidesign")?$("html").addClass("mtds"):$("html").removeClass("mtds")}function fb(){var a=$(window).width(),b=$(window).height(),c=h("view");(xb="m"==c?!0:"d"==c?!1:1.2>a/b)?$("html").addClass("m"):$("html").removeClass("m")}function Za(a,b){if("property"==a)switch(b[0]){case "color":if("u"!=b[1])if("i"==b[1]||
"e"==b[1]){var c=Ua(),e=prompt(EXPORT_CODEPROMPT,c);e&&e!=c&&!n(e)&&alert(COLOR_FAIL);ab.set("color","u")}else db(tb["r"==b[1]?~~(Math.random()*tb.length):b[1]-1]);break;case "font":"r"==b[1]?$("#container, #multiphase").css("font-family",["lcd","lcd2","lcd3","lcd4","lcd5"][~~(5*Math.random())]):$("#container, #multiphase").css("font-family",b[1]);break;case "col-font":case "col-back":case "col-board":case "col-button":case "col-link":case "col-logo":case "col-logoback":c=Mb.indexOf(b[0].substring(4,
b[0].length));e=b[1];e=w(e);qb[c]!=e&&(qb[c]=e,Oa("color","u"),Va());break;case "zoom":$("html").removeClass("p70 p80 p90 p100 p110 p125 p150").addClass("p"+~~(100*b[1])),$(window).trigger("resize"),Ya();case "view":fb();break;case "uidesign":Ya();Va();break;case "wndScr":cb("scramble","f"==b[1]);break;case "wndStat":cb("stats","f"==b[1]);break;case "wndTool":cb("tools","f"==b[1])}}function cb(a,b){lb[a]?b?lb[a].div.addClass("fixed"):lb[a].div.removeClass("fixed"):$(cb.bind(void 0,a,b))}function eb(){n(window.location.hash)&&
(ab.set("color","u"),$.clearHash())}var lb={},bb=!1,sb=!1,nb,rb,vb=$("<div />"),ub={scramble:"scrHide",tools:"toolHide",stats:"statHide"},wb=$("<div />").addClass("dialog"),zb=$("<div />").addClass("title"),yb=$("<div />").addClass("value"),Fb=$("<div />").addClass("button"),pb=$('<input type="button" class="buttonOK">').val(OK_LANG),Eb=$('<input type="button" class="buttonOK">').val(CANCEL_LANG);wb.append(zb,yb,Fb);var Cb=$('<span style="position:absolute;left:0.5em" class="click">&nbsp;⇱&nbsp;</span>'),
Bb=$('<span style="float:left;" class="click">&nbsp;↻&nbsp;</span>'),Kb=$("<style>").appendTo("head"),Ab="html,body,textarea,#leftbar{color:?;background-color:?}#leftbar{border-color:?}#logo{color:?;border-color:?;background-color:?}.mybutton,.tab,.cntbar{border-color:?}html:not(.m) .mybutton:hover,.mybutton:active,.tab:active,.mywindow,.popup,.dialog{background-color:?}.mybutton.enable,.tab.enable,.cntbar,.selected,table.opttable tr th:first-child,div.helptable h2,div.helptable h3,.sflt div.sgrp{background-color:?}#gray{background-color:?}html:not(.m) .times:hover,html:not(.m) .click:hover,.times:active,.click:active,textarea{background-color:?}.click,.linkb .times.pb{color:?}.mywindow,.popup,.dialog,.table,.table td,.table th,textarea,.tabValue,.opttable td.sr,.sflt .bimg{border-color:?}html:not(.m) #avgstr .click:hover,#avgstr .click:active{background-color:?}select,input[type='button'],input[type='text']{color:?;background:?;border-color:?}input:disabled,table.opttable tr:nth-child(odd) td:first-child,div.helptable li:nth-child(odd){background:?}.mywindow::before,.popup,.dialog,#leftbar::before";
Ab=[Ab+"{box-shadow:0 0 .6em ?}",Ab+"{box-shadow:none}"];var tb="#000#efc#fdd#fbb#00f#ff0#000 #000#ffe#ff9#ff0#00f#fa0#000 #fff#600#668#408#ccf#0ff#000 #fff#000#555#888#aaa#000#aaa #000#fff#ccc#ddd#555#fff#888 #fff#227#9c3#563#580#dad#000 #9aa#023#034#b80#28d#678#034 #678#ffe#eed#ffe#28d#678#eed".split(" "),qb="#000 #efc #fdd #fbb #dbb #ff0 #000".split(" "),Ib=[0,1,545,5,549,6,546,2,3,0,546,4,546,545,0,3826,546,274,0],Mb="font back board button link logo logoback".split(" "),xb=!1;$(function(){nb=
$("#gray");Na("ui","property",Za,/^(?:color|font|col-.+|zoom|view|uidesign|wnd(?:Scr|Stat|Tool))/);Ra("ui","zoom",1,ZOOM_LANG,["1","0.7 0.8 0.9 1 1.1 1.25 1.5".split(" "),"70% 80% 90% 100% 110% 125% 150%".split(" ")]);Ra("ui","font",1,PROPERTY_FONT,["lcd","r Arial lcd lcd2 lcd3 lcd4 lcd5 Roboto".split(" "),PROPERTY_FONT_STR.split("|").concat("Roboto")]);Ra("kernel","ahide",0,PROPERTY_AHIDE,[!0]);Ra("ui","uidesign",1,PROPERTY_UIDESIGN,["n",["n","mt","ns","mtns"],PROPERTY_UIDESIGN_STR.split("|")]);
Ra("ui","view",1,PROPERTY_VIEW,["a",["a","m","d"],PROPERTY_VIEW_STR.split("|")]);Ra("color","color",1,PROPERTY_COLOR,["1","uer12345678".split(""),PROPERTY_COLOR_STR.split("|")]);var a=PROPERTY_COLORS.split("|");Ra("color","col-font",3,a[0],["#000000"]);Ra("color","col-back",3,a[1],["#eeffcc"]);Ra("color","col-board",3,a[2],["#ffdddd"]);Ra("color","col-button",3,a[3],["#ffbbbb"]);Ra("color","col-link",3,a[4],["#0000ff"]);Ra("color","col-logo",3,a[5],["#ffff00"]);Ra("color","col-logoback",3,a[6],["#000000"]);
Ra("color","col-timer",4,"Timer",["#f00#0d0#dd0#080#f00"]);Ra("color","colcube",4,"Cube",["#ff0#fa0#00f#fff#f00#0d0"]);Ra("color","colpyr",4,"Pyraminx",["#0f0#f00#00f#ff0"]);Ra("color","colskb",4,"Skewb",["#fff#00f#f00#ff0#0f0#f80"]);Ra("color","colmgm",4,"Megaminx",["#fff#d00#060#81f#fc0#00b#ffb#8df#f83#7e0#f9f#999"]);Ra("color","colsq1",4,"SQ1",["#ff0#f80#0f0#fff#f00#00f"]);Ra("color","colclk",4,"Clock",["#f00#37b#5cf#ff0#850"]);Ra("color","col15p",4,"15 Puzzle",["#f99#9f9#99f#fff"]);Ra("color",
"colfto",4,"FTO",["#fff#808#f00#0d0#00f#bbb#ff0#fa0"]);Ra("ui","wndScr",1,PROPERTY_WNDSCR,["n",["n","f"],PROPERTY_WND_STR.split("|")]);Ra("ui","wndStat",1,PROPERTY_WNDSTAT,["n",["n","f"],PROPERTY_WND_STR.split("|")]);Ra("ui","wndTool",1,PROPERTY_WNDTOOL,["n",["n","f"],PROPERTY_WND_STR.split("|")]);$(".donate").appendTo(vb);b("donate",BUTTON_DONATE,function(){Sa([vb,0,void 0,0],"stats",BUTTON_DONATE.replace(/-?<br>-?/g,""))},5);rb.appendTo(y).mouseenter(function(){Xa(!0)}).mouseleave(function(){Xa()});
setTimeout(Xa,3E3);wb.appendTo("body");$(window).resize(fb);$(window).bind("hashchange",eb);eb();"https:"!=location.protocol&&(document.title="[UNSAFE] "+document.title);if(navigator.wakeLock&&navigator.wakeLock.request){var c=function(){return navigator.wakeLock.request("screen").then(function(a){DEBUG&&console.log("[ui]","Screen Wake Lock is active");a.addEventListener("release",function(){DEBUG&&console.log("[ui]","Screen Wake Lock is released")})})};c();document.addEventListener("visibilitychange",
function(){"visible"===document.visibilityState&&c()})}});return{addWindow:function(a,b,e,n,w,Pa){e.appendTo(y);e.addClass("mywindow");e.append($('<span class="chide" data="'+ub[a]+'"></span>').click(x));n=h(a,n);rb=rb||$("#leftbar");rb.children(".c"+Pa).addClass(n?"enable":"").data("module",a).click(f).find("span:first").html(b);lb[a]={button:n,div:e,auto:w};n?e.show():e.hide();c("button",[a,n])},addButton:b,showDialog:Sa,hideDialog:z,isDialogShown:function(a){return wb.hasClass("dialog"+a)},exportColor:Ua,
nearColor:w,setAutoShow:function(a){(a=a||!h("ahide"))?Ta():Wa();timer.showAvgDiv(a)},hide:Wa,show:Ta,isPop:function(){return sb},toggleLeftBar:Xa}}(),Wa=function(){function a(a,b,c,e,f){this.data=a;this.callback=b;this.select1=c;this.select2=e;this.reset(f)}function b(a,b,c){for(var e=0;e<a.length;e++)if($.isArray(a[e][1]))for(var f=0;f<a[e][1].length;f++){if(a[e][1][f][1]==b){c(e,f);return}}else if(a[e][1]==b){c(e,null);break}}var c=a.prototype;c.loadSelect2=function(a){e();a=a||0;var b=~~this.select1.prop("selectedIndex");
b=(this.data[b]||[])[1];this.select2.empty();if($.isArray(b)){this.select2.show();for(var c=0;c<b.length;c++)this.select2.append($("<option>").html(b[c][0]).val(b[c][1]));this.select2.prop("selectedIndex",a)}else this.select2.hide();this.onSelect2Change()};c.onSelect1Change=function(){this.loadSelect2()};c.onSelect2Change=function(){this.callback&&this.callback(this.getSelected())};c.getSelIdx=function(){var a=~~this.select1.prop("selectedIndex");if(!$.isArray((this.data[a]||[])[1]))return[a];var b=
~~this.select2.prop("selectedIndex");return[a,b]};c.getSelected=function(){var a=this.getSelIdx(),b=(this.data[a[0]]||[])[1];return 1==a.length?b:(b&&b[a[1]]||[])[1]};c.reset=function(a){a=a||this.getSelected();this.select1.empty();for(var b=0;b<this.data.length;b++)this.select1.append($("<option>").html(this.data[b][0]).val($.isArray(this.data[b][1])?b:this.data[b][1]));this.select1.unbind("change").change(this.onSelect1Change.bind(this));this.select2.unbind("change").change(this.onSelect2Change.bind(this));
a&&this.loadVal(a)};c.loadVal=function(a){var c=this.callback;this.callback=null;b(this.data,a,function(a,b){this.select1.prop("selectedIndex",a);this.loadSelect2(b)}.bind(this));this.callback=c};c.getValName=function(a){var c=null;b(this.data,a,function(a,b){c=this.data[a][0];null!=b&&(c+=">"+this.data[a][1][b][0])}.bind(this));return c};c.getValIdx=function(a){var c=null;b(this.data,a,function(a,b){c=100*a+(null==b?b:99)});return c};return a}();(function(){function a(a,Pa){if("bgImgO"==Pa[0])e.stop(!0,
!0).fadeTo(0,Pa[1]/100);else if("bgImgS"==Pa[0])if("n"==Pa[1])e.hide(),f="n";else if(e.show(),"u"==Pa[1])if("modify"==Pa[2]){var Qa=prompt(BGIMAGE_URL,b);x.exec(Qa)&&2048>Qa.length?(b=Qa,e.attr("src",b),Oa("bgImgSrc",b)):(alert(BGIMAGE_INVALID),Oa("bgImgS",f),ab.reload())}else b=h("bgImgSrc",b),e.attr("src",b);else"f"==Pa[1]?(storage.getKey("bgImgFile").then(function(a){a?e.attr("src",URL.createObjectURL(a)):"modify"!=Pa[2]&&(Oa("bgImgS","n"),ab.reload())}),"modify"==Pa[2]&&(r.unbind("change").change(function(){if(r[0].files.length){var a=
r[0].files[0];e.attr("src",URL.createObjectURL(a));storage.setKey("bgImgFile",a)}}),r.click())):(f=Pa[1],e.attr("src",c[Pa[1]]))}var b="",c=["https://i.imgur.com/X7Xi7D1.png","https://i.imgur.com/K4zbMsu.png","https://i.imgur.com/Fsh6MaM.png"],e,f=0,x=/^((http|https|ftp):\/\/)?(\w(:\w)?@)?([0-9a-z_-]+\.)*?([a-z0-9-]+\.[a-z]{2,6}(\.[a-z]{2})?(:[0-9]{2,6})?)((\/[^?#<>\/\\*":]*)+(\?[^#]*)?(#.*)?)?$/i,r=$('<input type="file" id="imgfile" accept="image/*"/>');$(function(){e=$("#bgImage");Na("bgImage",
"property",a,/^bgImg[OS]$/);Ra("ui","bgImgO",2,BGIMAGE_OPACITY,[25,0,100]);Ra("ui","bgImgS",1,BGIMAGE_IMAGE,["n",["n","u",0,1,2,"f"],BGIMAGE_IMAGE_STR.split("|").slice(0,-1).concat(1,2,3,"upload")])})})();var Ta=/^([\d]+(?:-\d+)?)?([FRUBLDfrubldzxySME])(?:([w])|&sup([\d]);)?([2'])?$/,Za=function(){function a(){c&&clearTimeout(c)}function b(){a();timer.onkeydown({which:28})}var c=0;return{startLongTouch:function(){a();c=setTimeout(b,2E3)},clearLongTouch:a}}(),Sa=!0;$(function(){Ra("kernel","useMilli",
0,PROPERTY_USEMILLI,[!1],1);Ra("kernel","timeFormat",1,PROPERTY_FORMAT,["h",["h","m","s"],["hh:mm:ss.XX(X)","mm:ss.XX(X)","ss.XX(X)"]],1);a.appendTo("body");y.appendTo("body");$(document).keydown(function(a){$.waitUser.call();Sa=!0;c("keydown",a);timer.onkeydown(a);return Sa});$(document).keyup(function(a){Sa=!0;c("keyup",a);timer.onkeyup(a);return Sa});$("#container").bind("touchstart",function(a){$.waitUser.call();$(a.target).is(".click")||(Za.startLongTouch(),e(),timer.onkeydown({which:32}),a.preventDefault&&
a.preventDefault())});$("#container").bind("touchend",function(a){Za.clearLongTouch();$(a.target).is(".click")||(e(),timer.onkeyup({which:32}),a.preventDefault&&a.preventDefault())});$("#container").bind("touch",function(a){$(a.target).is(".click")||a.preventDefault&&a.preventDefault()});$("#touch").remove();$("#container").mousedown(function(a){$.waitUser.call();!$(a.target).is(".click")&&1==a.which&&h("useMouse")&&(timer.onkeydown({which:32}),a.preventDefault&&a.preventDefault())});$("#container").mouseup(function(a){!$(a.target).is(".click")&&
1==a.which&&h("useMouse")&&(timer.onkeyup({which:32}),a.preventDefault&&a.preventDefault())});try{document.cookie="fp="+$.fingerprint()+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"}catch(Pa){}});$(function(){for(var a="properties cachedScr devData wcaData gglData locData".split(" "),b=0;b<a.length;b++)try{JSON.parse(localStorage[a[b]]||"{}")}catch(mb){delete localStorage[a[b]]}var c=[];for(b=1;b<=~~h("sessionN",15);b++)a.push("session"+b);for(b=0;b<localStorage.length;b++){var e=localStorage.key(b);
-1==a.indexOf(e)&&c.push(e)}for(b=0;b<c.length;b++)delete localStorage[c[b]]});return{pretty:z,getProp:h,setProp:Oa,regProp:Ra,getSProps:ab.getSProps,setSProps:ab.setSProps,regListener:Na,addWindow:x.addWindow,addButton:x.addButton,pushSignal:c,showDialog:x.showDialog,hideDialog:x.hideDialog,isDialogShown:x.isDialogShown,exportColor:x.exportColor,clrKey:function(){Sa=!1},temp:a,reprop:ab.reload,loadProp:ab.load,parseScramble:function(a,b,c){a=a||"";c&&(a=h(tools.isCurTrainScramble()?"preScrT":"preScr")+
" "+a);c=[];a=a.split(" ");for(var e,f,x,r=0;r<a.length;r++)if(e=Ta.exec(a[r]),null!=e)if(x="FRUBLDfrubldzxySME".indexOf(e[2]),14<x)e="2'".indexOf(e[5]||"X")+2,x=[0,4,5][x%3],c.push([b.indexOf("FRUBLD".charAt(x)),2,e]),c.push([b.indexOf("FRUBLD".charAt(x)),1,4-e]);else{f=(e[1]||"").split("-");var Pa=~~f[1]||-1;f=12>x?~~f[0]||~~e[4]||("w"==e[3]||5<x)&&2||1:-1;e=(12>x?1:-1)*("2'".indexOf(e[5]||"X")+2);c.push([b.indexOf("FRUBLD".charAt(x%6)),f,e,Pa])}return c},getConjMoves:function(a,b,c){if(!a)return a;
void 0===c&&(c=r());b&&(c=mathlib.CubieCube.rotMulI[0][c||0]);return a.replace(/[URFDLB]/g,function(a){return"URFDLB".charAt(mathlib.CubieCube.rotMulM[c][3*"URFDLB".indexOf(a)]/3)})},getPreConj:r,blur:e,ui:x,TwoLvMenu:Wa,pround:function(a,c){return z(b(a),c)},round:b}});var exportFunc=execMain(function(){function c(){return storage.exportAll().then(function(a){a.properties=mathlib.str2obj(localStorage.properties);nb=JSON.stringify(a)})}function Na(){var a=null;try{a=JSON.parse(this.result)}catch(wb){logohint.push("Invalid Data");return}z(a)}function z(a){var b=0,c=0,e=0;storage.exportAll().then(function(n){for(var f=1;f<=~~kernel.getProp("sessionN");f++){var w=mathlib.str2obj(n["session"+f]||[]),h=mathlib.str2obj(a["session"+f]||[]);w.length!=h.length&&(b++,c+=Math.max(h.length-
w.length,0),e+=Math.max(w.length-h.length,0))}return confirm(IMPORT_FINAL_CONFIRM.replace("%d",b).replace("%a",c).replace("%r",e))?Promise.resolve():Promise.reject()}).then(function(){if("properties"in a){var b=localStorage.devData||"{}",c=localStorage.wcaData||"{}",e=localStorage.gglData||"{}",n=localStorage.locData||"{}";localStorage.clear();localStorage.devData=b;localStorage.wcaData=c;localStorage.gglData=e;localStorage.locData=n;localStorage.properties=mathlib.obj2str(a.properties);kernel.loadProp()}storage.importAll(a).then(function(){location.reload()})},
$.noop)}function r(a){this.files.length&&a.readAsText(this.files[0],"UTF-8")}function b(a){return a&&/^[A-Za-z0-9]+$/.exec(a)}function e(a,b){try{return JSON.parse(localStorage[a])[b]||""}catch(zb){return""}}function a(a){if(a.target===n[0]||a.target===w[0])a=e("wcaData","cstimer_token");else{a=prompt(EXPORT_USERID,e("locData","id"));if(null==a)return;localStorage.locData=JSON.stringify({id:a,compid:e("locData","compid")});kernel.pushSignal("export",["account","locData"])}if(b(a))return a;alert(EXPORT_INVID)}
function y(a){return new Promise(function(b,c){var e=LZString.compressToEncodedURIComponent(nb);$.post("https://cstimer.net/userdata.php",{id:a,data:e},function(a){0==a.retcode?b(a):c(a)},"json").error(c)})}function f(b){var c=a(b);if(c){var e=$(b.target),n=e.html();e.html("...");y(c).then(function(){alert(EXPORT_UPLOADED)},function(){alert(EXPORT_ERROR)}).then(function(){e.html(n)})}}function ab(b){var c=a(b);if(c){var e=$(b.target),n=e.html();e.html("Check File List...");var f=function(){alert(EXPORT_ERROR)},
w=function(){e.html(n)};b=function(a){a=~~a.data;if(0==a)return alert("No Data Found"),w();var b=1;if(kernel.getProp("expp")&&(b=~~prompt("You have %d file(s), load (1 - lastest one, 2 - lastest but one, etc) ?".replace("%d",a),"1"),0>=b||b>a))return w();e.html("Import Data...");$.post("https://cstimer.net/userdata.php",{id:c,offset:b-1},h,"json").error(f).always(w)};var h=function(a){var b=a.retcode;if(0==b)try{z(JSON.parse(LZString.decompressFromEncodedURIComponent(a.data)))}catch(Kb){alert(EXPORT_ERROR)}else 404==
b?alert(EXPORT_NODATA):alert(EXPORT_ERROR);w()};kernel.getProp("expp")?$.post("https://cstimer.net/userdata.php",{id:c,cnt:1},b,"json").error(f).always(w):b({data:1})}}function h(){var a=e("gglData","access_token");a&&(fb.html("Check File List..."),$.ajax("https://www.googleapis.com/drive/v3/files?spaces=appDataFolder&orderBy=modifiedTime desc&q=name%3D%27cstimer.txt%27",{type:"GET",beforeSend:function(b){b.setRequestHeader("Authorization","Bearer "+a)}}).success(function(b,c,e){b=b.files;if(0==b.length)return alert("No Data Found"),
Sa();c=1;if(kernel.getProp("expp")&&(c=~~prompt("You have %d file(s), load (1 - lastest one, 2 - lastest but one, etc) ?".replace("%d",b.length),"1"),0>=c||c>b.length))return Sa();fb.html("Import Data...");$.ajax("https://www.googleapis.com/drive/v3/files/"+b[c-1].id+"?alt=media",{type:"GET",beforeSend:function(b){b.setRequestHeader("Authorization","Bearer "+a)}}).success(function(a){try{a=JSON.parse(LZString.decompressFromEncodedURIComponent(a))}catch(pb){return alert("No Valid Data Found"),Sa()}Sa();
z(a)}).error(function(){alert(EXPORT_ERROR+"\nPlease Re-login");$a()});for(c=10;c<b.length;c++)$.ajax("https://www.googleapis.com/drive/v3/files/"+b[c].id,{type:"DELETE",beforeSend:function(b){b.setRequestHeader("Authorization","Bearer "+a)}})}).error(function(){alert(EXPORT_ERROR+"\nPlease Re-login");$a()}))}function Oa(a){a=a||e("gglData","access_token");if(!a)return Promise.reject("Invalid Account");ob.html("Create File...");return new Promise(function(b,c){$.ajax("https://www.googleapis.com/upload/drive/v3/files?uploadType=resumable",
{type:"POST",contentType:"application/json",data:JSON.stringify({parents:["appDataFolder"],name:"cstimer.txt"}),beforeSend:function(b){b.setRequestHeader("Authorization","Bearer "+a)}}).success(function(a,e,n){a=n.getResponseHeader("location");ob.html("Uploading Data...");$.ajax(a,{type:"PUT",contentType:"text/plain",data:LZString.compressToEncodedURIComponent(nb)}).success(function(a,c,e){Sa();b()}).error(function(a,b,e){$a();c(EXPORT_ERROR)})}).error(function(a,b,e){$a();401==a.status?c("Timeout, Please Re-login"):
c(EXPORT_ERROR)})})}function Ra(){c().then(function(){if(window.Blob){var a=new Blob([nb],{type:"text/plain"});lb.attr("href",URL.createObjectURL(a));lb.attr("download","cstimer_"+mathlib.time2str(new Date/1E3,"%Y%M%D_%h%m%s")+".txt")}kernel.showDialog([ib,0,void 0,0,[EXPORT_ONLYOPT,Wa],[EXPORT_ACCOUNT,Ta]],"export",EXPORT_DATAEXPORT)})}function x(a){a=LZString.compressToEncodedURIComponent(JSON.stringify(a));var b=prompt(EXPORT_CODEPROMPT,a);if(b&&b!=a){try{b=JSON.parse(LZString.decompressFromEncodedURIComponent(b))}catch(zb){return}return b}}
function Wa(){var a=JSON.parse(localStorage.properties),b={},c;for(c in a)c.startsWith("session")||(b[c]=a[c]);b=x(b);if(!b)return!1;a=JSON.parse(localStorage.properties);for(c in a)c.startsWith("session")&&(b[c]=a[c]);localStorage.properties=mathlib.obj2str(b);location.reload();return!1}function Ta(){var a={wcaData:localStorage.wcaData,gglData:localStorage.gglData,locData:localStorage.locData},b=x(a);if(!b)return!1;for(var c in a)b[c]&&(localStorage[c]=b[c],kernel.pushSignal("export",["account",
c]));location.reload();return!1}function Za(){var a=JSON.parse(localStorage.wcaData||"{}");Va.unbind("click");w.unbind("click").removeClass("click");n.unbind("click").removeClass("click");a.access_token?(a=a.wca_me,db.html("WCAID: "+a.wca_id+"<br>Name: "+a.name),Va.click(Pa.bind(void 0,!0)).addClass("click"),w.addClass("click").click(ab),n.addClass("click").click(f)):(db.html(EXPORT_LOGINWCA),Va.click(function(){location.href=hb}).addClass("click"))}function Sa(){var a=JSON.parse(localStorage.gglData||
"{}");Ya.unbind("click");fb.unbind("click").removeClass("click").html(EXPORT_FROMSERV+" (Google)");ob.unbind("click").removeClass("click").html(EXPORT_TOSERV+" (Google)");a.access_token?(a=a.ggl_me,Ua.html("Name: "+a.displayName+"<br>Email: "+a.emailAddress),Ya.click($a.bind(void 0,!0)).addClass("click"),fb.addClass("click").click(h),ob.addClass("click").click(function(){Oa().then(function(){alert("Export Success")},function(a){alert(a)})})):(Ua.html(EXPORT_LOGINGGL),Ya.click(function(){location.href=
kb}).addClass("click"))}function Pa(a){if(!a||confirm(EXPORT_LOGOUTCFM))delete localStorage.wcaData,kernel.pushSignal("export",["account","wcaData"])}function $a(a){if(!a||confirm(EXPORT_LOGOUTCFM))delete localStorage.gglData,kernel.pushSignal("export",["account","gglData"])}function Qa(a,c){if("atexpa"==c[0])if("id"==c[1]){var n=e("locData","id");b(n)&&"modify"!=c[2]||(n=prompt(EXPORT_USERID,n),b(n)?(localStorage.locData=JSON.stringify({id:n,compid:e("locData","compid")}),kernel.pushSignal("export",
["account","locData"])):(null!=n&&alert(EXPORT_INVID),kernel.setProp("atexpa","n")))}else"wca"==c[1]?b(e("wcaData","cstimer_token"))||(alert("Please Login with WCA Account in Export Panel First"),kernel.setProp("atexpa","n")):"ggl"!=c[1]||e("gglData","access_token")||(alert("Please Login with Google Account in Export Panel First"),kernel.setProp("atexpa","n"));else"export"==a&&("wcaData"==c[1]?Za():"gglData"==c[1]&&Sa())}function gb(){var a=kernel.getProp("atexpa","n");"n"!=a&&(c().then(function(){if("id"==
a||"wca"==a){var c="id"==a?e("locData","id"):e("wcaData","cstimer_token");b(c)?y(c).then(function(){logohint.push("Auto Export Success")},function(){logohint.push("Auto Export Failed")}):(logohint.push("Auto Export Abort"),kernel.setProp("atexpa","n"))}else if("f"==a){if(window.Blob){c=new Blob([nb],{type:"text/plain"});var n=$('<a class="click"/>');n.attr("href",URL.createObjectURL(c));n.attr("download","cstimer_"+mathlib.time2str(new Date/1E3,"%Y%M%D_%h%m%s")+".txt");n.appendTo("body");n[0].click();
n.remove()}}else"ggl"==a&&((c=e("gglData","access_token"))?Oa(c).then(function(){logohint.push("Auto Export Success")},function(){logohint.push("Auto Export Failed")}):(logohint.push("Auto Export Abort"),kernel.setProp("atexpa","n")))}),vb=rb=0)}function mb(){"n"!=kernel.getProp("atexpa","n")&&(vb+=1,vb>=kernel.getProp("atexpi",100)&&(rb&&clearTimeout(rb),rb=setTimeout(gb,1E3)))}var hb="https://www.worldcubeassociation.org/oauth/authorize?client_id=63a89d6694b1ea2d7b7cbbe174939a4d2adf8dd26e69acacd1280af7e7727554&response_type=code&scope=public&redirect_uri="+
encodeURI(location.href.split("?")[0]),kb="https://accounts.google.com/o/oauth2/v2/auth?client_id=738060786798-octf9tngnn8ibd6kau587k34au263485.apps.googleusercontent.com&response_type=token&scope=https://www.googleapis.com/auth/drive.appdata&redirect_uri="+encodeURI(location.href.split("?")[0]),ib=$("<div />"),Xa=$('<table class="expOauth expUpDown">'),db=$("<td></td>"),Va=$("<tr>").append('<td class="img"/>',db),w=$('<a class="click"/>').html(EXPORT_FROMSERV+" (csTimer)").click(ab),n=$('<a class="click"/>').html(EXPORT_TOSERV+
" (csTimer)").click(f),Ua=$("<td></td>"),Ya=$("<tr>").append('<td class="img"/>',Ua),fb=$('<a class="click"/>'),ob=$('<a class="click"/>'),cb=$('<input type="file" id="file" accept="text/*"/>'),eb=$('<input type="file" id="file" accept="text/*"/>'),lb=$('<a class="click"/>').html(EXPORT_TOFILE),bb=$('<a class="click"/>').html(EXPORT_FROMSERV+" (csTimer)").click(ab),sb=$('<a class="click"/>').html(EXPORT_TOSERV+" (csTimer)").click(f),nb;Xa.append($("<tr>").append($("<td>").append($('<a class="click"/>').html(EXPORT_FROMFILE).click(function(){cb.click()})),
$("<td>").append(lb)),$("<tr>").append($("<td>").append(bb),$("<td>").append(sb)),$("<tr>").append($("<td colspan=2>").append($('<a class="click"/>').html(EXPORT_FROMOTHER).click(function(){eb.click()}))));var rb,vb=0;$(function(){kernel.regListener("export","time",mb);kernel.regListener("export","property",Qa,/^atexpa$/);kernel.regListener("export","export",Qa,/^account$/);kernel.regProp("kernel","atexpa",1,PROPERTY_AUTOEXP,["n",["n","f","id","wca","ggl"],PROPERTY_AUTOEXP_OPT.split("|")]);kernel.regProp("kernel",
"atexpi",-2,"Auto Export Interval (Solves)",[100,[50,100,200,500],["50","100","200","500"]]);kernel.regProp("kernel","expp",0,PROPERTY_IMPPREV,[!1]);kernel.addButton("export",BUTTON_EXPORT,Ra,2);ib.append("<br>",$('<div class="expOauth">').append($('<table id="wcaLogin">').append(Va),$('<table class="expUpDown">').append($("<tr>").append($("<td>").append(w),$("<td>").append(n)))),$('<div class="expOauth">').append($('<table id="gglLogin">').append(Ya),$('<table class="expUpDown">').append($("<tr>").append($("<td>").append(fb),
$("<td>").append(ob)))),Xa);if(window.FileReader&&window.Blob){var a=new FileReader;a.onload=Na;var b=new FileReader;b.onload=function(){0==stats.importSessions(TimerDataConverter(this.result))&&logohint.push("No session imported")};cb.change(r.bind(cb[0],a));eb.change(r.bind(eb[0],b))}$.urlParam("code")?(db.html(EXPORT_LOGINAUTHED),$.post("oauthwca.php",{code:$.urlParam("code")},function(a){"access_token"in a?(localStorage.wcaData=JSON.stringify(a),kernel.pushSignal("export",["account","wcaData"])):
(alert(EXPORT_ERROR),Pa())},"json").error(function(){alert(EXPORT_ERROR);Pa()}).always(function(){Za();$.clearUrl("code")}),Ra()):Za();if($.hashParam("access_token")){var c=$.hashParam("access_token");Ua.html(EXPORT_LOGINAUTHED);$.get("https://www.googleapis.com/drive/v3/about",{fields:"user",access_token:c},function(a){"user"in a?(localStorage.gglData=JSON.stringify({access_token:c,ggl_me:a.user}),kernel.pushSignal("export",["account","gglData"])):(alert(EXPORT_ERROR),$a())},"json").error(function(a,
b,c){401==a.status?alert("Timeout, Please Re-login"):alert(EXPORT_ERROR);$a()}).always(function(){Sa();$.clearHash()});Ra()}else Sa()});return{exportProperties:Wa,isValidId:b,getDataId:e,logoutFromWCA:Pa,wcaLoginUrl:hb}});var logohint=execMain(function(){function c(){b=void 0;Na()}function Na(){if(y)a.removeClass("hint"),a.html("ABOUT"),b=void 0;else if(void 0==b)if(b=r.shift(),void 0==b)a.removeClass("hint"),a.html("csTimer");else{a.html('<div class="pad" style="width: '+e.width()+'px; ">csTimer</div><span style="font-family: sans-serif; margin: 0 1em 0 1em;">'+b+'</span><div class="pad" style="width: '+e.width()+'px; position: absolute;">csTimer</div>');a.removeClass("hint");var c=.1*(b.length+15)+"s";a.css({"-webkit-animation-duration":c,
"-moz-animation-duration":c,"animation-duration":c});setTimeout(function(){a.addClass("hint")})}}function z(){var a=["Webkit","Moz","O","ms","Khtml"],b=document.createElement("div");if(void 0!==b.style.animationName)return!0;for(var c=0;c<a.length;c++)if(void 0!==b.style[a[c]+"AnimationName"])return!0;return!1}var r=[],b,e,a,y=!1,f=!1;$(function(){e=$("#logo");a=e.children().children();a.bind("oanimationend animationend webkitAnimationEnd",c);var b=$("#about"),h=b.children("h1").appendTo(kernel.temp).html();
e.mouseenter(function(){y=!0;Na()});e.mouseleave(function(){y=!1;Na()});e.click(function(){"https:"!=location.protocol&&confirm("Your access to csTimer is unsafe. Press OK for safe access.")&&(location.protocol="https:");b.show();kernel.showDialog([b,0,void 0,0],"logo",h)});b.hide();kernel.regProp("kernel","useLogo",0,USE_LOGOHINT,[!0],1);f=z()});return{push:function(a){f&&kernel.getProp("useLogo",!0)&&(r.push(a),Na())}}});var timer=execMain(function(c,Na,z,r,b,e){function a(a){a!=x&&(x=a,Xa.renderUtil(),kernel.pushSignal("timerStatus",x))}function y(){var a=z("useIns");if(!0===a||"a"==a)return!0;if(!1===a||"n"==a)return!1;if("b"==a)return null==/^(333ni|444bld|555bld|r3ni)$/.exec(z("scrType"))}function f(b,c,e){if(c<x)for(b=x;b>c;b--)Wa[b]=e-Ta;a(Math.min(c,x)||1)}function ab(a){DEBUG&&console.log("[timer] update timer offset");if($("html").hasClass("m")&&!a){a=$("html").hasClass("toolt");var b=$("body").height(),
c=$("#scrambleDiv").is(":visible")?$("#scrambleDiv").outerHeight():0,e=$("#stats").offset().top||b;a?c+=$("#toolsDiv").is(":visible")?$("#toolsDiv").outerHeight():0:e=Math.min(e,$("#toolsDiv").offset().top||b);a=c+e-b;$("#timer,#rtimer").css({"padding-bottom":Math.max(-a,0),"padding-top":Math.max(a,0)})}else $("#timer,#rtimer").css({"padding-bottom":0,"padding-top":0})}function h(a){$.delayExec("timer_offset",ab.bind(null,a),50)}function Oa(a){var b=a.which;if(17==b)if(a=a.originalEvent,1==a.location||
1==a.keyLocation)b=256;else if(2==a.location||2==a.keyLocation)b=257;return b}var Ra,x=-1,Wa=[],Ta,Za,Sa=[],Pa=[],$a=["#f00","#0d0","#dd0","#080","#f00"],Qa={play:$.noop},gb=Qa,mb=Qa,hb=Qa,kb=Qa;void 0!==window.Audio&&$.waitUser.reg(function(){gb=new Audio("data:audio/mp3;base64,//M4xAATSYYMAUxAAFnLyWJYln7RIAmBMD5PP7MLFh+v9gwMDBZyIn6JW5Ydg3AXBeH59S7vomiV+iILi7veiV///6In/wgoKGI7/+CbwQDH/gg7/5QEP5QMKs/q0cGlVL/ljQ06DnN/5yXn//M4xBEYsl6gAZmQASxhYji4zI0B9iVDm+gt1kQHSPZI/sgyZbMyXMRcn6bsgzk2M2J3LBLCgP5fSQQW7ikxUiqM2RpJiFP/f+Sw5hE80QQb//qbbzpPigBWhVKI71IfgLsD/GxF3etnsPVA//M4xA0YQhbUVc9IAYJsgBw94rEX5Zn32GB9ZJjM7WRsZByUJeG5tRzP///Pf5e/fnvj/6fnaROkqmWIVzyANulyUmy0y1+SM9qVIYeNThdSTt+Mr1dybYemoxoARO2BkwVpYBgP+hht2G3h//M4xAsXug7E9VgwA7hYwgWS6ksd1YZlz3SGJu9Tf9Nnh/QES1GjUas4DDPRsz6mUfOZ3RfFmnfdROWbCX//9enmoPCRJo0UuSOVVU+V6fM7/5rt///nr+Ei8PQumSH7twFhltkx/BAAAFsm//M4xAsYCnKY95k4ABXvCvTG+ZhpjLmGBPUOxY3uVbnhYC4i/qKgAl+s8ajiCcam+fG70NEYoMjT/vwWlhsMgsAjmx1l/gwsIok2JGjyp+n9yZUajYIgaaj///UfPJqlScmqAFAtFAtFottF//M4xAkXS38GX4EoArXUKwIPwD8ku8n7kImb5JCZqG+RnJ9PnezvO6//xA8+8g+tVcRFjauathAUMIAg8OCgodAezJxwoKOn/djpbbVGFFOQUZkIuqDVK7HdP6bt///jx1VoiZeQAK3+k2aJ//M4xAoX40MLHcg4AlCJVEGgLifPIFMGlO////2X6/6SbmA9JMKweDx2qhCSf/1Pfi1TVnqpD/55tUNLr/1qk5p6O2utkSc8w0003od7sk9roq6oceebQ46drqNR5yw+xpV1WIZlWJqoxBjD//M4xAkXIOsTGs4GXjzGCDgkBTJvzm+iZZL5OW2BQRQBdEfi9JG599JMa2qxISC8DMToZwZIgjTOMAiYj/MZDgIJ2fNmfZFBebWkAANCaSsG/c0cwBRxz//sPu///i3+hZvpd//JGObwoVXH//M4xAsXCPseWMMRI8KLBT5VTQZUaR+psYbbV0pcQAUJGtAxqeZjEEUMqUIQMQiIkmrChKdhgrzxluLhsqa6EwWtCAvBcUQPulnoHANyQxiijuwFEl1g/ilr/3+2/SqCVmRApRzgVEsmKcqa//M4xA0S+KLxv0lIAhehSRNXiyJCQgBBEhJYImmHiEERSGUIpCoBh7FgaUDLuoeCsFgayolLVHg0VO6w1LAXLfrLD8l9n2Tv//iIO5R88yRoxfLP60GESF0/nDMiacux54YAujYBIUHPuRFR//M4xCAcMsawAZhQAODgtEJMKyu88L8FgVhXC4IU1e74kCDGBMhIcWIyMSDf3GotCEFUPwGBgxceEQvKHf88kHCckfod///7Hj8w8uSD99yMyQyY3+Z/2c40nLu+VQKFvTbkoA8CijpNUkRQ//M4xA4UohrVn8YoAhQVpc+iJgUeAYryHnlIYPHDplFSoYxSxEVp6loHgsMDxxIWyzGo6lMY0vyiI4xUMpfvZ9v+WVkMpBIPIZyoJCTyKYKh1QEk3DdbkAgLmdaIAcZrvsZeRo1qN88WJe2b//M4xBoU0nq1t08oAkWHSapRERYpS1ZNEOpyCp0Z++Uhjcm/mvnRL9Dv6nRT3br/9a/daqivOpyT8pTzgdIm56oH3p//+tVpyS2yWSSWyWi261igBtlcTNuVMBDryxNmQvt1gMnh+q60Ycbs//M4xCUeAybGX5g4AkzzRWNhIP6tk+xpFjEOmsZHS80mXQ8xH5r/NJFqHl6Hdf4nJElTqabU3/uYY4PRuJghEUkNweCKPgJKVRTen+aNyZDdP////zFJsJA0nEDxuhAcDEgkEYjEkkgkjUJZ//M4xAwXgx7yX4IoAgCeXYgZ9oovHihUXv7Ob1OeQaRxi+hFflYXMXqt/92vlci/8+rttZXrai+ScQFMgn+Zv+1DvnPJDjTnnTd2UUIKCjyD55GfPCQixBcxX/z//BO33bDbW2PRBjsKUcCg//M4xA0UGqL2W8gQAtSYFFPQa5Z7v//KBhBHkIrkVz/oxFc4s7//5SlKvXuV35So77I900dv1///09f/SoslqKxA4cB8FoiEsBLGq7ksGoGKm+utulrklKqGKg0DDy3oNQvNH1uL2O9JZx/n//M4xBsUYQLiWsCMqo2CtyElAU930DGtGeUSEkYJXP///9Mk4BAkwIKORLN/LB2eh3K2nip0RZW3/DX/+HSxP/+s7spJrvAhfRAKXHSVTp/qR1yZwT//SsEOql7ChW9Q/OMbWcqTwk5mHqx3//M4xCgVUiJ0VEjKfJvMY0oqpWoY8RDupfzZhIqlN///0EmUDU9LHg0HOCodwVU8AnQaBUFfrKkt5CppLbfCQZI1EFRdF8qqmnnCQw/NfiYYhS57l/GgCLKyId/5H+VALvUe/75r5Xyx5n8e//M4xDENOQJoHjBKtLM67iEbxmn4ZnCdCLoqFQ9kxWiedXM7lVzLTKYul04P0UbpIFFAR5lxub6eFzRpwGWZebNGnFXF5s0//7s7O+bm5RpxRYJhmKEv//5UKiwtrUxBTUUzLjk5LjVVVVVV//M4xFsTMXHgAHsMHFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV");
mb=new Audio("data:audio/mp3;base64,//M4xAASgV4kFUwQACCAxs7JZPjOBIJicEBEdOxLJ6/6P3mlKTvt5zn5CBCEbI2c7oc57qf/XyEZTnQOBgYGLP/5c/1ygICQEP//EYPh+XBAMQ+Xf/wfbFqFNoEQoEFQEAoFAB+AVB4IMjon//M4xBUaKkrKX48oAFfHUmf89zpuUPoIoH/EBQgAD2Doh8EcCEYrHQOfg5IqAYuEADFAFIHufiYfOwfFyFFBYcHRAO/9XIRpJyy1dxT/+MFHac/xYuZar/fl+6pO7///UgWBacsstohOUoCw//M4xAsYGUbNn8wwAAMnmZ+cDu8djuSCYwYOmCwwdXtktWsTP35ZVoIgRJ5bXk6qf1VUR/f45seXnP2/2UZaUqN4JCMUOZ/QXBZBJxhp0akGam/eSOtFNysFTrfvaRb86SJV/8UPUrp+zSj1//M4xAkWefLEAMMG6O9KX1ERIatSpfyIuESQIBoKtVAipJxzbQQL48CaGZwhwiYAxOflcSz+973gNziP9c/v5/0/PsIzp/FcDcOP1BFm4cWZOejhzT30AwOIEAKnIInmpCW45KAB9YbUZ/KO//M4xA4XWgcGXnnS9wSLgdo+4uIZd65P8BmAVW7Y7RdHPK0MI1NPaSAaisaW6PReado2a3tr53Z8shskyFmpyIk2z3asoILchTb6As0mgosPDodNkqQyWtyzkN9VAOkEPxM62BmWyoOLzh2U//M4xA8Wo0bYVmBTPhU4VyIfetOVNubJtJwyjshE7b2ZpJtlITxc1n/J8XP///PMvDxcXPIwoA2s1hyf////4epZ4XqCenBIuF2M//9QvWE0dqBj/xLGEsUPE0jEFdMCsIqJSpRLJos62sp0//M4xBMZMz68BGoN5Wl11LRQpL29v/6e3///639n///10zdl8ltVyki9kGU76S73MSKDiwVgLnoYqS8dkGQxmRWYCIdkDyemBEJt8sECJ2ygAEKBwu6AY8ogACBZO52rx//7v/////6///////M4xA0WszrIAAhS/P6/8eVUMxJ6xGbUUV4y5GK2pLIUAIUTHlEKNVUUhYRFAMCkbC4YGRWQHAYoRJsg2ygsiFIlCSHN7VkjS8W1rJ2LYOTYG2bOm0LajK9swZdtrdttoNb7LQuMMOlQ3VRo//M4xBEZGU8SWMPS0tIV9Mkfd/1pqxzFRKswhSTgwWwQgQwhCwHACoEwdQyVi3qp5kt5l4gufzHb1ftPqNOHREJQLGOQMB6sJEcosEZvF0clGJo0hQoSQm2gQNrHxOBCKpL/dt/t4P83PyNq//M4xAsWcU8uWU9gA8fiEqmxOxkCxR4akYDKVhCQ5ihISWhdx7Aacl4qxKysejiaMq0RKVKjw1EIlXx7kNyh+YhTYQTIuJ6qH1XMejdTtLLsn1CrEeL7987UtHZP8DNiNI+8XNT2ZP9/uW15//M4xBAYwl6sAZhQAFu1p+7QEoFEBV6g1nEhETM/vMKP1RNwuAaAayAeGj0oc6q/i2hhO+PSRjjjX/FwXAsFAWAaAQzeahzov+TmOYx/5pqev7f9jx4WAgbOC3//B9weLoMQSAOtHnOtlwEc//M4xAwYUX64AY94ADqMNCC4LhWjHbCcscWKI+gkIRT5wve2X0GfevrOLVi2pfW/m3v4L2Die0CG/rPiJDe/fhRLzvp9YpesOBPrWKfGcRgVO0IKLecj34HDowGogX0kfwaqGKkalAB07DTR//M4xAkVUXa4988oA96hJKmadYbXjLDpmV8xPo1k6wuL0PCxnMJGMhSyrzFKVW7Sh0OgUtEsVmKxerFKpf0Q4iHg87wUFGhQV/pgoKCjcgoKahBS/0L/v/XqRrkvl1uuAHPRw8YD6obbAZWC//M4xBIUulrVv0YYAsy5WpzC/FjkoESgR4UTt+wwhRQCEFLAKVdjpuarL+uveMFSGZM6nmZMaEOIWDlW/5/+0r5//SO+5f3a+jXFKZxDY3GQ/s1JvAR00Bwm8O7JGQqoMUFo+y7mpgYG2r2Z//M4xB4bcyaYAY+AANJE6Zpfv7lAmES+t//rfSMzhikn//v2djA6YGqX//rdb6ponW8jSfJ8ibkXHX//3y4gabqQ8Zw1DEgm8QXFPFzCAAEwcY4A9QdIpc9///iBPL////////3//6M9cxlS//M4xA8XA0bMC8A4AsjHnuerv7VVCh9rmHodKIIiiUY7mD6VLmXU0bsJZcfcyYaPisRxwBgOwHnjQeMG4TgVGQhDhUTEwinA9B6g6NmFprmIhYajYcHygjk2V4VncGh/pRDV74GwDcP0CGGr//M4xBITSQr3GHgSwgw5n97yKxUMaHpRn1/7kgiEwoT78OtpAEDCCkDp+fpVl4UQo5o98MXf/aeWXBfInf////X4SBp//7b0qgCIGi9cuqFSVYVE2qotihQ5KWrE2fOIiAMVuhpaCTI7/0Dw//M4xCMUaO6dskgKwLA0WAQe/sCeCz8RJOxE10qrOhphGAQkGn1nexseGgoPBWMWAhKWWRDTIK5UA5ZtAroFgVAmNWRLlixNLy/xbJKikZ29gwqyerczBhX/o6Kibf/0+/1bYxSlaitzCKf3//M4xDAVGx5cFEiKzEdAiCD1rIHqlm6GpKZeWj6Gh46mGkVqGKVhIPHby1Zy8pfCQqpAWOqAYgcSGJhoGRGZHsMxdJkWFmegGRWgKiMBC6xUMgJn8e2aBkUDxrjxVMCirFixoKioo3FW/4sS//M4xDoR2CIEAkiEADQVFG4q38BBIRhkyEm1TEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV");
hb=new Audio("data:audio/mp3;base64,//M4xAATEZoICUEQACAAAAAAVjGPIABjGMYxjGQhG/qc7znAAAQQhCEIBgZzn//nfIT///OACCAgCAIA+D4f1AgCDu/4Pg//BAEAQBD+D4Pg4CDogB8PlAQV/lyZtCAp/v2yc4zIHc/+UWAK//M4xBIZMvKIAZqQAQy6fRSNAxgABQc3y4i7ilB2l4t/20mIGbn//xmCKEgXDEr/+2w43WSBgVCJ/+mtTILdRIHCXMRzx3kQZD/9uympqz5UM0lui5eOEQNP/+r//N5Z/e8LkFm0AKioK/UN//M4xAwX0eawAdhAAUrHCF0Xyt8mH+FmJNO7GaWW0L6MPJXkR+2bc26/iL/uuZmIOmYGTZtbRo0aTfrOMMts4YKnqUUfYjnHGhktCIExYjMNlU6UuxpZy0mb/nM+giFCFaQQgI7LAFMBlv/y//M4xAsX4mbGXsIKnHpCwXElk/qwtoiMigBBRYYAMG6v9geFWqiha0rlTWVobWLi5m11Vmyl9ZVVaWYqKvf+yGsipuxhoULRZkKJGs9SX4wt/f67oUPCYo0ih1Et/Of4NOUpySxlRsf7ZHkf//M4xAoXSl68flmEulpKJzj4HRAjce2at13fUYlVa81Ao7xm5DvuRGYrbf1B1ZtrXZqLSczrZVqtDG85ZwpvKJarJLMnQxnUvK2//CiRQaXEHfWHyDUPGvKdAnuygnfJqiqqAaP/y5zeISIf//M4xAsWMzKwVBhTraE4JQMQ82CUXHSsAKLmIWCKLSuDZK6KLh/93cGBwg5oV5fy3/////5f/cqr14yU5IbSzejWjcl3qChaEaQIIGKuYrKMJvAILCg9DdUmbiO/5EAFgTgHV3kXGB5LzZhY//M4xBEXU0K8CkCTPLCnbWj/8LVfenb+v/9lMdhLkuZ////+h1e0////ZWuiu25JXU4gIdVOhgZI5auESAnYXYPtGLUVNkw7AZqT2UR1DRMOtEiMdJ1sojbqlksl0lij/vaaaWCAoUoOsOYj//M4xBIZWW7yWNMHKgmVLqEkBMvdl3bkthguWpAMJL5dmCBEMMvMFyiijcL0EPwsO/78WKl4Qx4ODxz9SJW37VEMH3l3Vxg5RrFjA8GI/soju6ZTz88GLg1nCLfLsQODdZMRym1ANb0zCehG//M4xAsU4SrBjgvMHF48ZpdH8XJp18bP0yXW60P4TU4WFxtISSN2WosJZ57tW1Wz5kjP9f1uU8oycSAssqs7rDT4iJCUaBn01bMlSOf1AZ5D3f4l4hWAC+VSUH1YSABA8DgzLD94INFxHhUG//M4xBYUgzq09kBFXhnywvc/I/749Tqi5YJPyMGAtWO9FRGXONgyKILofPtDMho9WsaEq/9P/9eZGWRgyPkdzI/V9NCXBB+oZTwx/5ZkohiZfFYWGUnhLK43nk8bR3byGp2OQCms4M5k3dYz//M4xCMUYUqgKsFNDAaLS6pDeQeM4oGqVgmMfV/0df0+e75mZaYIerAmcBUFUJFXNty0TEQM06bMf/jVoBMla1FwGt16zGA8NQefkpVAN0tnbzz1C06KzuUensbO9SV2RyYMOpFsarqJI2lK//M4xDAVQXalH1kYAK/2GsnDmUuZ6l+FJuXQlnlBR08KxEVjwEKmGf/rKgLDpVyG/5QgguSRiMOCQQOSyqMhGmSI0qtdpYGVsYNfgCHScsHWrAQqDrQckoEi/yCXUjSk/79aKf+tajBVaCz7//M4xDojc86+X5loAn+t02X//f7r9bplxtM2HeRmHqp0/93U2b3TlQ8xzl8e6kEFIG6mMEDI31/TTdvYvpM7oJjHGDJURsphZqqLhgSBcUZnkhwkoPw/f//5IHv//x5CJQBtaN/99owR/who//M4xAsVOd7mX8FAAsYFIH97r8ivyxIagvaf/+l6J/+44QAExgoMmpeCDHv///WmHpMo1Q7I9pQ4RgqFjCyGND0Wg0tx4RPLWFfkXvhVMOs//yhIeIwEkmhE332M1sAGU0ua+qxgESxhRLOA//M4xBUTyKKa/ghGBJqX1Y3AokRAV3UCp3w6dBqJRj/wKWbIhICjGB0iGjxLKlfqCvJMO5ICkg6GvhUSkQkBSAFIgsEgyk7VBP1OmAhQMBDCArw0eOsDoSPFSowOkiEYBe0CkAqAkUCIkggI//M4xCQSKB4U0hiCALz3UDICqAtg0sVLFSXCj0ZEJAXrLLHu3niRH8e4iSlS06dh0NJMQU1FMy45OS41qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq");
kb=new Audio("data:audio/mp3;base64,//M4xAASgSo1hUMQAIAgkWD33c9AN9ELeOf9d85/5CanO6HOhCNO//+hGUIQ5lw/EDogh8uH9YYLg+/UCEoCCwfLh/5Q4JDgPwQD6gQcDhwT/WDjidYYH41Hok//1+vs9vT8Aq1dS2NBQo9g//M4xBUaQmL2X4dAALQ2Nv44Xi2W/qxHUQblV/6FjBgoCtYppT/xUXgeJR7XVZl//o6MtmtX//9V+PR4UurefhUiY9P/v+HYURyEZPn2FUyg0IfGvlAQE4nuPo+d//Of6skEArDfvp+iADgm//M4xAsWqQbBZ88wAI8Z4TAwlzUxOFRqMwLkt7PBjyPCAzN57EJBCEQ7AhBUQ9J+MoqjYeqLUyR06dGBVigkZSuiSkjqVA08t/50tzOeqOg0HZglErtv+wsDIx9qsCCVRS8ugA0eMpdgLnQG//M4xA8Y+N7OVg4eHLkxaawiYEAmMzp+pVi0QgyWuSbfaLu2JCPMS48djN2OjQPo8Gm+1MTkQMvbWocLgBnJur3ebwmcLuKCc5bAgWU5jkzRmh7dVJw5hgQGKdTD4rLwfD/TApD6T3GsZ+jo//M4xAoVsMbllgvSOoaajtekUtnRNv4yigtZDycK1KCSjIEDHoXy5yCw8KkJoEIdZuEOmhM5IuAjwKlxUSmGXpCh5P7V0accB0u6n2KTHs/+J5P4YiA5EjpdEQKAAbh9B4FwOix3NYbHKio4//M4xBIWU0bg9jgfcoo1b0Gx3zTUfScea3RH////////j/////6huEM0ydj1nWzrgtgR8MM7g1AmhYF2q9N5b1G5qxk0wODIi0UWAfZJ4g3yTn+q1Q5KzlECQfkaxWsgj0I/RRb/2/v//9Vn//M4xBcaw0rBl0FoAHpf////sy1rrb///X//9kzydJBKkiipmY6O8Yom4cw0Lw+HguQW4KkIodoUAHsGwDYC1iJEUSQl5CFMcBNJIqCiC8hVRGw6AP4LeBlCxD0BcBVDFxaPvr/f9//9/t/L//M4xAsX2j8eX404AtuxjqjEzRIDwC51mFMl6MqmiWPEEbHnxoe62msPLMPPJsxnnBRvKtc+e6/LDrecjN+Y6DpnoPkzmXvmkjvb8z+hpR/FQ0fVKkELosVELRvtIqHf8qqbyaTMDIgnGhw1//M4xAoXiV7Yy494AId4yhnCcPiNF1KghyHyKgIIj2VKqcJqpPDrepyth2GrAcR63Fmhap8aeZtrEPE1J7TUjYiapaTTJjUCZuxLP8534sKLvX6+C4hRnyd0DLYhIa//DdW4SwYlwqtK1Zk1//M4xAoWEa64AZloABtJuengjtCaHvhxARYZEw5I8VtBIRvIKJJF4vLXxLjIzQLyKNFvpHx3Eqo7UmkZGX47RhB7ukbKMdnZt/cwmKNFmSQRnale8WIoQL1XARX18OEI5r/AaBcP1ehjqz4B//M4xBAXUuasAY84AAD8RB4wufax6mmJf3WY046i/zjS3OU//PQ0uPKg3dB48anHo0z5NmGhojnMTOHWGhxU1f/5U51m2tOpr+v//PtY2etxwtYLAVa3Fv/kFQpAY3wDgA//5BYdMtqpa7qi//M4xBEVET7Bt9iAAKTOTxnaPGEt9Kbeq7T3to8ZWvAPiGSMzEig4TiSjIqpKYpmyNlq9dSq+kg99n99MvhEXLFp27/U0OmrQK7fT6LGtJPVSABDsRjmAGH14mKnQlMUeVmib52Ev1vKSCGb//M4xBsU6MK5v1gYAMWnvrRa/zK6+rut4USRcWHkoCREFWw8SVVdAQdBo8HRLeCsc4JPLfaeI5aSK/4dEqVAwHyIVGvtUgAIKPKv/z/gAHxAkOJGEARIEghZOYmCTCxgEhs/SVqNzJ2S2uDz//M4xCYei86plZpoAGGcep4x54vonz6NvVVur6+YKXNqmQSPaS0UEqnQ7amo+j//Q01ejW3/6v+7et+gTDpTX//9PU03WmbvtQLhoMASZsSR0iCmE8GACQf//7f//xwgr9UCSgS2iC2oEfkI//M4xAoUC0LuX8EoAkdUf8b5/89Cd0///qqi5G///yodv50YXKLlExcABN0KYgoJoVxgmKkDpSOAwmKCwFDrGPRuzt6/00Zyr///1+jWOR0U0WKqEAls1wn0iBHCH/MIKAQktE4BU5EiRASW//M4xBgTIbrOXgmKlv/7y8scFEknl8///NZQ6KwiKiQecrf//5qVYxpQ64iCRKFDQVT88VBU7/1Q7/9raCJGRCTaAkYG01QNZFtww1LYo1EwKhNwSArlhI8Ej0OiURAIed1FQEPksJu8qIiS//M4xCoSsGIcFDBGQIqWW7wCAvkbSQiKjDp5YSDgdyxYe4986HQ0HdodEpUiSkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq")});
var ib,Xa=function(){function a(a){a&&void 0==Ya?(requestAnimFrame(c),Ya=1,ib=0):a||void 0==Ya||(Ya=void 0);Oa=ab?Pa:Ua}function c(a){if(0!=x&&-1!=x&&-4!=x&&void 0!=Ya){a=$.now()-Ta;if(-3==x||-2==x&&y())f(Oa,"n"!=z("timeU")?17E3<a?"DNF":15E3<a?"+2":15-~~(a/1E3):TIMER_INSPECT);else{var b=r(0<a?a:0,!0);f(Oa,{u:b,c:b.replace(/([.>])(\d)\d+(<|$)/,"$1$2$3"),s:b.split(".")[0],n:TIMER_SOLVE,i:TIMER_SOLVE}[z("timeU")])}-3==x||-2==x?(Oa!==Pa&&(12E3<=a?f(Pa,'<div style="font-family: Arial;">Go!!!</div>'):8E3<=
a&&f(Pa,'<div style="font-family: Arial;">8s!</div>')),"n"!=z("voiceIns")&&(b=Qa,7900<=a&&7900>ib&&(b="1"==z("voiceIns")?gb:hb),11900<=a&&11900>ib&&(b="1"==z("voiceIns")?mb:kb),b.volume=~~z("voiceVol")/100,b.play())):Oa!==Pa&&f(Pa,"");ib=a;requestAnimFrame(c)}}function e(a){/^[rgy]$/.exec(a)&&(a=$a["rgy".indexOf(a)]);Ua.css("color",a);Pa.css("color",a)}function n(a){f(ab?Pa:Ua,(void 0!=a?r(a,!0):"--:--")+'<div class="insplabel">&#59062;</div><div class="difflabel"/>')}function f(a,b){var c=a===Pa?
1:0;Na[c]!==b&&(Na[c]=b,a.html(b))}function w(a,b){cb=b?cb+a:a}function h(a,b){for(var c=[],e=b;e>a;e--)c.push(r(Wa[e]-~~Wa[e+1],!0));return a==b||1==b||0==c.length?"":'<div style="font-size: 0.65em">='+c.join("<br>+")+"</div>"}var Ua,Pa=$("<div />"),Oa,Ya,Va=$('<div style="line-height:0.6em;" />'),fb=$('<div style="position:relative;font-size:0.3em;">'),Ra=$('<span class="click" style="position:relative;z-index:20;font-family:Arial;">'),cb="",Na=["",""],ab=!1,ib=0,ob,qb=!1;$(function(){Ua=$("#lcd");
$("#multiphase").append(Pa,Va,fb.append(Ra))});return{setRunning:a,color:e,val:n,setEnable:function(a){a?Ua.show():Ua.hide()},append:function(a){f(Pa,Pa.html()+a)},setStaticAppend:w,fixDisplay:function(c,n){var f=!1;0==x?Xa.color("r"):-1==x||-4==x?e(c&&n?y()?"g":"r":""):-2==x?(e(c&&n?"g":""),f=y()):(-3==x?e(c&&n?"y":"r"):e(c?"g":""),f=!0);b.setAutoShow(0==x||-1==x);a(f)},renderUtil:function(a){y()&&-1!=[-1,-4].indexOf(x)&&z("showIns")?(Ua.addClass("insp"),Pa.addClass("insp")):(Ua.removeClass("insp"),
Pa.removeClass("insp"));a&&-1==x?qb=!0:-1!=x&&(qb=!1);a=-2<x&&!qb?h(Math.max(0,x),Math.max(Wa.length-1,x)):"";Va.html(a+cb);if(-1==x||0==x){if(-1!="sb".indexOf(z("input")))Xa.val(Za);else if(Xa.val(qb?0:Wa[1]||0),!qb&&Wa[1]&&Sa&&Sa[1]&&"n"!=z("showDiff")){a=Wa[1]-Sa[1];var b=$(".difflabel").html("("+(0<a?"+":0==a?"":"-")+r(Math.abs(Sa[1]-Wa[1]))+")"),c=z("showDiff");0!=a&&"b"!=c&&b.css("color",0<a==("gr"==c)?$a[3]:$a[4])}if(ob&&ob[4]&&!qb){fb.show();var e="string"==typeof ob[4][1]&&ob[4][1]||tools.getCurPuzzle()||
"333";a="333"==e?recons.getMoveCnt(ob[4][0]):ob[4][2];b=STATS_REVIEW;0<a&&(b=a+" turns<br>"+~~(1E5*a/ob[0][1])/100+" tps");Ra.html(b).unbind("click").click(function(){replay.popupReplay(ob[1],ob[4][0],e)})}else fb.hide()}else fb.hide()},setRecons:function(a){ob=a},reset:function(b,c){ab=b;Ua.empty();Pa.empty();ab?(Ua.removeClass("activetimer"),Pa.addClass("activetimer")):(Ua.addClass("activetimer"),Pa.removeClass("activetimer"));Na[0]="";Na[1]="";w("",!1);n(0,ab);a(!1);db.updatePos(c?!ab:ab)}}}(),
db=function(){function a(a){a&&(n.html(a[0]).unbind("click"),void 0!=a[2]?n.addClass("click").click(function(){a[4](a[2][0],a[2][1],a[2][2],a[2][3])}):n.removeClass("click"),f.html(a[1]).unbind("click"),void 0!=a[3]?f.addClass("click").click(function(){a[4](a[3][0],a[3][1],a[3][2],a[3][3])}):f.removeClass("click"),Wa=a[5]?a[5][0].slice():[0],Sa=a[6]?a[6][0].slice():null,Xa.setRecons(a[5]),Xa.renderUtil())}function b(b,c){x=c;a(x)}var e,n=$('<span class="click">'),f=$('<span class="click">'),w=!0,
h=!1,x;$(function(){e=$("#avgstr").append(n,"<br>",f);c("timer","avg",b)});return{showAvgDiv:function(a){a&&z("showAvg")?w||(e.show(),w=!0):w&&(e.hide(),w=!1)},updatePos:function(b){h!=!!b&&((h=!!b)?e.appendTo("#multiphase"):e.appendTo("#container"),a(x))}}}(),Va=function(){function b(){void 0!=r&&(clearTimeout(r),r=void 0)}function c(){if(-1==x||-3==x)-1==x&&(Xa.reset(Qa),n()),a(-2),r=void 0,Xa.fixDisplay(!0,!0)}function n(){Qa&&(Ua.is(":hidden")&&(Ua.show().appendTo("#container"),Ua.empty().append(Pa)),
Ua.css("height",z("timerSize")*$("#logo").width()/12+"px"),image.llImage.drawImage("GGGGGGGGGGGGGGGGGGGGG",[],Pa[0]))}function f(a,b,c){var e=Sa;255<a?Sa=b?Sa&~(1<<a):Sa|1<<a:c.ctrlKey||(Sa=0);return 32==a||3==e&&255<a||3==Sa}var w=0,h=0,r=void 0,Ua=$("<div>"),Pa=$('<canvas style="height:100%;">'),Qa=!1,Sa=0;return{onkeydown:function(Ua,Pa){if(28!=Ua){var Qa=f(Ua,0,Pa);if(!DEBUG||Qa){var bb=$.now();if(!(200>bb-w)){if(0<x){w=bb;Wa[x]=w-Ta;if(27==Ua){bb=[-1];for(var Sa=1;x<Wa.length;)bb[Sa++]=Wa[x++];
Wa=bb;a(1)}a(x-1);0==x&&(h=w,32!=Ua&&a(-1),Xa.fixDisplay(!1,Qa),e("time",Wa))}else Qa?x==(y()?-3:-1)&&void 0==r?r=setTimeout(c,z("preTime")):-1==x&&y()&&(a(-4),n()):27==Ua&&-1>=x&&(b(),a(-1),Xa.fixDisplay(!1,!1),n());Xa.fixDisplay(!0,Qa);Qa&&kernel.clrKey()}}}},onkeyup:function(c,e){a:{var n=f(c,1,e);var w=$.now();if(n)if(0==x)a(-1);else if(-1==x||-3==x){if(b(),500>w-h){Xa.fixDisplay(!1,n);n=void 0;break a}}else if(-2==x){var r=y()?w-Ta:0;Ta=w;Wa=[17E3<r?-1:15E3<r?2E3:0];a(z("phases"));Qa&&"333"==
tools.getCurPuzzle()&&(w=tools.getCurScramble(),image.llImage.draw(3,w[1],Pa[0]))}else-4==x&&(Ta=w,a(-3));Xa.fixDisplay(!1,n);n&&kernel.clrKey();n=void 0}return n},detectTrigger:f,reset:function(a){void 0!=r&&(clearTimeout(r),r=void 0);w=h=0;(Qa="l"==a)?n():Ua.hide()}}}(),w=function(){var b=$('<textarea id="inputTimer" rows="1" />'),c=0;$(function(){$("#lcd").after(b)});return{setEnable:function(a){a?b.show():b.hide();a?(cb=b,b[0].select(),b.unbind("click").click(function(){b[0].select()})):cb=void 0},
parseInput:function(){var a=/^\s*(?:[\d]+\. )?\(?(DNF)?\(?(\d*?):?(\d*?):?(\d*\.?\d*?)(\+)?\)?(?:=([\d:.+]+?))?(?:\[([^\]]+)\])?\)?\s*(?:   ([^@].*?))?(?:   @(.*?))?\s*$/,n=/^(\d*?):?(\d*?):?(\d*\.?\d*?)$/,f=b.val(),w=$.now();if(/^[\s\n]*$/.exec(f)&&w>c+500)kernel.pushSignal("ctrl",["scramble","next"]),c=w;else for(f=f.split(/\s*[,\n]\s*/),w=0;w<f.length;w++){var h=a.exec(f[w]);if(null!=h&&""!=h[4]){var x=~~Math.round(36E5*Math.floor(h[2])+6E4*Math.floor(h[3])+1E3*parseFloat(h[4]));if(!(0>=x)){if(""==
h[2]&&""==h[3]&&/^\d+$/.exec(h[4])){var r=kernel.getProp("intUN")||20100;x=Math.floor(x/(r%1E4));var Ua=Math.floor(x/1E7);var Pa=Math.floor(x/1E5)%100;var Qa=x%1E5;2E4<r?x=6E4*(60*Ua+Pa)+Qa:1E4<r&&(x=6E4*(100*Ua+Pa)+Qa)}"DNF"==h[1]?r=-1:"+"==h[5]&&2E3<x?(r=2E3,x-=2E3):r=0;Ua=[];if(h[6]){Ua=h[6].split("+").reverse();Pa=x;for(Qa=0;Qa<Ua.length;Qa++){var Sa=n.exec(Ua[Qa]);if(null==Sa){Pa=1E8;break}Pa-=Math.round(36E5*Math.floor(Sa[1])+6E4*Math.floor(Sa[2])+1E3*parseFloat(Sa[3]));Ua[Qa]=Math.max(0,Pa)}Math.abs(Pa)>
10*Ua.length?Ua=[]:Ua.pop()}Pa=h[7]||"";Qa=h[8];Wa=[Pa,Qa,[r,x].concat(Ua)];(x=mathlib.str2time(h[9]))&&Wa.push(x);e("time",Wa);kernel.clrKey()}}}b.val("")},onkeydown:function(b,c){if(28!=b){var e=Va.detectTrigger(b,0,c),n=$.now();!y()||200>n-0||(-3==x||27==b?(a(e?0:-1),Xa.fixDisplay(!1,!1)):e&&-1==x&&a(-4),Xa.fixDisplay(!0,e),e&&kernel.clrKey())}},onkeyup:function(b,c){a:{var e=Va.detectTrigger(b,1,c);var n=$.now();if(y()){if(e)if(0==x)a(-1);else if(-1==x||-3==x){if(500>n-0){Xa.fixDisplay(!1,e);
e=void 0;break a}}else-4==x&&(Ta=n,a(-3));Xa.fixDisplay(!1,e);e&&kernel.clrKey()}e=void 0}return e},clear:function(){b.val("")}}}(),n=function(){function b(b){if(c){var w=$.now();if(b.on){Za=b.time_milli;Xa.renderUtil();if(b.running){if(-3==x||-4==x)f=w-Ta-Za,Xa.reset();Wa=[0];a(1);Ta=w-Za;Xa.fixDisplay(!1,!0)}else-1!=x||!y()||0!=Za||"R"!=b.signalHeader&&"L"!=b.signalHeader?-3!=x&&-4!=x&&(a(-1),Xa.fixDisplay(!1,!0)):(a(-3),Ta=w,Xa.fixDisplay(!1,!0));n.running&&!b.running&&0!=b.time_milli&&(f=y()?
17E3<f?-1:15E3<f?2E3:0:0,Wa=[f,~~Za],e("time",Wa));b.greenLight?Xa.color("g"):b.rightHand&&b.leftHand?Xa.color("r"):-4==x?Xa.color("g"):Xa.color("");Xa.setRunning(-3==x||b.running&&67!=b.signalHeader)}else Za=void 0,a(-1),Xa.fixDisplay(!1,!0);n=b}}var c=!1,n={},f;return{setEnable:function(a){(c="s"==a||"m"==a)?(stackmatutil.setCallBack(b),stackmatutil.init(a,!1).then($.noop,function(){kernel.showDialog([$("<div>Press OK To Connect To Stackmat</div>"),function(){stackmatutil.init(a,!0).then($.noop,
console.log)},0,0],"share","Stackmat Connect")})):stackmatutil.stop()},onkeyup:function(b){var c=$.now();32==b&&-4==x&&(a(-3),Xa.reset(),Ta=c,Xa.fixDisplay(!1,32==b));32==b&&kernel.clrKey()},onkeydown:function(b){var c=$.now();32==b&&-1==x&&y()&&n.on&&0==n.time_milli?(a(-4),Ta=c,Xa.fixDisplay(!0,!0)):27==b&&-1>=x&&(a(-1),Xa.fixDisplay(!0,!1));32==b&&kernel.clrKey()}}}(),Ua=function(){function b(b){if(w)switch(DEBUG&&console.log("[gantimer] timer event received",GanTimerState[b.state],b),b.state){case GanTimerState.HANDS_ON:Xa.color("r");
break;case GanTimerState.HANDS_OFF:Xa.fixDisplay(!1,!0);break;case GanTimerState.GET_SET:Xa.color("g");break;case GanTimerState.IDLE:h=0;0<Za||-1!=x?(Za=0,a(-1),Xa.reset(),Xa.fixDisplay(!1,!0)):-1==x&&y()&&(a(-3),Ta=$.now(),Xa.fixDisplay(!1,!0));Xa.renderUtil();break;case GanTimerState.RUNNING:-3==x&&(h=$.now()-Ta,h=y()?17E3<h?-1:15E3<h?2E3:0:0);Ta=$.now();Xa.reset();Wa=[h];a(1);Xa.fixDisplay(!1,!0);break;case GanTimerState.STOPPED:Za=b.recordedTime.asTimestamp;Wa[1]=Za;a(-1);Xa.renderUtil();Xa.fixDisplay(!1,
!0);e("time",Wa);break;case GanTimerState.DISCONNECT:Za=void 0,a(-1),Xa.renderUtil(),Xa.fixDisplay(!1,!0),c()}}function c(){$.delayExec("ganTimerReconnect",function(){DEBUG&&console.log("[gantimer] attempting to reconnect timer device");n(!0)},2500)}function n(c){GanTimerDriver.connect(c).then(function(){DEBUG&&console.log("[gantimer] timer device successfully connected");GanTimerDriver.setStateUpdateCallback(b);Za=0;a(-1);Xa.reset();Xa.renderUtil();Xa.fixDisplay(!1,!0)})["catch"](function(a){DEBUG&&
console.log("[gantimer] failed to connect to timer",a);c||alert(a)})}function f(){var a=$("<div>").addClass("click").append("If you have enabled WCA inspection in settings,<br>use GAN logo button right on the timer to start/cancel inspection."),b=$("<div>").append("<br><br>").append("<b>Press OK to connect to GAN Smart Timer</b>").append("<br><br>").append(a).append(ib);GanTimerDriver.disconnect().then(function(){kernel.showDialog([b,function(){n()},0,0],"share","GAN Smart Timer")})}var w=!1,h=0;
return{setEnable:function(a){(w="b"==a)?(Za=void 0,f()):GanTimerDriver.disconnect()},onkeyup:function(a){32!=a||GanTimerDriver.isConnected()||f()},onkeydown:$.noop}}(),Ya=function(){function b(b,c,r){if(1!=c){r=r||$.now();if(-3==x||-2==x){if(Qa.isRotation(b)&&!/^(333ni|444bld|555bld)$/.exec(db)){0==c&&Pa[0].push([Qa.move2str(b),0]);return}Oa=y()?r-Ta:0;Ta=r;Ya=0;Wa=[17E3<Oa?-1:15E3<Oa?2E3:0];a(3==Ra&&"r3"!=db?cubeutil.getStepCount(z("vrcMP","n")):1);var Ua=Pa[0];Pa=[];for(var Sa=0;Sa<x;Sa++)Pa[Sa]=
[];Pa[x]=Ua;Va=x;f(Va,Qa.isSolved(z("vrcMP","n")),r);w();Xa.fixDisplay(!1,!0)}if(1<=x){/^(333ni|444bld|555bld)$/.exec(db)&&!Qa.isRotation(b)&&Qa.toggleColorVisible(0==Qa.isSolved(z("vrcMP","n")));0==c&&Pa[x-1].push([Qa.move2str(b),r-Ta]);if(2==c){var bb=Qa.isSolved(z("vrcMP","n"));f(Va,bb,r);w()}2==c&&0==bb&&(Ya+=Qa.moveCnt(),/^r\d+$/.exec(db)&&0!=$a.length?("r3"!=db&&Ra++,n(!0),h()):(Xa.setStaticAppend(""),a(-1),$("#lcd").css({visibility:"unset"}),Xa.fixDisplay(!1,!0),Pa.reverse(),e("time",["",0,
Wa,0,[$.map(Pa,cubeutil.moveSeq2str).filter($.trim).join(" "),Za,Ya]])))}}}function n(a){if((!hb||z("input")!=Sa)&&Na){hb=!0;Sa=z("input");var c=Ra;c||(c=3);c={puzzle:"cube"+c,allowDragging:!0};-1!=["skb","mgm","pyr","sq1","clk"].indexOf(Za)&&(c={puzzle:Za});c.style=z("input");puzzleFactory.init(c,b,cb,function(b,c){Qa=b;c&&!Qa&&(cb.css("height",""),cb.html("--:--"));if(!a||c)Xa.setStaticAppend(""),Xa.fixDisplay(!1,!0),Xa.renderUtil(),Ua(z("timerSize"))})}}function w(){/^r\d+$/.exec(db)&&(Xa.setStaticAppend($a.length+
1+"/"+fb.length),Xa.renderUtil())}function h(){n();var a=$a;/^r\d+$/.exec(db)&&(a=$a.shift().match(/\d+\) (.*)$/)[1],w());a=Qa.parseScramble(a,!0);hb=!1;Qa.applyMoves(a);Qa.moveCnt(!0);Pa=[[]]}function r(a,b){if("scramble"==a||"scrambleX"==a){db=b[0];$a=b[1];var c=tools.puzzleType(db),e=kb.indexOf(c);"cubennn"==c&&(e=b[2]);-1==e||Ra==e&&Za==c||(Ra=e,Za=c,hb=!1,n());(c=b[0].match(/^r(\d)\d*$/))?(fb=$a.split("\n"),Ra!=~~c[1]&&(Ra=~~c[1],hb=!1,n())):fb=null}}function Ua(a){cb.css("height",a*$("#logo").width()/
9+"px");Qa&&Qa.resize()}var Qa,Sa="",Oa=0,Ya=0,Va=1,$a,fb,db,Ra,Za,kb=" sq1 222 333 444 555 666 777 888 999 101010 111111 skb mgm pyr clk".split(" "),hb=!1,cb=$("<div />"),Na=!1;$(function(){c("timer","scramble",r);c("timer","scrambleX",r);cb.appendTo("#container")});return{onkeydown:function(b){if(void 0!=Qa){var c=$.now();if(-1==x)32==b&&(fb&&($a=fb.slice()),h(),y()?(Ta=c,a(-3)):(Xa.val(0),a(-2)),$("#lcd").css({visibility:"hidden"}),Xa.fixDisplay(!1,!0));else if(-3==x||-2==x||1<=x)if(27==b||28==
b){var f=1<=x;Xa.setStaticAppend("");a(-1);n();$("#lcd").css({visibility:"unset"});Xa.fixDisplay(!1,!0);f&&(Pa.reverse(),e("time",["",0,[-1,c-Ta],0,[$.map(Pa,cubeutil.moveSeq2str).filter($.trim).join(" "),Za,Ya]]))}else c={keyCode:help.getMappedCode(b)},Qa.keydown(c);27!=b&&32!=b||kernel.clrKey()}},setEnable:function(a){(Na=a)?cb.show():(cb.hide(),hb=!1)},setSize:Ua,reset:n}}(),fb=function(){function b(){Sa&&(clearTimeout(Sa),Sa=0);Oa&&(clearTimeout(Oa),Oa=0)}function n(c,n,r){var bb=r[1]||$.now(),
Va=fb;fb=c;if(Ua){Qa&&db.setState(c,n,!1);b();var Ra=z("vrcMP","n");if(-1==x){if(!w(fb,!0)){var Za=z("giiSD");"s"==Za?giikerutil.checkScramble()&&h(bb):"n"!=Za&&(Sa=setTimeout(function(){h(bb)},1E3*~~Za));Za=z("giiSM");"n"!=Za&&{x4:/^([URFDLB][ '])\1\1\1/,xi2:/^([URFDLB])( \1'\1 \1'|'\1 \1'\1 )/}[Za].exec(n.join(""))&&(Oa=setTimeout(function(){h(bb)},1E3))}}else if(-3==x||-2==x){Ya=y()?bb-Ta:0;Ta=bb;Wa=[17E3<Ya?-1:15E3<Ya?2E3:0];a(cubeutil.getStepCount(Ra));Pa=[];for(Za=0;Za<x;Za++)Pa[Za]=[];$a=x;
Za=cubeutil.getProgress(Va,Ra);f($a,Za,bb);Xa.reset(Qa);Xa.fixDisplay(!1,!0)}if(1<=x&&(Pa[x-1].push([n[0],r[0],r[1]]),c=cubeutil.getProgress(c,Ra),f($a,c,bb),w(fb,!1)))if(Pa.reverse(),Ra=cubeutil.getPrettyReconstruction(Pa,Ra),giikerutil.setLastSolve(Ra.prettySolve),Wa[1]=bb-Ta,a(-1),giikerutil.reSync(),Xa.fixDisplay(!1,!0),0!=Wa[1]){Ra=giikerutil.tsLinearFix(Pa.flat());c=0;DEBUG&&console.log("time fit, old=",Wa);for(Za=0;Za<Pa.length;Za++)c+=Pa[Za].length,Wa[Pa.length-Za]=0==c?0:Ra[c-1][1];DEBUG&&
console.log("time fit, new=",Wa);Ra=kernel.getConjMoves(cubeutil.moveSeq2str(Ra),!0);e("time",["",0,Wa,0,[Ra,"333"]])}else"t"==z("giiMode")&&kernel.pushSignal("ctrl",["scramble","next"])}}function w(a,b){if(b)return a==mathlib.SOLVED_FACELET&&"n"==z("giiMode");if("t"==z("giiMode")){var c={coll:"cpll",cmll:"cmll",oll:"oll",eols:"oll",wvls:"oll",zbls:"eoll"}[(tools.getCurScramble()||[])[0]];if(c)return 0==cubeutil.getStepProgress(c,a)}return a==mathlib.SOLVED_FACELET}function h(c){b();if(-1==x){if("n"==
kernel.getProp("giiMode")){if(!giikerutil.checkScramble()){var n=scramble_333.genFacelet(fb);e("scramble",["333",kernel.getConjMoves(n,!0),0])}giikerutil.markScrambled()}else giikerutil.markScrambled(!0);a(-2);Ta=c;Xa.reset(Qa);Xa.fixDisplay(!0,!0);z("giiBS")&&metronome.playTick()}}function r(a){(Qa=a)?Va.show():Va.hide();a&&db.resetVRC(!0,!0)}var Ua=!1,Qa=!1,Sa=0,Oa=0,Ya=0,Va=$("<div />"),$a=1,fb=mathlib.SOLVED_FACELET,db=function(){function a(a,f){if((!e||f)&&Qa){var h={puzzle:"cube3",style:z("giiVRC")};
puzzleFactory.init(h,$.noop,Va,function(e,f){w=e;f&&!w&&(Va.css("height",""),Va.html("--:--"));if(!a||f)Xa.fixDisplay(!1,!0),b(z("timerSize"));n.fromFacelet(mathlib.SOLVED_FACELET);if(w){for(var h=w.parseScramble("U2 U2",!0),r=n.ori=0;r<h.length;r++)n.selfMoveStr(w.move2str(h[r]));w.applyMoves(h);h=z("giiOri");c("auto"==h?-1:~~h)}});e=!0}}function b(a){Va.css("height",a*$("#logo").width()/9+"px");w&&w.resize()}function c(a){h=a;if(-1!=h&&n.ori!=h){a=mathlib.CubieCube.rot2str[mathlib.CubieCube.rotMulI[h][n.ori]].split(/\s+/);
for(var b=0;b<a.length;b++)n.selfMoveStr(a[b]);w.applyMoves(w.parseScramble(a.join(" ")))}}var e=!1,n=new mathlib.CubieCube,f=new mathlib.CubieCube,w,h=-1;return{resetVRC:a,setState:function(b,c,h){if(void 0!=w&&Qa){f.fromFacelet(b);h=[];for(var r=!0,x=0;x<c.length;x++)if(h.push(c[x]),f.selfMoveStr(c[x],!0),f.isEqual(n)){r=!1;break}r?(a(!1),n.fromFacelet(mathlib.SOLVED_FACELET),h=scramble_333.genFacelet(b)):h=h.reverse().join(" ");c=h.match(/^\s*$/)||!w?[]:w.parseScramble(kernel.getConjMoves(h,!0,
n.ori));5>c.length?w.addMoves(c):w.applyMoves(c);e=!1;n.fromFacelet(b)}},setOri:c,setSize:b}}();$(function(){Va.appendTo("#container");c("giikerVRC","property",function(a,b){Qa&&(db.resetVRC(!0,!0),db.setState(fb,["U2","U2"],!1))},/^(?:preScrT?|isTrainScr|giiOri)$/)});return{setEnable:function(a){(Ua="g"==a)&&!GiikerCube.isConnected()?(giikerutil.setCallback(n),kernel.showDialog([$("<div>Press OK To Connect To Bluetooth Cube</div>").append(ib),function(){giikerutil.init()["catch"](function(a){DEBUG&&
console.log("[giiker] init failed",a)})},0,0],"share","Bluetooth Connect")):Ua||giikerutil.stop();r(Ua&&"n"!=z("giiVRC"))},onkeydown:function(c){$.now();if(27==c||28==c){if(c=1<=x,b(),a(-1),giikerutil.reSync(),Xa.fixDisplay(!1,!0),c){Wa[0]=-1;Pa.reverse();c=giikerutil.tsLinearFix(Pa.flat());var n=0;DEBUG&&console.log("time fit, old=",Wa);for(var f=0;f<Pa.length;f++)n+=Pa[f].length,Wa[Pa.length-f]=0==n?0:c[n-1][1];DEBUG&&console.log("time fit, new=",Wa);c=kernel.getConjMoves(cubeutil.moveSeq2str(c),
!0);e("time",["",0,Wa,0,[c,"333"]])}}else 32==c&&z("giiSK")&&(w(fb,!0)||-1==x&&h($.now()))},setVRC:r,setSize:db.setSize}}(),ob="input phases preScrT? isTrainScr giiOri useMilli showDiff smallADP giiVRC col-timer".split(" ");$(function(){Ra=$("#container");ib=$(".instruction").appendTo(kernel.temp);c("timer","property",function(b,c){"timerSize"==c[0]&&(Ra.css("font-size",c[1]+"em"),Ya.setSize(c[1]),fb.setSize(c[1]));"timerSize"!=c[0]&&"phases"!=c[0]||$("#multiphase").css("font-size",z("timerSize")/
Math.max(z("phases"),4)+"em");"input"==c[0]&&(n.setEnable(c[1]),fb.setEnable(c[1]),Ua.setEnable(c[1]));"showAvg"==c[0]&&db.showAvgDiv(c[1]);"giiVRC"==c[0]&&"set"!=c[2]&&fb.setEnable(z("input"));0<=["toolPos","scrHide","toolHide","statHide"].indexOf(c[0])&&h(!1);0<=["useIns","scrType","showIns"].indexOf(c[0])&&Xa.renderUtil();"col-timer"==c[0]&&($a=(c[1]||"#f00#0d0#dd0#080#f00").match(/#[0-9a-fA-F]{3}/g));if(-1!=$.inArray(c[0],ob)){var e=z("input");a(-1);Ya.setEnable("v"==e||"q"==e);Ya.reset();Xa.setEnable("i"!=
e);Xa.reset(/^[ilvq]$/.exec(e)||"g"==e&&"n"!=z("giiVRC"),"i"==e);Va.reset(e);w.setEnable("i"==e);Xa.renderUtil();Xa.fixDisplay(!1,!0)}},/^(?:input|phases|scrType|preScrT?|isTrainScr|giiOri|timerSize|showAvg|showDiff|useMilli|smallADP|giiVRC|toolPos|scrHide|toolHide|statHide|useIns|showIns|col-timer)$/);c("timer","ashow",function(a,b){h(!b)});c("timer","button",h.bind(null,!1));c("timer","session",h.bind(null,!1));c("timer","scrfix",h.bind(null,!1));$(window).bind("resize",h.bind(null,!1));Na("vrc",
"vrcSpeed",1,PROPERTY_VRCSPEED,[100,[0,50,100,200,500,1E3],"∞ 20 10 5 2 1".split(" ")],1);Na("vrc","vrcOri",-2,"PROPERTY_VRCORI",["6,12",["6,12","10,11"],["UF","URF"]],1);Na("vrc","vrcMP",1,PROPERTY_VRCMP,["n","n cfop fp cf4op cf4o2p2 roux".split(" "),PROPERTY_VRCMPS.split("|")],1);Na("vrc","vrcAH",1,PROPERTY_VRCAH,["01",["00","01","10","11"],PROPERTY_VRCAHS.split("|")],1);Na("vrc","giiMode",1,PROPERTY_GIIMODE,["n",["n","t"],PROPERTY_GIIMODES.split("|")],1);Na("vrc","giiVRC",1,PROPERTY_GIIKERVRC,
["v",["n","v","q","ql","q2"],["None","Virtual","qCube","qLast","q2Look"]],1);Na("vrc","giiOri",1,PROPERTY_GIIORI,["auto","auto 0 3 2 1 4 5 6 7 23 14 19 8 17 10 21 12 11 22 13 18 15 16 9 20".split(" "),"auto;(UF);(UR) y;(UB) y2;(UL) y';(DF) z2;(DL) z2 y;(DB) z2 y2;(DR) z2 y';(RF) z';(RD) z' y;(RB) z' y2;(RU) z' y';(LF) z;(LU) z y;(LB) z y2;(LD) z y';(BU) x';(BR) x' y;(BD) x' y2;(BL) x' y';(FD) x;(FR) x y;(FU) x y2;(FL) x y'".split(";")],1);Na("vrc","giiSD",1,PROPERTY_GIISOK_DELAY,["s","2345ns".split(""),
PROPERTY_GIISOK_DELAYS.split("|")],1);Na("vrc","giiSK",0,PROPERTY_GIISOK_KEY,[!0],1);Na("vrc","giiSM",1,PROPERTY_GIISOK_MOVE,["n",["x4","xi2","n"],PROPERTY_GIISOK_MOVES.split("|")],1);Na("vrc","giiBS",0,PROPERTY_GIISBEEP,[!0],1);Na("vrc","giiRST",1,PROPERTY_GIIRST,["p",["a","p","n"],PROPERTY_GIIRSTS.split("|")]);Na("vrc","giiAED",0,PROPERTY_GIIAED,[!1]);Na("timer","useMouse",0,PROPERTY_USEMOUSE,[!1],1);Na("timer","useIns",1,PROPERTY_USEINS,["n",["a","b","n"],PROPERTY_USEINS_STR.split("|")],1);Na("timer",
"showIns",0,PROPERTY_SHOWINS,[!0],1);Na("timer","voiceIns",1,PROPERTY_VOICEINS,["1",["n","1","2"],PROPERTY_VOICEINS_STR.split("|")],1);Na("timer","voiceVol",2,PROPERTY_VOICEVOL,[100,1,100],1);Na("timer","input",1,PROPERTY_ENTERING,["t","tismvgqbl".split(""),PROPERTY_ENTERING_STR.split("|")],1);Na("timer","intUN",1,PROPERTY_INTUNIT,[20100,[1,100,1E3,10001,10100,11E3,20001,20100,21E3],"X X.XX X.XXX X:XX X:XX.XX X:XX.XXX X:XX:XX X:XX:XX.XX X:XX:XX.XXX".split(" ")],1);Na("timer","timeU",1,PROPERTY_TIMEU,
["c",["u","c","s","i","n"],PROPERTY_TIMEU_STR.split("|")],1);Na("timer","preTime",1,PROPERTY_PRETIME,[300,[0,300,550,1E3],["0","0.3","0.55","1"]],1);Na("timer","phases",2,PROPERTY_PHASES,[1,1,10],3);Na("kernel","showAvg",0,SHOW_AVG_LABEL,[!0],1);Na("kernel","showDiff",1,SHOW_DIFF_LABEL,["rg",["rg","gr","b","n"],SHOW_DIFF_LABEL_STR.split("|")],1);Na("ui","timerSize",2,PROPERTY_TIMERSIZE,[20,1,100],1);Na("ui","smallADP",0,PROPERTY_SMALLADP,[!0],1);$a=kernel.getProp("col-timer","#f00#0d0#dd0#080#f00").match(/#[0-9a-fA-F]{3}/g)});
var cb;return{onkeydown:function(a){if(!b.isPop()){var c=Oa(a),e=$(document.activeElement);if(e.is("input, textarea, select"))if("i"==z("input")&&"inputTimer"==e.prop("id"))13==c&&w.parseInput();else return;else e.blur();-1==x&&27==c&&Xa.renderUtil(!0);switch(z("input")){case "t":case "l":Va.onkeydown(c,a);break;case "s":n.onkeydown(c,a);break;case "b":Ua.onkeydown(c,a);break;case "i":w.onkeydown(c,a);break;case "v":case "q":Ya.onkeydown(c,a);break;case "g":fb.onkeydown(c,a)}}},onkeyup:function(a){if(!b.isPop()){var c=
Oa(a),e=$(document.activeElement);if(e.is("input, textarea, select"))if("i"==z("input")&&"inputTimer"==e.prop("id"))13==c&&w.clear();else return;else e.blur();switch(z("input")){case "t":case "l":Va.onkeyup(c,a);break;case "s":n.onkeyup(c,a);break;case "b":Ua.onkeyup(c,a);break;case "i":w.onkeyup(c,a)}}},showAvgDiv:db.showAvgDiv,refocus:function(){void 0!=cb?cb.focus():document.activeElement&&document.activeElement.blur&&document.activeElement.blur()},getStatus:function(){return x},getCurTime:function(a){return 0<
x?(a||$.now())-Ta:0},getStartTime:function(){return Ta||$.now()}}},[kernel.regListener,kernel.regProp,kernel.getProp,kernel.pretty,kernel.ui,kernel.pushSignal]);var scrMgr=function(c,Na){function z(a,b,e){a=a||[[""]];b=b||[""];e=e||0;for(var f=0,h=-1,r=[],y,z,Za=0;Za<e;Za++){do y=c(a.length),z=c(a[y].length),y!=h&&(f=0,h=y);while(0!=(f>>z&1));f|=1<<z;a[y][z].constructor==Array?r.push(Na(a[y][z])+Na(b)):r.push(a[y][z]+Na(b))}return r.join(" ")}function r(c,z,h){DEBUG&&console.log("[regscr]",c);if($.isArray(c))for(h=0;h<c.length;h++)b[c[h]]=z;else b[c]=z,void 0!=h&&(e[c]=h[0],a[c]=h[1],y[c]=h[2]);return r}var b={blank:function(){return"N/A"}},e={},a={},y={};
return{reg:r,scramblers:b,filters:e,probs:a,imgGens:y,mega:z,formatScramble:function(a){return a.replace(/[$#]\{([^\}]+)\}/g,function(a,c){if("$"==a[0]){var e=[c];"["==c[0]&&(e=JSON.parse(c));return b[e[0]].apply(this,e)}return"#"==a[0]?z.apply(this,JSON.parse("["+c+"]")):""})},rndState:function(a,b){if(void 0!=b){var c=b.slice();void 0==a&&(a=c);if(0==b[0])return a.slice();for(var e=0;e<a.length;e++)a[e]||(c[e]=0);return mathlib.rndProb(c)}},fixCase:function(a,b){return void 0==a?mathlib.rndProb(b):
a}}}(mathlib.rn,mathlib.rndEl),scramble=execMain(function(c,Na){function z(){kernel.blur();kernel.pushSignal("scrambling",cb);n.html(SCRAMBLE_SCRAMBLING+"...");rb=!cb||/^(remote|input$)/.exec(cb)?rb:cb;vb||(bb=cb,sb=eb,nb=lb);vb=!1;sb&&ub.addClass("click").unbind("click").click(r);cb=hb.getSelected();lb=~~w.val();bb!=cb&&kernel.setProp("scrType",cb);eb="";requestAnimFrame(y)}function r(){vb=!0;n.html(a(bb,sb,nb,!0));ub.removeClass("click").unbind("click");void 0!=sb&&kernel.pushSignal("scrambleX",
a(bb,sb,nb))}function b(){vb?(vb=!1,n.html(a(cb,eb,lb,!0)),ub.addClass("click").unbind("click").click(r),kernel.pushSignal("scrambleX",a(cb,eb,lb))):z()}function e(){if(eb){var a=kernel.getProp("scrClk","n");"c"==a?$.clipboardCopy(n.text())&&logohint.push("scramble copied"):"+"==a&&b()}}function a(a,b,c,e,f){b=b||"";c=c||0;var w=/^\$T([a-zA-Z0-9]+)(-[0-9]+)?\$\s*(.*)$/.exec(b);w&&(a=w[1],b=w[3],c=~~w[2]);return e?(a=b.replace(/~/g,"").replace(/\\n/g,"\n").replace(/`([^`]*)`/g,"$1").length,a=kernel.getProp("scrASize")?
Math.max(.25,Math.round(20*Math.pow(50/Math.max(a,10),.3))/20):1,n.css("font-size",a+"em"),DEBUG&&console.log("[scrFontSize]",a),b.replace(/~/g,"&nbsp;").replace(/\\n/g,"\n").replace(/`([^`]*)`/g,f||kernel.getProp("scrKeyM",!1)?"<u>$1</u>":"$1")):[a,b.replace(/~/g,"").replace(/\\n/g,"\n").replace(/`([^`]*)`/g,"$1"),c]}function y(){h();eb?(eb=eb.replace(/(\s*)$/,""),n.html(a(cb,eb,lb,!0)),kernel.pushSignal("scramble",a(cb,eb,lb))):n.html(SCRAMBLE_SCRAMBLING+"... ")}function f(a,b,c){zb&&!a[0].startsWith("nocache_")&&
(csTimerWorker&&csTimerWorker.getScramble?yb=yb||csTimerWorker.getScramble(a,function(a,b){DEBUG&&console.log("[scrcache]",a+" cached by csTimerWorker");ab(a,b)}.bind(void 0,b)):c||(yb=yb||setTimeout(function(a,b){var c=Za[b[0]];ab(a,c.apply(c,b))}.bind(void 0,b,a),500)))}function ab(a,b){var c=JSON.parse(localStorage.cachedScr||null)||{};$.isArray(c)&&(c={});c[a]=b;localStorage.cachedScr=JSON.stringify(c);yb=0}function h(){if(cb){eb="";var a=Ya[cb]||cb;if("input"==a)eb=pb.next();else if(pb.clear(),
a.startsWith("remote"))eb=Fb.next(a);else if(Fb.clear(),a in Za){var b=JSON.parse(localStorage.cachedScr||null)||{},c=JSON.stringify([a,lb,fb[1]]);zb&&c in b&&!a.startsWith("nocache_")?(eb=b[c],delete b[c],localStorage.cachedScr=JSON.stringify(b)):eb=Za[a](a,lb,Bb(fb[1],Pa[a]));f([a,lb,Bb(fb[1],Pa[a])],c)}else requestAnimFrame(y)}}function Oa(){kernel.blur();var a=hb.getSelIdx();a=scrdata[a[0]][1][a[1]][2];w.val(Math.abs(a));w[0].disabled=0>=a;a=hb.getSelected();fb=JSON.parse(kernel.getProp("scrFlt",
JSON.stringify([a,Sa[a]])));kb[0].disabled=w[0].disabled&&!(a in Sa);fb[0]!=a&&(fb=[a,Sa[a]&&mathlib.valuedArray(Sa[a].length,1)],kernel.setProp("scrFlt",JSON.stringify(fb),"session"))}function Ra(){Oa();z()}function x(){function a(){if(cb in Sa){for(var a=mathlib.valuedArray(Sa[cb].length,1),c=!1,n=0;n<b.length;n++)b[n][0].checked?c=!0:a[n]=0;c?(fb=[cb,a],a=JSON.stringify(fb),kernel.getProp("scrFlt")!=a&&(e=!0,kernel.setProp("scrFlt",a))):alert(SCROPT_EMPTYALT);e&&z()}}Xa.empty();var b=[],c=[],e=
!1;if(cb in Sa){var n=Sa[cb],f=$a[cb],w=n;fb[0]==cb&&(w=fb[1]||n);Xa.append("<br>",db,Va,"<br><br>");for(var h={},r=0;r<n.length;r++){var x=n[r].indexOf("-");-1==x?h[n[r]]=[r]:(x=n[r].slice(0,x),h[x]=h[x]||[],h[x].push(r))}for(r=0;r<n.length;r++){x=$('<input type="checkbox">').val(r);w[r]&&(x[0].checked=!0);b.push(x);x=$("<label>").append(x,n[r]);if(f){var Ua=$("<canvas>");Ua.width("5em");Ua.height("5em");x.append("<br>",Ua);f(r,Ua);x.addClass("bimg")}c.push(x)}var Pa=function(a){var c=0;$.each(h[a],
function(a,e){c+=b[e][0].checked?1:0});return c+"/"+h[a].length},Qa;for(Qa in h)1==h[Qa].length&&Xa.append(c[h[Qa][0]]);for(Qa in h)1!=h[Qa].length&&Xa.append($("<div>").attr("data",Qa).append($('<div class="sgrp">').append($("<span>").html(Qa+" "+Pa(Qa))," | ",$('<span class="click">').html(SCROPT_BTNALL).click(function(){var a=$(this).parent().parent().attr("data");$.each(h[a],function(a,c){b[c][0].checked=!0});$(this).parent().children().first().html(a+" "+Pa(a))})," | ",$('<span class="click">').html(SCROPT_BTNNONE).click(function(){var a=
$(this).parent().parent().attr("data");$.each(h[a],function(a,c){b[c][0].checked=!1});$(this).parent().children().first().html(a+" "+Pa(a))})," | ",$('<span class="click">[+]</span>').click(function(){$(this).parent().next().toggle()})),$("<div>").append($.map(h[Qa],function(a){b[a].change(function(){var a=$(this).parent().parent().parent().attr("data");$(this).parent().parent().parent().find("span:first").html(a+" "+Pa(a))});return c[a]}))));db.unbind("click").click(function(){for(var a=0;a<b.length;a++)b[a][0].checked||
(b[a][0].checked=!0),b[a].change()});Va.unbind("click").click(function(){for(var a=0;a<b.length;a++)b[a][0].checked&&(b[a][0].checked=!1),b[a].change()})}kernel.showDialog([ib,a,null,a],"scropt",SCROPT_TITLE)}function Wa(c,e){"time"==c?Eb?z():(n.empty(),kernel.pushSignal("scramble",["-","",0])):"property"==c?"scrSize"==e[0]?Ua.css("font-size",e[1]/7+"em"):"scrMono"==e[0]?Qa.css("font-family",e[1]?"Monospace":"Arial"):"scrType"==e[0]?e[1]!=hb.getSelected()&&(hb.loadVal(e[1]),Ra()):"scrLim"==e[0]?e[1]?
Ua.addClass("limit"):Ua.removeClass("limit"):"scrAlign"==e[0]?"c"==e[1]?Qa.css("text-align","center"):"l"==e[1]?Qa.css("text-align","left"):"r"==e[1]&&Qa.css("text-align","right"):"scrFast"==e[0]?(Ya["444wca"]=e[1]?"444m":"444wca","444wca"==cb&&z()):"scrKeyM"==e[0]?n.html(vb?a(bb,sb||"",nb||0,!0):a(cb,eb||"",lb,!0)):"scrHide"==e[0]&&(e[1]?gb.hide():gb.show()):"button"==c&&"scramble"==e[0]?(Eb=e[1])&&""==n.html()&&z():"ctrl"==c&&"scramble"==e[0]?"last"==e[1]?r():"next"==e[1]&&b():"scrfix"==c&&e&&n.html(a(cb,
e,lb,!0,!0))}function Ta(a,b){for(var c=0;c<scrdata.length;c++)for(var e=0;e<scrdata[c][1].length;e++)if(scrdata[c][1][e][1]==a){b(c,e);return}}var Za=scrMgr.scramblers,Sa=scrMgr.filters,Pa=scrMgr.probs,$a=scrMgr.imgGens,Qa=$('<div id="scrambleDiv"/>'),gb=$("<div />").addClass("title"),mb=[$("<select />"),$("<select />")],hb=new kernel.TwoLvMenu(scrdata,Ra,mb[0],mb[1],"333"),kb=$('<input type="button" class="icon">').val(""),ib=$("<div>"),Xa=$('<div class="sflt">'),db=$('<input type="button">').val(SCROPT_BTNALL),
Va=$('<input type="button">').val(SCROPT_BTNNONE),w=$('<input type="text" maxlength="3">'),n=$("<div>"),Ua=$('<div id="scrambleTxt"/>'),Ya={"333oh":"333","333ft":"333"},fb="",ob=$("<textarea />"),cb,eb,lb=0,bb,sb,nb=0,rb="333",vb=!1,ub=$("<span />").html(SCRAMBLE_LAST),wb=$("<span />").addClass("click").html(SCRAMBLE_NEXT).click(b),zb=!0,yb=0;$(function(){if(csTimerWorker&&csTimerWorker.getScramble){var a=['["444wca",40,null]'],b=JSON.parse(localStorage.cachedScr||null)||{};$.isArray(b)&&(b={});for(var c=
0;c<a.length;c++)a[c]in b||setTimeout(f.bind(void 0,JSON.parse(a[c]),a[c],!0),2500+~~(5E3*Math.random()))}});var Fb=function(){function a(){kernel.setProp("scrType",rb)}function b(a){if(!$.isArray(a))return!1;c=a;return 0!=c.length}var c=[];return{next:function(e){for(var n=null;!n&&0!=c.length;)n=c.shift();if(n)return n;"remoteComp"==e?window.onlinecomp?onlinecomp.getScrambles().then(function(c){b(c)?requestAnimFrame(y):a()},a):a():"remoteBattle"==e?window.battle?battle.getScrambles().then(function(c){b(c)?
requestAnimFrame(y):a()},a):a():"remoteURL"==e&&$.getJSON("https://cstimer.net/testRemoteScramble.php",function(c){b(c)?requestAnimFrame(y):a()}).error(a);return""},clear:function(){c=[]}}}(),pb=function(){function a(){var a=ob.val();if(a.match(/^\s*$/))a=!1;else{c=[];a=a.split("\n");for(var b=0;b<a.length;b++){var e=a[b];null==e.match(/^\s*$/)&&c.push(e.replace(/^\d+[\.\),]\s*/,""))}a=0!=c.length}a?y():kernel.setProp("scrType",rb)}function b(){kernel.setProp("scrType",rb)}var c=[];return{next:function(){for(var e=
null;!e&&0!=c.length;)e=c.shift();if(e)return e;ob.val("");kernel.showDialog([ob,a,b],"input",SCRAMBLE_INPUT);return""},clear:function(){c=[]}}}(),Eb=!1,Cb=function(){function a(){var a=~~n.val();x="";for(var b=eb,c=w.val(),e=0;e<a;e++)h(),x+=c.replace("1",e+1)+eb+"\n";eb=b;f.text(x);f.select()}function b(a){if(x){a=new Blob([x],{type:"text/plain"});var b=$('<a class="click"/>').appendTo("body");b.attr("href",URL.createObjectURL(a));b.attr("download","Scrambles_"+mathlib.time2str(new Date/1E3,"%Y%M%D_%h%m%s")+
".txt");b[0].click();b.remove()}}var c=$("<div />").css("text-align","center").css("font-size","0.7em"),e=$("<span />").addClass("click").html(SCRGEN_GEN),n=$('<input type="text" maxlength="3">').val(5),f=$('<textarea rows="10" style="width: 100%" readonly />'),w=$('<select><option value="1. ">1. </option><option value="1) ">1) </option><option value="(1) ">(1) </option><option value=""></option></select>'),r=$('<span class="click">').html("Download");c.append(SCRGEN_NSCR,n,"&nbsp;",SCRGEN_PRE).append(w,
"<br>",e," | ",r,"<br>",f);var x="";return function(n){n&&(n.empty().append(c.width(Qa.width()/2)),w.unbind("change").change(kernel.blur),e.unbind("click").click(a),r.unbind("click").click(b))}}(),Bb=scrMgr.rndState;$(function(){kernel.regListener("scramble","time",Wa);kernel.regListener("scramble","property",Wa,/^scr(?:Size|Mono|Type|Lim|Align|Fast|KeyM|Hide)$/);kernel.regListener("scramble","button",Wa,/^scramble$/);kernel.regListener("scramble","ctrl",Wa,/^scramble$/);kernel.regListener("scramble",
"scrfix",Wa);kernel.regProp("scramble","scrSize",2,PROPERTY_SCRSIZE,[15,5,50],1);kernel.regProp("scramble","scrASize",0,PROPERTY_SCRASIZE,[!0],1);kernel.regProp("scramble","scrMono",0,PROPERTY_SCRMONO,[!0],1);kernel.regProp("scramble","scrLim",0,PROPERTY_SCRLIM,[!1],1);kernel.regProp("scramble","scrAlign",1,PROPERTY_SCRALIGN,["c",["c","l","r"],PROPERTY_SCRALIGN_STR.split("|")],1);kernel.regProp("scramble","preScr",1,"pre-scramble",["",";y;y2;y';z2;z2 y;z2 y2;z2 y';z';z' y;z' y2;z' y';z;z y;z y2;z y';x';x' y;x' y2;x' y';x;x y;x y2;x y'".split(";"),
"(UF);(UR) y;(UB) y2;(UL) y';(DF) z2;(DL) z2 y;(DB) z2 y2;(DR) z2 y';(RF) z';(RD) z' y;(RB) z' y2;(RU) z' y';(LF) z;(LU) z y;(LB) z y2;(LD) z y';(BU) x';(BR) x' y;(BD) x' y2;(BL) x' y';(FD) x;(FR) x y;(FU) x y2;(FL) x y'".split(";")],1);kernel.regProp("scramble","preScrT",1,"training pre-scramble",["z2",";y;y2;y';z2;z2 y;z2 y2;z2 y';z';z' y;z' y2;z' y';z;z y;z y2;z y';x';x' y;x' y2;x' y';x;x y;x y2;x y'".split(";"),"(UF);(UR) y;(UB) y2;(UL) y';(DF) z2;(DL) z2 y;(DB) z2 y2;(DR) z2 y';(RF) z';(RD) z' y;(RB) z' y2;(RU) z' y';(LF) z;(LU) z y;(LB) z y2;(LD) z y';(BU) x';(BR) x' y;(BD) x' y2;(BL) x' y';(FD) x;(FR) x y;(FU) x y2;(FL) x y'".split(";")],
1);kernel.regProp("scramble","scrFast",0,PROPERTY_SCRFAST,[!1]);kernel.regProp("scramble","scrKeyM",0,PROPERTY_SCRKEYM,[!1],1);kernel.regProp("scramble","scrClk",1,PROPERTY_SCRCLK,["n",["n","c","+"],PROPERTY_SCRCLK_STR.split("|")],1);kernel.regProp("scramble","scrType",-6,"Scramble Type",["333"],3);w.change(z);kb.click(x);ib.append($("<div>").append(SCRAMBLE_LENGTH+": ",w),Xa);gb.append($("<nobr>").append(mb[0]," ",mb[1]," ",kb)," <wbr>");gb.append($("<nobr>").append(ub,"/",wb,SCRAMBLE_SCRAMBLE));
Qa.append(gb,Ua.append(n).click(e));tools.regTool("scrgen",TOOLS_SCRGEN,Cb);Ua.click(function(){gb.show();kernel.blur();kernel.setProp("scrHide",!1)});kernel.regProp("ui","scrHide",-1,"Hide Scramble Selector",[!1]);kernel.addWindow("scramble",BUTTON_SCRAMBLE,Qa,!0,!0,3);Oa()});return{getTypeName:function(a){var b="";Ta(a,function(a,c){b=scrdata[a][0]+">"+scrdata[a][1][c][0]});return b},getTypeIdx:function(a){var b=1E300;Ta(a,function(a,c){b=100*a+c});return b},scrStd:a,setCacheEnable:function(a){zb=
a}}},[mathlib.rn,mathlib.rndEl]);(function(c,Na,z){function r(a,b){var e=f[a];switch(e.length){case 1:return c(e[0],[""],b);case 2:return c(e[0],e[1],b);case 3:return c(e[0],e[1],e[2])}}function b(b,c){var e=h[b],f=e[1],r=e[2],x=0,Pa=0,y=[],Qa=[["R","R'"],["R'","R"],["L","L'"],["L'","L"],["F'","F"],["F","F'"],["B","B'"],["B'","B"]],Oa=["U","D"];e=e[0];for(var Ra=0;Ra<r.length;Ra++)y[Ra]=0;for(Ra=0;Ra<c;Ra++){for(var hb=!1;!hb;)for(var kb="",ab=0;ab<r.length;ab++){var Xa=Na(4);y[ab]+=Xa;0!=Xa&&(hb=!0,kb+=" "+r[ab]+a[Xa-1])}hb=Na(8);
ab=Na(2);Xa=Na(3);e+=kb+" "+Qa[hb][0]+" "+Oa[ab]+a[Xa]+" "+Qa[hb][1];0==ab&&(x+=Xa+1);1==ab&&(Pa+=Xa+1)}for(Ra=0;Ra<r.length;Ra++)Xa=4-y[Ra]%4,4>Xa&&(e+=" "+r[Ra]+a[Xa-1]);x=4-x%4;Pa=4-Pa%4;4>x&&(e+=" U"+a[x-1]);4>Pa&&(e+=" D"+a[Pa-1]);return e+=" "+z(f)}function e(a,b){var c=ab[a].replace(/%l/g,b).replace(/%c/g,'["","2","\'"]');return scrMgr.formatScramble(c)}var a=["","2","'"],y=["","2","'","2'"],f={111:[[["x"],["y"],["z"]],a],2223:[[["U"],["R"],["F"]],a],2226:[[[["U","D"]],[["R","L"]],[["F","B"]]],
a],"333o":[[["U","D"],["R","L"],["F","B"]],a],334:[[[["U","U'","U2"],["u","u'","u2"]],[["R2","L2","M2"]],[["F2","B2","S2"]]]],336:[[[["U","U'","U2"],["u","u'","u2"],["3u","3u2","3u'"]],[["R2","L2","M2"]],[["F2","B2","S2"]]]],888:[["U D u d 3u 3d 4u".split(" "),"R L r l 3r 3l 4r".split(" "),"F B f b 3f 3b 4f".split(" ")],a],999:[["U D u d 3u 3d 4u 4d".split(" "),"R L r l 3r 3l 4r 4l".split(" "),"F B f b 3f 3b 4f 4b".split(" ")],a],101010:[["U D u d 3u 3d 4u 4d 5u".split(" "),"R L r l 3r 3l 4r 4l 5r".split(" "),
"F B f b 3f 3b 4f 4b 5f".split(" ")],a],111111:[["U D u d 3u 3d 4u 4d 5u 5d".split(" "),"R L r l 3r 3l 4r 4l 5r 5l".split(" "),"F B f b 3f 3b 4f 4b 5f 5b".split(" ")],a],444:[[["U","D","u"],["R","L","r"],["F","B","f"]],a],"444m":[[["U","D","Uw"],["R","L","Rw"],["F","B","Fw"]],a],555:[[["U","D","u","d"],["R","L","r","l"],["F","B","f","b"]],a],"555wca":[[["U","D","Uw","Dw"],["R","L","Rw","Lw"],["F","B","Fw","Bw"]],a],"666p":[[["U","D","2U","2D","3U"],["R","L","2R","2L","3R"],["F","B","2F","2B","3F"]],
a],"666wca":[[["U","D","Uw","Dw","3Uw"],["R","L","Rw","Lw","3Rw"],["F","B","Fw","Bw","3Fw"]],a],"666s":[[["U","D","U&sup2;","D&sup2;","U&sup3;"],["R","L","R&sup2;","L&sup2;","R&sup3;"],["F","B","F&sup2;","B&sup2;","F&sup3;"]],a],"666si":[[["U","D","u","d","3u"],["R","L","r","l","3r"],["F","B","f","b","3f"]],a],"777p":[["U D 2U 2D 3U 3D".split(" "),"R L 2R 2L 3R 3L".split(" "),"F B 2F 2B 3F 3B".split(" ")],a],"777wca":[["U D Uw Dw 3Uw 3Dw".split(" "),"R L Rw Lw 3Rw 3Lw".split(" "),"F B Fw Bw 3Fw 3Bw".split(" ")],
a],"777s":[["U D U&sup2; D&sup2; U&sup3; D&sup3;".split(" "),"R L R&sup2; L&sup2; R&sup3; L&sup3;".split(" "),"F B F&sup2; B&sup2; F&sup3; B&sup3;".split(" ")],a],"777si":[["U D u d 3u 3d".split(" "),"R L r l 3r 3l".split(" "),"F B f b 3f 3b".split(" ")],a],cm3:[[[["U<","U>","U2"],["E<","E>","E2"],["D<","D>","D2"]],[["R^","Rv","R2"],["M^","Mv","M2"],["L^","Lv","L2"]]]],cm2:[[[["U<","U>","U2"],["D<","D>","D2"]],[["R^","Rv","R2"],["L^","Lv","L2"]]]],233:[[[["U","U'","U2"]],["R2","L2"],["F2","B2"]]],
fto:[[["U","D"],["F","B"],["L","BR"],["R","BL"]],["","'"]],gear:[[["U"],["R"],["F"]]," 2 3 4 5 6 ' 2' 3' 4' 5'".split(" ")],sfl:[[["R","L"],["U","D"]],a],ufo:[[["A"],["B"],["C"],[["U","U'","U2'","U2","U3"]]]],"2gen":[[["U"],["R"]],a],"2genl":[[["U"],["L"]],a],roux:[[["U"],["M"]],a],"3gen_F":[[["U"],["R"],["F"]],a],"3gen_L":[[["U"],["R","L"]],a],RrU:[[["U"],["R","r"]],a],RrUu:[[["U","u"],["R","r"]],a],minx2g:[[["U"],["R"]],y],half:[[["U","D"],["R","L"],["F","B"]],["2"]],lsll:[[[["R U R'","R U2 R'",
"R U' R'"]],[["F' U F","F' U2 F","F' U' F"]],[["U","U2","U'"]]]],prco:[[["F","B"],["U","D"],["L","DBR"],["R","DBL"],["BL","DR"],["BR","DL"]],y],skb:[[["R"],["L"],["B"],["U"]],["","'"]],ivy:[[["R"],["L"],["D"],["B"]],["","'"]],112:[[["R"],["R"]],a],eide:[[["OMG"],["WOW"],["WTF"],["WOO-HOO WOO-HOO MATYAS YES YES YAY YEEEEEEEEEEEES".split(" ")],["HAHA"],["XD"],[":D"],["LOL"]],["","","","!!!"]]},ab={sia113:'#{[["U","u"],["R","r"]],%c,%l} z2 #{[["U","u"],["R","r"]],%c,%l}',sia123:'#{[["U"],["R","r"]],%c,%l} z2 #{[["U"],["R","r"]],%c,%l}',
sia222:'#{[["U"],["R"],["F"]],%c,%l} z2 y #{[["U"],["R"],["F"]],%c,%l}',335:'#{[[["U","U\'","U2"],["D","D\'","D2"]],["R2","L2"],["F2","B2"]],0,%l} / ${333}',337:'#{[[["U","U\'","U2","u","u\'","u2","U u","U u\'","U u2","U\' u","U\' u\'","U\' u2","U2 u","U2 u\'","U2 u2"],["D","D\'","D2","d","d\'","d2","D d","D d\'","D d2","D\' d","D\' d\'","D\' d2","D2 d","D2 d\'","D2 d2"]],["R2","L2"],["F2","B2"]],0,%l} / ${333}',r234:"2) ${222so}\\n3) ${333}\\n4) ${[444,40]}",r2345:'${r234}\\n5) ${["555",60]}',r23456:'${r2345}\\n6) ${["666p",80]}',
r234567:'${r23456}\\n7) ${["777p",100]}',r234w:'2) ${222so}\\n3) ${333}\\n4) ${["444m",40]}',r2345w:'${r234w}\\n5) ${["555wca",60]}',r23456w:'${r2345w}\\n6) ${["666wca",80]}',r234567w:'${r23456w}\\n7) ${["777wca",100]}',rmngf:'${r2345w}\\n3oh) ${333}\\npyr) ${["pyrso",10]}\\n skb) ${skbso}\\nsq1) ${sqrs}\\nclk) ${clkwca}\\nmgm) ${["mgmp",70]}',"333ni":'${333}#{[[""]],["","Rw ","Rw2 ","Rw\' ","Fw ","Fw\' "],1}#{[[""]],["","Uw","Uw2","Uw\'"],1}',"444bld":'${444wca}#{[[""]],[""," x"," x2"," x\'"," z"," z\'"],1}#{[[""]],[""," y"," y2"," y\'"],1}',
"555bld":'${["555wca",%l]}#{[[""]],[""," 3Rw"," 3Rw2"," 3Rw\'"," 3Fw"," 3Fw\'"],1}#{[[""]],[""," 3Uw"," 3Uw2"," 3Uw\'"],1}'},h={"4edge":["r b2",["b2 r'","b2 U2 r U2 r U2 r U2 r"],["u"]],"5edge":["r R b B",["B' b' R' r'","B' b' R' U2 r U2 r U2 r U2 r"],["u","d"]],"6edge":["3r r 3b b",["3b' b' 3r' r'","3b' b' 3r' U2 r U2 r U2 r U2 r","3b' b' r' U2 3r U2 3r U2 3r U2 3r","3b' b' r2 U2 3r U2 3r U2 3r U2 3r U2 r"],["u","3u","d"]],"7edge":["3r r 3b b",["3b' b' 3r' r'","3b' b' 3r' U2 r U2 r U2 r U2 r","3b' b' r' U2 3r U2 3r U2 3r U2 3r",
"3b' b' r2 U2 3r U2 3r U2 3r U2 3r U2 r"],["u","3u","3d","d"]]},Oa;for(Oa in f)scrMgr.reg(Oa,r);for(Oa in ab)scrMgr.reg(Oa,e);for(Oa in h)scrMgr.reg(Oa,b);scrMgr.reg("cubennn",function(b,e){if(1>=e)return"N/A";for(var f=[[],[],[]],h=0;h<e-1;h++)0==h%2?(f[0].push((4>h?"":~~(h/2+1))+(2>h?"U":"u")),f[1].push((4>h?"":~~(h/2+1))+(2>h?"R":"r")),f[2].push((4>h?"":~~(h/2+1))+(2>h?"F":"f"))):(f[0].push((4>h?"":~~(h/2+1))+(2>h?"D":"d")),f[1].push((4>h?"":~~(h/2+1))+(2>h?"L":"l")),f[2].push((4>h?"":~~(h/2+1))+
(2>h?"B":"b")));return c(f,a,10*e)})})(scrMgr.mega,mathlib.rn,mathlib.rndEl);var scramble_333=function(c,Na,z,r,b,e){function a(a){a.cp=[0,1,2,3,4,5,6,7];a.co=[0,0,0,0,0,0,0,0];a.ep=[0,1,2,3,4,5,6,7,8,9,10,11];a.eo=[0,0,0,0,0,0,0,0,0,0,0,0]}function y(a,b,c){var e;for(e=0;8>e;++e){c.cp[e]=a.cp[b.cp[e]];var n=a.co[b.cp[e]];var f=b.co[e];var w=n;w+=3>n?f:6-f;w%=3;3<=n!==3<=f&&(w+=3);c.co[e]=w}}function f(){a(this)}function ab(b,c,e,n){a(this);z(this.cp,b);b=c;var f=0;for(c=6;0<=c;--c)f+=this.co[c]=b%3,b=~~(b/3);this.co[7]=(15-f)%3;Na(this.ep,e,12);e=n;b=0;for(n=10;0<=n;--n)b^=
this.eo[n]=e&1,e>>=1;this.eo[11]=b}function h(a,b,c){var e;for(e=0;12>e;++e)c.ep[e]=a.ep[b.ep[e]],c.eo[e]=b.eo[e]^a.eo[b.ep[e]]}function Oa(){Oa=$.noop;var a,b;ob[0]=new ab(15120,0,119750400,0);ob[3]=new ab(21021,1494,323403417,0);ob[6]=new ab(8064,1236,29441808,550);ob[9]=new ab(9,0,5880,0);ob[12]=new ab(1230,412,2949660,0);ob[15]=new ab(224,137,328552,137);for(a=0;18>a;a+=3)for(b=0;2>b;++b)ob[a+b+1]=new f,h(ob[a+b],ob[a],ob[a+b+1]),y(ob[a+b],ob[a],ob[a+b+1])}function Ra(){return Sa(0xffffffffffff,
0xffffffffffff,4294967295,4294967295)}function x(a){for(var b=0,c=0;c<a.length;c++)-1==a[c]&&b++;return b}function Wa(a,c,e){for(var n=0,f=0,w=0;w<a.length;w++)-1!=a[w]&&(n+=a[w]);n%=e;for(w=0;w<a.length-1;w++)-1==a[w]&&(1==c--?a[w]=((e<<4)-n)%e:(a[w]=b(e),n+=a[w])),f*=e,f+=a[w];return f}function Ta(a,e,n){for(var f=[0,1,2,3,4,5,6,7,8,9,10,11],w=0;w<a.length;w++)-1!=a[w]&&(f[a[w]]=-1);for(var h=w=0;w<f.length;w++)-1!=f[w]&&(f[h++]=f[w]);var x;for(w=0;w<a.length&&0<e;w++)if(-1==a[w]){h=b(e);for(a[w]=
f[h];11>h;h++)f[h]=f[h+1];2==e--&&(x=w)}r(c(a,a.length),a.length)==1-n&&(e=a[w-1],a[w-1]=a[x],a[x]=e);return c(a,a.length)}function Za(a,b){if("number"!==typeof a)return a;for(var c=[],e=0;e<b;e++){var n=a&15;c[e]=15==n?-1:n;a/=16}return c}function Sa(a,b,n,w,Ua,Pa,Qa,Sa){Oa();Ua=Ua||rb;Pa=Pa||rb;a=Za(a,12);b=Za(b,12);n=Za(n,8);w=Za(w,8);var bb="";do{var z=b.slice(),Ya=a.slice(),Va=w.slice(),$a=n.slice();z=Wa(z,x(z),2);Va=Wa(Va,x(Va),3);var Xa=x(Ya),fb=x($a);1==Xa&&(Ta(Ya,Xa,-1),Xa=0);1==fb&&(Ta($a,
fb,-1),fb=0);0==Xa&&0==fb?(Ya=c(Ya,12),$a=c($a,8)):0!=Xa&&0==fb?($a=c($a,8),Ya=Ta(Ya,Xa,r($a,8))):(Ya=0==Xa&&0!=fb?c(Ya,12):Ta(Ya,Xa,-1),$a=Ta($a,fb,r(Ya,12)));if(0!=$a+Va+Ya+z){bb=new ab($a,Va,Ya,z);Ya=new f;$a=e(Pa);z=e(Ua);for(Va=0;Va<$a.length;Va++)y(ob[$a[Va]],bb,Ya),h(ob[$a[Va]],bb,Ya),Xa=Ya,Ya=bb,bb=Xa;for(Va=0;Va<z.length;Va++)y(bb,ob[z[Va]],Ya),h(bb,ob[z[Va]],Ya),Xa=Ya,Ya=bb,bb=Xa;$a=bb;Ya=[];bb=[85,82,70,68,76,66];for(z=0;54>z;++z)Ya[z]=bb[~~(z/9)];for(fb=0;8>fb;++fb)for(Xa=$a.cp[fb],z=
$a.co[fb],Va=0;3>Va;++Va)Ya[cb[fb][(Va+z)%3]]=bb[~~(cb[Xa][Va]/9)];for(fb=0;12>fb;++fb)for(Xa=$a.ep[fb],z=$a.eo[fb],Va=0;2>Va;++Va)Ya[eb[fb][(Va+z)%2]]=bb[~~(eb[Xa][Va]/9)];bb=String.fromCharCode.apply(null,Ya);bb=(new min2phase.Search).solution(bb,21,1E9,50,2,Sa,Qa)}}while(3>=bb.length);return bb.replace(/ +/g," ")}function Pa(){return Sa(0xffffffffffff,0xffffffffffff,1985229328,0)}function $a(){return Sa(0xba9876543210,0,4294967295,4294967295)}function Qa(){return Sa(0xba987654ffff,65535,1985282047,
65535)}function gb(a,b,c){a=vb[scrMgr.fixCase(c,ub)][0];b=Math.pow(16,a&15);c=Math.pow(16,a>>8&15);return Sa(0xba9f7654ffff-7*b,64424574975-(15^a>>4&1)*b,1986002943-11*c,1048575-(15^a>>12&3)*c,bb)}function mb(a,b,c,e,n){var w=b[scrMgr.fixCase(e,c)][0];b=[[5,10],[7,19],[3,-1],[1,-1],null,null,null,null,[23,12]][w&15];c=w>>4&1;e=[[8,20,9],[6,-1,18],[0,-1,-1],[2,11,-1],[-1,15,26]][w>>8&15];w=w>>12&3;a=a.split("");for(var f=0;3>f;f++)2>f&&0<=b[f]&&(a[b[f]]="BR".charAt(c^f)),0<=e[f]&&(a[e[f]]="URB".charAt((w+
3+f)%3));image.face3Image(a.join(""),n)}function hb(){return Sa(0xffff7654ffff,0xffff0000ffff,4294967295,4294967295)}function kb(a,b,c){a=Ib[scrMgr.fixCase(c,Mb)];return Sa(0xba987654ffff,0,a[0]+1985216512,a[1],bb,bb)}function ib(a,c,e){a=Ib[scrMgr.fixCase(e,Mb)];c=b(4);e=[];for(var n=0;n<bb.length;n++)e.push(bb[n].concat(sb[c]));return Sa(0xba98f6f4ffff,4042326015,a[0]+1985216512,a[1],e,bb)+nb[c]}function Xa(a,b,c){a=Ib[b][2].replace(/e/g,a||"U");image.llImage.drawImage(a,null,c)}function db(){return Sa(0xba9876543f1f,
0,1985282047,65535,bb)}function Va(a,b,c){a=xb[scrMgr.fixCase(c,Hb)];return Sa(0xba9876540000+a[1],0,1984954368+a[0],0,bb,bb)}function w(){var a=b(4);return Sa(0xba98f6f4ffff,4042326015,1985229328,0,[sb[a]],bb)+nb[a]}function n(a,b,c){a=Ib[scrMgr.fixCase(c,Mb)];return Sa(0xba987654ffff,65535,a[0]+1985216512,a[1],bb,bb)}function Ua(){return Sa(0xba987654ffff,65535,1985229328,0)}function Ya(a,b){var c=Pb[a].slice(1);2==c.length&&(c=c.concat([[c[0][1],c[0][0]],[c[1][1],c[1][0]]]));c=["DDDDDDDDD"+Pb[a][0],
c];if(!b)return c.concat([Rb[a]]);image.llImage.drawImage(c[0],c[1],b)}function fb(a,b){for(var c="",e=ac[a],n=0;21>n;n++)4==n?c+="D":(c+=e&1?"D":"G",e>>=1);if(!b)return[c,null,Nb[a]];image.llImage.drawImage(c,null,b)}ab.prototype=f.prototype;for(var ob=[],cb=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],eb=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]],lb=new min2phase.Search,bb=[[],[0],[1],[2]],sb=[[],[3,14],[4,
13],[5,12]],nb=["","x'","x2","x"],rb=[[]],vb=[[8192,4,"Easy-01"],[4113,4,"Easy-02"],[8210,4,"Easy-03"],[4099,4,"Easy-04"],[8195,4,"RE-05"],[4114,4,"RE-06"],[8194,4,"RE-07"],[4115,4,"RE-08"],[8211,4,"REFC-09"],[4098,4,"REFC-10"],[8208,4,"REFC-11"],[4097,4,"REFC-12"],[8209,4,"REFC-13"],[4096,4,"REFC-14"],[8193,4,"SPGO-15"],[4112,4,"SPGO-16"],[0,4,"SPGO-17"],[17,4,"SPGO-18"],[3,4,"PMS-19"],[18,4,"PMS-20"],[2,4,"PMS-21"],[19,4,"PMS-22"],[1,4,"Weird-23"],[16,4,"Weird-24"],[1024,4,"CPEU-25"],[1041,4,"CPEU-26"],
[5120,4,"CPEU-27"],[9233,4,"CPEU-28"],[5137,4,"CPEU-29"],[9216,4,"CPEU-30"],[24,4,"EPCU-31"],[8,4,"EPCU-32"],[8200,4,"EPCU-33"],[4104,4,"EPCU-34"],[8216,4,"EPCU-35"],[4120,4,"EPCU-36"],[1048,1,"ECP-37"],[5128,1,"ECP-38"],[9224,1,"ECP-39"],[5144,1,"ECP-40"],[9240,1,"ECP-41"],[1032,1,"Solved-42"]],ub=mathlib.idxArray(vb,1),wb=mathlib.idxArray(vb,2),zb=[],yb=[],Fb=[],pb=0;pb<vb.length;pb++)vb[pb][0]&240||(zb.push(vb[pb]),yb.push(ub[pb]),Fb.push(wb[pb]));var Eb=[],Cb=[];for(pb=0;27>pb;pb++)Eb[pb]=~~(pb/
9)<<12|~~(pb/3)%3<<8|pb%3,Cb[pb]=1;var Bb=[],Kb=[],Ab=[];for(pb=0;216>pb;pb++){var tb=pb%27,qb=~~(pb/27);Bb[pb]=[~~(tb/9)%3<<12|~~(tb/3)%3<<8|tb%3,(qb>>2&1)<<12|(qb>>1&1)<<8|qb&1];Kb[pb]=1;Ab[pb]="WVLS;UB;UF;UF UB;UL;UB UL;UF UL;No Edge".split(";")[qb]+"-"+(tb+1)}var Ib=[[12816,8481,"FeFeeeBeBLGRDGDRGLDGD",2,"H-1"],[8961,4626,"ReLeeeReLBGBDGDFGFDGD",2,"H-2"],[4611,4626,"ReBeeeLeBFGRDGDLGFDGD",4,"H-3"],[8211,4626,"LeReeeFeFRGLDGDBGBDGD",4,"H-4"],[12321,4128,"DeLeeeReDBGRFGBDGFLGD",4,"L-1"],[4611,513,
"DeReeeLeDFDBRDFDGLBGD",4,"L-2"],[8961,258,"DeBeeeLeDFGRFGRDGLBGD",4,"L-3"],[12816,4128,"DeLeeeFeDRGFLGBDGBRGD",4,"L-4"],[12546,4128,"DeLeeeLeDFGBRGBDGRFGD",4,"L-5"],[8211,513,"DeReeeReDBGLBGFDGFLGD",4,"L-6"],[12816,4386,"LeFeeeReFBGDRGLDGBDGD",4,"Pi-1"],[8961,8466,"FeLeeeFeRRGDBGBDGLDGD",4,"Pi-2"],[4611,4641,"ReLeeeReLBGDFGBDGFDGD",4,"Pi-3"],[12546,4386,"BeFeeeFeBRGDLGLDGRDGD",4,"Pi-4"],[8211,4641,"BeLeeeLeFFGDRGBDGRDGD",4,"Pi-5"],[12321,4386,"BeReeeLeBFGDLGFDGRDGD",4,"Pi-6"],[12816,8736,"ReBeeeFeDRGFLGDLGDBGD",
4,"S-1"],[8961,546,"BeReeeLeDFGRFGDBGDLGD",4,"S-2"],[12321,8736,"BeReeeFeDRGFLGDBGDLGD",4,"S-3"],[8211,8706,"ReBeeeLeDFGRFGDLGDBGD",4,"S-4"],[12546,8736,"FeBeeeLeDFGBRGDLGDRGD",4,"S-5"],[4611,8706,"LeReeeFeDRGLBGDBGDFGD",4,"S-6"],[4611,4098,"BeLeeeDeDBGRFGDFGRDGL",4,"T-1"],[12546,8448,"ReBeeeDeDLGBRGDLGFDGF",4,"T-2"],[8961,528,"BeFeeeDeDBGFLGDRGRDGL",4,"T-3"],[12816,8448,"FeFeeeDeDBGBRGDRGLDGL",4,"T-4"],[8211,4098,"BeBeeeDeDLGRFGDLGRDGF",4,"T-5"],[12321,8448,"FeBeeeDeDRGRFGDLGLDGB",4,"T-6"],[8961,
288,"LeLeeeDeDFGBRGBDGDFGR",4,"U-1"],[12816,4608,"LeReeeDeDBGBRGFDGDFGL",4,"U-2"],[12321,4608,"FeFeeeDeDBGBRGLDGDRGL",4,"U-3"],[8211,8193,"BeFeeeDeDFGBRGLDGDLGR",4,"U-4"],[4611,8193,"ReFeeeDeDBGRFGLDGDBGL",4,"U-5"],[12546,4608,"LeBeeeDeDBGRFGRDGDFGL",4,"U-6"],[12816,4353,"LeFeeeDeRRGFDGLDGBDGB",4,"aS-1"],[8961,4368,"ReFeeeDeLRGBDGLDGFDGB",4,"aS-2"],[12321,4353,"LeBeeeDeFFGLDGRDGBDGR",4,"aS-3"],[8211,4113,"LeFeeeDeBFGRDGLDGBDGR",4,"aS-4"],[4611,4113,"FeBeeeDeLFGBDGRDGLDGR",4,"aS-5"],[12546,4353,"FeBeeeDeRBGFDGRDGLDGL",
4,"aS-6"],[12321,0,"DeDeeeDeDBGRFGBRGFLGL",4,"O-Adj"],[8961,0,"DeDeeeDeDBGFLGRFGBRGL",1,"O-Diag"],[12816,0,"DeDeeeDeDBGBRGRFGFLGL",1,"O-AUF"]],Mb=mathlib.idxArray(Ib,3);tb=mathlib.idxArray(Ib,4);var xb=[[205840,12816,"FBar-1"],[205840,12546,"FBar-2"],[205840,12321,"FBar-3"],[205840,8961,"FBar-4"],[205840,8496,"FBar-5"],[205840,8211,"FBar-6"],[205840,4896,"FBar-7"],[205840,4611,"FBar-8"],[205840,4146,"FBar-9"],[205840,786,"FBar-10"],[205840,561,"FBar-11"],[205840,291,"FBar-12"],[205825,12801,"2Opp-1"],
[205825,12576,"2Opp-2"],[205825,12306,"2Opp-3"],[205825,8976,"2Opp-4"],[205825,8451,"2Opp-5"],[205825,8241,"2Opp-6"],[205825,4866,"2Opp-7"],[205825,4656,"2Opp-8"],[205825,4131,"2Opp-9"],[205825,801,"2Opp-10"],[205825,531,"2Opp-11"],[205825,306,"2Opp-12"],[201760,12801,"ROpp-1"],[201760,12576,"ROpp-2"],[201760,12306,"ROpp-3"],[201760,8976,"ROpp-4"],[201760,8451,"ROpp-5"],[201760,8241,"ROpp-6"],[201760,4866,"ROpp-7"],[201760,4656,"ROpp-8"],[201760,4131,"ROpp-9"],[201760,801,"ROpp-10"],[201760,531,"ROpp-11"],
[201760,306,"ROpp-12"],[201730,12816,"RBar-1"],[201730,12546,"RBar-2"],[201730,12321,"RBar-3"],[201730,8961,"RBar-4"],[201730,8496,"RBar-5"],[201730,8211,"RBar-6"],[201730,4896,"RBar-7"],[201730,4611,"RBar-8"],[201730,4146,"RBar-9"],[201730,786,"RBar-10"],[201730,561,"RBar-11"],[201730,291,"RBar-12"],[197665,12816,"2Bar-1"],[197665,12546,"2Bar-2"],[197665,12321,"2Bar-3"],[197665,8961,"2Bar-4"],[197665,8496,"2Bar-5"],[197665,8211,"2Bar-6"],[197665,4896,"2Bar-7"],[197665,4611,"2Bar-8"],[197665,4146,
"2Bar-9"],[197665,786,"2Bar-10"],[197665,561,"2Bar-11"],[197665,291,"2Bar-12"],[197650,12801,"FOpp-1"],[197650,12576,"FOpp-2"],[197650,12306,"FOpp-3"],[197650,8976,"FOpp-4"],[197650,8451,"FOpp-5"],[197650,8241,"FOpp-6"],[197650,4866,"FOpp-7"],[197650,4656,"FOpp-8"],[197650,4131,"FOpp-9"],[197650,801,"FOpp-10"],[197650,531,"FOpp-11"],[197650,306,"FOpp-12"]],Hb=[],Gb=[];for(pb=0;pb<xb.length;pb++)Hb[pb]=1,Gb[pb]=xb[pb][2];var Jb=[[4146,12816],[12546,12816],[12321,12816],[8961,12816],[12816,12321],[12816,
12546],[12816,8961],[12306,12801],[8496,12321],[4896,12546],[12321,12546],[12546,12321],[12801,12801],[12576,12801],[4656,12306],[12306,12306],[531,12801],[8976,12801],[4656,12801],[12576,12306],[12801,12306]],Ob=[1,4,4,2,4,4,2,4,4,4,4,4,4,4,1,1,4,4,4,4,4],Rb="H Ua Ub Z Aa Ab E F Ga Gb Gc Gd Ja Jb Na Nb Ra Rb T V Y".split(" "),Pb=[["BFBRLRFBFLRL",[1,7],[3,5]],["BRBRLRFFFLBL",[3,7],[7,5],[5,3]],["BLBRBRFFFLRL",[3,5],[5,7],[7,3]],["LFLBRBRBRFLF",[1,5],[3,7]],["LBBRRLBFRFLF",[0,2],[2,6],[6,0]],["RBFLRRFFLBLB",
[0,6],[6,8],[8,0]],["LBRFRBRFLBLF",[0,6],[2,8]],["BFRFRBRBFLLL",[1,7],[2,8]],["BRRFLBRBFLFL"],["BFRFBBRLFLRL"],["BFRFLBRRFLBL"],["BLRFFBRBFLRL"],["BBRFFBRRFLLL",[1,5],[2,8]],["LBBRLLBRRFFF",[2,8],[5,7]],["FBBRLLBFFLRR",[2,6],[3,5]],["BBFLLRFFBRRL",[0,8],[3,5]],["LLBRBLBFRFRF",[1,3],[2,8]],["RBFLFRFLLBRB",[2,8],[3,7]],["BBRFLBRFFLRL",[2,8],[3,5]],["BBFLFRFRBRLL",[0,8],[1,5]],["BBFLRRFLBRFL",[0,8],[1,3]]],Lb=[[0,0],[4369,4626],[4369,4386],[4369,546],[4369,273],[17,8226],[17,4113],[17,8706],[17,273],
[17,4368],[17,8736],[17,546],[17,4353],[257,8226],[257,273],[257,546],[257,4113],[4369,258],[4369,18],[4369,33],[4369,0],[0,4626],[0,4386],[0,18],[0,33],[0,258],[0,273],[0,546],[17,0],[17,528],[17,8448],[17,33],[17,4098],[257,33],[257,528],[17,4128],[17,258],[17,8208],[17,513],[257,4128],[257,258],[17,4608],[17,288],[17,18],[17,8193],[257,18],[257,288],[17,4641],[17,4386],[17,8466],[17,8721],[257,4641],[257,4386],[17,8481],[17,4626],[257,8481],[257,4626],[257,0]],Tb=[1,2,4,4,4,4,4,4,4,4,4,4,4,4,4,
4,4,4,4,4,1,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,2,2],Nb="PLL Point-1 Point-2 Point-3 Point-4 Square-5 Square-6 SLBS-7 SLBS-8 Fish-9 Fish-10 SLBS-11 SLBS-12 Knight-13 Knight-14 Knight-15 Knight-16 Point-17 Point-18 Point-19 CO-20 OCLL-21 OCLL-22 OCLL-23 OCLL-24 OCLL-25 OCLL-26 OCLL-27 CO-28 Awkward-29 Awkward-30 P-31 P-32 T-33 C-34 Fish-35 W-36 Fish-37 W-38 BLBS-39 BLBS-40 Awkward-41 Awkward-42 P-43 P-44 T-45 C-46 L-47 L-48 L-49 L-50 I-51 I-52 L-53 L-54 I-55 I-56 CO-57".split(" "),
ac=[255,965120,907776,374304,447360,538123,396054,79402,410514,152458,627788,595470,281363,108088,181144,566809,166684,308097,300805,825861,299685,83290,672858,82170,66014,132222,133470,74874,4783,70542,144042,328598,22059,99228,172728,303569,803475,13195,72238,100924,574105,86698,38221,918166,14891,688796,276579,338706,677386,935442,967760,109336,342338,345874,87818,116504,698904,33469],Vb=[[],[9],[10],[11]],Sb=["","y","y2","y'"];qb="UR UF UL UB DR DF DL DB RF LF LB RB URF UFL ULB UBR DFR DLF DBL DRB".split(" ");
for(pb=0;20>pb;pb++){var Wb=qb[pb];qb[pb+20]=(2==Wb.length?"OriE-":"OriC-")+Wb;qb[pb]=(2==Wb.length?"PermE-":"PermC-")+Wb}pb=mathlib.valuedArray(40,0);scrMgr.reg("333",Ra)("333fm",function(){return"R' U' F "+Sa(0xffffffffffff,0xffffffffffff,4294967295,4294967295,void 0,void 0,2,1)+"R' U' F"})("edges",Pa)("corners",$a)("333custom",function(a,b,c){var e=b=a=0,n=0,w=4352;c=c||mathlib.valuedArray(40,1);for(var f=0;12>f;f++)w+=(c[f]?69632:0)+(c[f+20]?16:0),a+=(c[f]?15:f)*Math.pow(16,f),b+=(c[f+20]?15:
0)*Math.pow(16,f);for(f=0;8>f;f++)w+=(c[f+12]?65792:0)+(c[f+32]?1:0),e+=(c[f+12]?15:f)*Math.pow(16,f),n+=(c[f+32]?15:0)*Math.pow(16,f);return 0==(w&1887470)?"U' U ":Sa(a,b,e,n)},[qb,pb])("ll",Qa)("lsll2",gb,[wb,ub,mb.bind(null,"GGGGDGGGGGGGGRRGRRGGGBBGBBG",vb,ub)])("f2l",hb)("zbll",kb,[tb,Mb,Xa.bind(null,"D")])("zzll",db)("zbls",gb,[wb,ub,mb.bind(null,"GGGGDGGGGGGGGRRGRRGGGBBGBBG",vb,ub)])("ttll",Va,[Gb,Hb,function(a,b){for(var c=[],e=xb[a],n=3;0<=n;n--)c.push(["FR","LF","BL","RB","GG"][e[0]>>4*n&
15]),c.push("RFLB".charAt(e[1]>>4*n&15));c=c.join("");c=c.slice(7)+c.slice(0,7);c=["GDDDDDDDD"+c,null];if(!b)return c.concat([Gb[a]]);image.llImage.drawImage(c[0],c[1],b)}])("eols",function(a,b,c){a=zb[scrMgr.fixCase(c,yb)];b=Math.pow(16,a>>8&15);return Sa(0xba9f7654ffff-7*Math.pow(16,a&15),0,1986002943-11*b,1048575-(15^a>>12&3)*b,bb)},[Fb,yb,mb.bind(null,"GDGDDDGDGGGGGRRGRRGGGBBDBBG",zb,yb)])("wvls",function(a,b,c){a=Eb[scrMgr.fixCase(c,Cb)];return Sa(0xba9f7654ff8f,0,1986002767,983072|a)},["Oriented Rectangle-1 Rectangle-2 Tank-1 Bowtie-1 Bowtie-3 Tank-2 Bowtie-2 Bowtie-4 Snake-1 Adjacent-1 Adjacent-2 Gun-Far Sune-1 Pi-Near Gun-Back Pi-Front H-Side Snake-2 Adjacent-3 Adjacent-4 Gun-Sides H-Front Pi-Back Gun-Near Pi-Far Sune-2".split(" "),
Cb,function(a,b){var c=Eb[scrMgr.fixCase(a,Cb)],e=["DGG","GDG","GGD"];e=e[c&3]+e[c>>8&3]+e[c>>12&3];image.llImage.drawImage("3D6DDDBB0RR21G87G54GU".replace(/[0-9]/g,function(a){return e[~~a]}),null,b)}])("vls",function(a,b,c){a=Bb[scrMgr.fixCase(c,Kb)];return Sa(0xba9f7654ff8f,64424509440+a[1],1986002767,983072+a[0],[[2]])},[Ab,Kb,function(a,b){var c=Bb[scrMgr.fixCase(a,Kb)],e=["DGG","GDG","GGD"];e=e[c[0]&3]+e[c[0]>>8&3]+e[c[0]>>12&3];var n=["DG","GD"];n=n[c[1]&3]+n[c[1]>>8&3]+n[c[1]>>12&3];image.llImage.drawImage("6a0eDR3cR4dUFF21b87f5".replace(/[0-9]/g,
function(a){return e[~~a]}).replace(/[a-z]/g,function(a){return n[a.charCodeAt(0)-97]}),null,b)}])("lse",w)("cmll",ib,[tb,Mb,Xa.bind(null,"G")])("cll",n,[tb,Mb,Xa.bind(null,"G")])("coll",kb,[tb,Mb,Xa.bind(null,"D")])("ell",Ua)("pll",function(a,b,c){a=Jb[scrMgr.fixCase(c,Ob)];return Sa(a[0]+0xba9876540000,0,a[1]+1985216512,0,bb,bb)},[Rb,Ob,Ya])("oll",function(a,b,c){a=Lb[scrMgr.fixCase(c,Tb)];return Sa(0xba987654ffff,a[0],1985282047,a[1],bb,bb)},[Nb,Tb,fb])("2gll",function(){return Sa(0xba987654ffff,
0,1985229328,65535,bb)})("sbrx",function(a,c,e){a=b(4);return Sa(0xfa9ff6ffffff,0xf00ff0ffffff,4133486591,4027580415,[sb[a]])+nb[a]})("mt3qb",function(){var a=mathlib.rn(4);return Sa(0xffff765fffff,0xffff000fffff,4133486591,4027580415,[Vb[a]])+Sb[a]})("mteole",function(){var a=mathlib.rn(4),b=mathlib.rn(4);return Sa(0xba98765fffff+4294967296*(17767&15<<4*a),1048575+4294967296*(15<<4*a),4133486591,4027580415,[Vb[b]])+Sb[b]})("mttdr",function(){return Sa(0xba98765fffff,0,4133486591,4027580415)})("mt6cp",
function(){return Sa(0xba98765fffff,0,4133486591,0)})("mtl5ep",function(){return Sa(0xba98765fffff,0,1985229328,0)})("mtcdrll",function(){return Sa(0xba98765fffff,0,1985282047,65535)})("easyc",function(a,b){var c=cross.getEasyCross(b);return Sa(c[0],c[1],4294967295,4294967295)})("easyxc",function(a,b){var c=cross.getEasyXCross(b);return Sa(c[0],c[1],c[2],c[3])})("eoline",function(){return Sa(0xffff7f5fffff,0,4294967295,4294967295)});return{getRandomScramble:Ra,getEdgeScramble:Pa,getCornerScramble:$a,
getLLScramble:Qa,getLSLLScramble:gb,getZBLLScramble:kb,getZZLLScramble:db,getTTLLScramble:Va,getF2LScramble:hb,getLSEScramble:w,getCMLLScramble:ib,getCLLScramble:n,getELLScramble:Ua,getAnyScramble:Sa,getPLLImage:Ya,getOLLImage:fb,genFacelet:function(a){return lb.solution(a,21,1E9,50,2)},solvFacelet:function(a){return lb.solution(a,21,1E9,50,0)}}}(mathlib.getNPerm,mathlib.setNPerm,mathlib.set8Perm,mathlib.getNParity,mathlib.rn,mathlib.rndEl);var scramble_444=function(c,Na,z){function r(a,b){var c;var e=Array(a);if(void 0!=b)for(c=0;c<a;c++)e[c]=Array(b);return e}function b(a,b,c){var e=lc[a];e&&!e.___clazz$?Db=e.prototype:(!e&&(e=lc[a]=function(){}),Db=e.prototype=0>b?{}:new lc[b],Db.castableTypeMap$=c);for(var n=3;n<arguments.length;++n)arguments[n].prototype=Db;e.___clazz$&&(Db.___clazz$=e.___clazz$,e.___clazz$=null)}function e(a){for(var b={},c=0,e=a.length;c<e;++c)b[a[c]]=1;return b}function a(){}function y(){}function f(a,b){var c=
Array(b);if(3==a)for(var e=0;e<b;++e){var n={};n.l=n.m=n.h=0;c[e]=n}else if(0<a)for(n=[null,0,!1][a],e=0;e<b;++e)c[e]=n;return c}function ab(a,b,c,e,n){e=f(n,e);h(a,b,c,e);return e}function h(a,b,c,e){Oa();var n=Dc,f=Ec;Oa();for(var w=0,h=n.length;w<h;++w)e[n[w]]=f[w];e.___clazz$=a;e.castableTypeMap$=b;e.queryId$=c;return e}function Oa(){Oa=a;Dc=[];Ec=[];var b=new y,c=Dc,e=Ec,n=0,f,w;for(w in b)if(f=b[w])c[n]=w,e[n]=f,++n}function Ra(){Ra=a;vc=r(15582,36);mc=r(15582);Yb=r(15582);fc=r(48,48);Zb=r(48,
36);gc=r(48);Fc=r(48)}function x(a,b){var c;if(null!=b&&b.castableTypeMap$&&b.castableTypeMap$[21]){for(c=0;24>c;++c)if(a.ct[c]!=b.ct[c])return!1;return!0}return!1}function Wa(a){var b;var c=0;var e=8;for(b=23;0<=b;--b)1==a.ct[b]&&(c+=Na[b][e--]);return c}function Ta(a){var b;if(null!=hc)return hc[Wa(a)];for(b=0;48>b;++b){var c=Wa(a);a:{var e;var n=0;for(e=mc.length-1;n<=e;){var f=n+(~~(e-n)>>1);var w=mc[f];if(w<c)n=f+1;else if(w>c)e=f-1;else{c=f;break a}}c=-n-1}c=0<=c?c:-1;if(-1!=c)return 64*c+b;
Sa(a,0);1==b%2&&Sa(a,1);7==b%8&&Sa(a,2);15==b%16&&Sa(a,3)}}function Za(a,b){var c=b%3;switch(~~(b/3)){case 0:jb(a.ct,0,1,2,3,c);break;case 1:jb(a.ct,16,17,18,19,c);break;case 2:jb(a.ct,8,9,10,11,c);break;case 3:jb(a.ct,4,5,6,7,c);break;case 4:jb(a.ct,20,21,22,23,c);break;case 5:jb(a.ct,12,13,14,15,c);break;case 6:jb(a.ct,0,1,2,3,c);jb(a.ct,8,20,12,16,c);jb(a.ct,9,21,13,17,c);break;case 7:jb(a.ct,16,17,18,19,c);jb(a.ct,1,15,5,9,c);jb(a.ct,2,12,6,10,c);break;case 8:jb(a.ct,8,9,10,11,c);jb(a.ct,2,19,
4,21,c);jb(a.ct,3,16,5,22,c);break;case 9:jb(a.ct,4,5,6,7,c);jb(a.ct,10,18,14,22,c);jb(a.ct,11,19,15,23,c);break;case 10:jb(a.ct,20,21,22,23,c);jb(a.ct,0,8,4,14,c);jb(a.ct,3,11,7,13,c);break;case 11:jb(a.ct,12,13,14,15,c),jb(a.ct,1,20,7,18,c),jb(a.ct,0,23,6,17,c)}}function Sa(a,b){switch(b){case 0:Za(a,19);Za(a,28);break;case 1:Za(a,21);Za(a,32);break;case 2:jb(a.ct,0,3,1,2,1);jb(a.ct,8,11,9,10,1);jb(a.ct,4,7,5,6,1);jb(a.ct,12,15,13,14,1);jb(a.ct,16,19,21,22,1);jb(a.ct,17,18,20,23,1);break;case 3:Za(a,
18),Za(a,29),Za(a,24),Za(a,35)}}function Pa(a,b){var c;for(c=0;c<b;++c)Sa(a,0),1==c%2&&Sa(a,1),7==c%8&&Sa(a,2),15==c%16&&Sa(a,3)}function $a(a,b){var c;var e=8;for(c=23;0<=c;--c)a.ct[c]=0,b>=Na[c][e]&&(b-=Na[c][e--],a.ct[c]=1)}function Qa(a,b){var c;for(c=0;24>c;++c)a.ct[c]=b.ct[c]}function gb(){var a;this.ct=r(24);for(a=0;8>a;++a)this.ct[a]=1;for(a=8;24>a;++a)this.ct[a]=0}function mb(a,b){var c;this.ct=r(24);for(c=0;24>c;++c)this.ct[c]=~~(a.ct[c]/2)==b?1:0}function hb(a){var b;this.ct=r(24);for(b=
0;24>b;++b)this.ct[b]=a[b]}function kb(){kb=a;wc=r(70,28);xc=r(6435,28);ed=r(70,16);fd=r(6435,16);Ub=r(450450);gd=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,1,0,0,0]}function ib(a){var b;var c=0;var e=8;for(b=14;0<=b;--b)a.ct[b]!=a.ct[15]&&(c+=Na[b][e--]);return c}function Xa(a){var b;var c=0;var e=4;for(b=6;0<=b;--b)a.rl[b]!=a.rl[7]&&(c+=Na[b][e--]);return 2*c+a.parity}function db(a,b){a.parity^=gd[b];var c=b%3;switch(~~(b/3)){case 0:jb(a.ct,0,1,2,3,c);break;case 1:jb(a.rl,
0,1,2,3,c);break;case 2:jb(a.ct,8,9,10,11,c);break;case 3:jb(a.ct,4,5,6,7,c);break;case 4:jb(a.rl,4,5,6,7,c);break;case 5:jb(a.ct,12,13,14,15,c);break;case 6:jb(a.ct,0,1,2,3,c);jb(a.rl,0,5,4,1,c);jb(a.ct,8,9,12,13,c);break;case 7:jb(a.rl,0,1,2,3,c);jb(a.ct,1,15,5,9,c);jb(a.ct,2,12,6,10,c);break;case 8:jb(a.ct,8,9,10,11,c);jb(a.rl,0,3,6,5,c);jb(a.ct,3,2,5,4,c);break;case 9:jb(a.ct,4,5,6,7,c);jb(a.rl,3,2,7,6,c);jb(a.ct,11,10,15,14,c);break;case 10:jb(a.rl,4,5,6,7,c);jb(a.ct,0,8,4,14,c);jb(a.ct,3,11,
7,13,c);break;case 11:jb(a.ct,12,13,14,15,c),jb(a.rl,1,4,7,2,c),jb(a.ct,1,0,7,6,c)}}function Va(a,b){switch(b){case 0:db(a,19);db(a,28);break;case 1:db(a,21);db(a,32);break;case 2:jb(a.ct,0,3,1,2,1),jb(a.ct,8,11,9,10,1),jb(a.ct,4,7,5,6,1),jb(a.ct,12,15,13,14,1),jb(a.rl,0,3,5,6,1),jb(a.rl,1,2,4,7,1)}}function w(a,b,c){var e;for(e=0;16>e;++e)a.ct[e]=~~(b.ct[e]/2);for(e=0;8>e;++e)a.rl[e]=b.ct[e+16];a.parity=c}function n(a,b){var c;var e=8;a.ct[15]=0;for(c=14;0<=c;--c)b>=Na[c][e]?(b-=Na[c][e--],a.ct[c]=
1):a.ct[c]=0}function Ua(a,b){var c;a.parity=b&1;b>>>=1;var e=4;a.rl[7]=0;for(c=6;0<=c;--c)b>=Na[c][e]?(b-=Na[c][e--],a.rl[c]=1):a.rl[c]=0}function Ya(){this.rl=r(8);this.ct=r(16)}function fb(){fb=a;nc=r(29400,20);hd=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1];bc=r(29400);Gc=[0,9,14,23,27,28,41,42,46,55,60,69];Hc=r(70)}function ob(a){var b;var c=0;var e=4;for(b=6;0<=b;--b)a.ud[b]!=a.ud[7]&&(c+=Na[b][e--]);c*=35;e=4;for(b=6;0<=b;--b)a.fb[b]!=a.fb[7]&&(c+=Na[b][e--]);var n=a.fb[7]^a.ud[7];var f=0;e=4;
for(b=7;0<=b;--b)a.rl[b]!=n&&(f+=Na[b][e--]);return a.parity+2*(12*c+Hc[f])}function cb(a,b,c){var e;var n=b.ct[0]>b.ct[8]^b.ct[8]>b.ct[16]^b.ct[0]>b.ct[16]?1:0;for(e=0;8>e;++e)a.ud[e]=b.ct[e]&1^1,a.fb[e]=b.ct[e+8]&1^1,a.rl[e]=b.ct[e+16]&1^1^n;a.parity=n^c}function eb(){this.ud=r(8);this.rl=r(8);this.fb=r(8)}function lb(){lb=a}function bb(){var a;this.ct=r(24);for(a=0;24>a;++a)this.ct[a]=~~(a/4)}function sb(a){bb.call(this);for(a=0;23>a;++a){var b=a+c(24-a);if(this.ct[b]!=this.ct[a]){var e=this.ct[a];
this.ct[a]=this.ct[b];this.ct[b]=e}}}function nb(){nb=a;Xb=r(18);var b,c;Xb[0]=new zb(15120,0);Xb[3]=new zb(21021,1494);Xb[6]=new zb(8064,1236);Xb[9]=new zb(9,0);Xb[12]=new zb(1230,412);Xb[15]=new zb(224,137);for(b=0;18>b;b+=3)for(c=0;2>c;++c)Xb[b+c+1]=new wb,ub(Xb[b+c],Xb[b],Xb[b+c+1])}function rb(a){a.cp=[0,1,2,3,4,5,6,7];a.co=[0,0,0,0,0,0,0,0]}function vb(a,b){var c;for(c=0;8>c;++c)a.cp[c]=b.cp[c],a.co[c]=b.co[c]}function ub(a,b,c){var e;for(e=0;8>e;++e){c.cp[e]=a.cp[b.cp[e]];var n=a.co[b.cp[e]];
var f=b.co[e];var w=n;w+=3>n?f:6-f;w%=3;3<=n^3<=f&&(w+=3);c.co[e]=w}}function wb(){rb(this)}function zb(a,b){rb(this);mathlib.set8Perm(this.cp,a);var c=b,e;var n=0;for(e=6;0<=e;--e)n+=this.co[e]=c%3,c=~~(c/3);this.co[7]=(15-n)%3}function yb(a){zb.call(this,c(40320),c(2187))}function Fb(){Fb=a;$b=r(1937880);yc=r(1538);zc=r(1538);ic=r(11880);id=[0,1,6,3,4,5,2,7];Ic=r(160,12);Jc=r(160,12);Kc=[1,1,1,3,12,60,360,2520,20160,181440,1814400,19958400,239500800];Lc=[0,2,4,6,1,3,7,5,8,9,10,11]}function pb(a,
b,c,e,n){var f=a.edgeo[n];a.edgeo[n]=a.edge[e];a.edge[e]=a.edgeo[c];a.edgeo[c]=a.edge[b];a.edge[b]=f}function Eb(a,b){var c;a.isStd||Mb(a);var e=0;var n=1985229328;var f=47768;for(c=0;c<b;++c){var w=a.edge[c]<<2;e*=12-c;32<=w?(e+=f>>w-32&15,f-=4368<<w-32):(e+=n>>w&15,f-=4369,n-=286331152<<w)}return e}function Cb(a){var b=Eb(a,4);b=ic[b];var c=b&7;b>>=3;Ab(a,c);a=Eb(a,10)%20160;return 20160*b+a}function Bb(a,b){a.isStd=!1;switch(b){case 0:z(a.edge,0,4,1,5);z(a.edgeo,0,4,1,5);break;case 1:xb(a.edge,
0,4,1,5);xb(a.edgeo,0,4,1,5);break;case 2:z(a.edge,0,5,1,4);z(a.edgeo,0,5,1,4);break;case 3:xb(a.edge,5,10,6,11);xb(a.edgeo,5,10,6,11);break;case 4:z(a.edge,0,11,3,8);z(a.edgeo,0,11,3,8);break;case 5:xb(a.edge,0,11,3,8);xb(a.edgeo,0,11,3,8);break;case 6:z(a.edge,0,8,3,11);z(a.edgeo,0,8,3,11);break;case 7:z(a.edge,2,7,3,6);z(a.edgeo,2,7,3,6);break;case 8:xb(a.edge,2,7,3,6);xb(a.edgeo,2,7,3,6);break;case 9:z(a.edge,2,6,3,7);z(a.edgeo,2,6,3,7);break;case 10:xb(a.edge,4,8,7,9);xb(a.edgeo,4,8,7,9);break;
case 11:z(a.edge,1,9,2,10);z(a.edgeo,1,9,2,10);break;case 12:xb(a.edge,1,9,2,10);xb(a.edgeo,1,9,2,10);break;case 13:z(a.edge,1,10,2,9);z(a.edgeo,1,10,2,9);break;case 14:xb(a.edge,0,4,1,5);xb(a.edgeo,0,4,1,5);z(a.edge,9,11);z(a.edgeo,8,10);break;case 15:xb(a.edge,5,10,6,11);xb(a.edgeo,5,10,6,11);z(a.edge,1,3);z(a.edgeo,0,2);break;case 16:xb(a.edge,0,11,3,8);xb(a.edgeo,0,11,3,8);z(a.edge,5,7);z(a.edgeo,4,6);break;case 17:xb(a.edge,2,7,3,6);xb(a.edgeo,2,7,3,6);z(a.edge,8,10);z(a.edgeo,9,11);break;case 18:xb(a.edge,
4,8,7,9);xb(a.edgeo,4,8,7,9);z(a.edge,0,2);z(a.edgeo,1,3);break;case 19:xb(a.edge,1,9,2,10),xb(a.edgeo,1,9,2,10),z(a.edge,4,6),z(a.edgeo,5,7)}}function Kb(a,b){a.isStd=!1;switch(b){case 0:Bb(a,14);Bb(a,17);break;case 1:pb(a,11,5,10,6);pb(a,5,10,6,11);pb(a,1,2,3,0);pb(a,4,9,7,8);pb(a,8,4,9,7);pb(a,0,1,2,3);break;case 2:Hb(a,4,5),Hb(a,5,4),Hb(a,11,8),Hb(a,8,11),Hb(a,7,6),Hb(a,6,7),Hb(a,9,10),Hb(a,10,9),Hb(a,1,1),Hb(a,0,0),Hb(a,3,3),Hb(a,2,2)}}function Ab(a,b){for(;2<=b;)b-=2,Kb(a,1),Kb(a,2);0!=b&&Kb(a,
0)}function tb(a,b){var c,e;var n=1985229328;var f=47768;for(c=e=0;11>c;++c){var w=Kc[11-c];var h=~~(b/w);b%=w;e^=h;h<<=2;32<=h?(h-=32,a.edge[c]=f>>h&15,w=(1<<h)-1,f=(f&w)+(f>>4&~w)):(a.edge[c]=n>>h&15,w=(1<<h)-1,n=(n&w)+(n>>>4&~w)+(f<<28),f>>=4)}0==(e&1)?a.edge[11]=n:(a.edge[11]=a.edge[10],a.edge[10]=n);for(c=0;12>c;++c)a.edgeo[c]=c;a.isStd=!0}function qb(a,b){var c;for(c=0;12>c;++c)a.edge[c]=b.edge[c],a.edgeo[c]=b.edgeo[c];a.isStd=b.isStd}function Ib(a,b){var c;null==a.temp&&(a.temp=r(12));for(c=
0;12>c;++c)a.temp[c]=c,a.edge[c]=b.ep[Lc[c]+12]%12;var e=1;for(c=0;12>c;++c)for(;a.edge[c]!=c;){var n=a.edge[c];a.edge[c]=a.edge[n];a.edge[n]=n;var f=a.temp[c];a.temp[c]=a.temp[n];a.temp[n]=f;e^=1}for(c=0;12>c;++c)a.edge[c]=a.temp[b.ep[Lc[c]]%12];return e}function Mb(a){var b;null==a.temp&&(a.temp=r(12));for(b=0;12>b;++b)a.temp[a.edgeo[b]]=b;for(b=0;12>b;++b)a.edge[b]=a.temp[a.edge[b]],a.edgeo[b]=b;a.isStd=!0}function xb(a,b,c,e,n){var f=a[b];a[b]=a[e];a[e]=f;f=a[c];a[c]=a[n];a[n]=f}function Hb(a,
b,c){var e=a.edge[b];a.edge[b]=a.edgeo[c];a.edgeo[c]=e}function Gb(){this.edge=r(12);this.edgeo=r(12)}function Jb(a,b){return a[b>>4]>>((b&15)<<1)&3}function Ob(a,b,c){var e=Jc[b];var n=Ic[b];var f=0;var w=1985229328;var h=47768;for(b=0;b<c;++b){var r=e[a[n[b]]]<<2;f*=12-b;32<=r?(f+=h>>r-32&15,h-=4368<<r-32):(f+=w>>r&15,h-=4369,w-=286331152<<r)}return f}function Rb(a){var b=new Gb;var c=0;var e=Jb($b,a);if(3==e)return 10;for(;0!=a;){0==e?e=2:--e;var n=~~(a/20160);n=yc[n];var f=a%20160;tb(b,20160*
n+f);for(n=0;17>n;++n){f=Ob(b.edge,n<<3,4);f=ic[f];var w=f&7;f>>=3;w=Ob(b.edge,n<<3|w,10)%20160;f=20160*f+w;if(Jb($b,f)==e){++c;a=f;break}}}return c}function Pb(a,b,c){a[b>>4]^=(3^c)<<((b&15)<<1)}function Lb(){Lb=a}function Tb(){var a;this.ep=r(24);for(a=0;24>a;++a)this.ep[a]=a}function Nb(a){Tb.call(this);for(a=0;23>a;++a){var b=a+c(24-a);if(b!=a){var e=this.ep[a];this.ep[a]=this.ep[b];this.ep[b]=e}}}function ac(){ac=a;Mc=[35,1,34,2,4,6,22,5,19]}function Vb(a,b){var c=a.edge;var e=b.edge,n;for(n=
0;24>n;++n)c.ep[n]=e.ep[n];c=a.center;e=b.center;for(n=0;24>n;++n)c.ct[n]=e.ct[n];vb(a.corner,b.corner);a.value=b.value;a.add1=b.add1;a.length1=b.length1;a.length2=b.length2;a.length3=b.length3;a.sym=b.sym;for(c=0;60>c;++c)a.moveBuffer[c]=b.moveBuffer[c];a.moveLength=b.moveLength;a.edgeAvail=b.edgeAvail;a.centerAvail=b.centerAvail;a.cornerAvail=b.cornerAvail}function Sb(a){for(;a.centerAvail<a.moveLength;){var b=a.center,c=a.moveBuffer[a.centerAvail++];var e=c%3;switch(~~(c/3)){case 0:jb(b.ct,0,1,
2,3,e);break;case 1:jb(b.ct,16,17,18,19,e);break;case 2:jb(b.ct,8,9,10,11,e);break;case 3:jb(b.ct,4,5,6,7,e);break;case 4:jb(b.ct,20,21,22,23,e);break;case 5:jb(b.ct,12,13,14,15,e);break;case 6:jb(b.ct,0,1,2,3,e);jb(b.ct,8,20,12,16,e);jb(b.ct,9,21,13,17,e);break;case 7:jb(b.ct,16,17,18,19,e);jb(b.ct,1,15,5,9,e);jb(b.ct,2,12,6,10,e);break;case 8:jb(b.ct,8,9,10,11,e);jb(b.ct,2,19,4,21,e);jb(b.ct,3,16,5,22,e);break;case 9:jb(b.ct,4,5,6,7,e);jb(b.ct,10,18,14,22,e);jb(b.ct,11,19,15,23,e);break;case 10:jb(b.ct,
20,21,22,23,e);jb(b.ct,0,8,4,14,e);jb(b.ct,3,11,7,13,e);break;case 11:jb(b.ct,12,13,14,15,e),jb(b.ct,1,20,7,18,e),jb(b.ct,0,23,6,17,e)}}return a.center}function Wb(a){for(;a.cornerAvail<a.moveLength;){var b=a.corner,c=a.moveBuffer[a.cornerAvail++]%18;!b.temps&&(b.temps=new wb);ub(b,Xb[c],b.temps);vb(b,b.temps)}return a.corner}function Qb(a){for(;a.edgeAvail<a.moveLength;){var b=a.edge,c=a.moveBuffer[a.edgeAvail++];var e=c%3;switch(~~(c/3)){case 0:jb(b.ep,0,1,2,3,e);jb(b.ep,12,13,14,15,e);break;case 1:jb(b.ep,
11,15,10,19,e);jb(b.ep,23,3,22,7,e);break;case 2:jb(b.ep,0,11,6,8,e);jb(b.ep,12,23,18,20,e);break;case 3:jb(b.ep,4,5,6,7,e);jb(b.ep,16,17,18,19,e);break;case 4:jb(b.ep,1,20,5,21,e);jb(b.ep,13,8,17,9,e);break;case 5:jb(b.ep,2,9,4,10,e);jb(b.ep,14,21,16,22,e);break;case 6:jb(b.ep,0,1,2,3,e);jb(b.ep,12,13,14,15,e);jb(b.ep,9,22,11,20,e);break;case 7:jb(b.ep,11,15,10,19,e);jb(b.ep,23,3,22,7,e);jb(b.ep,2,16,6,12,e);break;case 8:jb(b.ep,0,11,6,8,e);jb(b.ep,12,23,18,20,e);jb(b.ep,3,19,5,13,e);break;case 9:jb(b.ep,
4,5,6,7,e);jb(b.ep,16,17,18,19,e);jb(b.ep,8,23,10,21,e);break;case 10:jb(b.ep,1,20,5,21,e);jb(b.ep,13,8,17,9,e);jb(b.ep,14,0,18,4,e);break;case 11:jb(b.ep,2,9,4,10,e),jb(b.ep,14,21,16,22,e),jb(b.ep,7,15,1,17,e)}}return a.edge}function od(a){var b,c,e;var n=Array(a.moveLength-(a.add1?2:0));for(b=c=0;b<a.length1;++b)n[c++]=a.moveBuffer[b];var f=a.sym;for(b=a.length1+(a.add1?2:0);b<a.moveLength;++b)if(27<=Zb[f][a.moveBuffer[b]]){n[c++]=Zb[f][a.moveBuffer[b]]-9;var w=Mc[Zb[f][a.moveBuffer[b]]-27];f=fc[f][w]}else n[c++]=
Zb[f][a.moveBuffer[b]];b=fc[gc[f]];a:{a=Sb(a);a=new hb(a.ct);for(e=0;48>e;++e){w=!0;for(f=0;24>f;++f)if(a.ct[f]!=~~(f/4)){w=!1;break}if(w){a=e;break a}Sa(a,0);1==e%2&&Sa(a,1);7==e%8&&Sa(a,2);15==e%16&&Sa(a,3)}a=-1}b=b[a];a=[];f=b;for(b=c-1;0<=b;--b)w=n[b],w=3*~~(w/3)+(2-w%3),27<=Zb[f][w]?(a.push(Zb[f][w]-9),w=Mc[Zb[f][w]-27],f=fc[f][w]):a.push(Zb[f][w]);f=-1;c=0;e=[0,0,0];for(b=0;b<a.length;++b){w=a[b];if(f!=~~(w/3)%3){for(n=0;3>n;n++)e[n]%4&&(a[c++]=Nc[9*n+3*f+e[n]-1]+" ",e[n]=0);f=~~(w/3)%3}e[~~(w/
9)]+=w%3+1}for(n=0;3>n;n++)e[n]%4&&(a[c++]=Nc[9*n+3*f+e[n]-1]+" ",e[n]=0);return a=a.slice(0,c).join("")}function cc(a,b){a.moveBuffer[a.moveLength++]=b}function qc(){this.moveBuffer=r(60);this.edge=new Tb;this.center=new bb;this.corner=new wb}function rc(a){qc.call(this);Vb(this,a)}function Qc(a){this.moveBuffer=r(60);this.edge=new Nb(a);this.center=new sb(a);this.corner=new yb(a)}function Rc(){}function Sc(){Sc=a;var b,c;Nc="U  ;U2 ;U' ;R  ;R2 ;R' ;F  ;F2 ;F' ;D  ;D2 ;D' ;L  ;L2 ;L' ;B  ;B2 ;B' ;Uw ;Uw2;Uw';Rw ;Rw2;Rw';Fw ;Fw2;Fw';Dw ;Dw2;Dw';Lw ;Lw2;Lw';Bw ;Bw2;Bw'".split(";");
dc=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,21,22,23,25,28,30,31,32,34,36];oc=[0,1,2,4,6,7,8,9,10,11,13,15,16,17,19,22,25,28,31,34,36];jd=r(37);kd=r(37);jc=r(37,36);Ac=r(29,28);Bc=r(21,20);Oc=r(36);pc=r(28);kc=r(20);for(b=0;29>b;++b)jd[dc[b]]=b;for(b=0;21>b;++b)kd[oc[b]]=b;for(b=0;36>b;++b){for(c=0;36>c;++c)jc[b][c]=~~(b/3)==~~(c/3)||~~(b/3)%3==~~(c/3)%3&&b>c;jc[36][b]=!1}for(b=0;29>b;++b)for(c=0;28>c;++c)Ac[b][c]=jc[dc[b]][dc[c]];for(b=0;21>b;++b)for(c=0;20>c;++c)Bc[b][c]=jc[oc[b]][oc[c]];
for(b=0;36>b;++b)for(Oc[b]=36,c=b;36>c;++c)if(!jc[b][c]){Oc[b]=c-1;break}for(b=0;28>b;++b)for(pc[b]=28,c=b;28>c;++c)if(!Ac[b][c]){pc[b]=c-1;break}for(b=0;20>b;++b)for(kc[b]=20,c=b;20>c;++c)if(!Bc[b][c]){kc[b]=c-1;break}}function pd(a){a.solution="";var b=Ta(new mb(Sb(a.c),0));var c=Ta(new mb(Sb(a.c),1));var n=Ta(new mb(Sb(a.c),2));var f=Yb[~~b>>6];var h=Yb[~~c>>6];var r=Yb[~~n>>6];a.p1SolsCnt=0;a.arr2idx=0;rd(a.p1sols.heap);for(a.length1=(f<h?f:h)<r?f<h?f:h:r;100>a.length1&&!(r<=a.length1&&sc(a,~~n>>>
6,n&63,a.length1,-1,0)||f<=a.length1&&sc(a,~~b>>>6,b&63,a.length1,-1,0)||h<=a.length1&&sc(a,~~c>>>6,c&63,a.length1,-1,0));++a.length1);r=td(a.p1sols,ab(ud,e([25,30,40]),24,0,0));r.sort(function(a,b){return a.value-b.value});h=9;do{n=r[0].value;a:for(;100>n;++n)for(c=0;c<r.length&&!(r[c].value>n);++c)if(!(n-r[c].length1>h)&&(Vb(a.c1,r[c]),w(a.ct2,Sb(a.c1),tc(Qb(a.c1).ep)),b=ib(a.ct2),f=Xa(a.ct2),a.length1=r[c].length1,a.length2=n-r[c].length1,Tc(a,b,f,a.length2,28,0)))break a;++h}while(100==n);a.arr2.sort(function(a,
b){return a.value-b.value});r=0;n=13;do{h=a.arr2[0].value;a:for(;100>h;++h)for(c=0;c<Math.min(a.arr2idx,100)&&!(a.arr2[c].value>h);++c)if(!(h-a.arr2[c].length1-a.arr2[c].length2>n)){b=Ib(a.e12,Qb(a.arr2[c]));cb(a.ct3,Sb(a.arr2[c]),b^tc(Wb(a.arr2[c]).cp));b=ob(a.ct3);f=Eb(a.e12,10);var x=Rb(Cb(a.e12));if(x<=h-a.arr2[c].length1-a.arr2[c].length2&&Uc(a,f,b,x,h-a.arr2[c].length1-a.arr2[c].length2,20,0)){r=c;break a}}++n}while(100==h);n=new rc(a.arr2[r]);a.length1=n.length1;a.length2=n.length2;h=h-a.length1-
a.length2;for(c=0;c<h;++c)cc(n,oc[a.move3[c]]);a.solution=od(n)}function qd(a,b){if(!ld){var c,e,f;var w=new gb;for(c=0;24>c;++c)w.ct[c]=c;var h=new hb(w.ct);var bb=new hb(w.ct);var y=new hb(w.ct);for(c=0;48>c;++c){for(e=0;48>e;++e){for(f=0;48>f;++f)x(w,h)&&(fc[c][e]=f,0==f&&(gc[c]=e)),Sa(h,0),1==f%2&&Sa(h,1),7==f%8&&Sa(h,2),15==f%16&&Sa(h,3);Sa(w,0);1==e%2&&Sa(w,1);7==e%8&&Sa(w,2);15==e%16&&Sa(w,3)}Sa(w,0);1==c%2&&Sa(w,1);7==c%8&&Sa(w,2);15==c%16&&Sa(w,3)}for(c=0;48>c;++c)for(Qa(w,bb),Pa(w,gc[c]),
e=0;36>e;++e)for(Qa(h,w),Za(h,e),Pa(h,c),f=0;36>f;++f)if(Qa(y,bb),Za(y,f),x(y,h)){Zb[c][e]=f;break}$a(w,0);for(c=0;48>c;++c)Fc[gc[c]]=Wa(w),Sa(w,0),1==c%2&&Sa(w,1),7==c%8&&Sa(w,2),15==c%16&&Sa(w,3);hc=r(735471);w=new gb;e=r(22984);for(bb=0;22984>bb;bb++)e[bb]=0;for(bb=h=0;735471>bb;++bb)if(0==(e[~~bb>>>5]&1<<(bb&31))){$a(w,bb);for(c=0;48>c;++c)y=Wa(w),e[~~y>>>5]|=1<<(y&31),null!=hc&&(hc[y]=h<<6|gc[c]),Sa(w,0),1==c%2&&Sa(w,1),7==c%8&&Sa(w,2),15==c%16&&Sa(w,3);mc[h++]=bb}w=new gb;h=new gb;for(bb=0;15582>
bb;++bb)for($a(h,mc[bb]),y=0;36>y;++y)Qa(w,h),Za(w,y),vc[bb][y]=Ta(w);hc=null;uc(Yb);h=Yb[0]=0;for(bb=1;15582!=bb;){var z=(e=4<h)?-1:h;w=e?h:-1;++h;for(y=0;15582>y;++y)if(Yb[y]==z)for(f=0;27>f;++f)if(c=~~vc[y][f]>>>6,Yb[c]==w)if(++bb,e){Yb[y]=h;break}else Yb[c]=h}bb=new Ya;for(w=0;70>w;++w)for(h=0;28>h;++h)Ua(bb,w),db(bb,dc[h]),wc[w][h]=Xa(bb);for(w=0;70>w;++w)for(Ua(bb,w),h=0;16>h;++h)ed[w][h]=Xa(bb),Va(bb,0),1==h%2&&Va(bb,1),7==h%8&&Va(bb,2);for(w=0;6435>w;++w)for(n(bb,w),h=0;16>h;++h)fd[w][h]=
ib(bb)&65535,Va(bb,0),1==h%2&&Va(bb,1),7==h%8&&Va(bb,2);for(w=0;6435>w;++w)for(h=0;28>h;++h)n(bb,w),db(bb,dc[h]),xc[w][h]=ib(bb)&65535;uc(Ub);y=Ub[0]=Ub[18]=Ub[28]=Ub[46]=Ub[54]=Ub[56]=0;for(c=6;450450!=c;){z=(f=6<y)?-1:y;var Oa=f?y:-1;++y;for(w=0;450450>w;++w)if(Ub[w]==z)for(bb=~~(w/70),e=w%70,h=0;23>h;++h){var fb=xc[bb][h];var Ra=wc[e][h];fb=70*fb+Ra;if(Ub[fb]==Oa)if(++c,f){Ub[w]=y;break}else Ub[fb]=y}}for(w=0;12>w;++w)Hc[Gc[w]]=w;bb=new eb;for(w=0;29400>w;++w)for(h=0;20>h;++h){e=bb;f=w;e.parity=
f&1;f>>>=1;z=Gc[f%12];f=~~(f/12);y=4;for(c=7;0<=c;--c)e.rl[c]=0,z>=Na[c][y]&&(z-=Na[c][y--],e.rl[c]=1);z=f%35;f=~~(f/35);y=4;e.fb[7]=0;for(c=6;0<=c;--c)z>=Na[c][y]?(z-=Na[c][y--],e.fb[c]=1):e.fb[c]=0;y=4;e.ud[7]=0;for(c=6;0<=c;--c)f>=Na[c][y]?(f-=Na[c][y--],e.ud[c]=1):e.ud[c]=0;y=bb;c=h;y.parity^=hd[c];switch(c){case 0:case 1:case 2:jb(y.ud,0,1,2,3,c%3);break;case 3:jb(y.rl,0,1,2,3,1);break;case 4:case 5:case 6:jb(y.fb,0,1,2,3,(c-1)%3);break;case 7:case 8:case 9:jb(y.ud,4,5,6,7,(c-1)%3);break;case 10:jb(y.rl,
4,5,6,7,1);break;case 11:case 12:case 13:jb(y.fb,4,5,6,7,(c+1)%3);break;case 14:jb(y.ud,0,1,2,3,1);jb(y.rl,0,5,4,1,1);jb(y.fb,0,5,4,1,1);break;case 15:jb(y.rl,0,1,2,3,1);jb(y.fb,1,4,7,2,1);jb(y.ud,1,6,5,2,1);break;case 16:jb(y.fb,0,1,2,3,1);jb(y.ud,3,2,5,4,1);jb(y.rl,0,3,6,5,1);break;case 17:jb(y.ud,4,5,6,7,1);jb(y.rl,3,2,7,6,1);jb(y.fb,3,2,7,6,1);break;case 18:jb(y.rl,4,5,6,7,1);jb(y.fb,0,3,6,5,1);jb(y.ud,0,3,4,7,1);break;case 19:jb(y.fb,4,5,6,7,1),jb(y.ud,0,7,6,1,1),jb(y.rl,1,4,7,2,1)}nc[w][h]=
ob(bb)&65535}uc(bc);bb=bc[0]=0;for(y=1;29400!=y;){for(w=0;29400>w;++w)if(bc[w]==bb)for(h=0;17>h;++h)-1==bc[nc[w][h]]&&(bc[nc[w][h]]=bb+1,++y);++bb}w=new Gb;for(bb=0;20>bb;++bb)for(y=0;8>y;++y){tb(w,0);Bb(w,bb);Ab(w,y);for(h=0;12>h;++h)Ic[bb<<3|y][h]=w.edge[h];Mb(w);for(h=0;12>h;++h)Jc[bb<<3|y][h]=w.temp[h]}h=new Gb;e=r(1485);for(bb=0;1485>bb;bb++)e[bb]=0;for(bb=w=0;11880>bb;++bb)if(0==(e[~~bb>>>3]&1<<(bb&7))){tb(h,bb*Kc[8]);for(c=0;8>c;++c)y=Eb(h,4),y==bb&&(zc[w]=(zc[w]|1<<c)&65535),e[~~y>>3]|=1<<
(y&7),ic[y]=w<<3|id[c],Kb(h,0),1==c%2&&(Kb(h,1),Kb(h,2));yc[w++]=bb}var sb;bb=new Gb;y=new Gb;e=new Gb;uc($b);h=0;Cc=1;for(Pb($b,0,0);31006080!=Cc;){f=9<h;z=h%3;w=(h+1)%3;c=f?3:z;z=f?z:3;if(9<=h)break;for(Ra=0;31006080>Ra;Ra+=16){var kb=$b[~~Ra>>4];if(f||-1!=kb)for(fb=Ra,Oa=Ra+16;fb<Oa;++fb,kb>>=2)if((kb&3)==c){var cb=~~(fb/20160);cb=yc[cb];var lb=fb%20160;tb(bb,20160*cb+lb);for(cb=0;17>cb;++cb){lb=Ob(bb.edge,cb<<3,4);lb=ic[lb];var nb=lb&7;lb>>=3;var ab=Ob(bb.edge,cb<<3|nb,10)%20160;ab=20160*lb+ab;
if(Jb($b,ab)==z){Pb($b,f?fb:ab,w);++Cc;if(f)break;ab=zc[lb];if(1!=ab)for(qb(y,bb),Bb(y,cb),Ab(y,nb),sb=1;0!=(ab=~~ab>>1&65535);++sb)1==(ab&1)&&(qb(e,y),Ab(e,sb),nb=20160*lb+Eb(e,10)%20160,Jb($b,nb)==z&&(Pb($b,nb,w),++Cc))}}}}++h}ld=!0}a.c=new Qc(b);pd(a);return a.solution}function sc(a,b,c,e,n,f){var h,r,x;if(0==b){if(b=0==e){Vb(a.c1,a.c);for(b=0;b<a.length1;++b)cc(a.c1,a.move1[b]);switch(Fc[c]){case 0:cc(a.c1,24);cc(a.c1,35);a.move1[a.length1]=24;a.move1[a.length1+1]=35;a.add1=!0;c=19;break;case 12869:cc(a.c1,
18);cc(a.c1,29);a.move1[a.length1]=18;a.move1[a.length1+1]=29;a.add1=!0;c=34;break;case 735470:a.add1=!1,c=0}w(a.ct2,Sb(a.c1),tc(Qb(a.c1).ep));b=ib(a.ct2);e=Xa(a.ct2);a.c1.value=Ub[70*b+e]+a.length1;a.c1.length1=a.length1;a.c1.add1=a.add1;a.c1.sym=c;++a.p1SolsCnt;if(500>a.p1sols.heap.size)var Ua=new rc(a.c1);else{c=a.p1sols;if(0==c.heap.size)Ua=null;else{b=c.heap.array[0];e=c.heap;n=c.heap.size-1;f=e.array[n];e.array.splice(n,1);--e.size;if(0<c.heap.size){ec(c.heap,0,f);e=0;n=c.heap.size;for(x=c.heap.array[e];2*
e+1<n;){f=(h=2*e+1,Ua=h+1,r=h,Ua<n&&0>c.heap.array[h].value-c.heap.array[Ua].value&&(r=Ua),r);if(0>c.heap.array[f].value-x.value)break;ec(c.heap,e,c.heap.array[f]);e=f}ec(c.heap,e,x)}Ua=b}Ua.value>a.c1.value&&Vb(Ua,a.c1)}h=a.p1sols;b:{r=h.heap.size;c=h.heap;b=c.size++;for(c.array[b]=Ua;0<r;){c=r;r=~~((r-1)/2);if(0>=Ua.value-h.heap.array[r].value){ec(h.heap,c,Ua);break b}ec(h.heap,c,h.heap.array[r])}ec(h.heap,r,Ua)}b=1E4==a.p1SolsCnt}return b}for(h=0;27>h;h+=3)if(h!=n&&h!=n-9&&h!=n-18)for(x=0;3>x;++x){r=
h+x;Ua=vc[b][Zb[c][r]];var Pa=Yb[~~Ua>>>6];if(Pa>=e){if(Pa>e)break}else if(Pa=fc[c][Ua&63],Ua>>>=6,a.move1[f]=r,sc(a,Ua,Pa,e-1,h,f+1))return!0}return!1}function Tc(a,b,c,e,n,w){var f;if(0==b&&0==Ub[c]){if(b=0==e){Vb(a.c2,a.c1);for(b=0;b<a.length2;++b)cc(a.c2,a.move2[b]);b=Qb(a.c2);c=0;n=!1;for(e=0;12>e;++e)c|=1<<b.ep[e],n=n!=12<=b.ep[e];0!=(c&~~c>>12)||n?b=!1:(b=Ib(a.e12,Qb(a.c2)),cb(a.ct3,Sb(a.c2),b^tc(Wb(a.c2).cp)),b=ob(a.ct3),Eb(a.e12,10),c=Rb(Cb(a.e12)),a.arr2[a.arr2idx]?Vb(a.arr2[a.arr2idx],
a.c2):a.arr2[a.arr2idx]=new rc(a.c2),a.arr2[a.arr2idx].value=a.length1+a.length2+Math.max(c,bc[b]),a.arr2[a.arr2idx].length2=a.length2,++a.arr2idx,b=a.arr2idx==a.arr2.length)}return b}for(f=0;23>f;++f)if(Ac[n][f])f=pc[f];else{var h=xc[b][f];var r=wc[c][f];var x=Ub[70*h+r];if(x>=e)x>e&&(f=pc[f]);else if(a.move2[w]=dc[f],Tc(a,h,r,e-1,f,w+1))return!0}return!1}function Uc(a,b,c,e,n,f,w){var h;if(0==n)return 0==b&&0==c;tb(a.tempe[w],b);for(h=0;17>h;++h)if(Bc[f][h])h=kc[h];else{b=nc[c][h];var r=bc[b];if(r>=
n)r>n&&14>h&&(h=kc[h]);else{r=Ob(a.tempe[w].edge,h<<3,10);var x=~~(r/20160);x=ic[x];var Ua=x&7;x>>=3;var Pa=Ob(a.tempe[w].edge,h<<3|Ua,10)%20160;Ua=e;x=Jb($b,20160*x+Pa);x=3==x?10:(1227133513<<x>>Ua&3)+Ua-1;if(x>=n)x>n&&14>h&&(h=kc[h]);else if(Uc(a,r,b,x,n-1,h,w+1))return a.move3[w]=h,!0}}return!1}function Vc(){var a;this.p1sols=new bd(new Rc);this.move1=r(15);this.move2=r(20);this.move3=r(20);this.c1=new qc;this.c2=new qc;this.ct2=new Ya;this.ct3=new eb;this.e12=new Gb;this.tempe=r(20);this.arr2=
r(100);for(a=0;20>a;++a)this.tempe[a]=new Gb}function Wc(){Wc=a}function tc(a){var b,c,e;var n=e=0;for(c=a.length;n<c;++n)for(b=n;b<c;++b)a[n]>a[b]&&(e^=1);return e}function jb(a,b,c,e,n,w){switch(w){case 0:w=a[n];a[n]=a[e];a[e]=a[c];a[c]=a[b];a[b]=w;break;case 1:w=a[b];a[b]=a[e];a[e]=w;w=a[c];a[c]=a[n];a[n]=w;break;case 2:w=a[b],a[b]=a[c],a[c]=a[e],a[e]=a[n],a[n]=w}}function Xc(){}function Yc(a,b,c,e){var n=new Xc;n.typeName=a+b;$c(0!=c?-c:0)&&ad(0!=c?-c:0,n);n.modifiers=4;n.superclass=Pc;n.componentType=
e;return n}function Zc(a,b,c,e){var n=new Xc;n.typeName=a+b;$c(c)&&ad(c,n);n.superclass=e;return n}function $c(a){return"number"==typeof a&&0<a}function ad(a,b){b.seedId=a;if(2==a)var c=String.prototype;else if(0<a)if(c=lc[b.seedId])c=c.prototype;else{c=lc[a]=function(){};c.___clazz$=b;return}else return;c.___clazz$=b}function rd(a){a.array=ab(md,e([30,40]),0,0,0);a.size=0}function ec(a,b,c){var e=a.array[b];a.array[b]=c;return e}function sd(){this.array=ab(md,e([30,40]),0,0,0);this.array.length=
500}function uc(a){var b=a.length,c;for(c=0;c<b;++c)a[c]=-1}function td(a,b){var c=a.heap,e=b;if(e.length<c.size){var n=f(0,c.size);h(e.___clazz$,e.castableTypeMap$,e.queryId$,n);e=n}for(n=0;n<c.size;++n)e[n]=c.array[n];e.length>c.size&&(e[c.size]=null);return e}function bd(a){this.heap=new sd;this.cmp=a}function cd(){cd=a;Sc();Wc();Ra();kb();fb();Fb();lb();nb();Lb();ac();nd=new Vc}function dd(){cd();return(scramble_333.getRandomScramble()+qd(nd,Math)).replace(/\s+/g," ")}var Db,lc={};b(1,-1,{});
Db.value=null;b(73,1,{},y);Db.queryId$=0;var Dc,Ec;b(153,1,e([21]),gb,mb,hb);var Yb,vc,Fc,hc=null,mc,gc,Zb,fc;b(154,1,{},Ya);Db.parity=0;var xc,Ub,fd,gd,wc,ed;b(155,1,{},eb);Db.parity=0;var nc,hd,bc,Gc,Hc;b(156,1,{},bb,sb);b(157,1,e([22]),wb,zb,yb);Db.temps=null;var Xb;b(158,1,e([23]),Gb);Db.isStd=!0;Db.temp=null;var Lc,Cc=0,$b,Kc,Ic,Jc,ic,yc,id,zc;b(159,1,{},Tb,Nb);b(160,1,e([24,34]),qc,rc,Qc);Db.compareTo$=function(a){return this.value-a.value};Db.add1=!1;Db.center=null;Db.centerAvail=0;Db.corner=
null;Db.cornerAvail=0;Db.edge=null;Db.edgeAvail=0;Db.length1=0;Db.length2=0;Db.length3=0;Db.moveLength=0;Db.sym=0;Db.value=0;var Mc;b(161,1,{},Rc);Db.compare=function(a,b){return b.value-a.value};var jc,Ac,Bc,dc,Nc,oc,Oc,pc,kc,jd,kd;b(163,1,e([26]),Vc);Db.add1=!1;Db.arr2idx=0;Db.c=null;Db.length1=0;Db.length2=0;Db.p1SolsCnt=0;Db.solution="";var ld=!1;Db.val$outerIter=null;Db.size=0;b(239,1,{},bd);Db.cmp=null;Db.heap=null;var Pc=Zc("java.lang.","Object",1,null),md=Yc("[Ljava.lang.","Object;",356,Pc),
vd=Zc("cs.threephase.","FullCube",160,Pc),ud=Yc("[Lcs.threephase.","FullCube;",381,vd),nd;scrMgr.reg("444wca",dd);return{getRandomScramble:dd}}(mathlib.rn,mathlib.Cnk,mathlib.circle);(function(c,Na,z,r){function b(a,b){b<<=2;if(24<b){b=48-b;var c=a.ul;a.ul=(a.ul>>b|a.ur<<24-b)&16777215;a.ur=(a.ur>>b|c<<24-b)&16777215}else 0<b?(c=a.ul,a.ul=(a.ul<<b|a.ur>>24-b)&16777215,a.ur=(a.ur<<b|c>>24-b)&16777215):0==b?(c=a.ur,a.ur=a.dl,a.dl=c,a.ml=1-a.ml):-24<=b?(b=-b,c=a.dl,a.dl=(a.dl<<b|a.dr>>24-b)&16777215,a.dr=(a.dr<<b|c>>24-b)&16777215):-24>b&&(b=48+b,c=a.dl,a.dl=(a.dl>>b|a.dr<<24-b)&16777215,a.dr=(a.dr>>b|c<<24-b)&16777215)}function e(a,b){var c;6>b?c=a.ul>>(5-b<<2):12>b?c=a.ur>>(11-
b<<2):18>b?c=a.dl>>(17-b<<2):c=a.dr>>(23-b<<2);return c&15}function a(a,b,c){6>b?(a.ul&=~(15<<(5-b<<2)),a.ul|=c<<(5-b<<2)):12>b?(a.ur&=~(15<<(11-b<<2)),a.ur|=c<<(11-b<<2)):18>b?(a.dl&=~(15<<(17-b<<2)),a.dl|=c<<(17-b<<2)):(a.dr&=~(15<<(23-b<<2)),a.dr|=c<<(23-b<<2))}function y(){this.arr=[];this.prm=[]}function f(b){var c;void 0===b&&(b=r(3678));var e=new y;var n=Xa[b];var w=324508639;var f=38177486;var h=c=8;for(b=0;24>b;b++)if(0==(n>>b&1)){var x=r(c)<<2;a(e,23-b,f>>x&15);x=(1<<x)-1;f=(f&x)+(f>>4&
~x);--c}else x=r(h)<<2,a(e,23-b,w>>x&15),a(e,22-b,w>>x&15),x=(1<<x)-1,w=(w&x)+(w>>4&~x),--h,++b;e.ml=r(2);return e}function ab(a,c,n,f,r,x){if(0==n&&4>f){if(c=0==f)a:{c=a.Search_d;f=a.Search_c;c.ul=f.ul;c.ur=f.ur;c.dl=f.dl;c.dr=f.dr;c.ml=f.ml;for(c=0;c<a.Search_length1;++c)b(a.Search_d,a.Search_move[c]);c=a.Search_d;f=a.Search_sq;for(r=0;8>r;++r)c.prm[r]=e(c,3*r+1)>>1;f.cornperm=Na(c.prm);f.topEdgeFirst=e(c,0)==e(c,1);r=f.topEdgeFirst?2:0;for(x=0;4>x;r+=3,++x)c.prm[x]=e(c,r)>>1;f.botEdgeFirst=e(c,
12)==e(c,13);for(r=f.botEdgeFirst?14:12;8>x;r+=3,++x)c.prm[x]=e(c,r)>>1;f.edgeperm=Na(c.prm);f.ml=c.ml;r=a.Search_sq.edgeperm;f=a.Search_sq.cornperm;x=a.Search_sq.ml;for(c=Math.max(Ya[a.Search_sq.edgeperm<<1|x],Ya[a.Search_sq.cornperm<<1|x]);c<a.Search_maxlen2;++c)if(h(a,r,f,a.Search_sq.topEdgeFirst,a.Search_sq.botEdgeFirst,x,c,a.Search_length1,0)){for(f=0;f<c;++f)b(a.Search_d,a.Search_move[a.Search_length1+f]);f=a;r="";n=x=0;for(c=c+a.Search_length1-1;0<=c;c--){var Ua=a.Search_move[c];0<Ua?(Ua=12-
Ua,x=6<Ua?Ua-12:Ua):0>Ua?(Ua=12+Ua,n=6<Ua?Ua-12:Ua):(Ua="/",c==a.Search_length1-1&&(Ua="`/`"),r=0==x&&0==n?r+Ua:r+(" ("+x+","+n+")"+Ua),x=n=0)}if(0!=x||0!=n)r+=" ("+x+","+n+") ";f.Search_sol_string=r;c=!0;break a}c=!1}return c}if(0!=x){var Pa=w[c];Ua=db[Pa];if(Ua<f&&(a.Search_move[r]=0,ab(a,Pa,Ua,f-1,r+1,0)))return!0}Pa=c;if(0>=x)for(n=0;;){n+=Va[Pa];Pa=n>>4;n&=15;if(12<=n)break;Ua=db[Pa];if(Ua>f)break;else if(Ua<f&&(a.Search_move[r]=n,ab(a,Pa,Ua,f-1,r+1,1)))return!0}Pa=c;if(1>=x)for(n=0;;){n+=ib[Pa];
Pa=n>>4;n&=15;if(6<=n)break;Ua=db[Pa];if(Ua>f)break;else if(Ua<f&&(a.Search_move[r]=-n,ab(a,Pa,Ua,f-1,r+1,2)))return!0}return!1}function h(a,b,c,e,n,f,w,r,x){var Pa,y;if(0==w&&!e&&n)return!0;if(0!=x&&e==n){var Qa=ob[b];var z=ob[c];if(Ya[Qa<<1|1-f]<w&&Ya[z<<1|1-f]<w&&(a.Search_move[r]=0,h(a,Qa,z,e,n,1-f,w-1,r+1,0)))return!0}if(0>=x){Qa=(y=!e)?fb[b]:b;z=y?c:fb[c];var Sa=y?1:2;var Va=Ya[Qa<<1|f];for(Pa=Ya[z<<1|f];12>Sa&&Va<=w&&Va<=w;){if(Va<w&&Pa<w&&(a.Search_move[r]=Sa,h(a,Qa,z,y,n,f,w-1,r+1,1)))return!0;
(y=!y)?(Qa=fb[Qa],Va=Ya[Qa<<1|f],Sa+=1):(z=fb[z],Pa=Ya[z<<1|f],Sa+=2)}}if(1>=x)for(Qa=(n=!n)?Ua[b]:b,z=n?c:Ua[c],Sa=n?1:2,Va=Ya[Qa<<1|f],Pa=Ya[z<<1|f];Sa<(6<w?6:12)&&Va<=w&&Va<=w;){if(Va<w&&Pa<w&&(a.Search_move[r]=-Sa,h(a,Qa,z,e,n,f,w-1,r+1,2)))return!0;(n=!n)?(Qa=Ua[Qa],Va=Ya[Qa<<1|f],Sa+=1):(z=Ua[z],Pa=Ya[z<<1|f],Sa+=2)}return!1}function Oa(a,b){a.Search_c=b;var c=b.ur&1118481;c|=c>>3;c|=c>>6;c=c&15|c>>12&48;var n=b.ul&1118481;n|=n>>3;n|=n>>6;n=n&15|n>>12&48;var f=b.dr&1118481;f|=f>>3;f|=f>>6;f=
f&15|f>>12&48;var w=b.dl&1118481;w|=w>>3;w|=w>>6;w=w&15|w>>12&48;var h,r;var x=0;b.arr[0]=e(b,0);for(h=1;24>h;++h)e(b,h)!=b.arr[x]&&(b.arr[++x]=e(b,h));for(x=r=0;16>x;++x)for(h=x+1;16>h;++h)b.arr[x]>b.arr[h]&&(r^=1);w=Sa(r<<24|n<<18|c<<12|w<<6|f);for(a.Search_length1=db[w];100>a.Search_length1&&(a.Search_maxlen2=Math.min(32-a.Search_length1,17),!ab(a,w,db[w],a.Search_length1,0,-1));++a.Search_length1);return a.Search_sol_string}function Ra(){this.Search_move=[];this.Search_d=new y;this.Search_sq=
new $a}function x(){x=$.noop;n=[0,3,6,12,15,24,27,30,48,51,54,60,63];Xa=[];db=[];Va=[];ib=[];w=[];var a,b;for(b=a=0;28561>b;++b){var c=n[b%13];var e=n[~~(b/13)%13];var f=n[~~(~~(b/13)/13)%13];var h=n[~~(~~(~~(b/13)/13)/13)];e=h<<18|f<<12|e<<6|c;16==Qa(e)&&(Xa[a++]=e)}a=new Za;for(b=0;7356>b;++b){Ta(a,b);e=Va;c=b;var r=a;h=f=0;do 0==(r.top&2048)?(f+=1,r.top<<=1):(f+=2,r.top=r.top<<2^12291),h=1-h;while(0!=(Qa(r.top&63)&1));0==(Qa(r.top)&2)&&(r.Shape_parity^=h);e[c]=f;Va[b]|=Wa(a)<<4;Ta(a,b);e=ib;c=
b;r=a;h=f=0;do 0==(r.bottom&2048)?(f+=1,r.bottom<<=1):(f+=2,r.bottom=r.bottom<<2^12291),h=1-h;while(0!=(Qa(r.bottom&63)&1));0==(Qa(r.bottom)&2)&&(r.Shape_parity^=h);e[c]=f;ib[b]|=Wa(a)<<4;Ta(a,b);h=a.top&63;e=Qa(h);c=Qa(a.bottom&4032);a.Shape_parity^=1&(e&c)>>1;a.top=a.top&4032|a.bottom>>6&63;a.bottom=a.bottom&63|h<<6;w[b]=Wa(a)}for(b=0;7536>b;++b)db[b]=-1;db[Sa(14378715)]=0;db[Sa(31157686)]=0;db[Sa(23967451)]=0;db[Sa(7191990)]=0;e=4;c=0;for(a=-1;e!=c;)for(c=e,++a,b=0;7536>b;++b)if(db[b]==a){f=0;
h=b;do h=Va[h],f+=h&15,h>>=4,-1==db[h]&&(++e,db[h]=a+1);while(12!=f);f=0;h=b;do h=ib[h],f+=h&15,h>>=4,-1==db[h]&&(++e,db[h]=a+1);while(12!=f);h=w[b];-1==db[h]&&(++e,db[h]=a+1)}}function Wa(a){return gb(Xa,a.top<<12|a.bottom)<<1|a.Shape_parity}function Ta(a,b){a.Shape_parity=b&1;a.top=Xa[b>>1];a.bottom=a.top&4095;a.top>>=12}function Za(){}function Sa(a){return gb(Xa,a&16777215)<<1|a>>24}function Pa(){Pa=$.noop;Ya=[];ob=[];fb=[];Ua=[];var a,b,e;var n=[];for(b=0;40320>b;++b)c(n,b),z(n,2,4)(n,3,5),ob[b]=
Na(n),c(n,b),z(n,0,3,2,1),fb[b]=Na(n),c(n,b),z(n,4,7,6,5),Ua[b]=Na(n);for(b=0;80640>b;++b)Ya[b]=-1;var f=Ya[0]=0;for(a=1;80640>a;){var w=(e=11<=f)?-1:f;n=e?f:-1;++f;b=0;a:for(;80640>b;++b)if(Ya[b]==w){var h=b>>1;var r=b&1;var x=ob[h]<<1|1-r;if(Ya[x]==n&&(++a,Ya[e?b:x]=f,e))continue a;x=h;for(h=0;4>h;++h)if(x=fb[x],Ya[x<<1|r]==n&&(++a,Ya[e?b:x<<1|r]=f,e))continue a;for(h=0;4>h;++h)if(x=Ua[x],Ya[x<<1|r]==n&&(++a,Ya[e?b:x<<1|r]=f,e))continue a}}}function $a(){}function Qa(a){a-=a>>1&1431655765;a=(a>>
2&858993459)+(a&858993459);a=(a>>4)+a&252645135;a+=a>>8;return a+(a>>16)&63}function gb(a,b){var c;var e=0;for(c=a.length-1;e<=c;){var n=e+(c-e>>1);var f=a[n];if(f<b)e=n+1;else if(f>b)c=n-1;else return n}return-e-1}function mb(){mb=$.noop;for(var a=new Za,b=0;b<cb.length;b++){for(var c=[cb[b]],e=0;e<c.length;e++){var n=c[e];do n=Va[n<<1]>>5,-1==c.indexOf(n)&&c.push(n);while(n!=c[e]);do n=ib[n<<1]>>5,-1==c.indexOf(n)&&c.push(n);while(n!=c[e]);Ta(a,n<<1);n=a.top;a.top=a.bottom;a.bottom=n;n=Wa(a)>>1;
-1==c.indexOf(n)&&c.push(n)}cb[b]=c}}function hb(a,b,c){x();Pa();return Oa(lb,f())}var kb=y.prototype=function(){}.prototype;kb.dl=10062778;kb.dr=14536702;kb.ml=0;kb.ul=70195;kb.ur=4544119;kb=Ra.prototype=function(){}.prototype;kb.Search_c=null;kb.Search_length1=0;kb.Search_maxlen2=0;kb.Search_sol_string=null;kb=Za.prototype=function(){}.prototype;kb.bottom=0;kb.Shape_parity=0;kb.top=0;var ib,Xa,db,Va,w,n;kb=$a.prototype=function(){}.prototype;kb.botEdgeFirst=!1;kb.cornperm=0;kb.edgeperm=0;kb.ml=
0;kb.topEdgeFirst=!1;var Ua,Ya,fb,ob,cb=[0,1,3,18,19,1004,1005,1006,1007,1008,1009,1011,1015,1016,1018,1154,1155,1156,1157,1158,1159,1161,1166,1168,424,425,426,427,428,429,431,436,95,218,341,482,528,632,1050,342,343,345,346,348,353,223,487,533,535,1055,219,225,483,489,639,1051,1057,486,1054,1062,6,21,34,46,59,71,144,157,182,305,7,22,35,47,60,72,145,158,183,306,8,23,36,48,61,73,146,159,184,307],eb=[16,16,16,10,16,24,16,24,16,24,16,16,4,24,16,48,32,48,32,48,32,32,48,16,48,32,48,16,48,32,32,48,36,48,
72,72,48,48,72,48,36,72,48,48,72,32,48,16,32,48,16,32,48,48,16,48,48,36,72,36,72,96,96,72,96,72,72,72,72,24,48,64,64,48,64,48,48,48,48,16,24,32,32,24,32,24,24,24,24,8],lb=new Ra;scrMgr.reg("sqrs",hb);scrMgr.reg("sqrcsp",function(a,b,c){x();Pa();mb();a=mathlib.rndEl(cb[scrMgr.fixCase(c,eb)]);return Oa(lb,f(a))},["Star-x8 Star-x71 Star-x62 Star-x44 Star-x53 Square-Scallop Square-rPawn Square-Shield Square-Barrel Square-rFist Square-Mushroom Square-lPawn Square-Square Square-lFist Square-Kite Kite-Scallop Kite-rPawn Kite-Shield Kite-Barrel Kite-rFist Kite-Mushroom Kite-lPawn Kite-lFist Kite-Kite Barrel-Scallop Barrel-rPawn Barrel-Shield Barrel-Barrel Barrel-rFist Barrel-Mushroom Barrel-lPawn Barrel-lFist Scallop-Scallop Scallop-rPawn Scallop-Shield Scallop-rFist Scallop-Mushroom Scallop-lPawn Scallop-lFist Shield-rPawn Shield-Shield Shield-rFist Shield-Mushroom Shield-lPawn Shield-lFist Mushroom-rPawn Mushroom-rFist Mushroom-Mushroom Mushroom-lPawn Mushroom-lFist Pawn-rPawn-rPawn Pawn-rPawn-lPawn Pawn-rPawn-rFist Pawn-lPawn-rFist Pawn-lPawn-lPawn Pawn-rPawn-lFist Pawn-lPawn-lFist Fist-rFist-rFist Fist-lFist-rFist Fist-lFist-lFist Pair-x6 Pair-r42 Pair-x411 Pair-r51 Pair-l42 Pair-l51 Pair-x33 Pair-x312 Pair-x321 Pair-x222 L-x6 L-r42 L-x411 L-r51 L-l42 L-l51 L-x33 L-x312 L-x321 L-x222 Line-x6 Line-r42 Line-x411 Line-r51 Line-l42 Line-l51 Line-x33 Line-x312 Line-x321 Line-x222".split(" "),
eb]);return{initialize:$.noop,getRandomScramble:hb}})(mathlib.set8Perm,mathlib.get8Perm,mathlib.circle,mathlib.rn);(function(){function c(a,b){var c=y.set([],b&31),e=ab.set([],b>>5),h=f.set([],a),x=[];mathlib.fillFacelet(z,x,[0,1,2,3],e,6);mathlib.fillFacelet(r,x,h,c,6);c=[4,2,3,1,5,0];for(e=0;6>e;e++)for(h=0;2>h;h++){var Oa=r[e][0^h],Wa=r[e][1^h],Ra=6*~~(Oa/6)+c[(c.indexOf(Oa%6)+5)%6],Ta=6*~~(Wa/6)+c[(c.indexOf(Wa%6)+1)%6];if(x[Ra]==x[Oa]&&x[Ta]==x[Wa])return!1}return!0}function Na(a,b){for(var c=f.set([],a[0]),e=y.set([],a[1]&31),h=ab.set([],a[1]>>5),r=f.set([],b[0]),x=y.set([],b[1]&31),z=ab.set([],b[1]>>5),
Oa=[],Wa=[],Ra=[],Xa=0;6>Xa;Xa++)Oa[Xa]=c[r[Xa]],Wa[Xa]=e[r[Xa]]^x[Xa];for(Xa=0;4>Xa;Xa++)Ra[Xa]=h[Xa]+z[Xa];return[f.get(Oa),ab.get(Ra)<<5|y.get(Wa)]}for(var z=[[3,16,11],[4,23,15],[5,9,22],[10,17,21]],r=[[1,7],[2,14],[0,18],[6,12],[8,20],[13,19]],b=new mathlib.Solver(4,2,[[0,[function(a,b){mathlib.acycle(a,e[b])},"p",6,-1],360],[0,function(b,c){var f=y.set([],b&31),h=ab.set([],b>>5);h[c]++;mathlib.acycle(f,e[c],1,a[c]);return ab.get(h)<<5|y.get(f)},2592]]),e=[[0,1,3],[1,2,5],[0,4,2],[3,5,4]],a=
[[0,1,0,2],[0,1,0,2],[0,0,1,2],[0,0,1,2]],y=new mathlib.coord("o",6,-2),f=new mathlib.coord("p",6,-1),ab=new mathlib.coord("o",4,3),h=[[0,0],[183,869],[87,1729]],Oa=[[1,3,"L3Bar-1","LLDGFFRRG"],[59,3,"L3Bar-2","DLLGFFRRG"],[25,3,"L3Bar-3","FFGDRRLLG"],[35,3,"L3Bar-4","GRRGLLFFD"],[12,3,"LL-1","LLGFFGGGG"],[10,3,"LL-2","GLLGGGGRR"],[2,1,"LL-3","RLRLFLFRF"],[4,1,"LL-4","FLFRFRLRL"],[3,3,"L4NB-1","FGGGGDGFGGGF"],[57,3,"L4NB-2","GGRGRGDGGGGR"],[53,3,"L4NB-3","GGDGRGGGRGGR"],[45,3,"L4NB-4","DGGFGGGFGGGF"],
[33,3,"L4NB-5","GGDGGGGRGGGR"],[27,3,"L4NB-6","DGGGFGGGGGGF"],[49,3,"L3NB-1","RRGGGDGFF"],[43,3,"L3NB-2","GFFRRGDGG"],[41,3,"L3NB-3","GGGDLLFFG"],[51,3,"L3NB-4","GGGGRRLLD"],[8,3,"Flip-1","RLFLFFRRL"],[16,3,"Flip-2","LFFRRRLLFGGD"],[56,1,"Flip-3","RLFLFRFRLGGD"],[21,3,"L4Blk-1","GGDGGGLLL"],[13,3,"L4Blk-2","DGGLLLGGG"],[29,3,"L4Bar-1","GGGDGGGRR"],[37,3,"L4Bar-2","GGGFFGGGD"],[61,3,"L4Bar-3","GGGDGGLLG"],[5,3,"L4Bar-4","GGGGLLGGD"],[17,3,"L4Bar-5","GGGLLDGGG"],[11,3,"L4Bar-6","GGGGGGDLL"],[9,3,"L4Bar-7",
"RRGDGGGGG"],[19,3,"L4Bar-8","GFFGGGGGD"],[20,3,"DFlip-1","GGGRRGGGGGGD"],[18,3,"DFlip-2","GGGGGGGFFGGD"],[60,1,"DFlip-3","FFGRRGLLGGGD"],[58,1,"DFlip-4","GRRGLLGFFGGD"]],Ra=[],x=[],Wa=0;Wa<Oa.length;Wa++)Ra.push(Oa[Wa][1]),x.push(Oa[Wa][2]);scrMgr.reg(["pyro","pyrso","pyrnb","pyr4c"],function(a){var e="pyro"==a?0:8,f="pyrl4e"==a?2:7;do{if("pyro"==a||"pyrso"==a||"pyr4c"==a){var h=mathlib.rn(360);var r=mathlib.rn(2592)}else if("pyrl4e"==a)h=mathlib.get8Perm(mathlib.set8Perm([],mathlib.rn(12),4,-1).concat([4,
5]),6,-1),r=864*mathlib.rn(3)+mathlib.rn(8);else if("pyrnb"==a){do h=mathlib.rn(360),r=mathlib.rn(2592);while(!c(h,r))}var x=b.search([h,r],0).length;var y=b.toStr(b.search([h,r],e).reverse(),"ULRB",["'",""])+" ";for(var z=0;4>z;z++){var Oa=mathlib.rn("pyr4c"==a?2:3);2>Oa&&(y+="lrbu".charAt(z)+[" ","' "][Oa],x++)}}while(x<f);return y})("pyrl4e",function(a,c,e){c=Oa[scrMgr.fixCase(e,Ra)][0];a=mathlib.get8Perm(mathlib.set8Perm([],c&1,4,-1).concat([4,5]),6,-1);c=864*(c>>1&3)+(c>>3);a=Na(mathlib.rndEl(h),
Na([a,c],mathlib.rndEl(h)));a=b.toStr(b.search(a,8).reverse(),"ULRB",["'",""])+" ";for(c=0;4>c;c++)e=mathlib.rn(3),2>e&&(a+="lrbu".charAt(c)+[" ","' "][e]);return a},[x,Ra,function(a,b){var c=Oa[a];if(!b)return["GGG"+c[3],null,c[2]];image.pyrllImage("GGG"+c[3],b)}])})();(function(){function c(a,c){var e=f.set([],a%12),x=y.set([],~~(a/12)),Pa=ab.set([],c%81);c=h.set([],~~(c/81));for(var z=[],Qa=0;6>Qa;Qa++)z[5*Qa]=x[Qa];mathlib.fillFacelet(r,z,[0,1,2,3],Pa,5);mathlib.fillFacelet(b,z,e,c,5);for(Qa=0;30>Qa;Qa+=5)for(e=1;5>e;e++)if(z[Qa]==z[Qa+e])return!1;return!0}function Na(b,c){var h=f.set([],b%12),r=y.set([],~~(b/12));mathlib.acycle(r,e[c]);mathlib.acycle(h,a[c]);return 12*y.get(r)+f.get(h)}function z(b,c){var e=ab.set([],b%81),f=h.set([],~~(b/81));e[c]++;mathlib.acycle(f,
a[c],1,[0,2,1,3]);return 81*h.get(f)+ab.get(e)}var r=[[4,16,7],[1,11,22],[26,14,8],[29,19,23]],b=[[3,6,12],[2,21,17],[27,9,18],[28,24,13]],e=[[0,3,1],[0,2,4],[1,5,2],[3,4,5]],a=[[0,1,2],[0,3,1],[0,2,3],[1,3,2]],y=new mathlib.coord("p",6,-1),f=new mathlib.coord("p",4,-1),ab=new mathlib.coord("o",4,3),h=new mathlib.coord("o",4,-3),Oa=new mathlib.Solver(4,2,[[0,Na,4320],[0,z,2187]]),Ra=new mathlib.Solver(4,2,[[0,function(a,b){return~~(Na(12*a,b)/12)},360],[0,function(a,b){return z(a,b)%81},81]]),x=[0,
1,2,0,2,1,1,2,0,2,1,0];scrMgr.reg(["skbo","skbso","skbnb"],function(a){var b="skbso"==a?6:2,e="skbo"==a?0:8;do{var f=mathlib.rn(4320);var h=mathlib.rn(2187)}while(0==f&&0==h||x[f%12]!=(h+~~(h/3)+~~(h/9)+~~(h/27))%3||null!=Oa.search([f,h],0,b)||"skbnb"==a&&!c(f,h));a=Oa.search([f,h],e).reverse();f=[];h=["L","R","B","U"];for(b=0;b<a.length;b++){e=a[b][0];var r=1-a[b][1];2==e&&mathlib.acycle(h,[0,3,1],r+1);f.push(h[e]+(1==r?"'":""))}return f.join(" ")})(["ivyo","ivyso"],function(a){var b="ivyso"==a?
6:0;do{a=mathlib.rn(360);var c=mathlib.rn(81)}while(0==a&&0==c||null!=Ra.search([a,c],0,1));return Ra.toStr(Ra.search([a,c],b).reverse(),"RLDB","' ")})})();var scramble_222=function(c){function Na(a,b){mathlib.acycle(a,f[b])}function z(a,b){mathlib.acycle(a,f[b],1,ab[b])}function r(a,b){for(var c=mathlib.set8Perm([],a,7),e=h.set([],b),f=[],r=0;24>r;r++)f[r]=r>>2;mathlib.fillFacelet(Oa,f,c,e,4);for(r=0;24>r;r+=4)if((1<<f[r]|1<<f[r+3])&(1<<f[r+1]|1<<f[r+2]))return!1;return!0}function b(a,b,e){var n=0,f=4;b=[0,1,2,3];var w=[0,0,0,0,0,0,0];if("222tcp"==a)n=Za[scrMgr.fixCase(e,gb)],w=[0,0,0,0,1,0,0],b=b.concat(Wa[0]);else if("222tcn"==a)n=Sa[scrMgr.fixCase(e,
hb)],w=[0,0,0,0,2,0,0],b=b.concat(Wa[0]);else if("222eg0"==a)n=Ta[scrMgr.fixCase(e,$a)],b=b.concat(Wa[0]);else if("222eg1"==a)n=Ta[scrMgr.fixCase(e,$a)],b=b.concat(Wa[2+c(4)]);else if("222eg2"==a)n=Ta[scrMgr.fixCase(e,$a)],b=b.concat(Wa[1]);else if("222lsall"==a){b=b.concat(Wa[0]);f=mathlib.rndPerm(4);f.push(f[3]);f[3]=4;n=[0,Pa[scrMgr.fixCase(e,ib)][0]];for(e=0;5>e;e++)n[0]|=f[e]<<4*e;f=5}for(e=c(4);0<e--;)Na(b,0);a=b.slice();for(e=0;e<f;e++)b[e]=a[n[0]>>4*e&15],w[e]=n[1]>>4*e&15;for(n=c(4);0<n--;)z(w,
0),Na(b,0);b=mathlib.get8Perm(b,7);w=h.get(w);return y.toStr(y.search([b,w],9).reverse(),"URF","'2 ")}function e(a,b,c,e,f){b=b[e];for(var n=[],w=0;4>w;w++)if(a)for(r=b[0]>>(w<<2)&15,x=0;3>x;x++)Ua=Ra.indexOf(Oa[w][x]),n[Ua]="DGU".charAt(0==(x+3-r)%3?3==w?2:0:1);else for(var h=b[0]>>(w<<2)&15,r=b[1]>>(w<<2)&15,x=0;3>x;x++){var Ua=Ra.indexOf(Oa[w][x]);n[Ua]="DLFURB".charAt(Oa[h][(x+3-r)%3]>>2)}n=n.join("");if(!f)return[n,null,c[e]];image.llImage.drawImage(n,null,f)}function a(b,e,f){var n="222o"==
b?0:9;do{var w=2;if("222o"==b||"222so"==b){var Pa=c(5040);var Qa=c(729);w=3}else if("222eg"==b){Qa=x[f&7];Pa=[0,2,3,4,5,1][f>>3];Pa=mathlib.set8Perm([0,0,0,0].concat(Wa[Pa]),c(24),4);Pa=mathlib.get8Perm(Pa,7);var Oa=c(4);for(Qa=h.set([],Qa);0<Oa--;)z(Qa,0);Qa=h.get(Qa)}else{if(/^222eg[012]$/.exec(b))return a("222eg",e,[0,8,40][~~b[5]]+f);if("222nb"==b){do Pa=c(5040),Qa=c(729);while(!r(Pa,Qa))}}}while(0==Pa&&0==Qa||null!=y.search([Pa,Qa],0,w));return y.toStr(y.search([Pa,Qa],n).reverse(),"URF","'2 ")}
var y=new mathlib.Solver(3,3,[[0,[Na,"p",7],5040],[0,[z,"o",7,-3],729]]),f=[[0,2,3,1],[0,1,5,4],[0,4,6,2]],ab=[null,[0,1,0,1,3],[1,0,1,0,3]],h=new mathlib.coord("o",7,-3),Oa=[[3,4,9],[1,20,5],[2,8,17],[0,16,21],[13,11,6],[15,7,22],[12,19,10]],Ra=[0,1,2,3,8,9,4,5,20,21,16,17],x=[0,17,5,14,8,1,2,4],Wa=[[4,5,6],[4,6,5],[6,5,4],[5,4,6],[5,6,4],[6,4,5]],Ta=[[12816,4641,2,"H-1"],[12576,4641,2,"H-2"],[8976,4641,4,"H-3"],[12306,4641,4,"H-4"],[786,528,4,"L-1"],[8976,528,4,"L-2"],[531,528,4,"L-3"],[12816,528,
4,"L-4"],[8211,528,4,"L-5"],[12306,528,4,"L-6"],[12816,4626,4,"Pi-1"],[531,4626,4,"Pi-2"],[8976,4626,4,"Pi-3"],[8211,4626,4,"Pi-4"],[12306,4626,4,"Pi-5"],[786,4626,4,"Pi-6"],[12816,8736,4,"S-1"],[531,8736,4,"S-2"],[786,8736,4,"S-3"],[12306,8736,4,"S-4"],[8211,8736,4,"S-5"],[8976,8736,4,"S-6"],[8976,4128,4,"T-1"],[8211,4128,4,"T-2"],[531,4128,4,"T-3"],[12816,4128,4,"T-4"],[12306,4128,4,"T-5"],[786,4128,4,"T-6"],[531,8208,4,"U-1"],[12816,8208,4,"U-2"],[786,8208,4,"U-3"],[12306,8208,4,"U-4"],[8976,8208,
4,"U-5"],[8211,8208,4,"U-6"],[12816,4113,4,"aS-1"],[531,4113,4,"aS-2"],[786,4113,4,"aS-3"],[12306,4113,4,"aS-4"],[8976,4113,4,"aS-5"],[8211,4113,4,"aS-6"]],Za=[[291,545,4,"Hammer-1"],[12321,545,4,"Hammer-2"],[306,545,4,"Hammer-3"],[561,545,4,"Hammer-4"],[801,545,4,"Hammer-5"],[8961,545,4,"Hammer-6"],[291,4130,4,"Spaceship-1"],[8961,4130,4,"Spaceship-2"],[4896,4130,4,"Spaceship-3"],[12321,4130,4,"Spaceship-4"],[12306,4130,4,"Spaceship-5"],[561,4130,4,"Spaceship-6"],[8241,2,4,"Stollery-1"],[12576,2,
4,"Stollery-2"],[12801,2,4,"Stollery-3"],[8451,2,4,"Stollery-4"],[561,2,4,"Stollery-5"],[8496,2,4,"Stollery-6"],[291,8738,1,"Pinwheel-1"],[4146,8738,1,"Pinwheel-2"],[12801,8738,4,"Pinwheel-3"],[8241,272,2,"2Face-1"],[12546,272,4,"2Face-2"],[531,272,2,"2Face-3"],[12321,272,4,"2Face-4"],[4866,290,4,"Turtle-1"],[4146,290,4,"Turtle-2"],[12801,290,4,"Turtle-3"],[4656,290,4,"Turtle-4"],[8976,290,4,"Turtle-5"],[801,290,4,"Turtle-6"],[12816,4370,4,"Pinwheel Poser-1"],[12576,4370,4,"Pinwheel Poser-2"],[12801,
4370,4,"Pinwheel Poser-3"],[8451,4370,4,"Pinwheel Poser-4"],[8976,4370,4,"Pinwheel Poser-5"],[8496,4370,4,"Pinwheel Poser-6"],[8241,17,4,"Gun-1"],[4146,17,4,"Gun-2"],[306,17,4,"Gun-3"],[12321,17,4,"Gun-4"],[8976,17,4,"Gun-5"],[8496,17,4,"Gun-6"]],Sa=[[4866,4609,4,"Hammer-1"],[12321,4609,4,"Hammer-2"],[8976,4609,4,"Hammer-3"],[12801,4609,4,"Hammer-4"],[4611,4609,4,"Hammer-5"],[12576,4609,4,"Hammer-6"],[291,4114,4,"Spaceship-1"],[4146,4114,4,"Spaceship-2"],[786,4114,4,"Spaceship-3"],[12801,4114,4,"Spaceship-4"],
[4131,4114,4,"Spaceship-5"],[8496,4114,4,"Spaceship-6"],[291,1,4,"Stollery-1"],[12576,1,4,"Stollery-2"],[306,1,4,"Stollery-3"],[8451,1,4,"Stollery-4"],[12546,1,4,"Stollery-5"],[4611,1,4,"Stollery-6"],[291,4369,1,"Pinwheel-1"],[4146,4369,1,"Pinwheel-2"],[4896,4369,4,"Pinwheel-3"],[8241,8194,2,"2Face-1"],[306,8194,4,"2Face-2"],[4146,8194,2,"2Face-3"],[12321,8194,4,"2Face-4"],[8241,4354,4,"Turtle-1"],[12576,4354,4,"Turtle-2"],[4131,4354,4,"Turtle-3"],[12321,4354,4,"Turtle-4"],[306,4354,4,"Turtle-5"],
[4611,4354,4,"Turtle-6"],[4866,8482,4,"Pinwheel Poser-1"],[531,8482,4,"Pinwheel Poser-2"],[8211,8482,4,"Pinwheel Poser-3"],[786,8482,4,"Pinwheel Poser-4"],[8976,8482,4,"Pinwheel Poser-5"],[801,8482,4,"Pinwheel Poser-6"],[291,34,4,"Gun-1"],[4146,34,4,"Gun-2"],[306,34,4,"Gun-3"],[8976,34,4,"Gun-4"],[786,34,4,"Gun-5"],[8496,34,4,"Gun-6"]],Pa=[[0,"LS1-PBL"],[546,"LS1-Sune"],[273,"LS1-aSune"],[258,"LS1-Ua"],[33,"LS1-Ub"],[288,"LS1-La"],[528,"LS1-Lb"],[513,"LS1-Ta"],[18,"LS1-Tb"],[66081,"LS2-Hammer"],[66066,
"LS2-Spaceship"],[66048,"LS2-StolleryA"],[65538,"LS2-StolleryB"],[65568,"LS2-StolleryC"],[65808,"LS2-2Face"],[65826,"LS2-Turtle"],[65553,"LS2-GunA"],[65793,"LS2-GunB"],[131346,"LS3-Hammer"],[131601,"LS3-Spaceship"],[131328,"LS3-StolleryA"],[131073,"LS3-StolleryB"],[131088,"LS3-StolleryC"],[131616,"LS3-2Face"],[131361,"LS3-Turtle"],[131106,"LS3-GunA"],[131586,"LS3-GunB"],[8226,"LS4-SuneA"],[8736,"LS4-SuneB"],[8706,"LS4-SuneC"],[8721,"LS4-PiA"],[8481,"LS4-PiB"],[8208,"LS4-U"],[8193,"LS4-L"],[8448,"LS4-T"],
[8466,"LS4-H"],[73746,"LS5-HammerA"],[73986,"LS5-HammerB"],[74016,"LS5-SpaceshipA"],[74241,"LS5-SpaceshipB"],[73728,"LS5-Stollery"],[74274,"LS5-Pinwheel"],[73761,"LS5-TurtleA"],[74256,"LS5-TurtleB"],[74001,"LS5-Pinwheel Poser"],[139536,"LS6-Hammer"],[139521,"LS6-Spaceship"],[139266,"LS6-2Face"],[139281,"LS6-Turtle"],[139554,"LS6-Pinwheel PoserA"],[139809,"LS6-Pinwheel PoserB"],[139794,"LS6-Pinwheel PoserC"],[139776,"LS6-GunA"],[139296,"LS6-GunB"],[4113,"LS7-aSuneA"],[4368,"LS7-aSuneB"],[4353,"LS7-aSuneC"],
[4626,"LS7-PiA"],[4386,"LS7-PiB"],[4608,"LS7-U"],[4098,"LS7-L"],[4128,"LS7-T"],[4641,"LS7-H"],[70176,"LS8-Hammer"],[69666,"LS8-Spaceship"],[69633,"LS8-2Face"],[70146,"LS8-Turtle"],[69921,"LS8-Pinwheel PoserA"],[69906,"LS8-Pinwheel PoserB"],[70161,"LS8-Pinwheel PoserC"],[69648,"LS8-GunA"],[69888,"LS8-GunB"],[135681,"LS9-HammerA"],[135201,"LS9-HammerB"],[135186,"LS9-SpaceshipA"],[135456,"LS9-SpaceshipB"],[135168,"LS9-Stollery"],[135441,"LS9-Pinwheel"],[135426,"LS9-TurtleA"],[135696,"LS9-TurtleB"],[135714,
"LS9-Pinwheel Poser"]],$a=mathlib.idxArray(Ta,2),Qa=mathlib.idxArray(Ta,3),gb=mathlib.idxArray(Za,2),mb=mathlib.idxArray(Za,3),hb=mathlib.idxArray(Sa,2),kb=mathlib.idxArray(Sa,3),ib=mathlib.valuedArray(Pa.length,1),Xa=mathlib.idxArray(Pa,1);scrMgr.reg(["222o","222so","222nb"],a)("222eg0",b,[Qa,$a,e.bind(null,!1,Ta,Qa)])("222eg1",b,[Qa,$a,e.bind(null,!1,Ta,Qa)])("222eg2",b,[Qa,$a,e.bind(null,!1,Ta,Qa)])("222tcp",b,[mb,gb,e.bind(null,!1,Za,mb)])("222tcn",b,[kb,hb,e.bind(null,!1,Sa,kb)])("222lsall",
b,[Xa,ib,e.bind(null,!0,Pa,Xa)])("222eg",a,["EG0-O EG0-H EG0-L EG0-Pi EG0-S EG0-T EG0-U EG0-aS EG1B-O EG1B-H EG1B-L EG1B-Pi EG1B-S EG1B-T EG1B-U EG1B-aS EG1L-O EG1L-H EG1L-L EG1L-Pi EG1L-S EG1L-T EG1L-U EG1L-aS EG1F-O EG1F-H EG1F-L EG1F-Pi EG1F-S EG1F-T EG1F-U EG1F-aS EG1R-O EG1R-H EG1R-L EG1R-Pi EG1R-S EG1R-T EG1R-U EG1R-aS EG2-O EG2-H EG2-L EG2-Pi EG2-S EG2-T EG2-U EG2-aS".split(" "),[1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4]]);return{getEGLLImage:e.bind(null,
Ta,Qa)}}(mathlib.rn);(function(){function c(a,b){mathlib.acycle(a,[0,b+1])}function Na(a,b){var c=mathlib.set8Perm([],~~(a/3),4);mathlib.acycle(c,f[b]);return 3*mathlib.get8Perm(c,4)+(a%3+(0==b?1:0))%3}function z(b,c,f){return 72*e[f][~~(c/72)]+a[(f+b)%3][c%72]}function r(b,c,f,z){if(0==c)return 0==b[0]&&0==b[1]&&0==b[2]&&0==b[3];if(Math.max(mathlib.getPruning(y[0],72*b[0]+b[1]),mathlib.getPruning(y[1],72*b[0]+b[2]),mathlib.getPruning(y[2],72*b[0]+b[3]))>c)return!1;for(var h=0;3>h;h++)if(h!=f)for(var Oa=b.slice(),Ra=
0;11>Ra;Ra++){Oa[0]=e[h][Oa[0]];for(var Za=1;4>Za;Za++)Oa[Za]=a[(h+Za-1)%3][Oa[Za]];if(r(Oa,c-1,h,z))return z.push("URF".charAt(h)+"' 2' 3' 4' 5' 6 5 4 3 2 ".split(" ")[Ra]),!0}}function b(){b=$.noop;mathlib.createMove(a,72,Na,3);mathlib.createMove(e,24,[c,"p",4],3);for(var f=0;3>f;f++)mathlib.createPrun(y[f],0,1728,5,z.bind(null,f),3,12,0)}var e=[],a=[],y=[[],[],[]],f=[[0,3,2,1],[0,1],[0,3]];scrMgr.reg(["gearo","gearso"],function(a){b();do{var c=[mathlib.rn(24)];for(var e=0;3>e;e++){do c[e+1]=mathlib.rn(72);
while(15==mathlib.getPruning(y[e],72*c[0]+c[e+1]))}}while(0==c);a="gearso"==a?4:0;for(e=[];!r(c,a,-1,e);)a++;return e.reverse().join(" ")})})();(function(){var c=new mathlib.Solver(4,1,[[0,function(c,r){var b=mathlib.set8Perm([],c>>4,4);mathlib.acycle(b,Na[r]);return(mathlib.get8Perm(b,4)<<4)+(c&15^1<<r)},384]]),Na=[[0,1],[2,3],[0,3],[1,2]];scrMgr.reg("133",function(){var z=1+mathlib.rn(191);z=2*z+((mathlib.getNParity(z>>3,4)^z>>1^z>>2^z)&1);return c.toStr(c.search([z],0),"RLFB",[""])})})();(function(c,Na){function z(){z=$.noop;for(var a=[],r,f=0;40320>f;f++)b[f]=[];for(f=0;40320>f;f++)mathlib.set8Perm(a,f),c(a,0,1,2,3),r=b[0][f]=Na(a),c(a,4,5,6,7),r=b[1][r]=Na(a),c(a,2,5)(a,3,6),r=b[2][r]=Na(a),c(a,0,5)(a,3,4),b[3][r]=Na(a);mathlib.createPrun(e,0,40320,12,b,4,3)}function r(a,y,f,z,h){if(0==f)return 0==a+y;if(mathlib.getPruning(e,a)>f)return!1;var Oa,Ra;for(Ra=0;4>Ra;Ra++)if(Ra!=z){var x=a;var Wa=y;for(Oa=0;Oa<(2>Ra?3:1);Oa++){x=b[Ra][x];var Ta=Ra;2>Ta||(Wa=mathlib.set8Perm([],Wa,3),
2==Ta?c(Wa,0,1):3==Ta&&c(Wa,0,2),Wa=Na(Wa,3));if(r(x,Wa,f-1,Ra,h))return h.push(["U","D","R2","F2"][Ra]+(2>Ra?" 2'".charAt(Oa):"")),!0}}}var b=[],e=[];scrMgr.reg("223",function(){z();do{var a=mathlib.rn(40320);var b=mathlib.rn(6)}while(0==b+a);for(var c=[],e=0;99>e&&!r(a,b,e,-1,c);e++);return c.reverse().join(" ")})})(mathlib.circle,mathlib.get8Perm);var clock=function(c,Na){function z(a,b,c,e,r){for(var f=a[0].length;e<f;e++)a[c][e]=(a[c][e]+a[b][e]*r)%12}var r=[[0,1,1,0,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,1,1,0,0,0,0,0],[0,0,0,1,1,0,1,1,0,0,0,0,0,0],[1,1,0,1,1,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,1,1,0,1,1,0,1,1,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0,0,0],[1,1,0,1,1,0,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,0,0,0,0,0],[11,0,0,0,0,0,0,0,0,1,0,1,1,0],[0,0,0,0,0,0,11,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,11,0,1,1,0,1],[0,0,11,0,0,0,0,0,0,1,1,
1,0,0],[11,0,11,0,0,0,0,0,0,1,1,1,1,0],[11,0,0,0,0,0,11,0,0,1,0,1,1,1],[0,0,0,0,0,0,11,0,11,0,1,1,1,1],[0,0,11,0,0,0,0,0,11,1,1,1,0,1],[11,0,11,0,0,0,11,0,11,1,1,1,1,1]],b=[-1,1,-1,-1,-1,5,-1,7,-1,-1,-1,11],e=[7695,42588,47187,85158,86697,156568,181700,209201,231778],a="UR DR DL UL U R D L ALL".split(" ");scrMgr.reg("clko",function(y){var f=[];for(y=0;14>y;y++)f[y]=c(12);y=[];y.length=18;if(14==f.length&&18==y.length)for(var ab=15,h=0;h<Na[18][14];h++){var Oa=h;var Ra=14;for(var x=0,Wa=17;0<=Wa;Wa--)Oa>=
Na[Wa][Ra]&&(Oa-=Na[Wa][Ra--],x|=1<<Wa);Ra=x;Oa=!1;for(x=0;x<e.length;x++)if((Ra&e[x])==e[x]){Oa=!0;break}if(!Oa){Oa=[];for(x=Wa=0;18>x;x++)1==(Ra>>x&1)&&(Oa[Wa++]=x);Ra=[];for(Wa=0;14>Wa;Wa++){Ra[Wa]=[];for(x=0;14>x;x++)Ra[Wa][x]=r[Oa[x]][Wa];Ra[Wa][14]=f[Wa]}b:{x=Ra;Wa=x[0].length;for(var Ta=0;Ta<Wa-1;Ta++){if(-1==b[x[Ta][Ta]]){for(var Za=-1,Sa=Ta+1;14>Sa;Sa++)if(-1!=b[x[Sa][Ta]]){Za=Sa;break}if(-1==Za)c:for(Sa=Ta;13>Sa;Sa++)for(var Pa=Sa+1;14>Pa;Pa++)if(-1!=b[(x[Sa][Ta]+x[Pa][Ta])%12]){z(x,Pa,
Sa,Ta,1);Za=Sa;break c}if(-1==Za){for(Sa=Ta+1;14>Sa;Sa++)if(0!=x[Sa][Ta]){x=-1;break b}x=Ta+1;break b}Sa=x;Pa=Sa[Ta];Sa[Ta]=Sa[Za];Sa[Za]=Pa}Za=b[x[Ta][Ta]];for(Sa=Ta;Sa<Wa;Sa++)x[Ta][Sa]=x[Ta][Sa]*Za%12;for(Sa=Ta+1;14>Sa;Sa++)z(x,Ta,Sa,Ta,12-x[Sa][Ta])}x=0}if(0==x){x=!0;for(Wa=14;14>Wa;Wa++)if(0!=Ra[Wa][14]){x=!1;break}if(x){x=Ra;for(Wa=x[0].length-2;0<Wa;Wa--)for(Ta=Wa-1;0<=Ta;Ta--)0!=x[Ta][Wa]&&z(x,Wa,Ta,Wa,12-x[Ta][Wa]);for(Wa=x=0;14>Wa;Wa++)0!=Ra[Wa][14]&&x++;if(x<ab){for(Wa=0;18>Wa;Wa++)y[Wa]=
0;for(Wa=0;14>Wa;Wa++)y[Oa[Wa]]=Ra[Wa][14];ab=x}}}}}f="";for(ab=0;9>ab;ab++)h=y[ab],0!=h&&(Oa=6>=h,6<h&&(h=12-h),f+=a[ab]+h+(Oa?"+":"-")+" ");f+="y2 ";for(ab=0;9>ab;ab++)h=y[ab+9],0!=h&&(Oa=6>=h,6<h&&(h=12-h),f+=a[ab]+h+(Oa?"+":"-")+" ");y=!0;for(ab=0;4>ab;ab++)1==c(2)&&(f+=(y?"":" ")+a[ab],y=!1);return f});return{moveArr:r}}(mathlib.rn,mathlib.Cnk);(function(){var c=[[0,1,2,3],[0,2,5,4]],Na=[[0,0,0,0,2],[0,1,0,1,2]],z=new mathlib.Solver(2,3,[[0,function(r,b){var e=r>>3,a=r,y=r<<1|mathlib.getNParity(e,6)^a>>1&1;e=mathlib.set8Perm([],e,6);mathlib.acycle(e,c[b]);0==b&&(a+=2);1==b&&(y+=1);return mathlib.getNPerm(e,6)<<3|a&6|y>>1&1},5760],[0,[function(r,b){mathlib.acycle(r,c[b],1,Na[b])},"o",6,-2],32]]);scrMgr.reg("lsemu",function(){do{var c=mathlib.rn(5760);var b=mathlib.rn(32)}while(0==b+c);return z.toStr(z.search([c,b],0),"UM"," 2'").replace(/ +/g,
" ")})})();(function(){function c(a,c,f){f=c=0;do"mlsll"==a?(c=mathlib.rn(11520),f=mathlib.rn(87480)):"mgmpll"==a?(c=32*Na.get(mathlib.rndPerm(5,!0).concat([5])),f=243*r.get(mathlib.rndPerm(5,!0).concat([5]))):"mgmll"==a&&(c=z.set([],mathlib.rn(32)),c[0]+=c[5],c[5]=0,f=b.set([],mathlib.rn(243)),f[0]+=f[5],f[5]=0,c=32*Na.get(mathlib.rndPerm(5,!0).concat([5]))+z.get(c),f=243*r.get(mathlib.rndPerm(5,!0).concat([5]))+b.get(f));while(0==c&&0==f);a=e.search([c,f],0);c=[];for(f=0;f<a.length;f++){var y=a[f];c.push(["U",
"R U","F' U"][y[0]]+["","2","2'","'"][y[1]]+[""," R'"," F"][y[0]])}return c.join(" ").replace(/ +/g," ")}var Na=new mathlib.coord("p",6,-1),z=new mathlib.coord("o",6,-2),r=new mathlib.coord("p",6,-1),b=new mathlib.coord("o",6,-3),e=new mathlib.Solver(3,4,[[0,function(a,b){var c=Na.set([],a>>5),e=z.set([],a&31);0==b?(mathlib.acycle(e,[0,1,2,3,4],1),mathlib.acycle(c,[0,1,2,3,4],1)):1==b?(mathlib.acycle(e,[0,1,2,3,5],1),mathlib.acycle(c,[0,1,2,3,5],1)):2==b&&(mathlib.acycle(e,[1,2,3,4,5],1,[0,0,0,0,
1,2]),mathlib.acycle(c,[1,2,3,4,5]));return Na.get(c)<<5|z.get(e)},11520],[0,function(a,c){var e=r.set([],~~(a/243)),y=b.set([],a%243);0==c?(mathlib.acycle(y,[0,1,2,3,4],1),mathlib.acycle(e,[0,1,2,3,4],1)):1==c?(mathlib.acycle(y,[0,5,1,2,3],1,[2,0,0,0,0,3]),mathlib.acycle(e,[0,5,1,2,3])):2==c&&(mathlib.acycle(y,[0,2,3,4,5],1,[1,0,0,0,1,3]),mathlib.acycle(e,[0,2,3,4,5]));return 243*r.get(e)+b.get(y)},87480]]);scrMgr.reg("mlsll",c)("mgmpll",c)("mgmll",c)})();var kilominx=function(){function c(){this.perm=[];this.twst=[];for(var a=0;20>a;a++)this.perm[a]=a,this.twst[a]=0}function Na(){for(var a=[],b=[],e=0;48>e;e++)a[e]=new c;for(var f=0;48>f;f+=4){a[f].faceletMove(f>>2,1,0);b[f]=a[f].hashCode();for(var h=0;3>h;h++)c.KiloMult(a[f+h],a[f],a[f+h+1]),b[f+h+1]=a[f+h+1].hashCode()}c.moveCube=a;f=[];h=[];var r=[],x=[],Pa=[],Qa=new c;for(e=0;60>e;e++)f[e]=(new c).init(Qa.perm,Qa.twst),Pa[e]=f[e].hashCode(),h[e]=[],r[e]=[],Qa.faceletMove(0,1,1),4==e%5&&Qa.faceletMove(4==
e%10?1:2,1,1),29==e%30&&(Qa.faceletMove(1,2,1),Qa.faceletMove(2,1,1),Qa.faceletMove(0,3,1));for(e=0;60>e;e++)for(var y=0;60>y;y++){c.KiloMult(f[e],f[y],Qa);var z=Pa.indexOf(Qa.hashCode());h[e][y]=z;r[z][y]=e}for(e=0;60>e;e++)for(x[e]=[],y=0;12>y;y++)c.KiloMult3(f[r[0][e]],a[4*y],f[e],Qa),z=b.indexOf(Qa.hashCode()),x[e][y]=z>>2;c.symCube=f;c.symMult=h;c.symMulI=r;c.symMulM=x}function z(a){this.map=new c;this.imap=new c;this.map.perm=a.slice();for(var b=0;20>b;b++)-1==a.indexOf(b)&&this.map.perm.push(b);
this.imap.invFrom(this.map);this.tmp=new c}function r(a,b,c){a=a[c][~~(b/81/24)];return 1944*a[0]+81*Wa[~~(b/81)%24][a[1]]+Za[Ta[a[1]][b%81]][a[2]]}function b(a,b,c){a=a[c][~~(b/27/6)];return 162*a[0]+27*Wa[~~(b/27)%6][a[1]]+Za[Ta[a[1]][b%27*3]/3][a[2]]}function e(){function b(a,b){for(var c=0;4>c;c++)a[c]=b%3,b=~~(b/3)}function n(a){for(var b=0,c=3;0<=c;c--)b=3*b+a[c];return b}e=$.noop;var h=performance.now();Na();for(var r=[],x=[],Pa=[],Qa=0;24>Qa;Qa++){Wa[Qa]=[];mathlib.setNPerm(r,Qa,4);for(var z=
0;24>z;z++){mathlib.setNPerm(x,z,4);for(var Oa=0;4>Oa;Oa++)Pa[Oa]=r[x[Oa]];Wa[Qa][z]=mathlib.getNPerm(Pa,4)}}for(z=0;24>z;z++)for(Ta[z]=[],mathlib.setNPerm(x,z,4),Qa=0;81>Qa;Qa++){b(r,Qa);for(Oa=0;4>Oa;Oa++)Pa[Oa]=r[x[Oa]];Ta[z][Qa]=n(Pa)}for(z=0;81>z;z++)for(Za[z]=[],b(x,z),Qa=0;81>Qa;Qa++){b(r,Qa);for(Oa=0;4>Oa;Oa++)Pa[Oa]=(r[Oa]+x[Oa])%3;Za[z][Qa]=n(Pa)}r=new c;x=new c;for(Pa=0;12>Pa;Pa++)for(Sa[Pa]=1<<Pa,Qa=0;Qa<Pa;Qa++)c.KiloMult(c.moveCube[4*Pa],c.moveCube[4*Qa],r),c.KiloMult(c.moveCube[4*Qa],
c.moveCube[4*Pa],x),r.isEqual(x)&&(Sa[Pa]|=1<<Qa);a();y();f();DEBUG&&console.log("[kilo] init finished, tt=",performance.now()-h)}function a(){Xa=new z([5,6,7,8,9]);var a=new c,e=new c;mathlib.createMove(Qa,1140,function(b,n){Xa.set(a,b,3);c.KiloMult(a,c.moveCube[4*n],e);return Xa.get(e,3)},12);mathlib.createPrun(hb,0,184680,8,b.bind(null,Qa),12,4,5)}function y(){db=new z([13,15,16,0,1,2,3,4,10,11,12,14,17,18,19]);var a=new c,e=new c;mathlib.createMove(gb,455,function(b,n){db.set(a,b,3);c.KiloMult(a,
c.moveCube[4*n],e);return db.get(e,3)},6);mathlib.createPrun(kb,0,73710,8,b.bind(null,gb),6,4,4)}function f(){Va=new z([0,1,2,3,4,10,11,14,17,18]);var a=new c,b=new c;mathlib.createMove(mb,210,function(e,n){Va.set(a,e);c.KiloMult(a,c.moveCube[4*n],b);return Va.get(b)},3);mathlib.createPrun(ib,0,408240,14,r.bind(null,mb),3,4,6)}function ab(a,b,c,e,f,h,r,x){if(0==h)return b(a);if(c(a)>h)return!1;for(var n=0;n<f;n++)if(!(Sa[r]>>n&1))for(var w=a,Pa=0;4>Pa;Pa++){w=e(w,n);if(null==w)break;if(ab(w,b,c,e,
f,h-1,n,x))return x.push([n,Pa]),!0}return!1}function h(a,b,c,e,f,h){for(var n=[],w=0;w<=h&&!ab(a,b,c,e,f,w,-1,n);w++);n.reverse();return n}function Oa(a){for(var b=[],c=0;c<a.length;c++)b.push("U R F L BL BR DR DL DBL B DBR D".split(" ")[a[c][0]]+["","2","2'","'"][a[c][1]]);return b.join(" ")}function Ra(a){e();var n=new c,f=new c;n.init(a.perm,a.twst);var w=b.bind(null,Qa),x=Xa.get(n,3);c.KiloMult3(c.symCube[c.symMulI[0][2]],n,c.symCube[2],f);var y=Xa.get(f,3);y=[162*x[0]+27*x[1]+x[2],162*y[0]+
27*y[1]+y[2]];x=+new Date;a=h(y,function(a){return 0==a[0]&&0==a[1]},function(a){return Math.max(mathlib.getPruning(hb,a[0]),mathlib.getPruning(hb,a[1]))},function(a,b){var c=[w(a[0],b),w(a[1],Pa[b])];return c[0]==a[0]&&c[1]==a[1]?null:c},12,9);for(y=0;y<a.length;y++){var z=a[y];c.KiloMult(n,c.moveCube[4*z[0]+z[1]],f);n.init(f.perm,f.twst)}DEBUG&&console.log("[kilo] Phase1 in ",+new Date-x);var Sa=b.bind(null,gb);x=db.get(n,3);c.KiloMult3(c.symCube[c.symMulI[0][1]],n,c.symCube[1],f);y=db.get(f,3);
y=[162*x[0]+27*x[1]+x[2],162*y[0]+27*y[1]+y[2]];x=+new Date;var Ra=h(y,function(a){return 0==a[0]&&0==a[1]},function(a){return Math.max(mathlib.getPruning(kb,a[0]),mathlib.getPruning(kb,a[1]))},function(a,b){var c=[Sa(a[0],b),Sa(a[1],$a[b])];return c[0]==a[0]&&c[1]==a[1]?null:c},6,14);for(y=0;y<Ra.length;y++)z=Ra[y],c.KiloMult(n,c.moveCube[4*z[0]+z[1]],f),n.init(f.perm,f.twst);DEBUG&&console.log("[kilo] Phase2 in ",+new Date-x);var Wa=r.bind(null,mb);x=Va.get(n);c.KiloMult3(c.symCube[c.symMulI[0][6]],
n,c.symCube[6],f);y=Va.get(f);c.KiloMult3(c.symCube[c.symMulI[0][29]],n,c.symCube[29],f);n=Va.get(f);y=[1944*x[0]+81*x[1]+x[2],1944*y[0]+81*y[1]+y[2],1944*n[0]+81*n[1]+n[2]];x=+new Date;n=h(y,function(a){return 0==a[0]&&0==a[1]&&0==a[2]},function(a){return Math.max(mathlib.getPruning(ib,a[0]),mathlib.getPruning(ib,a[1]),mathlib.getPruning(ib,a[2]))},function(a,b){return[Wa(a[0],b),Wa(a[1],(b+1)%3),Wa(a[2],(b+2)%3)]},3,14);DEBUG&&console.log("[kilo] Phase3 in ",+new Date-x);DEBUG&&console.log("[kilo] total length: ",
a.length+Ra.length+n.length);return Oa(Array.prototype.concat(a,Ra,n))}c.SOLVED=new c;var x=[[2,8,14],[3,13,19],[4,18,24],[0,23,29],[1,28,9],[58,45,41],[57,50,46],[56,30,51],[55,35,31],[59,40,36],[10,7,33],[15,12,38],[20,17,43],[25,22,48],[5,27,53],[49,21,42],[54,26,47],[34,6,52],[39,11,32],[44,16,37]];c.prototype.toFaceCube=function(a){a=a||x;for(var b=[],c=0;20>c;c++)for(var e=this.perm[c],f=this.twst[c],w=0;3>w;w++)b[a[c][(w+f)%3]]=~~(a[e][w]/5);return b};c.prototype.fromFacelet=function(a,b){b=
b||x;for(var c=0,e=[],n=0;60>n;++n)e[n]=a[n],c+=Math.pow(16,e[n]);if(93824992236885!=c)return-1;for(n=0;20>n;n++)for(c=0;20>c;c++){for(var f=-1,w=0;3>w;w++)if(~~(b[c][0]/5)==e[b[n][w]]&&~~(b[c][1]/5)==e[b[n][(w+1)%3]]&&~~(b[c][2]/5)==e[b[n][(w+2)%3]]){f=w;break}-1!=f&&(this.perm[n]=c,this.twst[n]=f)}return this};c.prototype.hashCode=function(){for(var a=0,b=0;20>b;b++)a=0|31*a+3*this.perm[b]+this.twst[b];return a};c.KiloMult=function(a,b,c){for(var e=0;20>e;e++)c.perm[e]=a.perm[b.perm[e]],c.twst[e]=
(a.twst[b.perm[e]]+b.twst[e])%3};c.KiloMult3=function(a,b,c,e){for(var n=0;20>n;n++)e.perm[n]=a.perm[b.perm[c.perm[n]]],e.twst[n]=(a.twst[b.perm[c.perm[n]]]+b.twst[c.perm[n]]+c.twst[n])%3};c.prototype.invFrom=function(a){for(var b=0;20>b;b++)this.perm[a.perm[b]]=b,this.twst[a.perm[b]]=(3-a.twst[b])%3;return this};c.prototype.init=function(a,b){this.perm=a.slice();this.twst=b.slice();return this};c.prototype.isEqual=function(a){for(var b=0;20>b;b++)if(this.perm[b]!=a.perm[b]||this.twst[b]!=a.twst[b])return!1;
return!0};c.prototype.setComb=function(a,b){b=b||4;for(var c=19,e=19;0<=e;e--)a>=mathlib.Cnk[e][b]?(a-=mathlib.Cnk[e][b--],this.perm[e]=b):this.perm[e]=c--,this.twst[e]=0};c.prototype.getComb=function(a){for(var b=a=a||4,c=0,e=0,f=[],w=19;0<=w;w--)this.perm[w]<b&&(c+=mathlib.Cnk[w][a--],e=3*e+this.twst[w],f[a]=this.perm[w]);return[c,mathlib.getNPerm(f,b),e]};c.prototype.faceletMove=function(a,b,c){for(var e=this.toFaceCube(),n=[],f=0;12>f;f++){for(var w=0;5>w;w++)n[11*f+w]=e[5*f+w],n[11*f+w+5]=0;
n[11*f+10]=0}mathlib.minx.doMove(n,a,b,c);for(f=0;12>f;f++)for(w=0;5>w;w++)e[5*f+w]=n[11*f+w];this.fromFacelet(e)};z.prototype.get=function(a,b){c.KiloMult3(this.imap,a,this.map,this.tmp);return this.tmp.getComb(b)};z.prototype.set=function(a,b,e){this.tmp.setComb(b,e);c.KiloMult3(this.map,this.tmp,this.imap,a)};c.CombCoord=z;var Wa=[],Ta=[],Za=[],Sa=[],Pa=[0,3,4,5,1,2,8,9,10,6,7,11],$a=[0,2,3,4,5,1,7,8,9,10,6,11],Qa=[],gb=[],mb=[],hb=[],kb=[],ib=[],Xa,db,Va;scrMgr.reg("klmso",function(){e();var a=
new c;a.perm=mathlib.rndPerm(20,!0);for(var b=60,f=0;19>f;f++){var h=mathlib.rn(3);a.twst[f]=h;b-=h}a.twst[19]=b%3;return Ra(a)});return c}();(function(c,Na,z){function r(a,b,e,f){void 0==f&&(f=[""]);for(var h=0,r,x=[],Pa=0;Pa<e;Pa++){do r=c(a.length);while(h>>r&1);x.push(a[r]+Na(f));h&=~b[r];h|=1<<r}return x.join(" ")}function b(a){return" "+Na([a+"=0",a+"+1",a+"+2",a+"+3",a+"+4",a+"+5",a+"+6",a+"-5",a+"-4",a+"-3",a+"-2",a+"-1"])+" "}function e(){return Na(["U","d"])+Na(["U","d"])}function a(a,b,e,f){for(var h=[[0,-1],[1,0],[-1,0],[0,1]],r=0,x=3,Pa,y=5,z=[],Oa=0;Oa<b;Oa++){do Pa=c(4);while(0>r+h[Pa][0]||3<r+h[Pa][0]||0>x+h[Pa][1]||3<x+
h[Pa][1]||3==Pa+y);r+=h[Pa][0];x+=h[Pa][1];0<z.length&&z[z.length-1][0]==Pa?z[z.length-1][1]++:z.push([Pa,1]);y=Pa}b="";for(Oa=0;Oa<z.length;Oa++)if(h=a?z[Oa][0]:3-z[Oa][0],h=(e?"￪￩￫￬":"ULRD").charAt(h),f)b+=h+(1==z[Oa][1]?"":z[Oa][1])+" ";else for(r=0;r<z[Oa][1];r++)b+=h+" ";return b}function y(a,b){var c="",e,f;for(e=0;e<b;e++){c+="  ";for(f=0;f<a;f++)c+=(0==f%2?"R":"D")+Na(["++","--"])+" ";c+="U"+(c.endsWith("-- ")?"'\\n":"~\\n")}return c}function f(a,b){Wa=[];var c;ab(1,a,b);var e="";for(c=0;c<
Wa[0].length;c++){var f=Wa[0][c];e=7==f[0]?e+"/":e+(" ("+f[0]+","+f[1]+") ")}return e}function ab(a,b,e){for(var f=0;f<a;f++){Ta=[1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0];Wa[f]=[];for(var r=0;r<e;){var x=c(12)-5,Pa=2==b?0:c(12)-5,y=(0==x?0:1)+(0==Pa?0:1);(r+y<=e||1!=b)&&(0<y||0==r)&&h(x,Pa)&&(1==b&&(r+=y),0<y&&(Wa[f][Wa[f].length]=[x,Pa]),r<e||1!=b)&&(r++,Wa[f][Wa[f].length]=[7,0],h(7,0))}}}function h(a,b){var c;if(7==a){for(c=0;6>c;c++)mathlib.circle(Ta,c+6,c+12);return!0}if(Ta[(17-a)%12]||
Ta[(11-a)%12]||Ta[12+(17-b)%12]||Ta[12+(11-b)%12])return!1;var e=Ta.slice(0,12);var f=Ta.slice(12,24);for(c=0;12>c;c++)Ta[c]=e[(12+c-a)%12],Ta[c+12]=f[(12+c-b)%12];return!0}function Oa(a,b){for(var e=0,f=[],h=0;4>h;h++)f[h]=c(3),0<f[h]?(f[h]="ulrb".charAt(h)+["! ","' "][f[h]-1],e++):f[h]="";return a.substr(0,a.length-b*e)+" "+f.join("")}var Ra=["","2","'"],x=["","2","'","2'"],Wa=[],Ta=[];scrMgr.reg("444yj",function(a,b){var e=[["U","D"],["R","L","r"],["F","B","f"]],f=[],h=0,r,x="";var y=-1;for(r=
0;r<b;r++){var z=0;do{var Oa=c(e.length),Sa=c(e[Oa].length);if(Oa!=y||0==f[Sa]){if(Oa==y)f[Sa]=1,z=c(Ra.length);else{for(y=0;y<e[Oa].length;y++)f[y]=0;y=Oa;f[Sa]=1;z=c(Ra.length)}0==Oa&&0==Sa&&(h=(h+4+z)%4);x=1==Oa&&2==Sa?0==h||3==h?x+("l"+Ra[z]+" "):x+("r"+Ra[z]+" "):2==Oa&&2==Sa?0==h||1==h?x+("b"+Ra[z]+" "):x+("f"+Ra[z]+" "):x+(e[Oa][Sa]+Ra[z]+" ");z=1}}while(0==z)}return x});scrMgr.reg("bic",function(a,b){function e(a){var b=[],c,e,f,x=0;for(c=0;9>c;c++){for(e=f=0;e<b.length;e++)b[e]==r[h[a][c]]&&
(f=1);0==f&&(b[b.length]=r[h[a][c]],0==r[h[a][c]]&&(x=1))}return 5==b.length&&1==x}function f(a,b){for(var c=0;c<b;c++){var e=r[h[a][0]];r[h[a][0]]=r[h[a][6]];r[h[a][6]]=r[h[a][4]];r[h[a][4]]=r[h[a][2]];r[h[a][2]]=e;e=r[h[a][7]];r[h[a][7]]=r[h[a][5]];r[h[a][5]]=r[h[a][3]];r[h[a][3]]=r[h[a][1]];r[h[a][1]]=e}}for(var h=[[0,1,2,5,8,7,6,3,4],[6,7,8,13,20,19,18,11,12],[0,3,6,11,18,17,16,9,10],[8,5,2,15,22,21,20,13,14]],r=[1,1,2,3,3,2,4,4,0,5,6,7,8,9,10,10,5,6,7,8,9,11,11],x="",y=[],z,Oa,Sa,Wa;y.length<
b;){z=[1,1,1,1];for(Oa=0;4>Oa;Oa++)1!=z[Oa]||e(Oa)||(z[Oa]=0);for(Oa=0;0==Oa;)Sa=c(4),1==z[Sa]&&(Wa=c(3)+1,f(Sa,Wa),Oa=1);y[y.length]=[Sa,Wa];2<=y.length&&y[y.length-1][0]==y[y.length-2][0]&&(y[y.length-2][1]=(y[y.length-2][1]+y[y.length-1][1])%4,y=y.slice(0,y.length-1));1<=y.length&&0==y[y.length-1][1]&&(y=y.slice(0,y.length-1))}for(z=0;z<b;z++)x+="UFLR"[y[z][0]]+Ra[y[z][1]-1]+" ";return x});scrMgr.reg("15p 15pm 15pat clkwca clk clkc clke giga mgmo mgmp mgmc klmp heli redi redim pyrm prcp mpyr r3 r3ni sq1h sq1t sq2 ssq1t bsq -1 333noob lol".split(" "),
function(h,Sa){var Pa="";switch(h){case "15p":return a(!1,Sa);case "15pm":return a(!0,Sa);case "15pat":return a(!1,Sa,!0,!0);case "clkwca":var Ra="0+ 1+ 2+ 3+ 4+ 5+ 6+ 1- 2- 3- 4- 5-".split(" ");Pa="UR? DR? DL? UL? U? R? D? L? ALL? y2 U? R? D? L? ALL?????";for(var Qa=0;14>Qa;Qa++)Pa=Pa.replace("?",Na(Ra));return Pa.replace("?",Na([""," UR"])).replace("?",Na([""," DR"])).replace("?",Na([""," DL"])).replace("?",Na([""," UL"]));case "clk":return"UU"+b("u")+"dU"+b("u")+"dd"+b("u")+"Ud"+b("u")+"dU"+b("u")+
"Ud"+b("u")+"UU"+b("u")+"UU"+b("u")+"UU"+b("u")+"dd     "+e()+"\\ndd"+b("d")+"dU"+b("d")+"UU"+b("d")+"Ud"+b("d")+"UU     UU     Ud     dU     UU     dd"+b("d")+e();case "clkc":Pa="";for(Qa=0;4>Qa;Qa++)Pa+="("+(c(12)-5)+", "+(c(12)-5)+") / ";for(Qa=0;6>Qa;Qa++)Pa+="("+(c(12)-5)+") / ";for(Qa=0;4>Qa;Qa++)Pa+=Na(["d","U"]);return Pa;case "clke":return"UU"+b("u")+"dU"+b("u")+"dU"+b("u")+"UU"+b("u")+"UU"+b("u")+"UU"+b("u")+"Ud"+b("u")+"Ud"+b("u")+"dd"+b("u")+"dd     "+e()+"\\nUU     UU     dU"+b("d")+
"dU     dd"+b("d")+"Ud     Ud"+b("d")+"UU     UU"+b("d")+"dd"+b("d")+e();case "giga":Pa="";for(Qa=0;Qa<Math.ceil(Sa/10);Qa++){Pa+="  ";for(Ra=0;10>Ra;Ra++)Pa+=(0==Ra%2?"Rr".charAt(c(2)):"Dd".charAt(c(2)))+Na(["+ ","++","- ","--"])+" ";Pa+="y"+Na(x)+"\\n"}return Pa;case "mgmo":return r("F B U D L DBR DL BR DR BL R DBL".split(" "),[1364,2728,1681,2402,2629,1418,2329,1574,1129,2198,421,602],Sa);case "mgmp":return y(10,Math.ceil(Sa/10));case "mgmc":Pa=Math.ceil(Sa/10);Qa="";var Ta;for(Ra=0;Ra<Pa;Ra++){Qa+=
" ";for(Ta=0;5>Ta;Ta++)Qa+=Na(["+","-"])+Na(["+","-"])+" ";Qa+="U"+Na(["'\\n","~\\n"])}return Qa;case "klmp":return y(10,Math.ceil(Sa/10));case "heli":return r("UF UR UB UL FR BR BL FL DF DR DB DL".split(" "),[154,53,106,197,771,1542,3084,2313,2704,1328,2656,1472],Sa);case "redi":return r("LRFBlrfb".split(""),[28,44,67,131,193,194,52,56],Sa,["","'"]);case "redim":Pa=[];for(Qa=0;Qa<Sa;Qa++)Pa.push(z([["R"],["L"]],["","'"],3+c(3)));return Pa.join(" x ");case "pyrm":return Pa=z([["U"],["L"],["R"],["B"]],
["!","'"],Sa),Oa(Pa,3).replace(/!/g,"");case "prcp":return y(10,Math.ceil(Sa/10));case "mpyr":return Pa=r("U! L! R! B! Uw Lw Rw Bw".split(" "),[224,208,176,112,238,221,187,119],Sa,["!","'"]),Oa(Pa,4).replace(/!/g,"");case "r3":for(Qa=0;Qa<Sa;Qa++)Pa+=(0==Qa?"":"\\n")+(Qa+1)+") ${333}";return scrMgr.formatScramble(Pa);case "r3ni":for(Qa=0;Qa<Sa;Qa++)Pa+=(0==Qa?"":"\\n")+(Qa+1)+") ${333ni}";return scrMgr.formatScramble(Pa);case "sq1h":return f(1,Sa);case "sq1t":return f(0,Sa);case "sq2":for(Qa=0;Qa<
Sa;)if(Ra=c(12)-5,Ta=c(12)-5,0!=Ra||0!=Ta)Qa++,Pa+="("+Ra+","+Ta+") / ";return Pa;case "ssq1t":Wa=[];ab(2,0,Sa);Qa=Wa[0];Ra=Wa[1];Ta="";7==Qa[0][0]&&(Qa=[[0,0]].concat(Qa));7==Ra[0][0]&&(Ra=[[0,0]].concat(Ra));for(Pa=0;Pa<Sa;Pa++)Ta+="("+Qa[2*Pa][0]+","+Ra[2*Pa][0]+","+Ra[2*Pa][1]+","+Qa[2*Pa][1]+") / ";return Ta;case "bsq":return f(2,Sa);case "-1":for(Qa=0;Qa<Sa;Qa++)Pa+=String.fromCharCode(32+c(224));return Pa+"Error: subscript out of range";case "333noob":return Pa=z(SCRAMBLE_NOOBST,SCRAMBLE_NOOBSS.split("|"),
Sa).replace(/t/,"T"),Pa.substr(0,Pa.length-2)+".";case "lol":return Pa=z([["L"],["O"]],0,Sa),Pa.replace(/ /g,"")}console.log("Error")})})(mathlib.rn,mathlib.rndEl,scrMgr.mega);var storage=execMain(function(){function c(a){a=""+a;return String.fromCharCode(47+a.length)+a}function Na(a,b){return"session_"+c(a)+(void 0==b?"":"_"+c(b))}function z(a){console.log("IndexedDB Error",a||"undefined")}function r(b,c,e,y){(y=y||a)?(y=y.transaction(["sessions"],b),y.oncomplete=e||$.noop,y.onerror=z,y=y.objectStore("sessions"),c(y)):requestAnimFrame(function(){r(b,c,e)})}function b(a,b){return new Promise(function(c,f){if(e)r("readwrite",function(b){b.clear();for(var c=1;c<=~~kernel.getProp("sessionN");c++)for(var e=
mathlib.str2obj(a["session"+c]||[]),f=0;f<(Math.ceil(e.length/100)||1);f++)b.put(e.slice(100*f,100*(f+1)),Na(c,f))},c,b);else{for(var h=1;h<=~~kernel.getProp("sessionN");h++)localStorage["session"+h]=mathlib.obj2str(a["session"+h]);c()}})}var e=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,a,y=/^session_\d(\d+)_\d(\d+)$/;e&&$(function(){var c=e.open("cstimer",1);c.onerror=z;c.onupgradeneeded=function(a){DEBUG&&console.log("Update Data From LocalStorage");
var c=a.target.result;c.createObjectStore("sessions").transaction.oncomplete=function(a){b(localStorage,c)}};c.onsuccess=function(b){DEBUG&&console.log("Success opening DB");a=b.target.result}});return{set:function(a,b,c){return new Promise(function(f,h){e?r("readwrite",function(e){var f=~~(c/100),h=IDBKeyRange.bound(Na(a,f),Na(a+1),!1,!0);for(e["delete"](h);f<(Math.ceil(b.length/100)||1);f++)e.put(b.slice(100*f,100*(f+1)),Na(a,f))},function(){f(b)}):(localStorage["session"+a]=JSON.stringify(b),f(b))})},
get:function(a,b,c){return new Promise(function(f,h){var x=[];if(e)r("readonly",function(b){var c=IDBKeyRange.bound(Na(a),Na(a+1),!1,!0);b.openCursor(c).onsuccess=function(a){if(a=a.target.result)Array.prototype.push.apply(x,a.value),a["continue"]()}},function(){b=b||0;c=c||x.length;if(0!=b||c!=x.length)x=x.slice(b,c);f(x)});else{var y=localStorage["session"+a];void 0!=y&&""!=y&&(x=JSON.parse(y));if(0!=b||c!=x.length)x=x.slice(b,c);f(x)}})},del:function(a,b,c){e?r("readwrite",function(c){c["delete"](IDBKeyRange.bound(Na(a),
Na(a+1),!1,!0));var e=IDBKeyRange.bound(Na(b),Na(b+1),!1,!0);c.openCursor(e).onsuccess=function(b){if(b=b.target.result){var e=y.exec(b.key);e&&(c.put(b.value,Na(a,~~e[2])),c["delete"](b.key));b["continue"]()}}},c):(localStorage["session"+a]=localStorage["session"+b],delete localStorage["session"+b],c&&requestAnimFrame(c))},setKey:function(a,b){return new Promise(function(c,f){e?r("readwrite",function(c){c.put(b,a)},function(){c(!0)}):(localStorage[a]=b,c(!0))})},getKey:function(a){return new Promise(function(b,
c){var f;e?r("readonly",function(b){b.get(a).onsuccess=function(a){f=a.target.result}},function(){b(f)}):b(localStorage[a])})},importAll:b,exportAll:function(){return new Promise(function(a,b){var c={};if(e)r("readonly",function(a){a.openCursor().onsuccess=function(a){if(a=a.target.result){var b=y.exec(a.key);b&&(b=~~b[1],c["session"+b]=c["session"+b]||[],Array.prototype.push.apply(c["session"+b],a.value));a["continue"]()}}},function(){a(c)});else{for(var f=1;f<=~~kernel.getProp("sessionN");f++)void 0!=
localStorage["session"+f]&&(c["session"+f]=mathlib.str2obj(localStorage["session"+f]));a(c)}})}}});var TimeStat=execMain(function(){function c(r,b,e,a){this.avgSizes=r.slice();this.timeAt=e;this.timeSort=a||c.dnfsort;this.reset(b)}function Na(c,b){return"p"==b[0]?Math.ceil(c/100*b.slice(1)):"m"==b?Math.max(0,c>>1):~~b}function z(c){var b=kernel.getProp("trim","p5"),e=kernel.getProp("trimr","a"),a=Na(c,b);b=Na(c,"a"==e?b:e);return a+b==c?[Math.max(a-1,0),Math.max(b-1,0)]:[a,b]}c.dnfsort=function(c,b){return c==b?0:0>c?1:0>b?-1:c-b};c.prototype.reset=function(c){this.timesLen=c;this.shouldRecalc=
!0};c.prototype.getAllStats=function(){this.genStats();var c=this.timesLen-this.tree.rankOf(-1);return[c,c==this.timesLen?-1:this.tree.cumSum(this.timesLen-c)/(this.timesLen-c)]};c.prototype.genStats=function(){if(this.shouldRecalc){this._bestAvg=[];this._bestAvg[this.avgSizes.length]=[];this.lastAvg=[];this.treesAvg=[];this.tree=sbtree.tree(this.timeSort);this.bestTime=this.worstTime=-1;this.bestTimeIndex=this.worstTimeIndex=0;var c=this.timesLen;this.timesLen=0;this.toLength(c);this.shouldRecalc=
!1}};c.prototype.pushed=function(c){this.genStats();this.doPushed(c)};c.prototype.bestAvg=function(c,b){var e=this._bestAvg[c]||[];e=e[e.length-1]||[-1,0,-1,-1,0];return void 0!==b?e[b]:e};c.prototype.isBestAvg=function(c,b){if(!this._bestAvg)return!1;for(var e=this._bestAvg[c]||[],a=0,r=e.length-1;a<=r;){var f=a+r>>1,z=e[f][4];if(z>b)r=f-1;else if(z<b)a=f+1;else return!0}return!1};c.prototype.doPushed=function(c,b){var e=[];this.timesLen++;var a=this.timesLen-1,r=this.timeAt(a);this.tree.insert(r,
a);if(!b){var f=this.bestTime;this.bestTime=0==this.timesLen?-1:this.tree.rank(0);this.bestTimeIndex=this.tree.find(this.bestTime);this.worstTime=0==this.timesLen?-1:this.tree.rank(Math.max(0,this.tree.rankOf(-1)-1));this.worstTimeIndex=this.tree.find(this.worstTime);0>this.timeSort(r,f)&&-1!=f&&e.push("single")}0>this.timeSort(r,this.bestAvg(this.avgSizes.length,0))&&this._bestAvg[this.avgSizes.length].push([r,0,r,r,a]);for(f=0;f<this.avgSizes.length;f++){var Na=Math.abs(this.avgSizes[f]);if(!(this.timesLen<
Na)){var h=0>this.avgSizes[f]?[0,0]:z(Na),Oa=Na-h[0]-h[1],Ra=this.treesAvg[f]||sbtree.tree(this.timeSort);if(this.timesLen==Na){for(var x=0;x<Na;x++)Ra.insert(this.timeAt(x),x);this._bestAvg[f]=[]}else Ra.remove(this.timeAt(a-Na)).insert(r,a);x=Ra.cumSum(Na-h[1])-Ra.cumSum(h[0]);var Wa=Math.sqrt((Ra.cumSk2(Na-h[1])-Ra.cumSk2(h[0])-x*x/Oa)/(Oa-1))/1E3;h=[Ra.rankOf(-1)<Na-h[1]?-1:x/Oa,Wa,Ra.rank(h[0]-1),Ra.rank(Na-h[1])];0>this.timeSort(h[0],this.bestAvg(f,0))&&(0<=this.bestAvg(f,0)&&!b&&e.push((0<
this.avgSizes[f]?"ao":"mo")+Na),this._bestAvg[f].push(h.concat([a-Na+1])));this.lastAvg[f]=h;this.treesAvg[f]=Ra}}0==e.length||c||logohint.push("Session best "+e.join(" ")+"!")};c.prototype.toLength=function(c){for(;this.timesLen>c;)this.toPop(this.timesLen-1!=c);for(;this.timesLen<c;)this.doPushed(!0,this.timesLen+1!=c)};c.prototype.toPop=function(c){var b=this.timesLen-1,e=this.timeAt(b);this.tree.remove(e);c||(this.bestTime=0==this.timesLen?-1:this.tree.rank(0),this.bestTimeIndex=this.tree.find(this.bestTime),
this.worstTime=0==this.timesLen?-1:this.tree.rank(Math.max(0,this.tree.rankOf(-1)-1)),this.worstTimeIndex=this.tree.find(this.worstTime));for(var a=0;a<this.avgSizes.length;a++){var r=Math.abs(this.avgSizes[a]);if(!(this.timesLen<r))if(this.timesLen==r)this.lastAvg[a]=null,this.treesAvg[a]=null,this._bestAvg[a]=null;else{var f=this.treesAvg[a];f.remove(e).insert(this.timeAt(b-r),b-r);if(!c){var Na=0>this.avgSizes[a]?[0,0]:z(r),h=r-Na[0]-Na[1],Oa=f.cumSum(r-Na[1])-f.cumSum(Na[0]),Ra=Math.sqrt((f.cumSk2(r-
Na[1])-f.cumSk2(Na[0])-Oa*Oa/h)/(h-1))/1E3;f=[f.rankOf(-1)<r-Na[1]?-1:Oa/h,Ra,f.rank(Na[0]-1),f.rank(r-Na[1])];this.lastAvg[a]=f}this.bestAvg(a,4)==b-r+1&&this._bestAvg[a].pop()}}this.bestAvg(this.avgSizes.length,4)==b&&this._bestAvg[this.avgSizes.length].pop();this.timesLen--};c.prototype.getThres=function(){for(var c=[],b=0;b<this.avgSizes.length;b++){var e=Math.abs(this.avgSizes[b]);if(!(this.timesLen<e)){var a=0>this.avgSizes[b]?[0,0]:z(e),y=e-a[0]-a[1],f=this.treesAvg[b]||sbtree.tree(this.timeSort),
Na=this.timeAt(this.timesLen-e),h=a[0];a=e-a[1]-1;0>this.timeSort(Na,f.rank(h))?(h+=1,Na=0):0>this.timeSort(f.rank(a),Na)&&(--a,Na=0);var Oa=this.bestAvg(b,0);f.rankOf(-1)<a?c[b]=-1:-1==Oa?c[b]=-2:(Na=f.cumSum(a+1)-f.cumSum(h)-Na,y=Oa*y-Na,h=0==h?0:f.rank(h-1),e=a==e-1?-1:f.rank(a+1),0>=y||0>this.timeSort(y,h)?c[b]=-1:0>this.timeSort(e,y)?c[b]=-2:c[b]=y)}}return c};c.prototype.getMinMaxInt=function(){return this.getAllStats()[0]==this.timesLen?null:[this.worstTime,this.bestTime,this.getBestDiff(this.worstTime-
this.bestTime)]};c.prototype.getBestDiff=function(c){var b=[100,200,500,1E3,2E3,5E3,1E4,2E4,5E4,1E5];if("a"==kernel.getProp("disPrec")){c/=10;for(var e=0;e<b.length;e++)if(c<b[e]){c=b[e];break}}else c=b[kernel.getProp("disPrec")];return c};c.prototype.runAvgMean=function(c,b,e,a){e=e||b;if(!(0>c||c+b>this.timesLen)){a=0==a?[0,0]:z(e);if(0>=e-a[0]-a[1])return[-1,0,-1,-1];for(var r=sbtree.tree(this.timeSort),f=0;f<e;f++)r.insert(this.timeAt(c+f),f);for(var Na=e-a[0]-a[1],h=r.cumSum(e-a[1])-r.cumSum(a[0]),
Oa=Math.sqrt((r.cumSk2(e-a[1])-r.cumSk2(a[0])-h*h/Na)/(Na-1))/1E3,Ra=[[r.rankOf(-1)<e-a[1]?-1:h/Na,Oa,r.rank(a[0]-1),r.rank(e-a[1])]],x=c-e,Wa=e;Wa<b;Wa++)r.remove(this.timeAt(x+Wa)).insert(this.timeAt(c+Wa),f),h=r.cumSum(e-a[1])-r.cumSum(a[0]),Oa=Math.sqrt((r.cumSk2(e-a[1])-r.cumSk2(a[0])-h*h/Na)/(Na-1))/1E3,Ra.push([r.rankOf(-1)<e-a[1]?-1:h/Na,Oa,r.rank(a[0]-1),r.rank(e-a[1])]);return Ra}};c.prototype.getTrimList=function(c,b,e,a){var r=[],f=[],Na=z(b);e=-2>e?0:e;for(var h=0;h<b;h++){var Oa=this.timeAt(c+
h),Ra=this.timeSort(Oa,e);Oa=this.timeSort(a,Oa);0>Ra?r.push(h):0>Oa?f.push(h):0==Ra&&r.length<Na[0]?r.unshift(h):0==Oa&&f.length<Na[1]&&f.unshift(h)}return r.slice(r.length-Na[0]).concat(f.slice(f.length-Na[1]))};return c});var stats=execMain(function(c,Na,z){function r(a){if("string"==typeof a[0]){var b=[a[2],a[1]||Mb,a[0],a[3]||Math.round(((new Date).getTime()-a[2][1])/1E3)];a[4]&&b.push(a[4]);eb.push(b);a=a[2]}else eb.push([a,Mb,"",Math.round(((new Date).getTime()-a[1])/1E3)]);Lb.push(null);tb.pushed();qb.pushed();Ib.save(eb.length-1);a.length-1>Cb?pb.updateTable(!1):pb.appendRow(eb.length-1);Wa(["push"]);kernel.pushSignal("timestd",eb[eb.length-1])}function b(a,b){a<.7*eb.length?(b(),tb.reset(eb.length),qb.reset(eb.length)):
(tb.toLength(a),qb.toLength(a),b(),tb.toLength(eb.length),qb.toLength(eb.length))}function e(a){if(kernel.getProp("delmul")){var c=prompt(STATS_CFM_DELMUL,1);if(null==c||!/^\d+$/.exec(c)||0==~~c)return;c=~~c}else{if(!confirm(STATS_CFM_DELETE))return;c=1}b(a,function(){eb.splice(a,c);Lb.splice(a,c)});Ib.save(a);pb.updateTable(!1);Wa(["delete",a,c]);return!0}function a(a){for(var b=0,c=0,e=0;e<eb.length;e++){var n=eb[e][0];-1==n[0]||n.length<=a?c+=1:b+=Qa(a,e)}return c==eb.length?-1:b/(eb.length-c)}
function y(a,b){switch(a[0]){case 0:return c(a[1]);case -1:return"DNF"+(b?"("+c(a[1])+")":"");default:return c(a[0]+a[1])+"+"}}function f(a){if(2==a.length)return"";var b=[];b.push(c(a[a.length-1]));for(var e=a.length-2;1<=e;e--)b.push(c(a[e]-a[e+1]));return"="+b.join("+")}function ab(a){a=~~$(a.target).attr("data");var b=tb;0!=a&&(b=new TimeStat(Ab,eb.length,Qa.bind(void 0,a)));kb(b,gb,0==a?0:STATS_CURSPLIT.replace("%d",a))}function h(a,b,e){var n=eb[a],f=n[0];qb.genStats();var w=qb.isBestAvg(2,
a),h=qb.isBestAvg(0,a-Gb+1),r=qb.isBestAvg(1,a-Jb+1),x=[];x.push('<td class="times">'+(n[2]&&"*")+(a+1)+"</td>");x.push('<td class="times'+(w?" pb":"")+'">'+y(f,!1)+"</td>");w=kernel.getProp("statsrc","t");n=tb.prettyFunc||[c,z];"t"!=w[0]&&(x.pop(),x.push('<td class="times"><span style="opacity:0.5">'+y(f,!1)+"</span> "+n[0](tb.timeAt(a)).split(" ")[0]+"</td>"));w=tb.runAvgMean(a-Gb+1,Gb,0,0<xb?void 0:0);var Pa=tb.runAvgMean(a-Jb+1,Jb,0,0<Hb?void 0:0);x.push("<td"+(w?' class="times'+(h?" pb":"")+
'"':"")+">"+(w?n[1](w[0][0]):"-")+"</td><td"+(Pa?' class="times'+(r?" pb":"")+'"':"")+">"+(Pa?n[1](Pa[0][0]):"-")+"</td>");if(1<b){x.push("<td>"+c(f[f.length-1])+"</td>");for(h=f.length-2;1<=h;h--)x.push("<td>"+c(f[h]-f[h+1])+"</td>");for(h=f.length-1;h<b;h++)x.push("<td>-</td>")}x=x.join("");e&&e.html(x);return'<tr data="'+a+'">'+x+"</tr>"}function Oa(b){ub.empty().unbind("click").click(ab);var e=eb.length,n=tb.getAllStats(),f=tb.prettyFunc||[c,z],w=e==n[0]?0:(e-n[0])*n[1];ub.append('<th colspan="4" data="0" class="times">'+
STATS_SOLVE+": "+(e-n[0])+"/"+e+"<br>"+STATS_AVG+": "+f[1](n[1])+(kernel.getProp("statssum")?"<br>"+STATS_SUM+": "+f[0](w):"")+"</th>").css("font-size","1.2em");if(1<b)for(e=1;e<=b;e++)ub.append('<th data="'+e+'" class="times">'+z(a(e))+"</th>").css("font-size","")}function Ra(a){a||(a=$('<select style="max-width:4em;">'));a.unbind("change").change(function(a){kernel.setProp("statsrc",$(a.target).val())});var b=kernel.getProp("statsrc","t"),c=[["t",STATS_TIME]];if(1!=Cb)for(var e=0;e<Cb;e++)c.push(["p"+
(e+1),"P."+(e+1)]);e=fb();for(var n in e)c.push(["m"+n,e[n][0]]);n=!1;for(e=0;e<c.length;e++)a.append($("<option>").val(c[e][0]).html(c[e][1])),c[e][0]==b&&(n=!0);a.val(b);n||kernel.setProp("statsrc","t");return 1==c.length?STATS_TIME:a}function x(){if(!Fb){if(kernel.getProp("statsum")){yb.css("display","inline-block");tb.getAllStats();var a=Ra(),b=tb.prettyFunc||[c,z],e=[];0<eb.length?(e.push('<td class="times click" data="cs">'+b[0](tb.timeAt(eb.length-1))+"</td>"),e.push('<td class="times click" data="bs">'+
b[0](tb.bestTime)+"</td>")):(e.push("<td><span>-</span></td>"),e.push("<td><span>-</span></td>"));for(var f=[],w=tb.getThres(),h=kernel.getProp("statthres",!1),r=0;r<Ab.length;r++){var x=Math.abs(Ab[r]);eb.length>=x&&(f.push("<tr><th>"+"am"[Ab[r]>>>31]+"o"+x+"</th>"),f.push('<td class="times click" data="c'+"am"[Ab[r]>>>31]+r+'">'+b[1](tb.lastAvg[r][0])+"</td>"),f.push('<td class="times click" data="b'+"am"[Ab[r]>>>31]+r+'">'+b[1](tb.bestAvg(r,0))+"</td>"),h&&f.push('<td class="times">'+(0>w[r]?["N/A",
"∞"][-1-w[r]]:b[0](w[r]))+"</td>"))}b=$("<tr>").append("<th></th><th>"+Bb[1]+"</th><th>"+Bb[0]+"</th>");h&&b.append("<th>"+Bb[13]+"</th>");zb.empty().append(b,$("<tr>").append($('<th style="padding:0">').append(a),e.join("")),f.join(""))}else zb.empty(),yb.hide();n()}}function Wa(a){if(!Fb){x();for(var b in Pb)Pb[b](a);a=eb.length-1;b=qb.runAvgMean(a-Gb+1,Gb,0,0<xb?void 0:0);var c=qb.runAvgMean(a-Jb+1,Jb,0,0<Hb?void 0:0);kernel.pushSignal("avg",[(0<xb?"ao":"mo")+Gb+": "+(b?z(b[0][0]):"-"),(0<Hb?"ao":
"mo")+Jb+": "+(c?z(c[0][0]):"-"),b?[a-Gb+1,Gb,10*Gb,0>xb]:void 0,c?[a-Jb+1,Jb,10*Jb,0>Hb]:void 0,Sa.bind(void 0,qb,gb),eb[a],0==a?null:eb[a-1]])}}function Ta(){var a=kernel.getProp("statsrc","t");if("t"!=a){if("p"==a[0])return Qa.bind(void 0,~~a.slice(1));if("m"==a[0])return a=a.slice(1),Ya.bind(null,a)}return Kb}function Za(a,b,c){if(!b)return"N/A";var e=y(b[0],!0)+f(b[0])+(b[2]?"["+b[2]+"]":"");-1!=$.inArray(a,c)&&(e="("+e+")");kernel.getProp("printScr")&&(e+="   "+b[1]);kernel.getProp("printDate")&&
(e+="   @"+mathlib.time2str(b[3]));return kernel.getProp("printScr")||kernel.getProp("printDate")?a+1+". "+e+" \n":e+", "}function Sa(a,b,e,n,f,w){if(0!=a.timesLen){var h=[0,[null],[null]],r=[];0!=e+n&&(w?h=a.runAvgMean(e,n,0,0)[0]:(h=a.runAvgMean(e,n)[0],r=a.getTrimList(e,n,h[2],h[3])));var x="";if(kernel.getProp("printDate")&&2<n){x=b(e);var y=b(e+n-1);x=Bb[11].replace("%s",mathlib.time2str(x&&x[3])).replace("%e",mathlib.time2str(y&&y[3]));x=" ("+x+")"}x=[mathlib.time2str(+new Date/1E3,Bb[3])+x+
"\n"];y=a.prettyFunc||[c,z];1<f&&(2==f?x.push(Bb[8]):10==f?x.push(Bb[5]):w?x.push(Bb[6].replace("%mk",~~(f/10))):x.push(Bb[7].replace("%mk",~~(f/10))),x.push(": "+y[10==f?0:1](h[0])));x.push("\n\n"+Bb[10]+"\n");if(kernel.getProp("absidx"))for(f=0;f<r.length;f++)r[f]+=e;for(f=0;f<n;f++)x.push(Za(kernel.getProp("absidx")?e+f:f,b(e+f),r));x=x.join("").slice(0,-2);bb.val(x);kernel.showDialog([bb,hb,void 0,hb,[STATS_EXPORTCSV,function(){Pa(a,b,e,n);return!1}]],"stats",STATS_CURROUND);bb[0].select()}}function Pa(a,
b,e,n){if(0!=a.timesLen){window.Blob||alert("Do not support your browser!");a=["No.;Time;Comment;Scramble;Date"];for(var f=0;f<Cb;f++)a[0]+=";P."+(f+1);for(f=0;f<n;f++){var w=b(e+f),h=[];h.push(f+1);h.push(y(w[0],!0));h.push(w[2]?w[2]:"");h.push(w[1]);h.push(mathlib.time2str(w[3]));h.push(c(w[0][w[0].length-1]));for(var r=w[0].length-2;1<=r;r--)h.push(c(w[0][r]-w[0][r+1]));for(r=w[0].length-1;r<Cb;r++)h.push("");for(r=0;r<h.length;r++){w=h;var x=r,Pa=h[r];Pa=Pa.toString();if(-1!=Pa.indexOf(";")||
-1!=Pa.indexOf("\n"))Pa='"'+Pa.replace(/"/g,'""')+'"';w[x]=Pa}a.push(h.join(";"))}a=a.join("\r\n");b=new Blob([a],{type:"text/csv"});e=$('<a class="click"/>').appendTo("body");e.attr("href",URL.createObjectURL(b));e.attr("download","csTimerExport_"+mathlib.time2str(new Date/1E3,"%Y%M%D_%h%m%s")+".csv");e[0].click();e.remove()}}function $a(a,b,c){c=$(c.target).attr("data");if(void 0!=c){var e=~~c.substr(2);switch(c.substr(0,2)){case "bs":Sa(a,b,a.bestTimeIndex,1,10,!0);break;case "cs":Sa(a,b,a.timesLen-
1,1,10,!0);break;case "ws":Sa(a,b,a.worstTimeIndex,1,10,!0);break;case "bm":Sa(a,b,a.bestAvg(e,4),-Ab[e],10*-Ab[e],!0);break;case "cm":Sa(a,b,a.timesLen+Ab[e],-Ab[e],10*-Ab[e],!0);break;case "ba":Sa(a,b,a.bestAvg(e,4),Ab[e],10*Ab[e],!1);break;case "ca":Sa(a,b,a.timesLen-Ab[e],Ab[e],10*Ab[e],!1);break;case "tt":kb(a,b)}}}function Qa(a,b){var c=(eb[b]||[[-1,1]])[0];return-1==c[0]||c.length<=a?-1:Rb*~~((0==a?c[0]+c[1]:c[c.length-a]-(c[c.length-a+1]||0))/Rb)}function gb(a){return eb[a]}function mb(a){for(var b=
[],c=0;c<a.length;c++)b.push(c);b.sort(function(b,c){var e=a[b][3]||0,n=a[c][3]||0;return e==n?b-c:e-n});for(c=0;c<a.length;c++)b[c]=a[b[c]];return b}function hb(){bb.val("")}function kb(a,b,e){var n=a.getAllStats(),f=n[0],w=a.runAvgMean(0,eb.length)[0];n=n[1];var h=a.timesLen,r="";if(kernel.getProp("printDate")&&2<h){r=b(0);var x=b(h-1);r=Bb[11].replace("%s",mathlib.time2str(r&&r[3])).replace("%e",mathlib.time2str(x&&x[3]));r=" ("+r+")"}x=tb.prettyFunc||[c,z];r=[mathlib.time2str(+new Date/1E3,Bb[3])+
r];r.push(Bb[4].replace("%d",h-f+"/"+h)+"\n");r.push(Bb[5]);r.push("    "+Bb[0]+": "+x[0](a.bestTime));r.push("    "+Bb[2]+": "+x[0](a.worstTime)+"\n");for(f=0;f<Ab.length;f++){var y=Math.abs(Ab[f]);h>=y&&(r.push(Bb[7-(Ab[f]>>>31)].replace("%mk",y)),r.push("    "+Bb[1]+": "+x[1](a.lastAvg[f][0])+" (σ = "+ib(a.lastAvg[f][1],2)+")"),r.push("    "+Bb[0]+": "+x[1](a.bestAvg(f,0))+" (σ = "+ib(a.bestAvg(f,1),2)+")\n"))}r.push(Bb[8].replace("%v",x[1](w[0])).replace("%sgm",ib(w[1],2)).replace(/[{}]/g,""));
r.push(Bb[9].replace("%v",x[1](n)+"\n"));if(0!=h){r.push(Bb[10]);w=[];for(n=0;n<h;n++)w.push(Za(n,b(n),[]));w=w.join("").slice(0,-2);r.push(w)}r=r.join("\n");bb.val(r);kernel.showDialog([bb,hb,void 0,hb,[STATS_EXPORTCSV,function(){Pa(a,b,0,h);return!1}]],"stats",e||STATS_CURSESSION);bb[0].select()}function ib(a,b){a&&a!=Number.POSITIVE_INFINITY&&a!=Number.NEGATIVE_INFINITY||(a=0);for(var c=""+Math.round(a*Math.pow(10,b));c.length<b+1;)c="0"+c;var e=c.length;return c.substr(0,e-b)+"."+c.substr(e-b,
b)}function Xa(a){a=a.split(/[\s,;]+/);for(var b=/([am])o(\d+)/,c=[],e=0;e<a.length;e++){var n=b.exec(a[e]);if(!n)return!1;c.push(("a"==n[1]?1:-1)*~~n[2])}c.sort(function(a,b){return Math.abs(a)-Math.abs(b)});return c}function db(a){var b=kernel.getProp("statalu");if(a||!/^\s*([am]o\d+[\s,;]*)+\s*$/.exec(b))a=prompt("Statistics Details",b||"mo3 ao5 ao12 ao100"),/^\s*([am]o\d+[\s,;]*)+\s*$/.exec(a)&&Xa(a)?kernel.setProp("statalu",a):(null!=a&&alert("INVALID VALUES!"),kernel.setProp("statal","mo3 ao5 ao12 ao100"),
kernel.reprop())}function Va(a){var b=Xa(a);b?(Ab=b,tb=new TimeStat(Ab,eb.length,Ta()),tb.prettyFunc=ob(),qb=new TimeStat([xb,Hb],eb.length,Kb),crossSessionStats.updateStatal(Ab),Wa(["statal",a])):(kernel.setProp("statal","mo3 ao5 ao12 ao100"),kernel.reprop())}function w(a,c){if("time"==a)r(c);else if("scramble"==a||"scrambleX"==a)Mb=c[1];else if("property"==a)if(/^(:?useMilli|timeFormat|stat[12][tl]|statinv)$/.exec(c[0]))Rb=kernel.getProp("useMilli")?1:10,xb=[1,-1][~~kernel.getProp("stat1t")]*kernel.getProp("stat1l"),
Hb=[1,-1][~~kernel.getProp("stat2t")]*kernel.getProp("stat2l"),Gb=Math.abs(xb),Jb=Math.abs(Hb),pb.updateTable(!1),Wa(["property",c[0]]);else if("statsum"==c[0]||"statthres"==c[0])x();else if("statssum"==c[0])Oa(Cb),n();else if("statal"==c[0]){var e=c[1];"u"==e&&db("modify"==c[2]);e=kernel.getProp("statal");Va("u"==e?kernel.getProp("statalu"):e)}else"statalu"==c[0]?Va(c[1]):"trim"==c[0]||"trimr"==c[0]?(tb.reset(eb.length),qb.reset(eb.length),crossSessionStats.updateStatal(Ab),pb.updateTable(!1),Wa(["property",
c[0]])):"view"==c[0]?n():"statHide"==c[0]?c[1]?nb.hide():nb.show():"statsrc"==c[0]?(tb=new TimeStat(Ab,eb.length,Ta()),tb.prettyFunc=ob(),pb.updateTable(!0)):"wndStat"==c[0]?n():"sr_statal"==c[0]?kernel.setProp("sr_statalu",c[1]):"hlpbs"==c[0]&&rb.removeClass("f40b linkb normb none").addClass(c[1]);else if("ctrl"==a&&"stats"==c[0])"clr"==c[1]?Ib.getButton().click():"undo"==c[1]?Eb.delLast():"OK"==c[1]?Eb.setCfm(0):"+2"==c[1]?Eb.setCfm(2E3):"DNF"==c[1]&&Eb.setCfm(-1);else if("ashow"==a&&!c)pb.hideAll();
else if("button"==a&&"stats"==c[0]&&c[1])setTimeout(n,50);else if("giirecons"==a){var f=eb.length-1;0>f||eb[f][1]!=c[0]||(b(f,function(){eb[f][4]=c[1];Lb[f]=null}),Ib.save(f),Wa(["giirecons",f]))}}function n(){$("html").hasClass("m")?sb.height(Math.max(yb.height(),ub.height()+2*vb.height())):null!=sb[0].offsetParent&&sb.outerHeight(~~(lb.height()-(nb.is(":hidden")?0:nb.outerHeight())-yb.outerHeight()-5))}function Ua(a,b,c){Tb[a]=b;c&&(Nb[a]=[b,c])}function Ya(a,b){if(!(b>=eb.length)&&a in Tb)return Lb[b]||
(Lb[b]={}),a in Lb[b]||(Lb[b][a]=Tb[a](eb[b],b)),Lb[b][a]}function fb(){var a={},b;for(b in Nb)for(var c=Math.max(eb.length-10,0);c<eb.length;c++)if(-1!=Ya(b,c)){a[b]=Nb[b][1];break}return a}function ob(a){if(!a){var b=kernel.getProp("statsrc","t");"m"==b[0]&&(a=b.slice(1))}return Nb[a]?(a=Nb[a][1],[a[1],a[2]||a[1]]):[c,z]}function cb(a,b){var c=-1;(b[2]||"").replace(/[0-9]+(\.[0-9]+)?/g,function(b){0==a&&(c=1E3*parseFloat(b));a--});return c}var eb=[],lb=$('<div id="stats" />'),bb=$('<textarea rows="10" readonly />'),
sb=$('<div class="myscroll" />'),nb=$("<div>"),rb=$("<table />").click(function(a){a=$(a.target);if(a.is("td,td>span")&&"-"!=a.html()){a.is("td>span")&&(a=a.parent());var b=a.prevAll(),c=b.length;b=~~(0==c?a:b.eq(-1)).html().replace("*","")-1;if(!(4<c||0>c))switch(c){case 0:if(kernel.getProp("rsfor1s")){Sa(tb,gb,b,1,10,!0);break}case 1:Eb.proc(b,a);break;case 2:Sa(tb,gb,b-Gb+1,Gb,10*Gb,0>xb);break;case 3:Sa(tb,gb,b-Jb+1,Jb,10*Jb,0>Hb)}}}).addClass("table"),vb=$("<tr />"),ub=$("<tr />"),wb=$('<tr class="click" ><th class="click" colspan="15">...</th></tr>'),
zb=$('<table class="sumtable" />').click(function(a){$a(tb,gb,a)}).addClass("table"),yb=$('<div class="statc" />'),Fb=!0,pb=function(){function a(a){if(Xa&&Xa.idx==a)Xa=null;else{for(var b=[],e=0;e<eb.length;e++)b[e]=e;if(0==a)b.sort(function(a,b){return TimeStat.dnfsort(tb.timeAt(a),tb.timeAt(b))});else if(1==a||2==a){var n=1==a?Gb:Jb,f=qb.runAvgMean(0,eb.length,n,0<(1==a?xb:Hb)?void 0:0);b.sort(function(a,b){return Math.max(a,b)<n-1?0:Math.min(a,b)<n-1?a>b?-1:1:TimeStat.dnfsort(f[a-n+1][0],f[b-
n+1][0])})}Xa={};for(e=0;e<eb.length-1;e++)Xa[b[e]]=b[e+1];Xa[-2]=b[0];Xa[b[eb.length-1]]=-1;Xa.len=eb.length;Xa.idx=a}c(!1)}function b(a){return Xa&&a in Xa?Xa[a]:-2==a?eb.length-1:a-1}function c(c){Cb=1;for(var f=0;f<eb.length;f++)Cb=Math.max(Cb,eb[f][0].length-1);f=Xa?Xa.idx:-1;Ua.html(STATS_TIME+(0==f?"*":""));Qa.html((0<xb?"ao":"mo")+Gb+(1==f?"*":""));Sa.html((0<Hb?"ao":"mo")+Jb+(2==f?"*":""));vb.empty().append(z,Ua,Qa,Sa);if(1<Cb)for(f=0;f<Cb;f++)vb.append("<th>P."+(f+1)+"</th>");Xa&&Xa.len!=
eb.length&&n();Va=[];Ra=b(-2);kernel.getProp("statinv")?rb.empty().append(vb,wb,ub):rb.empty().append(ub,vb,wb);w();0>Ra?wb.unbind("click").hide():wb.unbind("click").click(pb.showAll).show();z.unbind("click").click(e);Ua.unbind("click").click(a.bind(null,0));Qa.unbind("click").click(a.bind(null,1));Sa.unbind("click").click(a.bind(null,2));Oa(Cb);c&&Wa(["table"]);sb.scrollTop(kernel.getProp("statinv")?rb[0].scrollHeight:0)}function e(){var a=prompt("Filter Pattern: (23*, 15.1*, comments, scrambles, date)");
null!=a&&a!=Pa&&(Pa=a?(a+"").replace(/[.\\+*?\[\^\]$(){}=!<>|:\-]/g,"\\$&").replace(/\\\*/g,".*").replace(/\\\?/g,"."):".*",x=new RegExp(Pa,"g"),c(!1))}function n(){if(".*"==Pa&&null==Xa)return!1;Pa=".*";x=/.*/;Xa=null;c(!1);return!0}function w(){for(var a=Va.length+50,c=[];0<=Ra&&Va.length<a;){var e=eb[Ra];if(x.exec(y(e[0],!0)+f(e[0]))||x.exec(e[1])||x.exec(e[2])||x.exec(mathlib.time2str(e[3])))c.push(h(Ra,Cb)),Va.push(Ra);Ra=b(Ra)}kernel.getProp("statinv")?wb.after(c.reverse().join("")):wb.before(c.join(""))}
function r(a){w();0>Ra&&wb.unbind("click").hide()}var x=/.*/,Pa=".*",z=$('<th class="click">').html("&#8981;"),Ua=$('<th class="click">'),Qa=$('<th class="click">'),Sa=$('<th class="click">'),Va=[],Ra=0,Xa=null;return{appendRow:function(a){if(!n()){var b=h(a,Cb);kernel.getProp("statinv")?(ub.before(b),sb.scrollTop(rb[0].scrollHeight)):(vb.after(b),sb.scrollTop(0));Va.unshift(a);Oa(Cb);50<Va.length&&pb.hideAll()}},showAll:r,hideAll:function(){for(;50<Va.length;)(kernel.getProp("statinv")?wb.next():
wb.prev()).remove(),Ra=Va.pop();0<=b(Ra)&&wb.unbind("click").click(r).show()},updateTable:c,updateFrom:function(a){for(var b=Math.min(a+Math.max(Gb,Jb),eb.length),c=kernel.getProp("statinv"),e=ub.parent().children(),n=0;n<Va.length;n++)if(!(Va[n]<a||Va[n]>=b)){var f=c?Va.length+1-n:2+n;Va[n]!=~~e.eq(f).attr("data")?console.log("[stats] update from error",Va[n],f,e[f]):h(Va[n],Cb,e.eq(f))}Oa(Cb)}}}(),Eb=function(){function a(){0>Ya||Ya>=eb.length||(kernel.getProp("statsrc","t").startsWith("mcomment")?
(b(Ya,function(){eb[Ya][2]=Qa.val();Lb[Ya]=null}),Ib.save(Ya),pb.updateFrom(Ya),Wa(["comment",Ya])):(eb[Ya][2]=Qa.val(),Lb[Ya]=null,Ib.save(Ya),h(Ya,Cb,$a),x()))}function c(a){a=$(a.target);var b=a.attr("data");b&&("p"==b?(a={" OK ":0," +2 ":2E3," DNF ":-1}[a.html()],r(a,Ya)):"d"==b?e(Ya)&&(Ya=void 0,n()):"s"==b?(a=eb[Ya],$.clipboardCopy(a[1])&&logohint.push("scramble copied")):"c"==b?(a=eb[Ya],$.clipboardCopy(y(a[0],!0)+f(a[0])+(a[2]?"["+a[2]+"]":"")+"   "+a[1]+"   @"+mathlib.time2str(a[3]))&&logohint.push("solve copied")):
"r"==b&&(a=eb[Ya],a[4]&&(b="string"==typeof a[4][1]&&a[4][1]||tools.getCurPuzzle()||"333",replay.popupReplay(a[1],a[4][0],b))))}function n(){kernel.isDialogShown("cfm")&&kernel.hideDialog();bb&&(z.css("font-size","0.8em"),bb.empty().append(z),Ya=eb.length-1,$a=kernel.getProp("statinv")?ub.prev():vb.next(),w())}function w(){if(eb[Ya]){var b=eb[Ya],e="";b[4]&&(e=$('<span class="click" data="r">'+STATS_REVIEW+"</span>"),e=$("<tr>").append($("<td>").append(e),$("<td>").append(Xa)));z.empty().append(Ua,
"<br>",f(b[0]),"<br>").append('<span class="click" data="c"> &#128203; </span>|<span class="click" data="p"> OK </span>|<span class="click" data="p"> +2 </span>|<span class="click" data="p"> DNF </span>| ',Oa).append("<br>",$('<table style="display:inline-block;">').append($("<tr>").append("<td>"+STATS_COMMENT+"</td>",$("<td>").append(Qa)),$("<tr>").append('<td><span class="click" data="s">'+SCRAMBLE_SCRAMBLE+"</span></td>",$("<td>").append(Va)),$("<tr>").append("<td>"+STATS_DATE+"</td>",$("<td>").append(Ra)),
e)).unbind("click").click(c);Ua.html(y(b[0],!0));Va.val(b[1]);Ra.val(mathlib.time2str(b[3]));Qa.val(b[2]).unbind("change").change(a);Xa.val(b[4]?JSON.stringify(b[4]):"")}else z.empty()}function r(a,c){eb[c][0][0]!=a&&(b(c,function(){eb[c][0][0]=a;Lb[c]=null}),Ib.save(c),pb.updateFrom(c),Wa(["penalty",c]),c==Ya&&w(),kernel.pushSignal("timepnt",eb[c]))}function Pa(a,b){bb=a;void 0!=a&&n()}var z=$('<div style="text-align:center; font-family: initial;">'),Ua=$('<span style="font-size:2.5em;"/>'),Qa=$('<input type="text">').css("width",
"8em"),Oa=$('<input type="button" data="d">').val("X"),Va=$('<input type="text" readonly>').css("width","8em"),Ra=$('<input type="text" readonly>').css("width","8em"),Xa=$('<input type="text" readonly>').css("width","8em"),Ya=0,$a,bb;$(function(){tools.regTool("cfm",TOOLS_CFMTIME,Pa);kernel.regListener("cfm","session",n)});return{proc:function(a,b){Ya=a;$a=b.parent();w();z.css("font-size","1.2em");var c=[z,n,void 0,n,[STATS_SSSTAT,function(){n();Sa(tb,gb,a,1,10,!0)}]],e=eb[a];e&&e[4]&&c.push([TOOLS_RECONS,
function(){n();kernel.pushSignal("reqrec",[eb[a],a])}]);kernel.showDialog(c,"cfm","Solves No."+(a+1))},delLast:function(){0!=eb.length&&e(eb.length-1)&&(Ya=void 0,n())},setCfm:function(a){0!=eb.length&&r(a,eb.length-1)}}}(),Cb=0,Bb=STATS_STRING.split("|");for(Na=0;13>Na;Na++)Bb[Na]=Bb[Na]||"";var Kb=Qa.bind(void 0,0),Ab=[-3,5,12,50,100,1E3],tb=new TimeStat(Ab,0,Kb),qb=new TimeStat([5,12],0,Kb),Ib=function(){function a(a){Ta=a;kernel.setProp("session",Ta);cb[Ta]=cb[Ta]||{name:Ta,opt:{}};kernel.setSProps(cb[Ta].opt||
{});b();return Ua()}function b(){for(var a=1;a<=db;a++){"object"!=typeof cb[a]&&(cb[a]={});var b={name:a,opt:{}},e;for(e in b)void 0===cb[a][e]&&(cb[a][e]=b[e]);cb[a].scr&&(cb[a].opt.scrType=cb[a].scr,delete cb[a].scr);cb[a].phases&&(cb[a].opt.phases=cb[a].phases,delete cb[a].phases);cb[a].rank=cb[a].rank||a}c();ib.empty();for(a=0;a<lb.length;a++)ib.append($("<option />").val(lb[a]).html(cb[lb[a]].name));ib.append(hb,gb);ib.val(Ta)}function c(){lb=[];for(var a=1;a<=db;a++)lb.push(a);lb.sort(function(a,
b){return cb[a].rank-cb[b].rank});for(a=0;a<lb.length;a++)cb[lb[a]].rank=a+1;kernel.setProp("sessionData",JSON.stringify(cb))}function e(a){return cb[a].rank+"-"+cb[a].name}function n(a,c){$.isNumeric(a)||(a=(cb[Ta]||{}).rank||db);Ta=++db;var e=new Date;e=e.getMonth()+1+"."+e.getDate()+" "+Ob;kernel.setProp("sessionN",db);var n=cb[lb[a-1]]||{};cb[Ta]=void 0===c||c?{name:n.name||e,opt:JSON.parse(JSON.stringify(n.opt||{})),rank:a+.5}:{name:e,opt:kernel.getSProps(),rank:a+.5};b()}function f(b,c){n(b,
c);eb=[];Lb=[];qb.reset(eb.length);tb.reset(eb.length);Qa();a(Ta);kernel.blur();kernel.getProp("imrename")&&x(Ta,!0)}function w(b){b!=db&&(cb[b]=cb[db]);delete cb[db];storage.del(b,db);db--;kernel.setProp("sessionN",db);kernel.setProp("sessionData",JSON.stringify(cb));0==db?f():Ta==b?kernel.setProp("session",1):Ta==db+1&&a(b)}function h(a){if(0!=("stat"in cb[a]?cb[a].stat[0]:1)&&!confirm(STATS_CFM_DELSS.replace("%s",e(a))))return!1;w(a);return!0}function r(){confirm(STATS_CFM_RESET)&&(eb=[],Lb=[],
tb.reset(),qb.reset(),Qa(),pb.updateTable(!0),kernel.blur())}function x(a,b){void 0===a&&(a=Ta);var c=prompt(b?STATS_SESSION_NAMEC:STATS_SESSION_NAME,cb[a].name);null!=c&&(c=$("<div/>").text(c).html(),cb[a].name=c,kernel.setProp("sessionData",JSON.stringify(cb)))}function y(a,b){Fb=!1;eb=b;Lb=[];tb.reset(eb.length);qb.reset(eb.length);pb.updateTable(!0);cb[a]=cb[a]||{name:a,opt:{}};cb[a].stat=[eb.length].concat(qb.getAllStats());cb[a].date=[(eb[0]||[])[3],(eb[eb.length-1]||[])[3]];kernel.setProp("sessionData",
JSON.stringify(cb));kernel.isDialogShown("ssmgr")&&bb();kernel.pushSignal("session","load")}function Ua(){return storage.get(Ta).then(y.bind(void 0,Ta))}function Qa(a){cb[Ta].stat=[eb.length].concat(qb.getAllStats());cb[Ta].date=[(eb[0]||[])[3],(eb[eb.length-1]||[])[3]];kernel.setProp("sessionData",JSON.stringify(cb));return storage.set(Ta,eb,a)}function Oa(c){c=$(c.target);if(c.is("td, th, select")&&(c.hasClass("click")||c.is("select"))){for(var e=c.parent();!e.is("tr");)e=e.parent();var n=e.children();
5>n.length&&(n=e.prev().children());e=~~n.first().html().replace(/-.*$/,"");n=lb[e-1];switch(c.attr("data")||c.val()){case "r":x(n);break;case "u":1!=e&&(cb[n].rank--,cb[lb[e-2]].rank++,kernel.setProp("sessionData",JSON.stringify(cb)));break;case "d":e!=lb.length&&(cb[n].rank++,cb[lb[e]].rank--,kernel.setProp("sessionData",JSON.stringify(cb)));break;case "s":a(n);break;case "+":f(e);break;case "x":h(n);break;case "m":Sa(n);break;case "o":Ra();break;case "p":Va();break;case "e":$a(c.parent());return;
case "g":nb=!1;break;case "gn":nb="name";break;case "gs":nb="scr";break;case "v":storage.get(n).then(function(a){Pa(new TimeStat([],a.length,function(a,b){return-1==a[b][0][0]?-1:~~((a[b][0][0]+a[b][0][1])/Rb)*Rb}.bind(void 0,a)),function(a,b){return a[b]}.bind(void 0,a),0,a.length)});break;default:return}kernel.blur();b();bb()}}function Va(){var a=prompt(STATS_PROMPTSPL.replace("%s",e(Ta)),~~(eb.length/2));if(null!=a)if(a=~~a,1>a||a>eb.length-1)alert(STATS_ALERTSPL);else{var b=Ta,c=eb.slice(-a);
n();storage.set(Ta,c).then(function(){Ta=b;eb=eb.slice(0,-a);Lb=[];tb.reset();qb.reset();Qa();y(Ta,eb)})}}function Sa(b){if(Ta!=b&&confirm(STATS_ALERTMG.replace("%f",e(Ta)).replace("%t",e(b)))){var c=Ta;storage.get(b).then(function(a){Array.prototype.push.apply(a,eb);return storage.set(b,a)}).then(function(e){delete cb[b].stat;cb[Ta].date=[(e[0]||[])[3],(e[e.length-1]||[])[3]];kernel.setProp("sessionData",JSON.stringify(cb));a(b);w(c)})}}function Ra(){for(var a=mb(eb),b=0,c=0;c<eb.length;c++)a[c]!=
eb[c]&&b++;0==b?logohint.push("Already sorted"):confirm(STATS_SSMGR_SORTCFM.replace("%d",b))&&(eb=a,Lb=[],tb.reset(),qb.reset(),Qa(),y(Ta,eb))}function Xa(a){var b=lb[a-1],c=cb[b],e=["?/?","?"];if("stat"in c){var n=c.stat;e[0]=n[0]-n[1]+"/"+n[0];e[1]=z(n[2])}n=STATS_SSMGR_OPS.split("|");n='<select><option value="">...</option><option value="r">'+n[0]+'</option><option value="+">'+n[1]+'</option><option value="'+(b==Ta?'p">'+n[2]:'m">'+n[3])+'</option><option value="x">'+n[4]+"</option>"+(b==Ta?'<option value="o">'+
n[5]+"</option>":"")+'<option value="v">'+STATS_EXPORTCSV+"</option></select>";var f=1==a?"<td></td>":'<td class="click" data="u">&#8593;</td>',w=a==lb.length?"<td></td>":'<td class="click" data="d">&#8595;</td>',h="<td>"+scramble.getTypeName(c.opt.scrType||"333")+"</td>",r="<td>"+e[0]+"</td>";e="<td>"+e[1]+"</td>";var x=mathlib.time2str((cb[b].date||[])[1],"%Y-%M-%D");return'<tr class="'+(b==Ta?"selected mhide":"mhide")+'"><td class="click" data="s">'+a+"-"+c.name+(b==Ta?"*":"")+"</td>"+r+e+"<td>"+
x+"</td>"+h+"<td>"+(c.opt.phases||1)+"</td>"+f+w+'<td class="seltd">'+n+'</td></tr><tr class="'+(b==Ta?"selected ":"")+'mshow t"><td class="click" data="s" rowspan=2>'+a+"-"+c.name+(b==Ta?"*":"")+"</td>"+r+h+f+w+'</tr><tr class="'+(b==Ta?"selected ":"")+'mshow b">'+e+"<td>"+x+"&nbsp;"+(c.opt.phases||1)+'P.</td><td class="seltd" colspan=2>'+n+"</td></tr>"}function Ya(a){for(var b=!1,c=[],e=0;e<a.length;e++){var n=lb[a[e]];b=b||Ta==n;c.push(cb[n].name+"("+scramble.getTypeName(cb[n].opt.scrType||"333")+
")")}c=c.join(", ");45<c.length&&(c=c.slice(0,42)+"...");return"<tr"+(b?' class="selected"':"")+'><td class="click" data="e" colspan=9 style="text-align:left;">'+(b?"*":"")+"[+] "+a.length+" session(s): "+c+"</td></tr>"}function $a(a){for(var b=a.next();b.is(":hidden");b=b.next())b.css("display","");a.remove()}function bb(){c();kb.empty().append('<tr class="mhide"><th class="click" data='+("name"==nb?'"g">[+]':'"gn">[-]')+" "+STATS_SSMGR_NAME+"</th><th>"+STATS_SOLVE+"</th><th>"+STATS_AVG+"</th><th>"+
STATS_DATE+'</th><th class="click" data='+("scr"==nb?'"g">[+]':'"gs">[-]')+" "+SCRAMBLE_SCRAMBLE+'</th><th>P.</th><th colspan=3>OP</th></tr><tr class="mshow t"><th rowspan=2 class="click" data='+("name"==nb?'"g">[+]':'"gn">[-]')+" "+STATS_SSMGR_NAME+"</th><th>"+STATS_SOLVE+'</th><th class="click" data='+("scr"==nb?'"g">[+]':'"gs">[-]')+" "+SCRAMBLE_SCRAMBLE+'</th><th colspan=2 rowspan=2>OP</th></tr><tr class="mshow b"><th>'+STATS_AVG+"</th><th>"+STATS_DATE+" & P.</th></tr>");for(var a=[],b=NaN,e=
0;e<lb.length;e++){var n=cb[lb[e]];nb&&n[nb]==b?a[a.length-1].push(e):(a.push([e]),b=n[nb])}for(e=0;e<a.length;e++)if(1==a[e].length)kb.append(Xa(a[e][0]+1));else for(kb.append(Ya(a[e])),b=0;b<a[e].length;b++)kb.append($(Xa(a[e][b]+1)).hide());kb.unbind("click").click(Oa).unbind("change").change(Oa)}function Na(){bb();kernel.showDialog([fb,0,void 0,0,[STATS_SSMGR_ORDER,function(){if(!confirm(STATS_SSMGR_ODCFM))return!1;for(var a=[],e=1;e<=db;e++)a.push(e);a.sort(function(a,b){var c=scramble.getTypeIdx(cb[a].opt.scrType||
"333"),e=scramble.getTypeIdx(cb[b].opt.scrType||"333");return c==e?cb[a].rank-cb[b].rank:c-e});for(e=0;e<a.length;e++)cb[a[e]].rank=e+1;c();b();bb();return!1}]],"ssmgr",STATS_SSMGR_TITLE)}function Wa(c,e){if("property"==c)"set"==e[2]||"session"==e[2]||e[0].startsWith("session")||(cb[Ta].opt=kernel.getSProps(),kernel.setProp("sessionData",JSON.stringify(cb))),"session"==e[0]&&~~e[1]!=Ta?a(e[1]):"sessionData"==e[0]?(cb=JSON.parse(e[1]),"set"!=e[2]&&b()):"sessionN"==e[0]?db=e[1]:"scrType"==e[0]?(Ob=
e[1],"modify"==e[2]&&kernel.getProp("scr2ss")&&f(void 0,!1)):"statclr"==e[0]&&(e[1]?Za.val("X").unbind("click").click(r):Za.val("+").unbind("click").click(f));else if("ctrl"==c&&"stats"==e[0]){var n=cb[Ta].rank;"+"==e[1]&&n<db?kernel.setProp("session",lb[n]):"-"==e[1]&&1<n&&kernel.setProp("session",lb[n-2])}}var db=15,Ta=-1,fb=$("<div />"),kb=$("<table />").appendTo(fb).addClass("table ssmgr"),Za=$('<input type="button">').val("+"),cb,lb,hb=$("<option />").val("new").html("New.."),gb=$("<option />").val("del").html("Delete.."),
ib=$("<select />").change(function(){kernel.blur();"new"==ib.val()?f(db,!1):"del"==ib.val()?h(Ta)||ib.val(Ta):a(~~ib.val())}),nb=!1;$(function(){kernel.regListener("ssmgr","property",Wa);kernel.regListener("ssmgr","ctrl",Wa,/^stats$/);kernel.regProp("stats","sessionN",-6,"Number of Sessions",[15]);kernel.regProp("stats","sessionData",-6,"Session Data",["{}"]);db=kernel.getProp("sessionN");cb=JSON.parse(kernel.getProp("sessionData"));b();kernel.setProp("sessionData",JSON.stringify(cb));kernel.regProp("stats",
"session",-6,"Current Session Index",[1])});return{getSelect:function(){return ib},showMgrTable:Na,importSessions:function(c){if(c&&0!=c.length){for(var e=Ta,n=0;n<c.length;n++){var f=c[n],w=kernel.getSProps(),h;for(h in f.opt)w[h]=f.opt[h];Ta=++db;cb[Ta]={name:f.name||Ta,opt:w,rank:db};kernel.setProp("sessionN",db);eb=f.times;Lb=[];tb.reset(eb.length);qb.reset(eb.length);Qa()}b();a(e);Na();logohint.push("Import %d session(s)".replace("%d",c.length));return c.length}},getButton:function(){return Za},
rank2idx:function(a){return lb[a-1]},load:Ua,save:Qa}}(),Mb="",xb=5,Hb=12,Gb=5,Jb=12,Ob="333",Rb=1;$(function(){kernel.regListener("stats","time",w);kernel.regListener("stats","scramble",w);kernel.regListener("stats","scrambleX",w);kernel.regListener("stats","property",w,/^(:?useMilli|timeFormat|stat(:?sum|thres|[12][tl]|alu?|inv|Hide|src|ssum)|session(:?Data)?|scrType|phases|trimr?|view|wndStat|hlpbs|sr_.*)$/);kernel.regListener("stats","ctrl",w,/^stats$/);kernel.regListener("stats","ashow",w);kernel.regListener("stats",
"button",w);kernel.regListener("stats","giirecons",w);kernel.regProp("stats","trim",1,PROPERTY_TRIM,["p5","0 1 p1 p5 p10 p20 m".split(" "),["0","1","1%","5%","10%","20%","50%/"+PROPERTY_TRIM_MED]],1);kernel.regProp("stats","trimr",1,PROPERTY_TRIMR,["a","a 0 1 p1 p5 p10 p20 m".split(" "),["auto","0","1","1%","5%","10%","20%","50%/"+PROPERTY_TRIM_MED]],1);kernel.regProp("stats","statsum",0,PROPERTY_SUMMARY,[!0],1);kernel.regProp("stats","statthres",0,PROPERTY_STATTHRES,[!1],1);kernel.regProp("stats",
"printScr",0,PROPERTY_PRINTSCR,[!0],1);kernel.regProp("stats","printDate",0,PROPERTY_PRINTDATE,[!1],1);kernel.regProp("stats","imrename",0,PROPERTY_IMRENAME,[!1],1);kernel.regProp("stats","scr2ss",0,PROPERTY_SCR2SS,[!1]);kernel.regProp("stats","statssum",0,PROPERTY_STATSSUM,[!1],1);kernel.regProp("stats","statinv",0,PROPERTY_STATINV,[!1],1);kernel.regProp("stats","statclr",0,STATS_STATCLR,[!0],1);kernel.regProp("stats","absidx",0,STATS_ABSIDX,[!1],1);kernel.regProp("stats","hlpbs",1,PROPERTY_HLPBS,
["f40b",["f40b","linkb","normb","none"],PROPERTY_HLPBS_STR.split("|")],1);lb.append(nb.append($('<span class="click" />').html(STATS_SESSION).click(Ib.showMgrTable),Ib.getSelect(),Ib.getButton()),yb.append(zb),$('<div class="stattl">').append(sb.append(rb)));$(window).bind("resize",n);rb.append(vb,ub);kernel.addWindow("stats",BUTTON_TIME_LIST,lb,!0,!0,4);sb.bind("scroll",function(){var a=sb[0];a.scrollHeight-a.scrollTop<a.clientHeight+5&&!kernel.getProp("statinv")&&wb.click()});var a=STATS_TYPELEN.split("|");
kernel.regProp("stats","stat1t",1,a[0].replace("%d",1),[0,[0,1],a.slice(2)],1);kernel.regProp("stats","stat1l",2,a[1].replace("%d",1),[5,3,1E3],1);kernel.regProp("stats","stat2t",1,a[0].replace("%d",2),[0,[0,1],a.slice(2)],1);kernel.regProp("stats","stat2l",2,a[1].replace("%d",2),[12,3,1E3],1);kernel.regProp("stats","rsfor1s",0,STATS_RSFORSS,[!1]);kernel.regProp("stats","statalu",5,PROPERTY_STATALU,["mo3 ao5 ao12 ao100"],1);kernel.regProp("stats","statal",1,PROPERTY_STATAL,["mo3 ao5 ao12 ao100",["mo3 ao5 ao12 ao100",
"mo3 ao5 ao12 ao25 ao50 ao100","mo3 ao5 ao12 ao25 ao50 ao100 ao200 ao500 ao1000 ao2000 ao5000 ao10000","u"],["mo3 ao5 ao12 ao100","mo3 ao5 ao12 ao25 ao50 ao100","mo3 ao5 ao12 ao25 ao50 ao100 ao200 ao500 ao1000 ao2000 ao5000 ao10000","Custom"]],1);kernel.regProp("stats","delmul",0,PROPERTY_DELMUL,[!0]);kernel.regProp("ui","statHide",-1,"Hide Session Title",[!1]);kernel.setProp("sr_statalu",kernel.getProp("sr_statal"))});var Pb={},Lb=[],Tb={},Nb={};for(Na=0;5>Na;Na++)Ua("comment"+Na,cb.bind(null,Na),
[STATS_COMMENT+(Na+1),function(a){return""+(0<=a?(.001*a).toFixed(kernel.getProp("useMilli")?3:2).replace(/\.?0+$/,""):"N/A")},function(a){return""+(0<=a?(.001*a).toFixed(kernel.getProp("useMilli")?3:2):"DNF")}]);Ua("commentmbld",function(a){if(0>a[0][0])return-1;var b=[];(a[2]||"").replace(/[0-9]+/g,function(a){b.push(parseInt(a))});return 2>b.length||2>b[0]||b[0]>b[1]||2*b[0]<b[1]||255<=b[1]?-1:1024*(255-(2*b[0]-b[1]))+~~(a[0][0]+a[0][1])/Math.pow(2,26)+b[0]/Math.pow(2,34)},["MBLD",function(a){if(0>
a)return"DNF";if(261121<a)return"N/A";var b=a*Math.pow(2,34)&255;return""+b+"/"+(2*b-(255-Math.floor(a)/1024))+" "+kernel.pretty(~~(a%1*Math.pow(2,26))).split(".")[0]},function(a){if(0>a)return"DNF";var b=255-Math.floor(a)/1024;return""+(0<=a?b.toFixed(kernel.getProp("useMilli")?3:2):"DNF")}]);return{importSessions:Ib.importSessions,getReviewUrl:function(a){return"https://alg.cubing.net/?alg="+encodeURIComponent((a[4][0]||"").replace(/@(\d+)/g,"/*$1*/").replace(/-/g,"&#45;"))+"&setup="+encodeURIComponent(a[1]||
"")},pretty:y,getStat12:function(){return[xb,Hb,Gb,Jb]},getTimesStatsList:function(){return qb},getTimesStatsTable:function(){return tb},getSessionManager:function(){return Ib},getSortedTimesByDate:mb,trim:ib,timesAt:gb,timeAt:Kb,infoClick:$a,regUtil:function(a,b){Pb[a]=b},regExtraInfo:Ua,getExtraInfo:Ya}},[kernel.pretty,kernel.round,kernel.pround]);var stattool=execMain(function(c,Na,z){function r(){if(y){var b=stats.getTimesStatsTable(),r=b.avgSizes,h=b.getAllStats(),Oa=h[0],Ra=h[1],x=0;for(h=0;h<b.timesLen;h++)x+=stats.timesAt(h)[0][1];h=b.prettyFunc||[c,z];var Na=[];Na.push('<span class="click" data="tt">'+a[4].replace("%d",b.timesLen-Oa+"/"+b.timesLen)+", "+a[9].replace("%v",h[1](Ra))+"</span>\n");Na.push("<span>"+a[12].replace("%d",c(x))+"</span>\n");Na.push(a[0]+': <span class="click" data="bs">'+h[0](b.bestTime)+"</span>");Na.push(" | "+
a[2]+': <span class="click" data="ws">'+h[0](b.worstTime)+"</span>\n");Oa=!1;Ra='<table class="table"><tr><td></td><td>'+a[1]+"</td><td>"+a[0]+"</td></tr>";for(x=0;x<r.length;x++){var Ta=Math.abs(r[x]);b.timesLen>=Ta&&(Oa||(Oa=!0,Na.push(Ra)),Na.push("<tr><td>"+a[7-(r[x]>>>31)].replace("%mk",Ta)),Na.push('<td><span class="click" data="c'+"am"[r[x]>>>31]+x+'">'+h[1](b.lastAvg[x][0])+" (σ="+stats.trim(b.lastAvg[x][1],2)+")</span></td>"),Na.push('<td><span class="click" data="b'+"am"[r[x]>>>31]+x+'">'+
h[1](b.bestAvg(x,0))+" (σ="+stats.trim(b.bestAvg(x,1),2)+")</span></td></tr>"))}Oa&&Na.push("</table>");Na=Na.join("");e.html(Na.replace(/\n/g,"<br>"))}}function b(a,b){(y=void 0!=a)&&!/^scr/.exec(b)&&(a.empty().append(e.unbind("click").click(function(a){stats.infoClick(stats.getTimesStatsTable(),stats.timesAt,a)})),r())}var e=$("<div />").css("text-align","center").css("font-size","0.7em"),a=STATS_STRING.split("|");for(Na=0;13>Na;Na++)a[Na]=a[Na]||"";var y=!1;$(function(){"undefined"!=typeof tools&&
tools.regTool("stats",TOOLS_STATS,b);stats.regUtil("stattool",r)});return{update:r}},[kernel.pretty,kernel.round,kernel.pround]);var trend=execMain(function(c){function Na(){if(f&&e[0].getContext){var b=stats.getStat12(),r=b[0],Pa=b[1],y=b[2],Qa=b[3];a=e[0].getContext("2d");b=kernel.getProp("imgSize")/10;ab=50;e.width(9.6*b+"em");e.height(6*b+"em");e.attr("width",8*ab+1);e.attr("height",5*ab+5);h=5*ab;ab*=8;var Na=stats.getTimesStatsTable(),Ta=Na.getMinMaxInt();if(Ta){var hb=Na.timesLen;b=Na.getBestDiff((Ta[0]-Ta[1])*Wa);var kb=Math.ceil(Ta[0]/b)*b;Ta=~~(Ta[1]/b)*b;var ib=kb-Ta,Xa=[0,1,1,0,0],db=[0,0,1,1,0];a.fillStyle="#fff";
a.beginPath();a.moveTo(Xa[0]*(ab-35)+35,(1-db[0])*(h-25)+25);for(var Va=1;Va<Xa.length;Va++)a.lineTo(Xa[Va]*(ab-35)+35,(1-db[Va])*(h-25)+25);a.fill();a.closePath();a.lineWidth=2;if(1<hb){db=[];Va=[];for(Xa=0;Xa<hb;Xa++){var w=Na.timeAt(Xa);-1!=w&&(db.push(Xa/(hb-1)),Va.push(Math.max(0,Math.min(1,(w-Ta)/ib))))}z(db,Va,"#888")}if(hb>y){db=[];Va=[];w=Na.runAvgMean(0,hb,y,0<r?void 0:0);for(Xa=0;Xa<w.length;Xa++)-1!=w[Xa][0]&&(db.push((Xa+y-1)/(hb-1)),Va.push(Math.max(0,Math.min(1,(w[Xa][0]-Ta)/ib))));
z(db,Va,"#f00")}if(hb>Qa){db=[];Va=[];Na=Na.runAvgMean(0,hb,Qa,0<Pa?void 0:0);for(Xa=0;Xa<Na.length;Xa++)-1!=Na[Xa][0]&&(db.push((Xa+Qa-1)/(hb-1)),Va.push(Math.max(0,Math.min(1,(Na[Xa][0]-Ta)/ib))));z(db,Va,"#00f")}a.clearRect(0,0,ab,25);a.clearRect(0,0,35,h);a.clearRect(0,h,ab+1,h+5);a.lineWidth=2;a.font="12pt Arial";a.fillStyle=kernel.getProp("col-font");a.fillText("time",50,13);a.strokeStyle="#888";a.beginPath();a.moveTo(90,7);a.lineTo(130,7);a.stroke();a.fillText((0<r?"ao":"mo")+y,160,13);a.strokeStyle=
"#f00";a.beginPath();a.moveTo(200,7);a.lineTo(240,7);a.stroke();a.fillText((0<Pa?"ao":"mo")+Qa,270,13);a.strokeStyle="#00f";a.beginPath();a.moveTo(310,7);a.lineTo(350,7);a.stroke();a.fillStyle=kernel.getProp("col-font");a.strokeStyle="#ccc";a.lineWidth=1;a.textAlign="right";r=1E3<=b?/[^\.]+(?=\.)/:/[^\.]+\.[\d]/;for(Xa=Ta;Xa<=kb;Xa+=b)Pa=c(Xa).match(r)[0],y=(kb-Xa)/ib,y=1-(1-y-x)/Wa,0>y||1<y||(a.fillText(Pa,30,y*(h-25)+30),z([Oa,Oa+Ra],[(Xa-Ta)/ib,(Xa-Ta)/ib],"#ccc"));z([Oa,Oa+Ra,Oa+Ra,Oa,Oa],[x,
x,x+Wa,x+Wa,x],"#000")}}}function z(b,c,e){a.strokeStyle=e;a.beginPath();for(e=0;e<b.length;e++)b[e]=(b[e]-Oa)/Ra,c[e]=(c[e]-x)/Wa;a.moveTo(b[0]*(ab-35)+35,(1-c[0])*(h-25)+25);for(e=1;e<b.length;e++)a.lineTo(b[e]*(ab-35)+35,(1-c[e])*(h-25)+25);a.stroke();a.closePath()}function r(a){var b=$(a.target);b.hasClass("click")&&(a=b.attr("data"),"x"==a?(Ta="y",b.attr("data","y"),b.html("")):"y"==a?(Ta="x",b.attr("data","x"),b.html("")):(b={p:1,m:-1}[a]||0,a={l:Math.sqrt(.5),s:Math.sqrt(2)}[a]||1,"x"==Ta?
(Oa+=b*Ra*.25+Ra*(1-a),Ra*=a,Ra=Math.min(Math.max(Ra,.1),1),Oa=Math.min(Math.max(Oa,0),1-Ra)):(x+=b*Wa*.25+Wa*(1-a)/2,Wa*=a,Wa=Math.min(Math.max(Wa,.1),1),x=Math.min(Math.max(x,0),1-Wa)),Na()))}function b(a,b){(f=void 0!=a)&&!/^scr/.exec(b)&&(a.empty().append(y.empty().append(e,"<br>",['<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$","").replace("%","x"),'<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$",
"&lt;").replace("%","p"),'<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$","&gt;").replace("%","m"),'<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$","").replace("%","l"),'<span class="click" data="%" style="font-family: iconfont, Arial;display:inline-block;width:2em;">$</span>'.replace("$","").replace("%","s")].join("")).unbind("click").click(r)),Na())}var e=
$('<canvas style="margin-bottom:-0.4em"/>'),a,y=$('<div style="text-align:center">'),f=!1,ab,h,Oa=0,Ra=1,x=0,Wa=1,Ta="x";$(function(){"undefined"!=typeof tools&&(kernel.regListener("trend","property",function(a,b){"disPrec"==b[0]&&Na()},/^disPrec|col-font$/),e[0].getContext&&tools.regTool("trend",TOOLS_TREND,b));stats.regUtil("trend",Na)});return{update:Na}},[kernel.pretty]);var distribution=execMain(function(c){function Na(){if(b){r.empty();var e=stats.getTimesStatsTable(),a=e.getMinMaxInt();if(a){var y=e.timesLen,f=a[0],z=a[1];a=a[2];f=~~(f/a);z=~~(z/a);for(var h={},Oa={},Ra=0,x=Oa[f+1]=0;x<y;x++){var Na=e.timeAt(x);-1!=Na?(Na=~~(Na/a),h[Na]=(h[Na]||0)+1,Ra=Math.max(h[Na],Ra),Oa[Na]=x+1):Oa[f+1]=x+1}for(x=f;x>z;x--)Oa[x]=Math.max(Oa[x+1],Oa[x]||0);e=[];Na=0;var Ta=1E3<=a?/[^\.]+(?=\.)/:/[^\.]+\.[\d]/,Za=c(f*a).match(Ta)[0].length;for(x=z;x<=f;x++){z=c(x*a).match(Ta)[0];
var Sa=c((x+1)*a).match(Ta)[0];h[x]=h[x]||0;Na+=h[x];z=mathlib.valuedArray(Za-z.length,"&nbsp;").join("")+z;Sa=mathlib.valuedArray(Za-Sa.length,"&nbsp;").join("")+Sa;e.push("<tr><td>"+z+'+</td><td><span class="cntbar" style="width: '+h[x]/Ra*5+'em;">'+h[x]+"</span></td><td>&nbsp;&lt;"+Sa+'</td><td><span class="cntbar" style="width: '+Na/y*5+'em; white-space: nowrap;">'+(y-Oa[x+1])+"/"+Na+"</span></td></tr>")}r.html('<table style="border:none;">'+e.join("")+"</table>")}}}function z(c,a){(b=void 0!=
c)&&!/^scr/.exec(a)&&(c.empty().append(r),Na())}var r=$("<div />"),b=!1;$(function(){"undefined"!=typeof tools&&(kernel.regListener("distribution","property",function(b,a){"disPrec"==a[0]&&Na()},/^disPrec$/),kernel.regProp("tools","disPrec",1,STATS_PREC,["a",["a",0,1,2,3,4,5,6,7,8,9],STATS_PREC_STR.split("|")],1),tools.regTool("distribution",TOOLS_DISTRIBUTION,z));stats.regUtil("distribution",Na)});return{update:Na}},[kernel.pretty]);var crossSessionStats=execMain(function(c,Na,z){function r(a){return-1==Za[a][0][0]?-1:~~((Za[a][0][0]+Za[a][0][1])/Sa)*Sa}function b(a){return Za[a]}function e(){Za=[];Sa=kernel.getProp("useMilli")?1:10;for(var a=Promise.resolve(),b=~~kernel.getProp("sessionN"),e=JSON.parse(kernel.getProp("sessionData")),f=Oa.val(),r=x.val(),y=-1==Ra.val()?-1:~~(+new Date/1E3)-86400*Ra.val(),Qa=0;Qa<b;Qa++){var Va=stats.getSessionManager().rank2idx(Qa+1);if("*"==f||e[Va].name==f)if("*"==r||(e[Va].opt.scrType||"333")==
r)a=a.then(function(a){return new Promise(function(b){storage.get(a).then(function(a){for(var c=0;c<a.length;c++)(a[c][3]||0)<y||Za.push(a[c]);b()})})}.bind(void 0,Va))}a.then(function(){Za=stats.getSortedTimesByDate(Za);Ta.reset(Za.length);var a=Ta.getAllStats(),b=a[0],e=a[1],f=0;for(a=0;a<Za.length;a++)f+=Za[a][0][1];a=[];a.push('<span class="click" data="tt">'+Pa[4].replace("%d",Ta.timesLen-b+"/"+Ta.timesLen)+", "+Pa[9].replace("%v",z(e))+"</span>\n");a.push("<span>"+Pa[12].replace("%d",c(f))+
"</span>\n");a.push(Pa[0]+': <span class="click" data="bs">'+c(Ta.bestTime)+"</span>");a.push(" | "+Pa[2]+': <span class="click" data="ws">'+c(Ta.worstTime)+"</span>\n");b=!1;e='<table class="table"><tr><td></td><td>'+Pa[1]+"</td><td>"+Pa[0]+"</td></tr>";f=Ta.avgSizes;for(var r=0;r<f.length;r++){var x=Math.abs(f[r]);Ta.timesLen>=x&&(b||(b=!0,a.push(e)),a.push("<tr><td>"+Pa[7-(f[r]>>>31)].replace("%mk",x)),a.push('<td><span class="click" data="c'+"am"[f[r]>>>31]+r+'">'+z(Ta.lastAvg[r][0])+" (σ="+stats.trim(Ta.lastAvg[r][1],
2)+")</span></td>"),a.push('<td><span class="click" data="b'+"am"[f[r]>>>31]+r+'">'+z(Ta.bestAvg(r,0))+" (σ="+stats.trim(Ta.bestAvg(r,1),2)+")</span></td></tr>"))}b&&a.push("</table>");a=a.join("");h.html(a.replace(/\n/g,"<br>"))})}function a(){var a=!1,b=JSON.parse(kernel.getProp("sessionData"));$.each(b,function(b,c){Qa[b]&&c.name==Qa[b].name&&(c.opt||{}).scrType==(Qa[b].opt||{}).scrType||(a=!0)});Qa=b;if(a){var c=[],e=[];Oa.empty().append($("<option />").val("*").html(STATS_XSESSION_NAME));x.empty().append($("<option />").val("*").html(STATS_XSESSION_SCR));
$.each(b,function(a,b){var f=b.name;-1==$.inArray(f,c)&&(c.push(f),Oa.append($("<option />").val(f).html(f)));f=(b.opt||{}).scrType||"333";-1==$.inArray(f,e)&&(e.push(f),x.append($("<option />").val(f).html(scramble.getTypeName(f))))})}}function y(c,f){($a=c)&&!/^scr/.exec(f)&&(a(),c.empty().append(ab),Wa.unbind("click").click(e),h.unbind("click").click(function(a){stats.infoClick(Ta,b,a)}))}function f(b,c){"sessionData"==c[0]&&$a&&a()}Na=STATS_XSESSION_DATE.split("|");var ab=$("<div />").css("text-align",
"center").css("font-size","0.7em"),h=$("<div />"),Oa=$("<select>"),Ra=$("<select>").append($("<option>").val(-1).html(Na[0]),$("<option>").val(1).html(Na[1]),$("<option>").val(7).html(Na[2]),$("<option>").val(30).html(Na[3]),$("<option>").val(365).html(Na[4])).val(-1),x=$("<select>"),Wa=$('<span class="click">'+STATS_XSESSION_CALC+"</span>"),Ta=new TimeStat([],0,r),Za=[],Sa=1,Pa=STATS_STRING.split("|");for(Na=0;13>Na;Na++)Pa[Na]=Pa[Na]||"";var $a=null,Qa={};$(function(){ab.append(Oa,Ra,x," ",Wa,"<br>",
h);"undefined"!=typeof tools&&tools.regTool("hugestats",TOOLS_HUGESTATS,y);kernel.regListener("labelstat","property",f,/^sessionData$/)});return{update:$.noop,updateStatal:function(a){Ta=new TimeStat(a,0,r)}}},[kernel.pretty,kernel.round,kernel.pround]);var periodStats=execMain(function(){function c(a){a-=x;var b=new Date(1E3*a);switch(Wa){case "d":return~~(a/86400);case "w":return~~((a/86400-Oa.val())/7);case "m":return 12*b.getFullYear()+b.getMonth();case "y":return b.getFullYear()}}function Na(a){switch(Wa){case "d":return mathlib.time2str(86400*a+x,"%Y-%M-%D");case "w":return mathlib.time2str(86400*(7*a+~~Oa.val())+x,"Start@ %Y-%M-%D");case "m":return~~(a/12)+"-"+("0"+(a%12+1)).slice(-2);case "y":return""+a}}function z(){for(var a=Promise.resolve(),
b=~~kernel.getProp("sessionN"),e=0;e<b;e++){var f=stats.getSessionManager().rank2idx(e+1);a=a.then(function(a){return new Promise(function(b){storage.get(a).then(function(e){stats[a]={};for(var n=0;n<e.length;n++)if(e[n][3]){var f=c(e[n][3]);stats[a][f]=stats[a][f]||[0,0];stats[a][f][0]+=1;stats[a][f][1]+=-1!=e[n][0][0]}b()})})}.bind(void 0,f))}return a.then(function(){Ra=stats})}function r(a){a=$(a.target).html();"&gt;"==a?Za--:"&lt;"==a?Za=Math.min(Za+1,0):"+"==a?Sa++:"-"==a&&(Sa=Math.max(1,Sa-
1));b()}function b(){if(mb){var b=$('<table class="table">'),c=TOOLS_DLYSTAT1.split("|");hb.empty().append(c[0],f.unbind("change").change(a)," "+c[1],ab.unbind("change").change(a)," "+c[2],Oa.unbind("change").change(a),"<br>",b);c=JSON.parse(kernel.getProp("sessionData"));for(var e=~~kernel.getProp("sessionN"),h=$("<tr>").append($a.unbind("click").click(r),Pa.unbind("click").click(r)),x=$("<tr>").append(Qa.unbind("click").click(r),gb.unbind("click").click(r)),w=0;w<Sa;w++)h.append($("<td rowspan=2>").html(Na(Ta-
w+Za).replace(" ","<br>")));b.append(h,x);for(w=0;w<e;w++)if(h=stats.getSessionManager().rank2idx(w+1),0!=Object.keys(Ra[h]||{}).length){x=$("<tr>").append($("<td colspan=2>").html(c[h].name));for(var n=0;n<Sa;n++){var y=Ra[h][Ta-n+Za];x.append($("<td>").html(y?y[1]+"/"+y[0]:"-"))}b.append(x)}}}function e(b,c){mb=!!b;b&&!/^scr/.exec(c)&&(b.empty().append(hb),a())}function a(){mb&&(Wa=f.val(),x=3600*ab.val()+60*(new Date).getTimezoneOffset(),Ta=c(+new Date/1E3),z().then(b))}var y=TOOLS_DLYSTAT_OPT1.split("|"),
f=$("<select>").append($("<option>").val("d").html(y[0]),$("<option>").val("w").html(y[1]),$("<option>").val("m").html(y[2]),$("<option>").val("y").html(y[3])).val("d"),ab=$("<select>");for(y=0;24>y;y++){var h=("0"+y).slice(-2)+":00";ab.append($("<option>").val(y).html(h))}y=TOOLS_DLYSTAT_OPT2.split("|");var Oa=$("<select>").append($("<option>").val(3).html(y[0]),$("<option>").val(4).html(y[1]),$("<option>").val(5).html(y[2]),$("<option>").val(6).html(y[3]),$("<option>").val(0).html(y[4]),$("<option>").val(1).html(y[5]),
$("<option>").val(2).html(y[6])).val(3),Ra=[],x,Wa,Ta,Za=0,Sa=3,Pa=$('<td class="click">').html("&gt;"),$a=$('<td class="click">').html("&lt;"),Qa=$('<td class="click">').html("+"),gb=$('<td class="click">').html("-");$("<td colspan=1>");var mb=!1,hb=$("<div />").css("text-align","center").css({"font-size":"0.7em","max-height":"20em","overflow-y":"auto"});$(function(){"undefined"!=typeof tools&&tools.regTool("dlystat",TOOLS_DLYSTAT,e);kernel.regListener("dlystat","property",b,/^sessionData$/);stats.regUtil("dlystat",
a)});return{update:a}});var recons=execMain(function(){function c(){this.clear()}function Na(a,b){if(a&&a[4]&&!(0>a[0][0])){var e=a[4],f=new mathlib.CubieCube;new mathlib.CubieCube;f.ori=0;e=e[0].split(/ +/);for(var h=e.length-1;0<=h;h--)f.selfMoveStr(e[h],!0);f.selfConj();h=f.toFaceCube();var w=[],n=new c,r=new mathlib.CubieCube;r.invFrom(f);var x=0,y=0,z=[],Pa=cubeutil.getProgress(h,b);for(h=0;h<e.length;h++){var Qa=f.selfMoveStr(e[h],!1);if(void 0!=Qa){y=Math.min(y,f.tstamp);n.push(Qa);var Oa=~~(Qa/3);z.push(["URFDLB".charAt(Oa%
6)+" 2'".charAt(Qa%3),f.tstamp]);6<=Oa&&z.push(["DLBURF".charAt(Oa%6)+"'2 ".charAt(Qa%3),f.tstamp])}Qa=cubeutil.getProgress(f.toFaceCube(),b);if(Qa<Pa){Oa=new mathlib.CubieCube;mathlib.CubieCube.EdgeMult(r,f,Oa);mathlib.CubieCube.CornMult(r,f,Oa);for(w[--Pa]=[x,y,f.tstamp,n.moveCnt,Oa,z];Pa>Qa;)w[--Pa]=[f.tstamp,f.tstamp,f.tstamp,0,new mathlib.CubieCube,[]];r.invFrom(f);x=f.tstamp;n.clear();z=[];y=1E9}}e=cubeutil.getStepCount(b);f=[];for(h=0;h<e;h++)f[h]=(w[h]||[])[5]||[];return{data:w,rawMoves:f.reverse()}}}
function z(a,b,c,e,f){for(var w=0,n=0,h=[],r=[],x=0;x<a.length;x++){n+=a[x][1]+a[x][2];var y=a[x][0].split("-");0!=h.length&&h[h.length-1][0]==y[0]||h.push([y[0],0,0,0]);r[x]=h.length-1;y=h[h.length-1];for(var z=1;4>z;z++)y[z]+=a[x][z];w=Math.max(y[1]+y[2],w)}y=[];var Oa=0,Va=0,Ra=0,Na=-1;for(x=0;x<a.length;x++){var Xa=a[x];Oa+=Xa[1];Va+=Xa[2];Ra+=Xa[3];if(r[x]==r[x+1]&&r[x]!=r[x-1]){Na=r[x];z=h[Na];var Wa=["",z[0],z[1]/w*100,z[2]/w*100,c?Math.round(z[1]/n*1E3)/10+"%":kernel.pretty(z[1]),c?Math.round(z[2]/
n*1E3)/10+"%":kernel.pretty(z[2]),Math.round(10*z[3])/10,0<z[3]&&0<z[1]+z[2]?Math.round(z[3]/(z[1]+z[2])*1E4)/10:"N/A","click sstep"],db='<tr style="$0" data="$1"><td rowspan=2 class="$8" style="padding-bottom:0;padding-top:0;">$1</td><td colspan=4 style="padding:0;"><span class="cntbar sty2" style="height:0.2em;float:left;border:none;width:$2%;">&nbsp;</span><span class="cntbar" style="height:0.2em;float:left;border:none;width:$3%;">&nbsp;</span></td></tr><tr style="$0" data="$1"><td style="padding-bottom:0;padding-top:0;">$4</td><td style="padding-bottom:0;padding-top:0;">$5</td><td style="padding-bottom:0;padding-top:0;">$6</td><td style="padding-bottom:0;padding-top:0;">$7</td></tr>';
for(z=0;9>z;z++)db=db.replace(new RegExp("\\$"+z,"g"),Wa[z]);y.push(db)}Xa=[r[x]==Na?"display:none;":"",Xa[0],Xa[1]/w*100,Xa[2]/w*100,c?Math.round(Xa[1]/n*1E3)/10+"%":kernel.pretty(Xa[1]),c?Math.round(Xa[2]/n*1E3)/10+"%":kernel.pretty(Xa[2]),Math.round(10*Xa[3])/10,0<Xa[3]&&0<Xa[1]+Xa[2]?Math.round(Xa[3]/(Xa[1]+Xa[2])*1E4)/10:"N/A",-1!=["oll","pll"].indexOf(Xa[0])?"click":""];db='<tr style="$0" data="$1"><td rowspan=2 class="$8" style="padding-bottom:0;padding-top:0;">$1</td><td colspan=4 style="padding:0;"><span class="cntbar sty2" style="height:0.2em;float:left;border:none;width:$2%;">&nbsp;</span><span class="cntbar" style="height:0.2em;float:left;border:none;width:$3%;">&nbsp;</span></td></tr><tr style="$0" data="$1"><td style="padding-bottom:0;padding-top:0;">$4</td><td style="padding-bottom:0;padding-top:0;">$5</td><td style="padding-bottom:0;padding-top:0;">$6</td><td style="padding-bottom:0;padding-top:0;">$7</td></tr>';
for(z=0;9>z;z++)db=db.replace(new RegExp("\\$"+z,"g"),Xa[z]);y.push(db)}a=$("<tr>").append(b?$("<td>").append($a):$('<td style="padding:0;">').append(Sa),"<td>"+(c?Math.round(Oa/n*1E3)/10+"%":kernel.pretty(Oa))+"</td><td>"+(c?Math.round(Va/n*1E3)/10+"%":kernel.pretty(Va))+"</td>",$("<td>").append(e||f?Ta:Math.round(10*Ra)/10),"<td>"+(0<Ra&&0<Oa+Va?Math.round(Ra/(Oa+Va)*1E4)/10:"N/A")+"</td>");Za.empty().append(Qa);Qa.after(y.join(""),a);Sa.unbind("change").change(ab);Pa.unbind("change").change(ab);
Za.unbind("click").click(ab);$a.text("No."+b);(e||f)&&Ta.children("a").attr("href","https://alg.cubing.net/?alg="+encodeURIComponent(f)+"&setup="+encodeURIComponent(e)).text(Math.round(10*Ra)/10)}function r(a){Za.empty().append(Qa);Qa.after($("<tr>").append(a?$("<td>").append($a):$('<td style="padding:0;">').append(Sa),"<td colspan=4>"+TOOLS_RECONS_NODATA+"</td>"));Sa.unbind("change").change(ab);Pa.unbind("change").change(ab);Za.unbind("click").click(ab);$a.text("---")}function b(b,c){(Ra=void 0!=
b)&&!/^scr/.exec(c)&&(b.empty().append(Wa.append(Za)),a())}function e(a,b){if(Ra){var c=Pa.val()||"cf4op",e=c.endsWith("%");c=c.replace("%","");var f=b[0],w=Na(f,c);if(w){for(var n=w.data,h=cubeutil.getStepNames(c),x=[],y=h.length-1;0<=y;y--){var Qa=n[y]||[0,0,0,0];x.push([h[y],Qa[1]-Qa[0],Qa[2]-Qa[1],Qa[3]])}c=cubeutil.getPrettyReconstruction(w.rawMoves,c).prettySolve;z(x,b[1]+1,e,f[1],c)}else r(!0)}}function a(){if(Ra){var a=stats.getTimesStatsTable().timesLen,b=Sa.val();if(b="single"==b?Math.min(1,
a):"mo5"==b?Math.min(5,a):"mo12"==b?Math.min(12,a):"mo100"==b?Math.min(100,a):a){var c=Pa.val()||"cf4op",e=c.endsWith("%");c=c.replace("%","");for(var f=cubeutil.getStepNames(c),w=0,n=[],h=a-1;h>=a-b;h--){var x=stats.getExtraInfo("recons_"+c,h);if(x){var y=x.data;w++;for(var Qa=f.length-1;0<=Qa;Qa--){var Oa=y[Qa]||[0,0,0,0],Na=f.length-Qa-1;n[Na]=n[Na]||[f[Qa],0,0,0];n[Na][1]+=Oa[1]-Oa[0];n[Na][2]+=Oa[2]-Oa[1];n[Na][3]+=Oa[3]}}}if(0==w)r(!1);else{for(Qa=0;Qa<f.length;Qa++)n[Qa][1]/=w,n[Qa][2]/=w,
n[Qa][3]/=w;1==b?(b=cubeutil.getPrettyReconstruction(x.rawMoves,c).prettySolve,z(n,null,e,stats.timesAt(a-1)[1],b)):z(n,null,e)}}else r(!1)}}function y(){var a=$jscomp.makeIterator(caseStat.update()),b=a.next().value;a=a.next().value;a=a.map(function(a){return{caseId:a[0],caseName:a[1],count:a[2],inspPct:Number(a[3]),execPct:Number(a[4]),insp:Number(a[5]),exec:Number(a[6]),turns:Number(a[7]),tps:Number(a[8]),caseImage:a[9]}});var c=new Blob([JSON.stringify(a)],{type:"application/json"});a=URL.createObjectURL(c);
mb.attr({href:a,download:b+"_cases_stats.json"}).get(0).click();setTimeout(function(){URL.revokeObjectURL(c)},5E3);return!1}function f(a){kernel.setProp("rcCaseMthd",a);caseStat.execFunc(gb);a=function(){caseStat.execFunc()};kernel.showDialog([hb,a,void 0,a,[EXPORT_TOFILE,y]],"casestats","Cases Stats")}function ab(b){if("change"==b.type)kernel.setProp("rcMthd",Pa.val()),a();else{b=$(b.target);if(-1!=["oll","pll"].indexOf(b.text()))return f(b.text().toUpperCase());if(b.is(".click")&&!b.is(".exturl"))if(b.is(".sstep")){b=
b.parent();var c=b.attr("data")+"-";for(b=b.next().next();b&&b.attr("data").startsWith(c);)b.toggle(),b=b.next()}else a()}}function h(a,b,c,e,f){return(a=stats.getExtraInfo("recons_"+a,f))?(a.data[c[0]]||[0,0,0,0])[c[1]]-(a.data[b[0]]||[0,0,0,0])[b[1]]:-1}function Oa(a,b,c,e){a=stats.getExtraInfo("recons_"+a,e);if(!a)return-1;for(e=c=0;e<a.data.length;e++){var f=a.data[e]||[0,0,0,0];c+=b?f[1]-f[0]:f[2]-f[1]}return c}var Ra,x=TOOLS_RECONS_TITLE.split("|"),Wa=$('<div style="font-size:0.9em;" />'),Ta=
$("<div>").append('<a target="_blank" class="exturl click"></a>'),Za=$('<table class="table">'),Sa=$("<select>"),Pa=$("<select>"),$a=$('<span class="click" />'),Qa=$("<tr>").append($('<th style="padding:0;">').append(Pa),"<th>"+x[0]+"</th><th>"+x[1]+"</th><th>"+x[2]+"</th><th>"+x[3]+"</th>");c.prototype.push=function(a){a=~~(a/3);var b=1<<a;a%3!=this.lastMove%3&&(this.lastMove=a,this.lastPow=0);this.moveCnt+=(this.lastPow&b)==b?0:1;this.lastPow|=b};c.prototype.clear=function(){this.lastPow=0;this.lastMove=
-3;this.moveCnt=0};var gb=$("<div>").css("padding","1em"),mb=$("<a>").css("display","none"),hb=$("<div>").append(gb,mb);$(function(){"undefined"!=typeof tools&&tools.regTool("recons",TOOLS_RECONS+">step",b);stats.regUtil("recons",a);stats.regExtraInfo("recons_cf4op",function(a){return Na(a,"cf4op")});stats.regExtraInfo("recons_roux",function(a){return Na(a,"roux")});stats.regExtraInfo("recons_cfop_ct",h.bind(null,"cf4op",[6,0],[6,2]),["cross "+STATS_TIME,kernel.pretty]);stats.regExtraInfo("recons_cfop_ft",
h.bind(null,"cf4op",[5,0],[2,2]),["F2L "+STATS_TIME,kernel.pretty]);stats.regExtraInfo("recons_cfop_ot",h.bind(null,"cf4op",[1,0],[1,2]),["OLL "+STATS_TIME,kernel.pretty]);stats.regExtraInfo("recons_cfop_pt",h.bind(null,"cf4op",[0,0],[0,2]),["PLL "+STATS_TIME,kernel.pretty]);stats.regExtraInfo("recons_cfop_it",Oa.bind(null,"cf4op",!0),["CFOP "+x[0],kernel.pretty]);stats.regExtraInfo("recons_cfop_et",Oa.bind(null,"cf4op",!1),["CFOP "+x[1],kernel.pretty]);kernel.regListener("recons","reqrec",e);for(var c=
["single","mo5","mo12","mo100","all"],f=0;f<c.length;f++)Sa.append('<option value="'+c[f]+'">'+c[f]+"</option>");c=[["cf4op","cfop"],["roux","roux"]];for(f=0;f<c.length;f++)Pa.append('<option value="'+c[f][0]+'">'+c[f][1]+"</option>"),Pa.append('<option value="'+c[f][0]+'%">'+c[f][1]+"%</option>");Pa.val(kernel.getProp("rcMthd","cf4op"))});return{calcRecons:Na,getMoveCnt:function(a){a=a.split(/ +/);var b=new mathlib.CubieCube;b.ori=0;for(var e=new c,f=0;f<a.length;f++){var h=b.selfMoveStr(a[f],!1);
void 0!=h&&e.push(h)}return e.moveCnt}}}),caseStat=execMain(function(){function c(){if(e){for(var a=stats.getTimesStatsTable().timesLen,b=ab.val()||"PLL",c=cubeutil.getIdentData(b),r=0,y=[],Oa=a-1;Oa>=a-a;Oa--){var Pa=stats.getExtraInfo("recons_cf4op_"+b,Oa);if(Pa){r++;var $a=Pa[0];y[$a]=y[$a]||[0,0,0,0];var Qa=[1].concat(Pa.slice(1));for(Pa=0;4>Pa;Pa++)y[$a][Pa]+=Qa[Pa]}}f.empty().append(h.unbind("click").click(z));Oa=0;for(Pa=c[2];Pa<c[3];Pa++)y[Pa]&&(Oa=Math.max(Oa,(y[Pa][1]+y[Pa][2])/y[Pa][0]));
a=[];for(Pa=c[2];Pa<c[3];Pa++)y[Pa]&&($a=y[Pa],Qa=c[1](Pa),a.push([Pa,Qa[2],$a[0],$a[1]/$a[0]/Oa*100,$a[2]/$a[0]/Oa*100,kernel.pretty($a[1]/$a[0]),kernel.pretty($a[2]/$a[0]),Math.round($a[3]/$a[0]*10)/10,Math.round($a[3]/($a[1]+$a[2])*1E4)/10]));var gb=kernel.getProp("rcCaseSortCol",2),mb=kernel.getProp("rcCaseSortDir","desc");a.sort(function(a,b){if("desc"==mb){var c=$jscomp.makeIterator([b,a]);a=c.next().value;b=c.next().value}return a[gb]-b[gb]});y=$jscomp.makeIterator(a);for(Pa=y.next();!Pa.done;Pa=
y.next()){Pa=Pa.value;Oa='<tr><td rowspan=2 style="padding-bottom:0;padding-top:0;">$1</td><td rowspan=2 style="padding:0;width:2em;"><canvas/></td><td rowspan=2 style="padding-bottom:0;padding-top:0;">$2</td><td colspan=4 style="padding:0;"><span class="cntbar sty2" style="height:0.25em;float:left;border:none;width:$3%;">&nbsp;</span><span class="cntbar" style="height:0.25em;float:left;border:none;width:$4%;">&nbsp;</span></td></tr><tr><td style="padding-bottom:0;padding-top:0;">$5</td><td style="padding-bottom:0;padding-top:0;">$6</td><td style="padding-bottom:0;padding-top:0;">$7</td><td style="padding-bottom:0;padding-top:0;">$8</td></tr>';
for($a=0;$a<Pa.length;$a++)Oa=Oa.replace(new RegExp("\\$"+$a,"g"),Pa[$a]);Oa=$(Oa);$a=Oa.find("canvas");$a.css({width:"2em",height:"2em",display:"block"});c[1](Pa[0],$a);Pa.push($a.get(0).toDataURL());f.append(Oa)}ab.unbind("change").change(Na);return 0==r?(h.after("<tr><td colspan=7>"+TOOLS_RECONS_NODATA+"</td></tr>"),[b,[]]):[b,a]}}function Na(a){kernel.setProp("rcCaseMthd",ab.val());c()}function z(a){if(a=$(a.target).data("sort-column")){var b=kernel.getProp("rcCaseSortCol");kernel.setProp("rcCaseSortCol",
a);b==a&&kernel.setProp("rcCaseSortDir","desc"==kernel.getProp("rcCaseSortDir")?"asc":"desc");c()}}function r(a,b){(e=void 0!=a)&&!/^scr/.exec(b)&&(a.empty().append(y.append(f)),ab.val(kernel.getProp("rcCaseMthd","PLL")),c())}function b(a,b,c){if(b=stats.getExtraInfo("recons_cf4op",c))if(a=cubeutil.getIdentData(a),b=b.data[a[4]])return Oa=Oa||new mathlib.CubieCube,Oa.invFrom(b[4]),[a[0](Oa.toFaceCube()),b[1]-b[0],b[2]-b[1],b[3]]}var e,a=TOOLS_RECONS_TITLE.split("|"),y=$('<div style="font-size:0.9em;" />'),
f=$('<table class="table">'),ab=$("<select>"),h=$("<tr>").append($("<th>").attr("colspan",2).css("padding","0").append(ab),$("<th>").addClass("click").attr("data-sort-column",2).append("N"),$("<th>").addClass("click").attr("data-sort-column",5).append(a[0]),$("<th>").addClass("click").attr("data-sort-column",6).append(a[1]),$("<th>").addClass("click").attr("data-sort-column",7).append(a[2]),$("<th>").addClass("click").attr("data-sort-column",8).append(a[3])),Oa;$(function(){"undefined"!=typeof tools&&
tools.regTool("casestat",TOOLS_RECONS+">cases",r);stats.regUtil("casestat",c);for(var a=["PLL","OLL"],e=0;e<a.length;e++)ab.append('<option value="'+a[e]+'">'+a[e]+"</option>"),stats.regExtraInfo("recons_cf4op_"+a[e],b.bind(null,a[e]))});return{execFunc:r,update:c}}),scatter=execMain(function(){function c(){h.html(TOOLS_RECONS_NODATA);ab.unbind("change").change(b);f.hide()}function Na(b,e){if(!b||!b[4])return c();var r=recons.calcRecons(b,e);if(!r)return c();f.show();y=a[0].getContext("2d");var z=
kernel.getProp("imgSize")/10;Ra=50;a.width(9.6*z+"em");a.height(4.8*z+"em");a.attr("width",8*Ra+1);a.attr("height",4*Ra+5);x=4*Ra;Ra*=8;z=r.data[0][2];for(var Pa=0,Qa=0;Qa<r.data.length;Qa++)Pa+=r.data[Qa][5].length;Qa=[0,1,1,0,0];var Oa=[0,0,1,1,0];y.fillStyle="#fff";y.beginPath();y.moveTo(Qa[0]*(Ra-0),(1-Oa[0])*(x-0));for(var Na=1;Na<Qa.length;Na++)y.lineTo(Qa[Na]*(Ra-0),(1-Oa[Na])*(x-0));y.fill();y.closePath();Oa=0;Na=[];var $a=[],Va=[],w=0,n=0;for(Qa=r.data.length-1;0<=Qa;Qa--){for(var Ua=r.data[Qa],
Ya=0;Ya<Ua[5].length;Ya++)if($a.push(Oa/(Pa-1)),Na.push(Ua[5][Ya][1]/z),Oa++,1<Na.length){y.lineWidth=3;var fb="#888";Na[1]-Na[0]>3/(Pa-1)?(fb="#f00",w+=Na[1]-Na[0]):Na[1]-Na[0]>2/(Pa-1)&&(fb="#00f",n+=Na[1]-Na[0]);var ab=Na,cb=$a;y.strokeStyle=fb;y.beginPath();for(fb=0;fb<ab.length;fb++)ab[fb]=(ab[fb]-Wa)/Ta,cb[fb]=(cb[fb]-Za)/Sa;y.moveTo(ab[0]*(Ra-0),(1-cb[0])*(x-0));for(fb=1;fb<ab.length;fb++)y.lineTo(ab[fb]*(Ra-0),(1-cb[fb])*(x-0));y.stroke();y.closePath();Na=Na.slice(Na.length-1);$a=$a.slice($a.length-
1)}0!=Qa&&Va.push([Na[0]*(Ra-0),(1-$a[0])*(x-0)])}for(Qa=0;Qa<Va.length;Qa++)y.strokeStyle="#000",y.lineWidth=1,y.beginPath(),y.arc(Va[Qa][0],Va[Qa][1],4,0,2*Math.PI),y.stroke(),y.closePath();h.html(" "+'<span style="color:$">$</span>'.replace("$","#f00").replace("$",kernel.pretty(w*z))+" "+'<span style="color:$">$</span>'.replace("$","#00f").replace("$",kernel.pretty(n*z))+" "+'<span style="color:$">$</span>'.replace("$","#888").replace("$",kernel.pretty((1-w-n)*z)))}function z(){if(Oa&&a[0].getContext){var b=
stats.getTimesStatsTable().timesLen;Na(stats.timesAt(b-1),ab.val()||"cf4op")}}function r(b,c){Oa&&a[0].getContext&&Na(c[0],ab.val()||"cf4op")}function b(a){if("change"==a.type)return z();var b=$(a.target);b.hasClass("click")&&(a=b.attr("data"),"x"==a?(Pa="y",b.attr("data","y"),b.html("")):"y"==a?(Pa="x",b.attr("data","x"),b.html("")):(b={p:1,m:-1}[a]||0,a={l:Math.sqrt(.5),s:Math.sqrt(2)}[a]||1,"x"==Pa?(Wa+=b*Ta*.25+Ta*(1-a)/2,Ta*=a,Ta=Math.min(Math.max(Ta,.1),1),Wa=Math.min(Math.max(Wa,0),1-Ta)):
(Za+=b*Sa*.25+Sa*(1-a)/2,Sa*=a,Sa=Math.min(Math.max(Sa,.1),1),Za=Math.min(Math.max(Za,0),1-Sa)),z()))}function e(c,e){(Oa=void 0!=c)&&!/^scr/.exec(e)&&(c.empty().append(ab,h,f.empty().append(a).unbind("click").click(b)),ab.unbind("change").change(b),z())}var a=$("<canvas />"),y,f=$('<div style="text-align:center">'),ab=$("<select>"),h=$('<span style="font-size:0.8em;">'),Oa=!1,Ra,x,Wa=0,Ta=1,Za=0,Sa=1,Pa="x";$(function(){"undefined"!=typeof tools&&a[0].getContext&&tools.regTool("scatter",TOOLS_RECONS+
">scatter",e);stats.regUtil("scatter",z);kernel.regListener("scatter","reqrec",r);for(var b=[["cf4op","cfop"],["roux","roux"]],c=0;c<b.length;c++)ab.append('<option value="'+b[c][0]+'">'+b[c][1]+"</option>")});return{update:z}});var trainStat=execMain(function(){function c(a,b){return stats.timeAt(a[b])}function Na(){if(e){for(var a=stats.getTimesStatsTable().timesLen,b=f.val()||"PLL",r=cubeutil.getIdentData(b),x=0,Na=[],Ta=a-1;Ta>=a-a;Ta--){var Za=stats.getExtraInfo("scramcase_"+b,Ta);Za&&(Za=Za[0],Na[Za]=Na[Za]||[],Na[Za].push(Ta))}y.empty().append(ab);a=0;for(b=r[2];b<r[3];b++)if(Na[b]){Ta=new TimeStat([],Na[b].length,c.bind(null,Na[b]));var Sa=Ta.getAllStats();Za=Na[b].length-Sa[0];0==Za?Na[b]=null:(Sa=Sa[1],Na[b]=[Ta.bestTime,
Sa,Za,Na[b].length],a=Math.max(a,Sa))}for(b=r[2];b<r[3];b++)if(Na[b]){Ta=Na[b];$("<tr>");Za=[r[1](b)[2],Ta[2]+"/"+Ta[3],Ta[0]/a*100,(Ta[1]-Ta[0])/a*100,kernel.pretty(Ta[0]),kernel.pround(Ta[1])];Ta='<tr><td rowspan=2 style="padding-bottom:0;padding-top:0;">$0</td><td rowspan=2 style="padding:0"><canvas/></td><td rowspan=2 style="padding-bottom:0;padding-top:0;">$1</td><td colspan=4 style="padding:0;"><span class="cntbar" style="height:0.25em;float:left;border:none;width:$2%;">&nbsp;</span><span class="cntbar sty2" style="height:0.25em;float:left;border:none;width:$3%;">&nbsp;</span></td></tr><tr><td style="padding-bottom:0;padding-top:0;">$4</td><td style="padding-bottom:0;padding-top:0;">$5</td></tr>';
for(Sa=0;6>Sa;Sa++)Ta=Ta.replace(new RegExp("\\$"+Sa,"g"),Za[Sa]);Ta=$(Ta);Za=Ta.find("canvas");Za.css({width:"2em",height:"2em",display:"block"});r[1](b,Za);y.append(Ta);x++}f.unbind("change").change(z);0==x&&ab.after("<tr><td colspan=5>"+TOOLS_RECONS_NODATA+"</td></tr>")}}function z(a){"change"==a.type&&Na()}function r(b,c){(e=void 0!=b)&&!/^scr/.exec(c)&&(b.empty().append(a.append(y)),Na())}function b(a,b,c){if(b=cubeutil.getScrambledState([null,b[1]]))return[cubeutil.getIdentData(a)[0](b.toFaceCube())]}
var e,a=$('<div style="font-size:0.9em;" />'),y=$('<table class="table">'),f=$("<select>"),ab=$("<tr>").append($('<th colspan=2 style="padding:0;">').append(f),"<th>N</th><th>best</th><th>mean</th>");$(function(){"undefined"!=typeof tools&&tools.regTool("trainstat",TOOLS_TRAINSTAT,r);stats.regUtil("trainstat",Na);for(var a=["PLL","OLL","CLL"],c=0;c<a.length;c++)f.append('<option value="'+a[c]+'">'+a[c]+"</option>"),stats.regExtraInfo("scramcase_"+a[c],b.bind(null,a[c]))})});var tools=execMain(function(){function c(a,b){if(-1==a)for(var e=0;e<kernel.getProp("NTools");e++)c(e,b);else if(!f){for(e in Za)Za[e]();h[a].empty()}else for(e in Za)if(e==Oa[a])Za[e](h[a],b)}function Na(a,b){for(var c in Za)if(c==Oa[a])Za[c](void 0,b)}function z(a){if(/^222(so|[236o]|eg[012]?|tc[np]|lsall|nb)$/.exec(a))return"222";if(/^(333(oh?|ni|f[mt]|custom)?|(z[zb]|[coep]|c[om]|2g|ls|tt)?ll|lse(mu)?|2genl?|3gen_[LF]|edges|corners|f2l|lsll2|(zb|w?v|eo)ls|roux|RrU|half|easyx?c|eoline|sbrx|mt(3qb|eole|tdr|6cp|l5ep|cdrll)|nocache_333bldspec)$/.exec(a))return"333";
if(/^(444([mo]|wca|yj|bld)?|4edge|RrUu)$/.exec(a))return"444";if(/^(555(wca|bld)?|5edge)$/.exec(a))return"555";if(/^(666(si|[sp]|wca)?|6edge)$/.exec(a))return"666";if(/^(777(si|[sp]|wca)?|7edge)$/.exec(a))return"777";if(/^888$/.exec(a))return"888";if(/^999$/.exec(a))return"999";if(/^101010$/.exec(a))return"101010";if(/^111111$/.exec(a))return"111111";if(/^cubennn$/.exec(a))return"cubennn";if(/^pyr(s?[om]|l4e|nb|4c)$/.exec(a))return"pyr";if(/^skb(s?o|nb)?$/.exec(a))return"skb";if(/^sq(rs|1[ht]|rcsp)$/.exec(a))return"sq1";
if(/^clk(wca|o)$/.exec(a))return"clk";if(/^(mgmp|mgmo|mgmc|minx2g|mlsll|mgmpll|mgmll)$/.exec(a))return"mgm";if(/^(klmso|klmp)$/.exec(a))return"klm";if(/^15p(at|ra?p?)?$/.exec(a))return"15p";if(/^15p(rmp|m)$/.exec(a))return"15b";if(/^8p(at|ra?p?)?$/.exec(a))return"8p";if(/^8p(rmp|m)$/.exec(a))return"8b";if(/^sq2$/.exec(a))return"sq2";if(/^fto$/.exec(a))return"fto"}function r(a,b){DEBUG&&console.log("[func select]",a,b);kernel.blur();for(var e=void 0===a?4:a+1,f=void 0===a?0:a;f<e;f++){var h=x[f].getSelected();
Oa[f]!=h&&(Na(f,"property"),Oa[f]=h,kernel.setProp("toolsfunc",JSON.stringify(Oa)),c(f,"property"))}}function b(a,b){if("property"==a)if("imgSize"==b[0]||/^col/.exec(b[0]))for(var e=0;e<kernel.getProp("NTools");e++)"image"==Oa[e]&&c(e,a);else if("NTools"==b[0])for(e=0;4>e;e++)e<b[1]?(ab[e].show(),""==h[e].html()&&c(e,a)):(ab[e].hide(),Na(e,a));else if("toolHide"==b[0]){e=!b[1];for(var z=0;4>z;z++)e?Ra[z].show():Ra[z].hide()}else if("toolsfunc"==b[0]&&"session"==b[2]){z=JSON.parse(b[1]);for(e=0;4>
e;e++)x[e].loadVal(z[e]);r()}else"toolPos"==b[0]&&($("html").removeClass("toolf toolt"),-1!="ft".indexOf(b[1])&&$("html").addClass("tool"+b[1]));else if("scramble"==a||"scrambleX"==a)y=b,kernel.setProp("isTrainScr",!!Sa.exec((y||[])[0])),c(-1,a);else if("button"==a&&"tools"==b[0])if(f=b[1])for(e=0;e<kernel.getProp("NTools");e++)f&&""==h[e].html()&&c(e,a);else c(-1,a)}function e(a){$(a.target).hasClass("click")||$(a.target).is("input, textarea, select")||kernel.setProp("toolHide",!1)}function a(a){a=
$(this);if("a"==a.attr("data"))a.prevAll().show(),a.prev().hide(),a.hide();else if("n"==a.attr("data")){var b=a.prevAll(":hidden");b.last().show();1==b.length&&(a.next().hide(),a.hide())}}for(var y=["-","",0],f=!1,ab=[],h=[],Oa=["image","stats","cross"],Ra=[],x=[],Wa=[],Ta=0;4>Ta;Ta++)h[Ta]=$("<div />"),Ra[Ta]=$("<span />"),x[Ta]=new kernel.TwoLvMenu(Wa,r.bind(null,Ta),$("<select />"),$("<select />")),ab[Ta]=$("<div />").css("display","inline-block");$(function(){kernel.regListener("tools","property",
b,/^(?:imgSize|image|toolsfunc|NTools|col(?:cube|pyr|skb|sq1|mgm)|toolHide|toolPos)$/);kernel.regListener("tools","scramble",b);kernel.regListener("tools","scrambleX",b);kernel.regListener("tools","button",b,/^tools$/);for(var a=$('<div id="toolsDiv"/>'),c=0;4>c;c++)h[c].click(e),Ra[c].append("<br>",TOOLS_SELECTFUNC,x[c].select1,x[c].select2),ab[c].append(h[c],Ra[c]).appendTo(a),1==c&&a.append("<br>");kernel.regProp("tools","toolPos",1,PROPERTY_TOOLPOS,["b",["b","f","t"],PROPERTY_TOOLPOS_STR.split("|")]);
kernel.regProp("tools","solSpl",0,PROPERTY_HIDEFULLSOL,[!1]);kernel.regProp("tools","imgSize",2,PROPERTY_IMGSIZE,[15,5,50]);kernel.regProp("tools","NTools",2,PROPERTY_NTOOLS,[1,1,4]);c=JSON.stringify(["image","stats","cross","distribution"]);kernel.regProp("tools","toolsfunc",5,PROPERTY_TOOLSFUNC,[c],1);kernel.regProp("tools","isTrainScr",-6,"Is Train Scramble",[!1],0);var f=kernel.getProp("toolsfunc",c);-1==f.indexOf("[")&&(f=c.replace("image",f),kernel.setProp("toolsfunc",f));Oa=JSON.parse(f);kernel.addWindow("tools",
BUTTON_TOOLS,a,!1,!0,6);kernel.regProp("ui","toolHide",-1,"Hide Tools Selector",[!1])});var Za={},Sa=/^((z[zb]|[coep]|c[om]|2g|ls|tt)?ll|lse(mu)?|2genl?|3gen_[LF]|f2l|lsll2|(zb|w?v|eo)ls|roux|eoline|sbrx|mt(3qb|eole|tdr|6cp|l5ep|cdrll)|222(eg[012]?|tc[np]|lsall))$/;return{regTool:function(a,b,c){DEBUG&&console.log("[regtool]",a,b);Za[a]=c;b=b.split(">");if(2==b.length){c=-1;for(var e=0;e<Wa.length;e++)if(Wa[e][0]==b[0]&&$.isArray(Wa[e][1])){c=e;break}-1!=c?Wa[c][1].push([b[1],a]):Wa.push([b[0],[[b[1],
a]]])}else Wa.push([b[0],a]);for(e=0;4>e;e++)x[e].reset(Oa[e])},getCurScramble:function(){return y},getCurPuzzle:function(){return z(y[0])},getSolutionSpan:function(b){for(var c=$("<span />"),e=0;e<b.length;e++)c.append('<span style="display:none;">&nbsp;'+b[e]+"</span>");kernel.getProp("solSpl")?(c.append($('<span class="click" data="n">[+1]</span>').click(a)),c.append($('<span class="click" data="a">['+b.length+"f]</span>").click(a))):c.children().show();return c},scrambleType:function(a){return null==
a.match(/^([\d]?[xyzFRUBLDfrubldSME]([w]|&sup[\d];)?[2']?\s*)+$/)?"-":a.match(/^([xyzFRU][2']?\s*)+$/)?"222o":a.match(/^([xyzFRUBLDSME][2']?\s*)+$/)?"333":a.match(/^(([xyzFRUBLDfru]|[FRU]w)[2']?\s*)+$/)?"444":a.match(/^(([xyzFRUBLDfrubld])[w]?[2']?\s*)+$/)?"555":"-"},puzzleType:z,carrot2poch:function(a){return a.replace(/([+-])([+-]) /g,function(a,b,c){return"R"+b+b+" D"+c+c+" "})},isCurTrainScramble:function(a){return!!Sa.exec((a||y||[])[0])},isPuzzle:function(a,b){b=b||y;var c=z(b[0]);b=b[1];return c?
c==a:"222"==a?b.match(/^([xyzFRU][2']?\s*)+$/):"333"==a?b.match(/^([xyzFRUBLDSME][2']?\s*)+$/):"444"==a?b.match(/^(([xyzFRUBLDfru]|[FRU]w)[2']?\s*)+$/):"555"==a?b.match(/^(([xyzFRUBLDfrubld])[w]?[2']?\s*)+$/):"skb"==a?b.match(/^([RLUB]'?\s*)+$/):"pyr"==a?b.match(/^([RLUBrlub]'?\s*)+$/):"sq1"==a?b.match(/^$/):"fto"==a?b.match(/^(([FRUBLD]|(?:BL)|(?:BR))[']?\s*)+$/):!1}}});var image=execMain(function(){function c(a){var b=a[0];"input"==b&&(b=tools.scrambleType(a[1]));b=tools.puzzleType(b);var c;for(c=0;12>c;c++)if(b==Qa[c])return Wa.draw(c,a[1]),!0;return"cubennn"==b?(Wa.draw(a[2],a[1]),!0):"pyr"==b?(x(a[1]),!0):"skb"==b?(Ra(a[1]),!0):"sq1"==b||"sq2"==b?(Oa(a[1],"sq2"==b),!0):"clk"==b?(h(a[1]),!0):"mgm"==b||"klm"==b?(ab(a[1],"klm"==b),!0):"fto"==b?(Pa(a[1]),!0):"15b"==b||"15p"==b?($a(b[2],4,a[1]),!0):"8b"==b||"8p"==b?($a(b[1],3,a[1]),!0):!1}function Na(a){a&&(z=$("<canvas>"),
r=z[0].getContext("2d"),a.empty().append(z),c(tools.getCurScramble())||a.html(IMAGE_UNAVAILABLE))}var z,r,b=Math.sqrt(3)/2,e=Math.PI,a=$.ctxRotate,y=$.ctxTransform,f=$.ctxDrawPolygon,ab=function(){function b(b,c,h,x,y){if(y)for(y=0;5>y;y++)f(r,Ra[b[c+y]],a([w,n],2*e/5*y+x),h);else{for(y=0;5>y;y++)f(r,Ra[b[c+y]],a([Qa,Pa],2*e/5*y+x),h),f(r,Ra[b[c+y+5]],a([Ua,Oa],2*e/5*y+x),h);f(r,Ra[b[c+10]],a([Na,Sa],x),h)}}var c=(Math.sqrt(5)+1)/2,h=.25/Math.tan(e/5),x=2.6+3*Math.cos(.1*e)*c,y=2.2+1*Math.sin(.1*
e)*c,Qa=[0,h,0,-h],Pa=[-1,-.75,-.5,-.75],w=[0,Math.sin(.4*e)/2,0,-Math.sin(.4*e)/2],n=[-1,-(1+Math.cos(.4*e))/2,-Math.cos(.4*e),-(1+Math.cos(.4*e))/2],Ua=[Math.cos(.1*e)-h,h,0,.5*Math.sin(.4*e)],Oa=[-Math.sin(.1*e)+-.25,-.75,-.5,.5*-Math.cos(.4*e)],Na=[.5*Math.sin(0*e),.5*Math.sin(.4*e),.5*Math.sin(.8*e),.5*Math.sin(1.2*e),.5*Math.sin(1.6*e)],Sa=[.5*-Math.cos(0*e),.5*-Math.cos(.4*e),.5*-Math.cos(.8*e),.5*-Math.cos(1.2*e),.5*-Math.cos(1.6*e)],Ra="#fff #d00 #060 #81f #fc0 #00b #ffb #8df #f83 #7e0 #f9f #999".split(" ");
return function(a,f){Ra=kernel.getProp("colmgm").match(gb);for(var n=[],w=0;12>w;w++)for(var h=0;11>h;h++)n[11*w+h]=w;/^(\s*([+-]{2}\s*)+U'?\s*\n)*$/.exec(a)&&(a=tools.carrot2poch(a));a.replace(/(?:^|\s*)(?:([DLR])(\+\+?|--?)|(U|F|D?B?R|D?B?L|D|B)(\d?)('?)|\[([ufrl])('?)\])(?:$|\s*)/g,function(a,b,c,e,f,w,h,r){b?mathlib.minx.doMove(n,"DL?R".indexOf(b),("+"==c[0]?-1:1)*c.length,2):e?mathlib.minx.doMove(n,"U R F L BL BR DR DL DBL B DBR D".split(" ").indexOf(e),(w?-1:1)*(~~f||1),0):mathlib.minx.doMove(n,
"urfl".indexOf(h),r?-1:1,1)});w=kernel.getProp("imgSize")/7.5;z.width(7*w+"em");z.height(3.5*w+"em");z.attr("width",392);z.attr("height",196);b(n,0,[40,2.6+0*c,2.2+0*c],0*e,f);b(n,11,[40,2.6+Math.cos(.1*e)*c,2.2+Math.sin(.1*e)*c],.2*e,f);b(n,22,[40,2.6+Math.cos(.5*e)*c,2.2+Math.sin(.5*e)*c],.6*e,f);b(n,33,[40,2.6+Math.cos(.9*e)*c,2.2+Math.sin(.9*e)*c],1*e,f);b(n,44,[40,2.6+Math.cos(1.3*e)*c,2.2+Math.sin(1.3*e)*c],1.4*e,f);b(n,55,[40,2.6+Math.cos(1.7*e)*c,2.2+Math.sin(1.7*e)*c],1.8*e,f);b(n,66,[40,
x+Math.cos(.7*e)*c,y+Math.sin(.7*e)*c],0*e,f);b(n,77,[40,x+Math.cos(.3*e)*c,y+Math.sin(.3*e)*c],1.6*e,f);b(n,88,[40,x+Math.cos(1.9*e)*c,y+Math.sin(1.9*e)*c],1.2*e,f);b(n,99,[40,x+Math.cos(1.5*e)*c,y+Math.sin(1.5*e)*c],.8*e,f);b(n,110,[40,x+Math.cos(1.1*e)*c,y+Math.sin(1.1*e)*c],.4*e,f);b(n,121,[40,x+0*c,y+0*c],1*e,f);r&&(r.fillStyle="#000",r.font="20px serif",r.textAlign="center",r.textBaseline="middle",r.fillText("U",104,88),r.fillText("F",104,40*(2.2+Math.sin(.5*e)*c)))}}(),h=function(){var b=/([UD][RL]|ALL|[UDRLy])(\d[+-]?)?/,
c="UR DR DL UL U R D L ALL".split(" "),f=["#f00","#37b","#5cf","#ff0","#850"];return function(h){f=kernel.getProp("colclk").match(gb);var x=h.split(/\s+/),Qa=clock.moveArr,Pa=9;h=[0,0,0,0];for(var w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<x.length;n++){var Ua=b.exec(x[n]);if(Ua)if("y2"==Ua[0])Pa=0;else{var Oa=c.indexOf(Ua[1])+Pa;if(void 0==Ua[2])h[Oa%9]=1;else{var Na=~~Ua[2][0];Na="+"==Ua[2][1]?Na:12-Na;for(Ua=0;14>Ua;Ua++)w[Ua]=(w[Ua]+Qa[Oa][Ua]*Na)%12}}}w=[w[0],w[3],w[6],w[1],w[4],w[7],w[2],w[5],w[8],
12-w[2],w[10],12-w[8],w[9],w[11],w[13],12-w[0],w[12],12-w[6]];h=[h[3],h[2],h[0],h[1],1-h[0],1-h[1],1-h[3],1-h[2]];n=kernel.getProp("imgSize")/7.5;z.width(6.25*n+"em");z.height(3*n+"em");z.attr("width",375);z.attr("height",180);x=[10,30,50];Qa=[10,30,50,75,95,115];for(n=0;18>n;n++)Pa=[f[1],f[2]][~~(n/9)],Oa=[3,Qa[~~(n/3)],x[n%3]],r&&(Ua=y(a([[1,1,0,-1,-1,-1,1,0],[0,-1,-8,-1,0,1,1,0]],w[n]/6*e),Oa),Na=Ua[0],Ua=Ua[1],r.beginPath(),r.fillStyle=Pa,r.arc(Na[7],Ua[7],9*Oa[0],0,2*e),r.fill(),r.beginPath(),
r.fillStyle=f[3],r.strokeStyle=f[0],r.moveTo(Na[0],Ua[0]),r.bezierCurveTo(Na[1],Ua[1],Na[1],Ua[1],Na[2],Ua[2]),r.bezierCurveTo(Na[3],Ua[3],Na[3],Ua[3],Na[4],Ua[4]),r.bezierCurveTo(Na[5],Ua[5],Na[6],Ua[6],Na[0],Ua[0]),r.closePath(),r.fill(),r.stroke());x=[20,40];Qa=[20,40,85,105];for(n=0;8>n;n++)w=[f[4],f[3]][h[n]],Pa=[3,Qa[~~(n/2)],x[n%2]],r&&(Oa=y([[0],[0]],Pa),r.beginPath(),r.fillStyle=w,r.strokeStyle="#000",r.arc(Oa[0][0],Oa[1][0],3*Pa[0],0,2*e),r.fill(),r.stroke())}}(),Oa=function(){function c(a){for(var b=
[],c=0;12>c;c++)b[(c+a[0])%12]=h[c];for(c=0;12>c;c++)b[c+12]=h[(c+a[1])%12+12];if(a[2])for(x=1-x,c=0;6>c;c++)mathlib.circle(b,c+6,23-c);h=b}var h=[],x=0,Qa=[[0,-.5,.5],[0,-b-1,-b-1]],Pa=[[0,-.5,-b-1,-b-1],[0,-b-1,-b-1,-.5]],Oa=[[0,-.5,-b-1],[0,-b-1,-b-1]],Na=[[0,-b-1,-b-1],[0,-b-1,-.5]],w=y(Qa,[.66,0,0]),n=y(Pa,[.66,0,0]),Ua=y(Oa,[.66,0,0]),Sa=y(Na,[.66,0,0]),Ra={U:"#ff0",R:"#f80",F:"#0f0",D:"#fff",L:"#f00",B:"#00f"},Ta=/^\s*\(\s*(-?\d+),\s*(-?\d+)\s*\)\s*$/;return function(y,Pa){var Va=kernel.getProp("colsq1").match(gb);
Ra={U:Va[0],R:Va[1],F:Va[2],D:Va[3],L:Va[4],B:Va[5]};h=[0,1,2,4,5,6,8,9,10,12,13,14,17,16,18,21,20,22,25,24,26,29,28,30];x=0;var Ya=y.split("/");for(Va=0;Va<Ya.length;Va++)if(/^\s*$/.exec(Ya[Va]))c([0,0,1]);else{var Xa=Ta.exec(Ya[Va]);c([~~Xa[1]+12,~~Xa[2]+12,1])}c([0,0,1]);Va=kernel.getProp("imgSize")/10;z.width(11*Va/1.3+"em");z.height(6.3*Va/1.3+"em");z.attr("width",495);z.attr("height",283.5);for(Va=0;24>Va;Va++){Ya=h[Va]&1;Xa=(12>Va?Va-3:-Va)*e/6;var Wa=(12>Va?Va-5:-1-Va)*e/6,cb=12>Va?[45,2.7,
2.7]:[45,2.7+5.4,2.7],db=(Va+1)%12+(12>Va?0:12),$a=h[Va]>>1,fb=Ra["UD"[8<=$a?1:0]];0==$a%2?Pa?(!Ya&&12<=Va?Xa+=e/6:Ya&&12>Va&&(Xa-=e/6),f(r,Ra["LBBRRFFLBLRBFRLF"[$a+Ya]],a(Ya?Oa:Na,Xa),cb),f(r,fb,a(Ya?Ua:Sa,Xa),cb)):$a==h[db]>>1&&(f(r,Ra["LBBRRFFLBLRBFRLF"[$a]],a(Na,Xa),cb),f(r,Ra["LBBRRFFLBLRBFRLF"[$a+1]],a(Oa,Xa),cb),f(r,fb,a(n,Xa),cb)):(f(r,Ra["-B-R-F-L-B-R-F-L"[$a]],a(Qa,Wa),cb),f(r,fb,a(w,Wa),cb))}cb=[45,5.4,5.7];f(r,Ra.L,[[-b-1,-b-1,-.5,-.5],[.5,-.5,-.5,.5]],cb);0==x?f(r,Ra.L,[[b+1,b+1,-.5,
-.5],[.5,-.5,-.5,.5]],cb):f(r,Ra.R,[[b,b,-.5,-.5],[.5,-.5,-.5,.5]],cb)}}(),Ra=function(){var a=[],c="#fff #00f #f00 #ff0 #0f0 #f80".split(" "),e=[[45*b,45*b,186.75*b,-22.5,22.5,45],[45*b,0,328.5*b,-22.5,45,67.5],[45*b,0,234*b,-22.5,45,114.75],[0,-45*b,139.5*b,45,-22.5,209.25],[45*b,0,139.5*b,22.5,45,114.75],[45*b,0,45*b,22.5,45,67.5]];return function(h){c=kernel.getProp("colskb").match(gb);for(var x=0,y=0;6>y;y++)for(var Qa=0;5>Qa;Qa++)a[x++]=y;h=kernel.parseScramble(h,"RULB");for(y=0;y<h.length;y++){x=
h[y][0];Qa=1==h[y][2]?1:2;for(var w=0;w<Qa;w++)switch(x){case 0:mathlib.circle(a,10,5,15);mathlib.circle(a,14,8,17);mathlib.circle(a,12,9,16);mathlib.circle(a,13,6,19);mathlib.circle(a,24,4,28);break;case 1:mathlib.circle(a,0,25,5);mathlib.circle(a,2,26,7);mathlib.circle(a,4,27,9);mathlib.circle(a,1,28,6);mathlib.circle(a,21,19,12);break;case 2:mathlib.circle(a,20,15,25);mathlib.circle(a,23,18,29);mathlib.circle(a,21,16,28);mathlib.circle(a,24,19,27);mathlib.circle(a,13,9,1);break;case 3:mathlib.circle(a,
5,25,15),mathlib.circle(a,9,28,19),mathlib.circle(a,8,26,18),mathlib.circle(a,7,29,17),mathlib.circle(a,2,23,14)}}y=kernel.getProp("imgSize")/10;z.width((8*b+.3)*y+"em");z.height(6.2*y+"em");z.attr("width",45*(8*b+.3)+1);z.attr("height",280);for(y=0;6>y;y++)h=y,x=e[h],f(r,c[a[5*h]],[[-1,0,1,0],[0,1,0,-1]],x),f(r,c[a[5*h+1]],[[-1,-1,0],[0,-1,-1]],x),f(r,c[a[5*h+2]],[[0,1,1],[-1,-1,0]],x),f(r,c[a[5*h+3]],[[-1,-1,0],[0,1,1]],x),f(r,c[a[5*h+4]],[[0,1,1],[1,1,0]],x)}}(),x=function(){var a=[],c=["#0f0",
"#f00","#00f","#ff0"],e=[3.5,1.5,5.5,3.5],h=[0,3*b,3*b,6.5*b],x=[0,6,5,4],y=[1,7,3,5],Qa=[2,8,4,3],w=[[0,1,2],[2,3,0],[1,0,3],[3,2,1]],n=[-.5,.5,0],Pa=[b,b,0],Oa=[-b,-b,0];return function(Ua){c=kernel.getProp("colpyr").match(gb);for(var Na=0,Va=0;4>Va;Va++)for(var Sa=0;9>Sa;Sa++)a[Na++]=Va;Ua=kernel.parseScramble(Ua,"URLB");for(Va=0;Va<Ua.length;Va++){var Ra=Ua[Va][0]+(2==Ua[Va][1]?4:0);Na=1==Ua[Va][2]?1:2;Sa=4<=Ra?1:4;Ra=w[Ra%4];for(var Ta=0;Ta<Sa;Ta++)for(var Ya=0;Ya<Na;Ya++)mathlib.circle(a,9*
Ra[0]+x[Ta],9*Ra[1]+y[Ta],9*Ra[2]+Qa[Ta])}Va=kernel.getProp("imgSize")/10;z.width(7*Va+"em");z.height(6.5*b*Va+"em");z.attr("width",315);z.attr("height",292.5*b);for(Va=0;4>Va;Va++){Ua=Va;Na=0!=Ua;Sa=[0,-1,1,0,.5,-.5,0,-.5,.5];Ra=[0,2,2,2,1,1,2,3,3];for(Ta=0;Ta<Ra.length;Ta++)Ra[Ta]*=Na?-b:b,Sa[Ta]*=Na?-1:1;for(Ta=0;9>Ta;Ta++)f(r,c[a[9*Ua+Ta]],[n,6<=Ta!=Na?Oa:Pa],[45,e[Ua]+Sa[Ta],h[Ua]+Ra[Ta]])}}}(),Wa=function(){function a(a,b,e,f){var n=f*f,h,w,r;5<a&&(a-=6);for(r=0;r<e;r++){for(h=0;h<f;h++){if(0==
a){var x=6*n-f*b-f+h;var y=2*n-f*b-1-h;var z=3*n-f*b-1-h;var Qa=5*n-f*b-f+h}else 1==a?(x=3*n+b+f*h,y=3*n+b-f*(h+1),z=n+b-f*(h+1),Qa=5*n+b+f*h):2==a?(x=3*n+b*f+h,y=4*n+f-1-b+f*h,z=b*f+f-1-h,Qa=2*n-1-b-f*h):3==a?(x=4*n+b*f+f-1-h,y=2*n+b*f+h,z=n+b*f+h,Qa=5*n+b*f+f-1-h):4==a?(x=6*n-1-b-f*h,y=f-1-b+f*h,z=2*n+f-1-b+f*h,Qa=4*n-1-b-f*h):5==a&&(x=4*n-f-b*f+h,y=2*n-f+b-f*h,z=n-1-b*f-h,Qa=4*n+b+f*h);var Pa=c[x];c[x]=c[y];c[y]=c[z];c[z]=c[Qa];c[Qa]=Pa}if(0==b)for(h=0;h+h<f;h++)for(w=0;w+w<f-1;w++)x=a*n+h+w*f,
z=a*n+(f-1-h)+(f-1-w)*f,3>a?(y=a*n+(f-1-w)+h*f,Qa=a*n+w+(f-1-h)*f):(Qa=a*n+(f-1-w)+h*f,y=a*n+w+(f-1-h)*f),Pa=c[x],c[x]=c[y],c[y]=c[z],c[z]=c[Qa],c[Qa]=Pa}}function b(b,e){var f=0;c=[];for(var h=0;6>h;h++)for(var n=0;n<b*b;n++)c[f++]=h;f=kernel.parseScramble(e,"DLBURF",!0);for(h=0;h<f.length;h++){for(n=0;n<f[h][1];n++)a(f[h][0],n,f[h][2],b);if(-1==f[h][1]){for(n=0;n<b-1;n++)a(f[h][0],n,-f[h][2],b);a((f[h][0]+3)%6,0,f[h][2]+4,b)}}return c}var c=[],e="#ff0 #fa0 #00f #fff #f00 #0d0".split(" ");return{draw:function(a,
h){b(a,h);var x=kernel.getProp("imgSize")/50;z.width(39*x+"em");z.height(29*x+"em");z.attr("width",30*(39*a/9+.2));z.attr("height",30*(29*a/9+.2));e=kernel.getProp("colcube").match(gb);for(x=0;6>x;x++){var w=x,n=a,y=10/9,Qa=10/9;0==w?(y*=n,Qa*=2*n):1==w?(y*=0,Qa*=n):2==w?(y*=3*n,Qa*=n):3==w?(y*=n,Qa*=0):4==w?(y*=2*n,Qa*=n):5==w&&(y*=n,Qa*=n);for(var Pa=0;Pa<n;Pa++)for(var Oa=1==w||2==w?n-1-Pa:Pa,Na=0;Na<n;Na++)f(r,e[c[(w*n+(0==w?n-1-Na:Na))*n+Oa]],[[Pa,Pa,Pa+1,Pa+1],[Na,Na+1,Na+1,Na]],[30,y+.1,Qa+
.1])}},genPosit:b}}(),Ta=function(){function b(b,c,h){var r=$(h),x=kernel.getProp("colcube").match(gb);h=r[0].getContext("2d");var y=3;12==b.length&&(y=2);r.attr("width",50*(y+1.2));r.attr("height",50*(y+1.2));for(r=0;r<y*y;r++){var w=r%y+.5,n=~~(r/y)+.5;f(h,x["DLBURF".indexOf(b[r])]||"#888",[[w,w+1,w+1,w],[n,n,n+1,n+1]],[50,.1,.1])}for(r=0;r<4*y;r++)w=r%y,n=~~(r/y),f(h,x["DLBURF".indexOf(b[r+y*y])]||"#888",a([[w-y/2,w-y/2+1,.9*(w-y/2+1),.9*(w-y/2)],[y/2+.05,y/2+.05,y/2+.5,y/2+.5]],-n*e/2),[50,.6+
y/2,.6+y/2]);c=c||[];for(r=0;r<c.length;r++){n=c[r];b=n[0]%y+1.1;x=~~(n[0]/y)+1.1;w=n[1]%y+1.1;n=~~(n[1]/y)+1.1;var z=Math.sqrt((b-w)*(b-w)+(x-n)*(x-n));f(h,"#000",a([[.2,z-.4,z-.4,z-.1,z-.4,z-.4,.2],[.05,.05,.15,0,-.15,-.05,-.05]],Math.atan2(n-x,w-b)),[50,b,x])}}return{drawImage:b,draw:function(a,c,e){c=Wa.genPosit(a,c);for(var f=[],h=0;h<a*a;h++)f.push("DLBURF"[c[3*a*a+h]]);for(var r=0;4>r;r++){var w=[5,4,2,1][r]*a*a;for(h=0;h<a;h++)f.push("DLBURF"[c[w+[h,h,a-1-h,a-1-h][r]]])}b(f.join(""),[],e)}}}(),
Za=function(){var a=[[20*b,-20*b,61*b,10,10,0],[20*b,0,62*b,-10,20,61.5],[20*b,0,0,10,20,31.5]];return function(c,e){var h=$(e),r=kernel.getProp("colcube").match(gb),x=h[0].getContext("2d");h.attr("width",122*b+1);h.attr("height",122.5);for(h=0;27>h;h++){var y=h%3,w=~~(h/3)%3;f(x,r["DLBURF".indexOf(c[h])]||"#888",[[y,y+1,y+1,y],[w,w,w+1,w+1]],a[~~(h/9)])}}}(),Sa=function(){return function(c,h){var r=$(h);r.attr("width",120*b+1);r.attr("height",120*b+1);var x=kernel.getProp("colpyr").match(gb);r=r[0].getContext("2d");
for(var y=0,z=0;3>z;z++)for(var Qa=0;3>Qa;Qa++)for(var w=0;w<2*z+1;w++){var n=-b*z+b*w;var Pa=z/2;n=0==w%2?[[n,n-b,n+b],[Pa,Pa+.5,Pa+.5]]:[[n-b,n,n+b],[Pa,Pa+.5,Pa]];f(r,x["FLRD".indexOf(c[y])]||"#888",a(n,e/3*4*Qa),[20,3*b,3+(6*b-4.5)/2]);y++}}}(),Pa=function(){function a(a){if("U"==a){for(var b=[9,10,14,15,17],e=[36,37,38,39,40],f=[27,29,28,32,31],n=0;5>n;n++)mathlib.circle(c,b[n],e[n],f[n]);mathlib.circle(c,18,67,45);mathlib.circle(c,0,4,8);mathlib.circle(c,1,3,6);mathlib.circle(c,2,7,5)}if("L"==
a){b=[0,1,5,6,8];e=[18,20,19,23,22];f=[71,70,69,68,67];for(n=0;5>n;n++)mathlib.circle(c,b[n],e[n],f[n]);mathlib.circle(c,27,62,40);mathlib.circle(c,9,17,13);mathlib.circle(c,10,15,12);mathlib.circle(c,14,16,11)}if("R"==a){b=[8,6,7,3,4];var h=[45,46,47,48,49];e=[26,25,21,20,18];for(n=0;5>n;n++)mathlib.circle(c,b[n],h[n],e[n]);mathlib.circle(c,17,36,58);mathlib.circle(c,27,31,35);mathlib.circle(c,29,32,34);mathlib.circle(c,28,33,30)}if("F"==a){f=[27,29,30,34,35];h=[58,59,60,61,62];b=[13,12,16,15,17];
for(n=0;5>n;n++)mathlib.circle(c,f[n],h[n],b[n]);mathlib.circle(c,8,49,71);mathlib.circle(c,18,26,22);mathlib.circle(c,20,25,23);mathlib.circle(c,19,21,24)}if("B"==a){b=[4,3,2,1,0];f=[67,68,64,65,63];h=[53,51,50,46,45];for(n=0;5>n;n++)mathlib.circle(c,b[n],f[n],h[n]);mathlib.circle(c,54,31,9);mathlib.circle(c,36,40,44);mathlib.circle(c,37,39,42);mathlib.circle(c,38,43,41)}if("BR"==a){e=[36,37,41,42,44];h=[54,56,55,59,58];f=[35,34,33,32,31];for(n=0;5>n;n++)mathlib.circle(c,e[n],h[n],f[n]);mathlib.circle(c,
63,26,4);mathlib.circle(c,45,53,49);mathlib.circle(c,46,51,48);mathlib.circle(c,50,52,47)}if("BL"==a){e=[44,42,43,39,40];b=[9,10,11,12,13];h=[62,61,57,56,54];for(n=0;5>n;n++)mathlib.circle(c,e[n],b[n],h[n]);mathlib.circle(c,53,0,22);mathlib.circle(c,63,67,71);mathlib.circle(c,65,68,70);mathlib.circle(c,64,69,66)}if("D"==a){h=[49,48,52,51,53];f=[63,65,66,70,71];e=[22,23,24,25,26];for(n=0;5>n;n++)mathlib.circle(c,h[n],f[n],e[n]);mathlib.circle(c,44,13,35);mathlib.circle(c,54,62,58);mathlib.circle(c,
56,61,59);mathlib.circle(c,55,57,60)}}function b(a,b,c,e,f){r.beginPath();r.moveTo(a*f,b*f);r.lineTo(c*f,e*f);r.lineWidth=3;r.stroke();r.lineWidth=1}var c=[],e="#fff #808 #f00 #0d0 #00f #bbb #ff0 #fa0".split(" ");return function(h){e=kernel.getProp("colfto").match(gb);for(var x=0,y=0;8>y;y++)for(var w=0;9>w;w++)c[x++]=y;h=h.split(" ");for(y=0;y<h.length;y++)x=h[y],x.endsWith("'")&&(x=x.replace("'",""),a(x)),a(x);y=kernel.getProp("imgSize")/50;z.width(39*y+"em");z.height(18*y+"em");z.attr("width",
651);z.attr("height",301);y={0:[[0,2,1],[0,0,1]],1:[[2,3,1],[0,1,1]],2:[[2,4,3],[0,0,1]],3:[[4,5,3],[0,1,1]],4:[[4,6,5],[0,0,1]],5:[[1,3,2],[1,1,2]],6:[[3,4,2],[1,2,2]],7:[[3,5,4],[1,1,2]],8:[[2,4,3],[2,2,3]],9:[[0,1,0],[0,1,2]],10:[[0,1,1],[2,1,3]],11:[[0,1,0],[2,3,4]],12:[[0,1,1],[4,3,5]],13:[[0,1,0],[4,5,6]],14:[[1,2,1],[1,2,3]],15:[[1,2,2],[3,2,4]],16:[[1,2,1],[3,4,5]],17:[[2,3,2],[2,3,4]],18:[[2,3,4],[4,3,4]],19:[[1,2,3],[5,4,5]],20:[[2,4,3],[4,4,5]],21:[[3,4,5],[5,4,5]],22:[[0,1,2],[6,5,6]],
23:[[1,3,2],[5,5,6]],24:[[2,3,4],[6,5,6]],25:[[3,5,4],[5,5,6]],26:[[4,5,6],[6,5,6]],27:[[3,4,4],[3,2,4]],28:[[4,5,5],[2,1,3]],29:[[4,5,4],[2,3,4]],30:[[4,5,5],[4,3,5]],31:[[5,6,6],[1,0,2]],32:[[5,6,5],[1,2,3]],33:[[5,6,6],[3,2,4]],34:[[5,6,5],[3,4,5]],35:[[5,6,6],[5,4,6]]};for(h=0;72>h;h++){x=y[h%36];w=x[0];var n=36<=h?7:0;f(r,e[c[h]],[[w[0]+n,w[1]+n,w[2]+n],x[1]],[50,0,0])}b(0,0,6,6,50);b(6,0,0,6,50);b(7,0,13,6,50);b(13,0,7,6,50);r.fillStyle=kernel.getProp("col-font");r.strokeStyle=kernel.getProp("col-font");
r.font="25px monospace";r.textAlign="center";r.textBaseline="middle";r.fillText("U",150,80);r.fillText("R",50*4.4,150);r.fillText("F",150,50*4.4);r.fillText("L",80,150);r.fillText("B",500,80);r.fillText("BL",570,150);r.fillText("D",500,50*4.4);r.fillText("BR",430,150)}}(),$a=function(){return function(a,b,c){for(var e=[],h=[[1,0],[0,1],[0,-1],[-1,0]],x=0;x<b*b;x++)e[x]=x;x=b-1;var y=b-1,w=/([ULRD\uFFEA\uFFE9\uFFEB\uFFEC])([\d]?)/;c=c.split(" ");for(var n=0;n<c.length;n++){var Qa=w.exec(c[n]);if(Qa){var Pa=
"ULRD￪￩￫￬".indexOf(Qa[1])%4;Qa=~~Qa[2]||1;Pa=h["b"==a?3-Pa:Pa];for(var Oa=0;Oa<Qa;Oa++)mathlib.circle(e,x*b+y,(x+Pa[0])*b+y+Pa[1]),x+=Pa[0],y+=Pa[1]}}a=kernel.getProp("imgSize")/50;z.width(30*a+"em");z.height(30*a+"em");z.attr("width",50*(b+.2));z.attr("height",50*(b+.2));a=kernel.getProp("col15p").match(gb);a[b-1]=a[a.length-1];for(x=0;x<b;x++)for(c=0;c<b;c++)h=e[c*b+x],y=Math.min(~~(h/b),h%b),h++,f(r,a[y],[[x+.05,x+.05,x+1-.05,x+1-.05],[c+.05,c+1-.05,c+1-.05,c+.05]],[50,.1,.1]),h!=b*b&&(r.fillStyle=
"#000",r.font="30px monospace",r.textAlign="center",r.textBaseline="middle",r.fillText(h,50*(x+.5+.1),50*(c+.5+.1)))}}(),Qa="  222 333 444 555 666 777 888 999 101010 111111".split(" "),gb=/#[0-9a-fA-F]{3}/g;$(function(){z=$("<canvas>");z[0].getContext&&tools.regTool("image",TOOLS_IMAGE,Na)});return{draw:c,llImage:Ta,pyrllImage:Sa,face3Image:Za}});var cross=function(c,Na,z,r,b,e,a){function y(a,b){var c=Xa[b][~~(a/24)];return 24*~~(c/384)+db[a%24][(c>>4)%24]}function f(a,b){var c=Xa[b][a>>4];return~~(c/384)<<4|Va[a&15][(c>>4)%24]^c&15}function ab(a,b){for(var c=3;0<=c;c--)b[c]=a&1,a>>=1}function h(a){for(var b=0,c=0;4>c;c++)b<<=1,b|=a[c];return b}function Oa(a,b){var c=Xa[b][~~(a/384)];return 384*~~(c/384)+16*db[(a>>4)%24][(c>>4)%24]+(Va[a&15][(c>>4)%24]^c&15)}function Ra(){Ra=$.noop;for(var a=0;24>a;a++)db[a]=[];for(a=0;16>a;a++)Va[a]=[];
var n=[],w=[],x=[];for(a=0;24>a;a++)for(var Qa=0;24>Qa;Qa++){r(n,a,4);r(w,Qa,4);for(var Pa=0;4>Pa;Pa++)x[Pa]=n[w[Pa]];db[a][Qa]=b(x,4);if(16>a){ab(a,n);for(Pa=0;4>Pa;Pa++)x[Pa]=n[w[Pa]];Va[a][Qa]=h(x)}}c(Xa,495,function(a,c){for(var f=[0,0,0,0,0,0,0,0,0,0,0,0],n=4,h=0;12>h;h++)a>=e[11-h][n]?(a-=e[11-h][n--],f[h]=n<<1):f[h]=-1;Na(f,c);a=0;n=4;var w=0,r=[];for(h=0;12>h;h++)0<=f[h]&&(a+=e[11-h][n--],r[n]=f[h]>>1,w|=(f[h]&1)<<3-n);return 24*a+b(r,4)<<4|w});mb=[];hb=[];z(mb,0,11880,5,y);z(hb,0,7920,6,
f)}function x(){x=$.noop;Wa();var a=5;z(Ua,296+576*(72*a+2*a),331776,7,function(a,b){var c=a%576,e=~~(a/576);return 24*n[~~(c/24)][b]+w[c%24][b]+576*(24*n[~~(e/24)][b]+w[e%24][b])});a=6;z(Ya,296+576*(72*a+2*a),331776,7,function(a,b){var c=a%576,e=~~(a/576);return 24*n[~~(c/24)][b]+w[c%24][b]+576*(24*n[~~(e/24)][b]+w[e%24][b])})}function Wa(){function a(a,b){var c=~~(a/3);return 3*[[3,1,2,7,0,5,6,4],[0,1,6,2,4,5,7,3],[1,2,3,0,4,5,6,7],[0,5,1,3,4,6,2,7],[4,0,2,3,5,1,6,7],[0,1,2,3,7,4,5,6]][b][c]+(a%
3+[[2,0,0,1,1,0,0,2],[0,0,1,2,0,0,2,1],[0,0,0,0,0,0,0,0],[0,1,2,0,0,2,1,0],[1,2,0,0,2,1,0,0],[0,0,0,0,0,0,0,0]][b][c])%3}Wa=$.noop;Ra();for(var b=0;24>b;b++){n[b]=[];w[b]=[];for(var c=0;6>c;c++){n[b][c]=a(b,c);var e=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];e[b>>1]=b&1;Na(e,c);for(var f=0;12>f;f++)if(0<=e[f]){w[b][c]=f<<1|e[f];break}}}kb=[];for(b=0;4>b;b++)c=[],z(c,72*(b+4)+2*(b+4),576,5,function(a,b){return 24*n[~~(a/24)][b]+w[a%24][b]}),kb[b]=c}function Ta(b,c,e,h,r,x,z,Qa){if(0==x)return 0==b&&0==
c&&8==e[0]&&12==h[0]&&(10==e[1]&&15==h[1]||12==e[1]&&18==h[1]);if(a(mb,b)>x||a(hb,c)>x||a(r,24*h[0]+e[0]+576*(24*h[1]+e[1]))>x)return!1;var Pa,Oa;for(Oa=0;6>Oa;Oa++)if(Oa!=z&&Oa!=z-3){var Na=b;var Ua=c;var Sa=e;var Ra=h;for(Pa=0;3>Pa;Pa++)if(Na=y(Na,Oa),Ua=f(Ua,Oa),Sa=[w[Sa[0]][Oa],w[Sa[1]][Oa]],Ra=[n[Ra[0]][Oa],n[Ra[1]][Oa]],Ta(Na,Ua,Sa,Ra,r,x-1,Oa,Qa))return Qa.push("FRUBLD".charAt(Oa)+" 2'".charAt(Pa)),!0}return!1}function Za(b,c,e,h,r,x,z,Qa){if(0==x)return 0==b&&0==c&&e==2*(r+4)&&h==3*(r+4);
if(a(mb,b)>x||a(hb,c)>x||a(kb[r],24*h+e)>x)return!1;var Pa,Oa;for(Oa=0;6>Oa;Oa++)if(Oa!=z&&Oa!=z-3){var Na=b;var Ua=c;var Sa=e;var Ra=h;for(Pa=0;3>Pa;Pa++)if(Na=y(Na,Oa),Ua=f(Ua,Oa),Sa=w[Sa][Oa],Ra=n[Ra][Oa],Za(Na,Ua,Sa,Ra,r,x-1,Oa,Qa))return Qa.push("FRUBLD".charAt(Oa)+" 2'".charAt(Pa)),!0}return!1}function Sa(b,c,e,n,h){if(0==e)return 0==b&&0==c;if(a(mb,b)>e||a(hb,c)>e)return!1;var w,r;for(r=0;6>r;r++)if(r!=n&&r!=n-3){var x=b;var z=c;for(w=0;3>w;w++)if(x=y(x,r),z=f(z,r),Sa(x,z,e-1,r,h))return h.push("FRUBLD".charAt(r)+
" 2'".charAt(w)),!0}return!1}function Pa(a){Ra();for(var b=[],c=0;6>c;c++){for(var e=0,n=0,h=0;h<a.length;h++)for(var w=ob[c].indexOf("FRUBLD".charAt(a[h][0])),r=a[h][2],x=0;x<r;x++)e=f(e,w),n=y(n,w);h=[];for(w=0;100>w&&!Sa(n,e,w,-1,h);w++);h.reverse();b.push(h)}return b}function $a(a,b){Wa();for(var c=0,e=0,h=[8,10,12,14],r=[12,15,18,21],x=0;x<a.length;x++)for(var z=ob[b].indexOf("FRUBLD".charAt(a[x][0])),Pa=a[x][2],Qa=0;Qa<Pa;Qa++){c=f(c,z);e=y(e,z);for(var Oa=0;4>Oa;Oa++)h[Oa]=w[h[Oa]][z],r[Oa]=
n[r[Oa]][z]}x=[];z=!1;for(Pa=0;!z;){for(Oa=0;4>Oa;Oa++)if(Za(e,c,h[Oa],r[Oa],Oa,Pa,-1,x)){z=!0;break}Pa++}x.reverse();return x}function Qa(){Qa=$.noop;Ra();ib=[];z(ib,0,190080,7,Oa,6,3,6)}function gb(a){var b=~~(a/384),c=(a>>4)%24,f=[],n=[],h=[],w=[];ab(a&15,w);r(h,c,4);a=4;c=[7,6,5,4,10,9,8,11,3,2,1,0];for(var x=0;12>x;x++)b>=e[11-x][a]?(b-=e[11-x][a--],f[c[x]]=h[a],n[c[x]]=w[a]):f[c[x]]=n[c[x]]=-1;return[f,n]}var mb,hb,kb,ib,Xa=[],db=[],Va=[],w=[],n=[],Ua=[],Ya=[],fb="DULRFB".split(""),ob="FRUBLD FLDBRU FDRBUL FULBDR URBDLF DRFULB".split(" "),
cb="&nbsp;&nbsp; z2 z' z&nbsp; x' x&nbsp;".split(" "),eb=["FRUBLD","RBULFD","BLUFRD","LFURBD"],lb;execMain(function(){function a(){var b=$(this).parent(),c="DULRFB".indexOf(b.html()[0]);$a(lb,c);var e=$(this).html();if("ec"==e){var h=$a(lb,c);e="xx"}else if("xx"==e){var r=lb;x();h=[];for(e=0;4>e;e++){for(var z=0,Qa=0,Oa=[8,10,12],Na=[12,15,18],Sa=0;Sa<r.length;Sa++)for(var Ra=eb[e].indexOf("FRUBLD".charAt(ob[c].indexOf("FRUBLD".charAt(r[Sa][0])))),Va=r[Sa][2],Wa=0;Wa<Va;Wa++)z=f(z,Ra),Qa=y(Qa,Ra),
Oa=[w[Oa[0]][Ra],w[Oa[1]][Ra],w[Oa[2]][Ra]],Na=[n[Na[0]][Ra],n[Na[1]][Ra],n[Na[2]][Ra]];h.push([Qa,z,Oa,Na])}r=[];Sa=!1;for(z=0;!Sa;){for(e=0;4>e;e++){Qa=h[e];if(Ta(Qa[0],Qa[1],[Qa[2][0],Qa[2][1]],[Qa[3][0],Qa[3][1]],Ua,z,-1,r)){Sa=!0;break}if(Ta(Qa[0],Qa[1],[Qa[2][0],Qa[2][2]],[Qa[3][0],Qa[3][2]],Ya,z,-1,r)){Sa=!0;break}}z++}r.reverse();for(Sa=0;Sa<r.length;Sa++)r[Sa]=eb[e]["FRUBLD".indexOf(r[Sa][0])]+r[Sa][1];h=r;e="<<"}else h=Pa(lb)[c],e="ec";e=$("<span />").html(e).addClass("click").click(a);
b.empty().append(fb[c]+"(",e,"): "+cb[c],tools.getSolutionSpan(h),"<br>")}function b(b){if(b)if(tools.isPuzzle("333")){var c=tools.getCurScramble()[1];b.empty();lb=kernel.parseScramble(c,"FRUBLD");c=Pa(lb);for(var e=0;6>e;e++){var f=$('<span class="sol"/>'),n=$("<span />").html("ec").addClass("click").click(a);f.append(fb[e]+"(",n,"): "+cb[e],tools.getSolutionSpan(c[e]),"<br>");b.append(f)}}else b.html(IMAGE_UNAVAILABLE)}$(function(){tools.regTool("cross",TOOLS_SOLVERS+">"+TOOLS_CROSS,b)})});return{solve:Pa,
getEasyCross:function(b){Qa();var c=Math.min(b%10,8),e=Math.min(~~(b/10),8);b=Math.min(c,e);c=Math.max(c,e);e=[0,1,16,174,1568,11377,57758,155012,189978,190080];e=mathlib.rn(e[c+1]-e[b])+1;var f;for(f=0;190080>f;f++){var n=a(ib,f);if(n<=c&&n>=b&&0==--e)break}return gb(f)},getEasyXCross:function(b){Qa();Wa();b=Math.max(0,Math.min(b,8));for(var c=[1,16,174,1568,11377,57758,155012,189978,190080][b],f=!1;!f;){for(var n=[],h=0;500>h;h++)n.push(mathlib.rn(c));n.sort(function(a,b){return b-a});var w=[],
r=0;for(h=0;190080>h;h++)if(!(a(ib,h)>b)){for(;n[n.length-1]==r;)w.push(h),n.pop();if(0==n.length)break;r++}n=mathlib.rndPerm(500);for(h=0;500>h;h++){var x=w[n[h]],y=~~(x/384),z=24*y+(x>>4)%24,Pa=y<<4|x&15,Oa=[];Sa(z,Pa,b,-1,Oa);r=mathlib.rndPerm(8).slice(4);var Na=mathlib.rndPerm(8),Ua=[0,0,0,0,0,0,0,0,0,0,0,0];Oa=4;for(var Ra=0;12>Ra;Ra++)y>=e[11-Ra][Oa]?(y-=e[11-Ra][Oa--],Ua[Ra]=-1):Ua[Ra]=Na.pop();for(Ra=0;4>Ra;Ra++)if(r[Ra]=3*r[Ra]+mathlib.rn(3),Na[Ra]=2*Ua.indexOf(Ra)+mathlib.rn(2),!(f||a(kb[Ra],
24*r[Ra]+Na[Ra])>b))for(Oa=[],y=0;y<=b;y++)if(Za(z,Pa,Na[Ra],r[Ra],Ra,y,-1,Oa)){f=!0;break}if(f){b=gb(x);b[2]=mathlib.valuedArray(8,-1);b[3]=mathlib.valuedArray(8,-1);c=[7,6,5,4,10,9,8,11,3,2,1,0];f=[6,5,4,7,2,1,0,3];for(h=0;4>h;h++)b[0][c[Na[h]>>1]]=c[h+4],b[1][c[Na[h]>>1]]=Na[h]%2,b[2][f[~~(r[h]/3)]]=f[h+4],b[3][f[~~(r[h]/3)]]=(30-r[h])%3;return b}}}}}}(mathlib.createMove,mathlib.edgeMove,mathlib.createPrun,mathlib.setNPerm,mathlib.getNPerm,mathlib.Cnk,mathlib.getPruning);execMain(function(c,Na,z,r){function b(a,b){var c=[0,0,0,0,0,0,0,0,0,0,0,0],e=a%12,f=~~(a/12);f>=e&&f++;c[e]=2;c[f]=4;Na(c,b);for(var h=0;12>h;h++)1==c[h]>>1?e=h:2==c[h]>>1&&(f=h);f>e&&f--;return 12*f+e}function e(){e=$.noop;c(f,2048,[Na,"o",12,-2]);c(ab,132,b)}function a(a,b){e();var c=kernel.parseScramble(a,"FRUBLD");b.empty();for(var r=0;12>r;r++){for(var y=0,z=116,Oa=0;Oa<c.length;Oa++)for(var Na=x[r].indexOf("FRUBLD".charAt(c[Oa][0])),Ta=c[Oa][2],Za=0;Za<Ta;Za++)y=f[Na][y],z=ab[Na][z];y=h.search([y,
z],0);for(Oa=0;Oa<y.length;Oa++)y[Oa]="FRUBLD".charAt(y[Oa][0])+" 2'".charAt(y[Oa][1]);b.append($('<span class="sol">').append(Ra[r]+": "+Wa[r],tools.getSolutionSpan(y)),"<br>")}}function y(b,c){if(c)if(tools.isPuzzle("333")){var h=tools.getCurScramble();if("eocross"==b){h=h[1];e();h=kernel.parseScramble(h,"FRUBLD");c.empty();for(var r=0;12>r;r++){for(var y=0,z=116,Na=129,Ta=0;Ta<h.length;Ta++)for(var Za=x[r].indexOf("FRUBLD".charAt(h[Ta][0])),kb=h[Ta][2],ib=0;ib<kb;ib++)y=f[Za][y],z=ab[Za][z],Na=
ab[Za][Na];y=Oa.search([y,z,Na],0);for(Ta=0;Ta<y.length;Ta++)y[Ta]="FRUBLD".charAt(y[Ta][0])+" 2'".charAt(y[Ta][1]);c.append($('<span class="sol">').append(Ra[r]+": "+Wa[r],tools.getSolutionSpan(y)),"<br>")}}else a(h[1],c)}else c.html(IMAGE_UNAVAILABLE)}var f=[],ab=[],h=new mathlib.Solver(6,3,[[0,[Na,"o",12,-2],2048],[116,b,132]]),Oa=new mathlib.Solver(6,3,[[0,[Na,"o",12,-2],2048],[116,b,132],[129,b,132]]),Ra="D(LR) D(FB) U(LR) U(FB) L(UD) L(FB) R(UD) R(FB) F(LR) F(UD) B(LR) B(UD)".split(" "),x="FRUBLD RBULFD FLDBRU LBDRFU FDRBUL DBRUFL FULBDR UBLDFR URBDLF RDBLUF DRFULB RUFLDB".split(" "),
Wa="&nbsp;&nbsp;&nbsp; &nbsp;y&nbsp; z2&nbsp; z2y z'&nbsp; z'y &nbsp;z&nbsp; z&nbsp;y x'&nbsp; x'y &nbsp;x&nbsp; x&nbsp;y".split(" ");$(function(){tools.regTool("eoline",TOOLS_SOLVERS+">"+TOOLS_EOLINE,y.bind(null,"eoline"));tools.regTool("eocross",TOOLS_SOLVERS+">EOCross",y.bind(null,"eocross"))});return{solve:a}},[mathlib.createMove,mathlib.edgeMove,mathlib.createPrun,mathlib.getPruning]);execMain(function(c){function Na(b,f){e.ca=[0,0,0,0,0,0,0,0];for(var h=1;3>h;h++){var r=b%24;b=~~(b/24);e.ca[r&7]=h|r&24}c.CornMult(e,c.moveCube[3*f],a);r=[];for(h=0;8>h;h++)r[a.ca[h]&7]=h|a.ca[h]&24;b=0;for(h=2;0<h;h--)b=24*b+r[h];return b}function z(b,f){e.ea=[0,0,0,0,0,0,0,0,0,0,0,0];for(var h=1;4>h;h++){var r=b%24;b=~~(b/24);e.ea[r>>1]=h<<1|r&1}c.EdgeMult(e,c.moveCube[3*f],a);r=[];for(h=0;12>h;h++)r[a.ea[h]>>1]=h<<1|a.ea[h]&1;b=0;for(h=3;0<h;h--)b=24*b+r[h];return b}function r(a,b){b.empty();
for(var c=0;4>c;c++){a:{var e=a,r=ab[c];var Oa=[126];for(var Ra=[11964],Pa=1;4>Pa;Pa++)Oa[Pa]=Na(Oa[Pa-1],4),Ra[Pa]=z(Ra[Pa-1],4);var $a=[];r=r.split("");for(var Qa=0;4>Qa;Qa++){$a[Qa]=r.join("");var gb=kernel.parseScramble(e,$a[Qa]);for(Pa=0;Pa<gb.length;Pa++)for(var mb=gb[Pa][0],hb=0;hb<gb[Pa][2];hb++)Oa[Qa]=Na(Oa[Qa],mb),Ra[Qa]=z(Ra[Qa],mb);mathlib.circle(r,0,2,3,5)}for(r=1;12>r;r++)for(Qa=0;4>Qa;Qa++)if(e=y.search([Oa[Qa],Ra[Qa]],1==r?0:r,r)){e.push(Qa);Oa=e;break a}Oa=void 0}Ra=Oa.pop();0==c%
2&&(Ra=(Ra+2)%4);for(Qa=0;Qa<Oa.length;Qa++)Oa[Qa]="URFDLB".charAt(Oa[Qa][0])+" 2'".charAt(Oa[Qa][1]);b.append($('<span class="sol">').append(f[c]+": "+h[c]+["&nbsp;&nbsp;&nbsp;","x'&nbsp;","x2&nbsp;","x&nbsp;&nbsp;"][Ra],tools.getSolutionSpan(Oa)),"<br>")}}function b(a){if(a)if(tools.isPuzzle("333")){var b=tools.getCurScramble();r(b[1],a)}else a.html(IMAGE_UNAVAILABLE)}var e=new c,a=new c,y=new mathlib.Solver(6,3,[[126,Na,576],[11964,z,13824]]),f=["LU","LD","FU","FD"],ab=["DRBULF","URFDLB","DBLUFR",
"UBRDFL"],h=["&nbsp;&nbsp;","&nbsp;&nbsp;","y&nbsp;","y&nbsp;"];$(function(){tools.regTool("roux1",TOOLS_SOLVERS+">"+TOOLS_ROUX1,b)});return{solve:r}},[mathlib.CubieCube]);var gsolver=function(){function c(a,c){for(var e=0;e<z.length;e++)c=a(c,z[e]);for(e=0;e<b.length;e++)c=a(c,b[e]);return c}function Na(a,b){var c={};b=b||" 2'";for(var e in a)for(var f=0;f<b.length;f++)c[e+b[f]]=a[e];return c}var z,r,b,e=function(){function a(a,b){for(var e=a.split(""),f=c["URF".indexOf(b[0])],h="? 2'".indexOf(b[1]),r=0;r<f.length;r++)mathlib.acycle(e,f[r],h);return e.join("")}var b="URFDLB".split(""),c=[[[0,1,3,2],[4,8,16,20],[5,9,17,21]],[[4,5,7,6],[1,22,13,9],[3,20,15,11]],[[8,
9,11,10],[2,4,13,19],[3,6,12,17]]],e=new mathlib.gSolver("XXXX???????????????????? ????XXXX???????????????? ????????XXXX???????????? ????????????XXXX???????? ????????????????XXXX???? ????????????????????XXXX".split(" "),a,Na({U:1,R:2,F:3}));return function(c,f){z=kernel.parseScramble(c,"URF");for(var h="UUUURRRRFFFFDDDDLLLLBBBB",r=0;r<z.length;r++){var x=z[r];h=a(h,"URF".charAt(x[0])+" 2'".charAt(x[2]-1))}for(x=0;6>x;x++){var y=[];for(r=0;24>r;r++)y.push(h[r]=="URFDLB".charAt(x)?"X":"?");r=e.search(y.join(""),
0);f.append(b[x]+": ",tools.getSolutionSpan(r),"<br>")}}}(),a=function(){function e(a,b){for(var c=a.split(""),e=Ta["URFDLBurfdlbMESxyz".indexOf(b[0])],f="? 2'".indexOf(b[1]),n=0;n<e.length;n++)mathlib.acycle(c,e[n],f);return c.join("")}function f(a,b,c){c+=" // orientation \n";for(var e=0;e<b.length&&void 0!=b[e];e++)c+=b[e].join(" ").replace(/\s+/g," ")+" // "+a[e].head+(0==b[e].length?" skip":"")+"\n";return"https://alg.cubing.net/?alg="+encodeURIComponent(c)}function h(a,h){var n=+new Date,x=
[null,0],y=[];b=[];for(var z=0;z<a.length;z++){if(!a[z].solv){a[z].solv={};for(var Qa in a[z].step)a[z].solv[Qa]=new mathlib.gSolver([Qa],e,a[z].move)}var Pa=void 0,Oa=e,Na=a[z].solv,Ua=a[z].step,Ra=a[z].fmov||[];x=x[1];var Sa=a[z].maxl||10,Ta=0;a:for(;Ta<Sa+1;Ta++)for(var Va in Na)if((Ua[Va]|x)==Ua[Va]){var Wa=c(Oa,Va);Pa=Na[Va].search(Wa,0,Ta);if(void 0!=Pa){x|=Ua[Va];break a}for(var Xa=0;Xa<Ra.length;Xa++)if(Pa=Oa(Wa,Ra[Xa]),Pa=Na[Va].search(Pa,0,Ta),void 0!=Pa){Pa.unshift(Ra[Xa]);x|=Ua[Va];break a}}x=
[Pa,x];y[z]=x[0];if(void 0==x[0]){h.append(a[z].head+": &nbsp;(no solution found in %d moves)".replace("%d",a[z].maxl||10),"<br>");break}h.append(a[z].head+": ",0==y[z].length?"&nbsp;(skip)":tools.getSolutionSpan(y[z]),"<br>");b=b.concat(y[z]);DEBUG&&console.log("[step solver]",a[z].head+": ",y[z],"->",x[1],c(e,mathlib.SOLVED_FACELET),+new Date-n)}h.append($('<a class="click" target="_blank">alg.cubing.net</a>').attr("href",f(a,y,w)+"&setup="+encodeURIComponent(r)))}function y(){w=Xa.val();a.exec(db,
r,Va.empty())}var Ta=[[[0,2,8,6],[1,5,7,3],[18,36,45,9],[19,37,46,10],[20,38,47,11]],[[9,11,17,15],[10,14,16,12],[2,51,29,20],[5,48,32,23],[8,45,35,26]],[[18,20,26,24],[19,23,25,21],[6,9,29,44],[7,12,28,41],[8,15,27,38]],[[27,29,35,33],[28,32,34,30],[24,15,51,42],[25,16,52,43],[26,17,53,44]],[[36,38,44,42],[37,41,43,39],[0,18,27,53],[3,21,30,50],[6,24,33,47]],[[45,47,53,51],[46,50,52,48],[2,36,33,17],[1,39,34,14],[0,42,35,11]],[[0,2,8,6],[1,5,7,3],[18,36,45,9],[19,37,46,10],[20,38,47,11],[21,39,48,
12],[22,40,49,13],[23,41,50,14]],[[9,11,17,15],[10,14,16,12],[2,51,29,20],[5,48,32,23],[8,45,35,26],[1,52,28,19],[4,49,31,22],[7,46,34,25]],[[18,20,26,24],[19,23,25,21],[6,9,29,44],[7,12,28,41],[8,15,27,38],[3,10,32,43],[4,13,31,40],[5,16,30,37]],[[27,29,35,33],[28,32,34,30],[24,15,51,42],[25,16,52,43],[26,17,53,44],[21,12,48,39],[22,13,49,40],[23,14,50,41]],[[36,38,44,42],[37,41,43,39],[0,18,27,53],[3,21,30,50],[6,24,33,47],[1,19,28,52],[4,22,31,49],[7,25,34,46]],[[45,47,53,51],[46,50,52,48],[2,
36,33,17],[1,39,34,14],[0,42,35,11],[5,37,30,16],[4,40,31,13],[3,43,32,10]],[[1,19,28,52],[4,22,31,49],[7,25,34,46]],[[21,12,48,39],[22,13,49,40],[23,14,50,41]],[[3,10,32,43],[4,13,31,40],[5,16,30,37]],[[9,11,17,15],[10,14,16,12],[2,51,29,20],[5,48,32,23],[8,45,35,26],[36,42,44,38],[37,39,43,41],[0,53,27,18],[3,50,30,21],[6,47,33,24],[1,52,28,19],[4,49,31,22],[7,46,34,25]],[[0,2,8,6],[1,5,7,3],[18,36,45,9],[19,37,46,10],[20,38,47,11],[27,33,35,29],[28,30,34,32],[24,42,51,15],[25,43,52,16],[26,44,
53,17],[21,39,48,12],[22,40,49,13],[23,41,50,14]],[[18,20,26,24],[19,23,25,21],[6,9,29,44],[7,12,28,41],[8,15,27,38],[45,51,53,47],[46,48,52,50],[2,17,33,36],[1,14,34,39],[0,11,35,42],[3,10,32,43],[4,13,31,40],[5,16,30,37]]],Za=Na({U:0,R:17,F:34,D:48,L:65,B:82}),Sa=Na({U:0,R:17,F:34,L:65,B:82}),Pa=Na({U:0,R:17,M:97,r:113}),$a=Na({U:0,R:17,L:65}),Qa=[{move:Za,maxl:8,head:"Cross",step:{"----U--------R--R-----F--F--D-DDD-D-----L--L-----B--B-":0}},{move:Sa,head:"F2L-1",step:{"----U-------RR-RR-----FF-FF-DDDDD-D-----L--L-----B--B-":1,
"----U--------R--R----FF-FF-DD-DDD-D-----LL-LL----B--B-":2,"----U--------RR-RR----F--F--D-DDD-DD----L--L----BB-BB-":4,"----U--------R--R-----F--F--D-DDDDD----LL-LL-----BB-BB":8}},{move:Sa,head:"F2L-2",step:{"----U-------RR-RR----FFFFFFDDDDDD-D-----LL-LL----B--B-":3,"----U-------RRRRRR----FF-FF-DDDDD-DD----L--L----BB-BB-":5,"----U--------RR-RR---FF-FF-DD-DDD-DD----LL-LL---BB-BB-":6,"----U-------RR-RR-----FF-FF-DDDDDDD----LL-LL-----BB-BB":9,"----U--------R--R----FF-FF-DD-DDDDD----LLLLLL----BB-BB":10,
"----U--------RR-RR----F--F--D-DDDDDD---LL-LL----BBBBBB":12}},{move:Sa,head:"F2L-3",step:{"----U-------RRRRRR---FFFFFFDDDDDD-DD----LL-LL---BB-BB-":7,"----U-------RR-RR----FFFFFFDDDDDDDD----LLLLLL----BB-BB":11,"----U-------RRRRRR----FF-FF-DDDDDDDD---LL-LL----BBBBBB":13,"----U--------RR-RR---FF-FF-DD-DDDDDD---LLLLLL---BBBBBB":14}},{move:Sa,head:"F2L-4",step:{"----U-------RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB":15}}],ab=[{move:Za,maxl:10,fmov:["x ","x2","x'"],head:"Step 1",step:{"---------------------F--F--D--D--D-----LLLLLL-----B--B":0}},
{move:Pa,maxl:16,head:"Step 2",step:{"------------RRRRRR---F-FF-FD-DD-DD-D---LLLLLL---B-BB-B":1}}],mb=[{move:Za,maxl:8,head:"2x2x2",step:{"---------------------FF-FF-DD-DD--------LL-LL---------":1,"------------------------------DD-DD----LL-LL-----BB-BB":2}},{move:Za,maxl:10,head:"2x2x3",step:{"---------------------FF-FF-DD-DD-DD----LLLLLL----BB-BB":3}}],hb=[{move:Za,maxl:10,head:"EOLine",step:{"-H-HUH-H-----R-------HFH-F--D-HDH-D-----L-------HBH-B-":0}},{move:$a,maxl:16,head:"ZZF2L1",step:{"-H-HUH-H----RRRRRR---HFF-FF-DDHDD-DD----L-------BBHBB-":1,
"-H-HUH-H-----R-------FFHFF-DD-DDHDD----LLLLLL---HBB-BB":2}},{move:$a,maxl:16,head:"ZZF2L2",step:{"-H-HUH-H----RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB":3}}],kb=[{move:Za,maxl:7,head:"EO",step:{"-H-HUH-H-----R-------HFH----H-HDH-H-----L-------HBH---":0}},{move:Za,maxl:10,head:"DR",step:{"UUUUUUUUU---RRR------FFF---UUUUUUUUU---RRR------FFF---":1}}],ib,Xa,db,Va,w="z2";execMain(function(){for(var a="z2;;z ;z';x ;x'".split(";"),b=0;6>b;b++)for(var c=0;3>c;c++)a.push(a[b]+" y"+" 2'".charAt(c));Xa=$("<select>");
for(b=0;b<a.length;b++)Xa.append($("<option>").val(a[b]).html(a[b]))});return{exec:function(a,f,r){if("222"==a){z=kernel.parseScramble(f,"URFDLB");for(a=0;a<z.length;a++)z[a]="URFDLB".charAt(z[a][0])+" 2'".charAt(z[a][2]-1);f="URF UFL ULB UBR DFR DLF DBL DRB".split(" ");var n="----UU-UURR-RR-----FF-FF------------------------------ ---UU-UU----------FF-FF--------------LL-LL------------ UU-UU-------------------------------LL-LL-----BB-BB--- -UU-UU----RR-RR------------------------------BB-BB---- ------------RR-RR-----FF-FF-DD-DD--------------------- ---------------------FF-FF-DD-DD--------LL-LL--------- ------------------------------DD-DD----LL-LL-----BB-BB -------------RR-RR-------------DD-DD------------BB-BB-".split(" ");
ib=ib||new mathlib.gSolver(n,e,Za);for(a=0;8>a;a++){r.append(f[a]+": ");b=[];var x=ib.search(c(e,n[a]),0);x?r.append(tools.getSolutionSpan(x),"<br>"):r.append("no solution found<br>")}}else{Va=r;db=a;n=w.split(" ");x=[0,1,2,3,4,5];for(var Pa=[[5,1,0,2,4,3],[0,2,4,3,5,1],[1,3,2,4,0,5]],Oa=0;Oa<n.length;Oa++)if(n[Oa][0])for(var Na="xyz".indexOf(n[Oa][0]),Ra="? 2'".indexOf(n[Oa][1]||" "),Ua=0;Ua<Ra;Ua++)for(var Sa=0;6>Sa;Sa++)x[Sa]=Pa[Na][x[Sa]];for(Sa=0;6>Sa;Sa++)x[Sa]="URFDLB".charAt(x[Sa]);n=x.join("");
z=kernel.parseScramble(f,"URFDLB");for(f=0;f<z.length;f++)z[f]=n.charAt(z[f][0])+" 2'".charAt(z[f][2]-1);r.append("Orientation:",Xa.unbind("change").change(y),"<br>");"cf"==a&&h(Qa,r);"roux"==a&&h(ab,r);"petrus"==a&&h(mb,r);"zz"==a&&h(hb,r);"eodr"==a&&h(kb,r)}},move:e}}(),y=function(){function a(a,b){if(!a)return null;b=~~b;a=a.split("|");if(0==b){var c=a[0].slice(6);a[0]=a[0].slice(0,6)+a[1].slice(6);a[1]=a[1].slice(0,6)+c}else if(c=0<b?0:1,b=Math.abs(b),a[c]=a[c].slice(b)+a[c].slice(0,b),/[a-h]/.exec(a[c][0]+
a[c][6]))return null;return a.join("|")}function e(a){for(var b=0,c=0,e=[],f=0;f<a.length;f++)0==a[f]?(0==b&&0==c?e.push("/"):e.push((b+5)%12-5+","+((c+5)%12-5)+"/"),b=c=0):0<a[f]?b+=~~a[f]:c-=~~a[f];return e}for(var f={0:33},h=1;12>h;h++)f[""+h]=0,f[""+-h]=16;var r,y;return function(h,x){r=r||new mathlib.gSolver(["0Aa0Aa0Aa0Aa|Aa0Aa0Aa0Aa0","0Aa0Aa0Aa0Aa|0Aa0Aa0Aa0Aa","Aa0Aa0Aa0Aa0|Aa0Aa0Aa0Aa0","Aa0Aa0Aa0Aa0|0Aa0Aa0Aa0Aa"],a,f);y=y||new mathlib.gSolver(["0Aa0Aa0Aa0Aa|Bb1Bb1Bb1Bb1","0Aa0Aa0Aa0Aa|1Bb1Bb1Bb1Bb",
"Aa0Aa0Aa0Aa0|Bb1Bb1Bb1Bb1","Aa0Aa0Aa0Aa0|1Bb1Bb1Bb1Bb"],a,f);z=[];for(var Oa=/^\s*\(\s*(-?\d+),\s*(-?\d+)\s*\)\s*$/,Qa=h.split("/"),Pa=0;Pa<Qa.length;Pa++){if(!/^\s*$/.exec(Qa[Pa])){var Na=Oa.exec(Qa[Pa]);~~Na[1]&&z.push((~~Na[1]+12)%12);~~Na[2]&&z.push(-(~~Na[2]+12)%12)}z.push(0)}0<z.length&&z.pop();b=[];Oa=r.search(c(a,"0Aa0Aa0Aa0Aa|Aa0Aa0Aa0Aa0"),0);x.append("Shape: ",tools.getSolutionSpan(e(Oa)),"<br>");b=b.concat(Oa);Oa=y.search(c(a,"0Aa0Aa0Aa0Aa|Bb1Bb1Bb1Bb1"),0);x.append("Color: ",tools.getSolutionSpan(e(Oa)),
"<br>")}}(),f=function(){function a(a,b){for(var c=a.split(""),f=e["RULBrbxy".indexOf(b[0])],h="? '*".indexOf(b[1]),r=0;r<f.length;r++)mathlib.acycle(c,f[r],h);return c.join("")}var e=[[[5,25,15],[9,28,17],[7,29,16],[8,26,19],[23,14,4]],[[0,20,25],[2,21,27],[4,22,29],[1,23,26],[19,7,11]],[[10,15,20],[13,18,24],[11,16,23],[14,19,22],[29,1,8]],[[25,20,15],[29,23,19],[28,21,18],[27,24,17],[13,9,2]],[[0,25,5],[4,26,7],[3,27,9],[2,28,6],[17,12,21]],[[0,20,25],[2,21,27],[4,22,29],[1,23,26],[19,7,11]],[[0,
25,15,10],[1,27,19,13],[2,29,18,11],[3,26,17,14],[4,28,16,12],[6,7,9,8],[21,23,24,22]],[[5,10,20,25],[6,11,21,26],[7,12,22,27],[8,13,23,28],[9,14,24,29],[1,2,4,3],[16,18,19,17]],[]],f;return function(e,h){f=f||new mathlib.gSolver(["?L?L??B?B?UUUUU?R?R???F?F?????","?F?F??L?L?UUUUU?B?B???R?R?????","?R?R??F?F?UUUUU?L?L???B?B?????","?B?B??R?R?UUUUU?F?F???L?L?????"],a,Na({R:0,r:1,B:2,b:3}," '"));z=kernel.parseScramble(e,"RULB");for(var r=0;r<z.length;r++)z[r]="RULB".charAt(z[r][0])+" 2'".charAt(z[r][2]-
1);var x="URFDLB".split(""),y="UUUUU?RR???FF????????LL???BB?? ???BBUUUUU??L?L?FF????????R?R? ?B?B??R?R?UUUUU?F?F???L?L????? ????????RR???BBUUUUU???LL???FF ?BB????????R?R????FFUUUUU??L?L ??F?F??R?R???????B?B?L?L?UUUUU".split(" ");for(r=0;6>r;r++){b=[];var Oa=["x*","y ",null,"x ","y*","y'"],Qa=~~(c(a,"U????R????F????D????L????B????").indexOf(x[r])/5);Oa[Qa]&&b.push(Oa[Qa]);(Oa=f.search(c(a,y[r]),0))?(h.append(x[r]+": "),b[0]&&h.append("&nbsp;"+b[0].replace("'","2").replace("*","'")),h.append(tools.getSolutionSpan(Oa),
"<br>")):h.append(x[r]+": no solution found<br>")}}}(),ab=function(){function a(a,b){for(var c=a.split(""),f=e["RULB".indexOf(b[0])],h="? '".indexOf(b[1]),r=0;r<f.length;r++)mathlib.acycle(c,f[r],h);return c.join("")}var e=[[[5,9,22],[0,7,20],[1,8,18]],[[3,16,11],[1,14,6],[2,12,7]],[[4,23,15],[2,18,13],[0,19,14]],[[10,17,21],[8,12,19],[6,13,20]]],f;return function(e,h){f=f||new mathlib.gSolver(["????FF??RRR??L?L?L?DDDDD"],a,Na({R:0,U:1,L:2,B:3}," '"));z=kernel.parseScramble(e,"RULBrulb");e=[];for(var r=
0;r<z.length;r++)1==z[r][1]&&e.push("RULB".charAt(z[r][0])+" 2'".charAt(z[r][2]-1));var x=["D","L","R","F"],y=[["RULB","LUBR","BURL"],["URBL","LRUB","BRLU"],["RLBU","ULRB","BLUR"],["RBUL","UBLR","LBRU"]];for(r=0;4>r;r++){b=[];var Oa,Qa=0;a:for(;99>Qa;Qa++)for(var Ra=0;3>Ra;Ra++){var Ta=y[r][Ra];z=[];for(var Wa=0;Wa<e.length;Wa++)z.push("RULB"[Ta.indexOf(e[Wa][0])]+e[Wa][1]);if(Oa=f.search(c(a,"????FF??RRR??L?L?L?DDDDD"),Qa,Qa)){for(Wa=0;Wa<Oa.length;Wa++)Oa[Wa]=Ta["RULB".indexOf(Oa[Wa][0])]+Oa[Wa][1];
break a}}Oa?h.append(x[r]+": ",tools.getSolutionSpan(Oa),"<br>"):h.append(x[r]+": no solution found<br>")}}}();(function(){function a(a,b){var c=a.indexOf("-"),e=c>>2;c&=3;var f=a.split(""),h=~~b[1],r=[e<<2|c];if("V"==b[0]){if("$"==f[e<<2|h])return null;for(var x=c>h?-1:1;c!=h;)c+=x,r.push(e<<2|c)}else{if("$"==f[h<<2|c])return null;for(x=e>h?-1:1;e!=h;)e+=x,r.push(e<<2|c)}r.reverse();mathlib.acycle(f,r);return f.join("")}function c(a){var b=[];a=a.split("");for(var c=0;c<a.length;c++)"?"==a[c]&&(a[c]=
"-",b.push(a.join("")),a[c]="?");return b}function e(c,e){for(var f=[],h=0;h<e.length;h++)f[h]=c[e[h]];c=f.join("");for(h=0;h<b.length;h++)c=a(c,b[h]);return c}function f(a){do{var b=mathlib.rndPerm(a*a);var c=(a-1-~~(b.indexOf(b.length-1)/a))*(a-1);for(var e=0;e<b.length;e++)for(var f=e+1;f<b.length;f++)b[e]>b[f]&&b[e]!=b.length-1&&c++}while(0!=c%2);return b}function h(a,c){var h=+new Date,r=[],x=0;if(4==a){r[0]=f(4);for(var Oa=r[0],Qa=[],Pa=[0,4,8,12,1,5,9,13,2,6,10,14,3,7,11,15],Na=0;16>Na;Na++)Qa[Na]=
Pa[Oa[Pa[Na]]];r[1]=Qa;Oa=0;a:for(;99>Oa;Oa++)for(x=0;2>x;x++)if(Qa=r[x].indexOf(r[x].length-1),b=["V"+(Qa&3),"H"+(Qa>>2)],Qa=y.search(e("0123???????????-",r[x]),Oa,Oa)){b=b.concat(Qa);break a}Oa=z.search(e("01234???8???c??-",r[x]).replace(/[0123]/g,"$"),0);b=b.concat(Oa)}else if(3==a){Oa=f(3);Qa=[5,6,7,9,10,11,13,14,15];for(Pa=0;16>Pa;Pa++)r[Pa]=Qa[Oa[Qa.indexOf(Pa)]]||Pa;Qa=r.indexOf(r.length-1);b=["V"+(Qa&3),"H"+(Qa>>2)];r=[r]}Oa=$a.search(e("0123456789abcde-",r[x]).replace(/[012348c]/g,"$"),0);
b=b.concat(Oa);DEBUG&&console.log("[15p solver]",x,e("0123456789abcde-",r[x]),b.join(""),b.length,+new Date-h);Oa=c.slice(3==a?3:4);h=[];Pa=1==x?"VH":"HV";x=-1==Oa.indexOf("a")?["DR","UL"]:["￬￫","￪￩"];r=-1!=Oa.indexOf("m");Oa=-1!=Oa.indexOf("p");var w=[-1,-1];for(Qa=0;Qa<b.length;Qa++){var n=~~b[Qa][1],Ra=Pa.indexOf(b[Qa][0]);-1!=w[Ra]&&w[Ra]!=n&&(0<h.length&&h[h.length-1][0]==Ra?(Na=h[h.length-1],Na[1]+=n-w[Ra],0==Na[1]&&h.pop()):h.push([Ra,n-w[Ra]]));w[Ra]=n}for(Qa=0;Qa<h.length;Qa++){Na=h[Qa];
Pa=x[r!=0<Na[1]?0:1][Na[0]];Na=Math.abs(Na[1]);h[Qa]=[];if(Oa)h[Qa].push(Pa+Na);else for(;0<Na--;)h[Qa].push(Pa);h[Qa]=h[Qa].join(" ")}h.reverse();return h.join(" ").replace(/1/g,"")}var r=Na({V:0,H:1},"0123"),y=new mathlib.gSolver(c("0123????????????"),a,r),z=new mathlib.gSolver(c("$$$$4???8???c???"),a,r),$a=new mathlib.gSolver(["$$$$$567$9ab$de-"],a,r);scrMgr.reg(["15prp","15prap","15prmp"],h.bind(null,4))(["8prp","8prap","8prmp"],h.bind(null,3))})();var h=execMain(function(){function e(a){var b=
Xa[0].getBoundingClientRect(),c=a.offsetX/30*Xa[0].width/b.width;a=a.offsetY/30*Xa[0].height/b.height;for(b=0;6>b;b++)if(c>=3.3*Ua[b]&&c<=3.3*Ua[b]+3&&a>=3.3*Ya[b]&&a<=3.3*Ya[b]+3){var e=~~(c-3.3*Ua[b]),h=~~(a-3.3*Ya[b]);Va=Va.split("");Va[9*b+3*h+e]=n;Va=Va.join("");f(db,b,e,h,Va)}c>=Ua[6]&&c<=Ua[6]+5&&a>=Ya[6]&&a<=Ya[6]+2&&(e=~~(c-Ua[6]),h=~~(a-Ya[6]),n="URFDLB-XYZ".charAt(2*e+h),$.ctxDrawPolygon(db,w[n],fb,[30,1.5,1.5]));1==$a?Pa():2==$a&&Sa()}function f(a,b,c,e,f){$.ctxDrawPolygon(a,w[f[9*b+3*
e+c]],[[c,c,c+1,c+1],[e,e+1,e+1,e]],[30,3.3*Ua[b],3.3*Ya[b]])}function h(a){a=Qa.val();Qa.val("");kernel.blur();"input"==a?(a=prompt("U1U2...U9R1..R9F1..D1..L1..B1..B9",Va),null!=a&&(ob.exec(a)?r(a):logohint.push("Invalid Input"))):""!=a&&r(a)}function r(a){Va=a;a=db;var b=Va,c=kernel.getProp("imgSize")/48;Xa.width(39*c+"em");Xa.height(29*c+"em");Xa.attr("width",391);Xa.attr("height",87/9*30+1);for(c=0;6>c;c++)for(var e=0;3>e;e++)for(var h=0;3>h;h++)f(a,c,e,h,b);for(e=0;5>e;e++)for(h=0;2>h;h++)$.ctxDrawPolygon(a,
w["URFDLB-XYZ".charAt(2*e+h)],[[e,e,e+1,e+1],[h,h+1,h+1,h]],[30,7.25,.5]);$.ctxDrawPolygon(a,w[n],fb,[30,1.5,1.5]);1==$a?Pa():2==$a&&Sa()}function y(){if($a){var a=cb[1].searchNext(1E3,1E3);var b=kb.length+" sol(s), @"+~~((+new Date-eb)/1E3)+"s|"+cb[1].maxl+"f";a&&kb.push(a.join(" ")+" ("+a.length+"f)");a&&1==$a?(hb.html(kb.join("\n")),hb[0].scrollTop=hb[0].scrollHeight,lb=0):(hb.html(kb.join("\n")+"\n"+b),hb[0].scrollTop=hb[0].scrollHeight,lb=setTimeout(y,1))}}function Za(){cb[0]!=Va&&(cb[0]=Va,
cb[1]=new mathlib.gSolver([Va],a.move,Na({U:0,R:17,F:34,D:48,L:65,B:82})));var b=c(a.move,Va);cb[1].search(b,0,0);eb=+new Date;kb=[];y()}function Sa(){0==$a?(ab.val("Stop Solve!"),mb.prop("disabled",!0),$a=2):(ab.val("Batch Solve!"),mb.prop("disabled",!1),$a=0);kernel.blur();$a&&Za()}function Pa(){0==$a?(mb.val("Stop Solve!"),ab.prop("disabled",!0),$a=1):(mb.val("Single Solve!"),ab.prop("disabled",!1),$a=0);kernel.blur();$a&&Za()}var $a=0,Qa=$('<select style="font-size:0.75em;">'),ab=$('<input type="button" value="Batch Solve!" style="font-size:0.75em;">'),
mb=$('<input type="button" value="Single Solve!" style="font-size:0.75em;">'),hb=$('<textarea wrap=off rows="2" cols="30" style="font-size:0.75em;">'),kb=[],ib={"3x3x3":mathlib.SOLVED_FACELET,Empty:"----U--------R--------F--------D--------L--------B----","2x2x2":"----UU-UURR-RR-----FF-FF------------------------------","2x2x3":"---UUUUUURR-RR----FFFFFF-------------LL-LL------------",Cross:"----U--------R--R-----F--F--D-DDD-D-----L--L-----B--B-",XCross:"----U-------RR-RR-----FF-FF-DDDDD-D-----L--L-----B--B-",
EOLine:"-X-XUX-X-----R-------XFX-F--D-XDX-D-----L-------XBX-B-",Roux1:"---------------------F--F--D--D--D-----LLLLLL-----B--B",Domino:"UUUUUUUUU---RRR------FFF---UUUUUUUUU---RRR------FFF---","EO&CO":"XYXYUYXYX----R-------YFY---XYXYDYXYX----L-------YBY---",Corner:"U-U---U-UR-R---R-RF-F---F-FD-D---D-DL-L---L-LB-B---B-B"},Xa,db,Va=mathlib.SOLVED_FACELET,w={U:"#fff",R:"#f00",F:"#0d0",D:"#ff0",L:"#fa0",B:"#00f","-":"#777",X:"#0ff",Y:"#f0f",Z:"#000"},n="-",Ua=[1,2,1,1,0,3,7.25],Ya=[0,1,1,2,1,1,.5],fb=[[-.7,
-.7,.7,.7],[-.7,.7,.7,-.7]],ob=/^[URFDLBXYZ-]{54}$/,cb=["",null],eb=0,lb=0;$(function(){Xa=$("<canvas>");if(Xa[0].getContext){db=Xa[0].getContext("2d");Qa.append($("<option>").val("").html("Edit subset"));for(var a in ib)Qa.append($("<option>").val(ib[a]).html(a));Qa.append($("<option>").val("input").html("..."));r(ib.Cross)}});return function(a,c){z=kernel.parseScramble(a,"URFDLB");for(var f=0;f<z.length;f++)z[f]="URFDLB".charAt(z[f][0])+" 2'".charAt(z[f][2]-1);b=[];c.empty().append(Qa.unbind("change").change(h),
" ").append(ab.unbind("click").click(Sa),"").append(mb.unbind("click").click(Pa),"<br>").append(hb.empty(),"<br>").append(Xa.unbind("mousedown").bind("mousedown",e));$a&&(lb&&(clearTimeout(lb),lb=0),Za())}});execMain(function(){function b(b,c){if(c){c.empty();var x=$('<span class="sol"/>'),z=tools.getCurScramble();r=z[1];if("222face"==b&&tools.isPuzzle("222"))e(z[1],x);else if("333udf"==b&&tools.isPuzzle("333")&&/^[URFDLB 2']+$/.exec(z[1]))h(z[1],x);else if(b.startsWith("333")&&tools.isPuzzle("333")&&
/^[URFDLB 2']+$/.exec(z[1]))a.exec(b.slice(3),z[1],x);else if("sq1cs"==b&&tools.isPuzzle("sq1"))y(z[1],x);else if("skbl1"==b&&tools.isPuzzle("skb"))f(z[1],x);else if("pyrv"==b&&tools.isPuzzle("pyr"))ab(z[1],x);else{c.html(IMAGE_UNAVAILABLE);return}c.append(x)}}$(function(){tools.regTool("222face",TOOLS_SOLVERS+">"+TOOLS_222FACE,b.bind(null,"222face"));tools.regTool("333cf",TOOLS_SOLVERS+">Cross + F2L",b.bind(null,"333cf"));tools.regTool("333roux",TOOLS_SOLVERS+">Roux S1 + S2",b.bind(null,"333roux"));
tools.regTool("333petrus",TOOLS_SOLVERS+">2x2x2 + 2x2x3",b.bind(null,"333petrus"));tools.regTool("333zz",TOOLS_SOLVERS+">EOLine + ZZF2L",b.bind(null,"333zz"));tools.regTool("333222",TOOLS_SOLVERS+">2x2x2",b.bind(null,"333222"));tools.regTool("333eodr",TOOLS_SOLVERS+">EO + DR",b.bind(null,"333eodr"));tools.regTool("sq1cs",TOOLS_SOLVERS+">SQ1 S1 + S2",b.bind(null,"sq1cs"));tools.regTool("pyrv",TOOLS_SOLVERS+">Pyraminx V",b.bind(null,"pyrv"));tools.regTool("skbl1",TOOLS_SOLVERS+">Skewb Face",b.bind(null,
"skbl1"));tools.regTool("333udf",TOOLS_SOLVERS+">3x3x3 General",b.bind(null,"333udf"))})});return{rubiksCube:a}}();var scrHinter=execMain(function(c){function Na(a,b,e){var f=new c,r=new c;b&&f.init(b.ca,b.ea);b=99;f.isEqual(a)&&(b=0);for(var y,x=0;x<e.length;x++){var z=3*e[x][0];for(y=0;3>y;y++)if(c.EdgeMult(f,c.moveCube[z+y],r),c.CornMult(f,c.moveCube[z+y],r),r.isEqual(a)){b=y==e[x][2]-1?x+1:x;break}if(b==x)break;z=3*e[x][0]+e[x][2]-1;c.EdgeMult(f,c.moveCube[z],r);c.CornMult(f,c.moveCube[z],r);f.init(r.ca,r.ea)}if(99==b)return null;a=[];for(x=0;x<e.length;x++)z=e[x],0==b&&0==x&&(z=[z[0],z[1],(z[2]-y+7)%4]),
a.push((x==b?"`":"")+"URFDLB".charAt(z[0])+[null,"","2","'"][z[2]]);a=a.join(" ");b!=e.length&&(a+="`");return a=kernel.getConjMoves(a,!0)}var z=[],r=null,b=null,e=null,a=new c;return{setScramble:function(c){r=c;c=kernel.getConjMoves(c);c=kernel.parseScramble(c,"URFDLB");z=c.slice();e=b=null;a=new mathlib.CubieCube;for(var f=0;f<c.length;f++){var y=3*c[f][0]+c[f][2]-1;0>y||18<=y||a.selfMoveStr("URFDLB".charAt(c[f][0])+" 2'".charAt(c[f][2]-1))}},getScrCubie:function(){return a},checkScramble:function(b){return""==
r?!1:a.isEqual(b)},checkState:function(y){if(r&&(DEBUG||GiikerCube.isConnected())&&"333"==tools.getCurPuzzle()&&0==timer.getCurTime()){var f=null,ab=null;b&&(f=Na(y,b,e));if(null==f||-1==f.indexOf("`"))ab=Na(y,null,z),f=b=null;if(null==ab&&null==f){b=new c;b.init(y.ca,y.ea);f=new c;f.invFrom(y);var h=new c;c.EdgeMult(f,a,h);c.CornMult(f,a,h);e=scramble_333.genFacelet(h.toFaceCube());e=kernel.parseScramble(e,"URFDLB");f=Na(y,b,e)}y=f?r+"\n=> "+f:ab;kernel.pushSignal("scrfix",y+(-1==y.indexOf("`")?
' <span style="color:green">✔</span>':""))}}}},[mathlib.CubieCube]),giikerutil=execMain(function(c){function Na(){"n"!=kernel.getProp("giiVRC")&&"g"==kernel.getProp("input")?Va.css("font-size",""):Va.css("font-size","75%");Va.empty();Va.append($("<tr>").append($("<td colspan=2>").append($a)));GiikerCube.isConnected()||DEBUG&&ib?(Va.append($("<tr>").append(Xa,db)).append($("<tr>").append($("<td colspan=2>").append(Qa.unbind("click").click(y)))).append($("<tr>").append($("<td>").append(gb),$("<td>").append(mb))).append(kb),
$a.html(ib).addClass("click").unbind("click").click(Za),w()):$a.html(TOOLS_GIIKER+"<br>"+GIIKER_CONNECT).addClass("click").unbind("click").click(Wa)}function z(a){a&&(a.empty().append(Va),Na())}function r(a){Ua=a[0];Xa.html('<span style="font-family:iconfont;"></span> '+(Ua||"??")+"%");ib=a[1];$a.html(ib)}function b(){GiikerCube.isConnected()?(GiikerCube.getCube().getBatteryLevel().then(function(a){r(a)}),n=setTimeout(b,6E4)):n=0}function e(){bb&&(clearTimeout(bb),bb=0);kernel.getProp("giiAED")&&
(bb=setTimeout(function(){a:{var b=nb.slice(rb);if(1!=b.length%2){var e=[];e[b.length]=new c;for(var f=b.length-1;0<=f;f--)e[f]=new c,c.CubeMult(c.moveCube[b[f][0]],e[f+1],e[f]);for(f=1;3>f;f++){sb=0;if(a(b,0,f,new c,e)){b=f;break a}if(9999<sb)break}}b=99}99!=b&&(b=cb.toFaceCube(),2>=cubeutil.getProgress(b,"cfop")||(b=scramble_333.genFacelet(cb.toFaceCube()),10>b.length/3?DEBUG&&console.log("[giiker]","Possible error, gen="+b.replace(/ /g,"")+", ignore"):(DEBUG&&console.log("[giiker]","Almost error, gen="+
b.replace(/ /g,"")+", mark solved"),y())))},1E3))}function a(b,e,f,n,h){if(0==f)return n.isEqual((new c).invFrom(h[e]));for(var r=new c;e<b.length-1;e++){if(~~(b[e][0]/3)%3!=~~(b[e+1][0]/3)%3){var w=(new c).init(n.ca,n.ea);c.CubeMult(w,c.moveCube[b[e+1][0]],r);c.CubeMult(r,c.moveCube[b[e][0]],w);c.CubeMult(w,h[e+2],r);if(9999<++sb)break;if(r.edgeCycles()<f)var x=a(b,e+2,f-1,w,h);if(x)return!0}c.CubeMult(n,c.moveCube[b[e][0]],r);n.init(r.ca,r.ea)}return!1}function y(){lb.invFrom(ob);eb=mathlib.SOLVED_FACELET;
kernel.setProp("giiSolved",fb);rb=nb.length;wb=0;w();Ya(eb,["U "],[null,$.now()])}function f(a,f,h,r){var x=$.now();h=h||[x,x];ib!=r&&(ib=r,Na());fb=a;ob.fromFacelet(fb);c.EdgeMult(lb,ob,cb);c.CornMult(lb,ob,cb);eb=cb.toFaceCube();0<f.length&&(a=3*"URFDLB".indexOf(f[0][0])+" 2'".indexOf(f[0][1]),nb.push([a,h[0],h[1]]));0<wb&&Oa();10<nb.length&&(50<nb.length-rb&&0<rb&&nb[rb-1][2]<timer.getStartTime()&&(nb=nb.slice(rb),rb=0),a=ab(nb,!0),db.html('<span style="font-family:iconfont;"></span> '+Math.round(1E5*
(a[0]-1))/1E3+"%"));eb==mathlib.SOLVED_FACELET&&(Pa(),rb=nb.length,wb=0);w();0==n&&b();e();a=eb;zb&&(c.EdgeMult(zb,cb,yb),c.CornMult(zb,cb,yb),a=yb.toFaceCube());Ya(a,f,h);scrHinter.checkState(cb)}function ab(a,b){for(var c=0,e=0,f=0,n=0,h=0,r=0,w=0;w<a.length;w++){var x=a[w][b?2:1],y=a[w][b?1:2];null!=x&&null!=y&&(r++,c+=x,e+=y,f+=x*y,n+=x*x,h+=y*y)}h=r*h-e*e;n=r*n-c*c;w=r*f-c*e;f=.001>n?1:w/n;w=.001>n||.001>h?1:Math.pow(w,2)/n/h;return[f,1>r?0:e/r-f*c/r,w,3>r||.001>n?0:Math.sqrt(h/n*(1-w)/(r-2))]}
function h(a,b,c){if(0==a.length)return a;var e=ab(a),f=e[0];e=e[1];var n=Math.round(f*a[0][1]+e),h=Math.round(f*a[a.length-1][1]+e);null==b||b>n?b=n:null!=c&&c<h&&(b-=Math.min(n-b,h-c));for(c=0;c<a.length;c++)a[c][1]=Math.round(f*a[c][1]+e)-b;return a}function Oa(){for(var a=nb.length-rb,b="",c=0;c<wb;c++){var e=nb[c+rb][0];b+="URFDLB".charAt(~~(e/3))+" 2'".charAt(e%3)}var f="",n=[];for(c=wb;c<a;c++)n.push(nb[c+rb].slice());n=h(n);for(c=0;c<n.length;c++)e=n[c],f+="URFDLB".charAt(~~(e[0]/3))+" 2'".charAt(e[0]%
3)+"/*"+e[1]+"*/";Ra(gb,"Raw ("+a+")",b,f)}function Ra(a,b,c,e){c||e?a.attr("href","https://alg.cubing.net/?alg="+encodeURIComponent(e)+"&setup="+encodeURIComponent(c)):a.removeAttr("href");a.html(b)}function x(a,b){"disconnect"==a&&(logohint.push("Bluetooth disconnected!"),Na())}function Wa(){Ua=n=0;ib=null;fb=mathlib.SOLVED_FACELET;ob=new c;cb=new c;eb=fb;lb=new c;nb=[];rb=0;db.html('<span style="font-family:iconfont;"></span> 0%');Ra(gb,"Raw(N/A)");Ra(mb,"Pretty(N/A)");fb=kernel.getProp("giiSolved",
mathlib.SOLVED_FACELET);ob.fromFacelet(fb);lb.invFrom(ob);GiikerCube.setCallback(f);GiikerCube.setEventCallback(x);return GiikerCube.isConnected()?Promise.resolve():GiikerCube.init().then(function(){logohint.push("Bluetooth successfully connected!")})}function Ta(){return GiikerCube.isConnected()?GiikerCube.stop().then(function(){x("disconnect")}):Promise.resolve()}function Za(){GiikerCube.isConnected()&&confirm("Disconnect?")&&Ta()}function Sa(a,b){if("scrambling"==a)vb="";else if("scramble"==a||
"scrambleX"==a){var c=b[0];vb=b[1];"333"!=tools.puzzleType(c)&&(vb="");scrHinter.setScramble(vb);scrHinter.checkState(cb)}else"property"==a?0<=["giiVRC","imgSize"].indexOf(b[0])?Na():/^(preScrT?|isTrainScr)$/.exec(b[0])&&(scrHinter.setScramble(vb),scrHinter.checkState(cb)):"timestd"!=a||b[4]||(ub=[timer.getStartTime(),b[0][1],b[1]],setTimeout(Pa,0))}function Pa(){if(ub){var a=ub[0],b=nb.length,c=ub[2];0<b&&nb[b-1][2]>ub[0]+ub[1]+1E3&&(ub=null);for(var e=nb.length-1;0<=e&&!(nb[e][2]<a-500);e--)b=e;
if(b!=nb.length){a=new mathlib.CubieCube;var f=[],n=mathlib.CubieCube.rotMulI[0][kernel.getPreConj()];for(e=b;e<nb.length;e++){b=nb[e].slice();var r=mathlib.CubieCube.rotMulM[n][b[0]];b[0]="URFDLB".charAt(~~(r/3))+" 2'".charAt(r%3);f.push(b);a.selfMoveStr(b[0])}f=h(f);e=cubeutil.moveSeq2str(f);kernel.pushSignal("giirecons",[c,[e,"333"]]);f=(c||"").split(" ");c=new mathlib.CubieCube;for(e=0;e<f.length;e++)c.selfMoveStr(f[e]);e=new mathlib.CubieCube;e.invFrom(a);c.toFaceCube()==e.toFaceCube()&&(DEBUG&&
console.log("[bluetooth] recons clear, cube solved"),ub=null)}}}var $a=$("<span></span>"),Qa=$("<span>"+GIIKER_RESET+"</span>").addClass("click"),gb=$('<a target="_blank">Raw(N/A)</a>').addClass("click"),mb=$('<a target="_blank">Pretty(N/A)</a>').addClass("click"),hb=$("<canvas>").css({display:"block","box-sizing":"content-box",margin:"auto",padding:"5px"}),kb=$("<tr>").append($('<td colspan=2 style="padding:0;">').append(hb)),ib=null,Xa=$("<td>").html('<span style="font-family:iconfont;"></span> ??%'),
db=$("<td>").html('<span style="font-family:iconfont;"></span> 0%'),Va=$('<table class="table">'),w=function(){var a=[],b,c=[[1,-.5,1.5,0,.5,0],[.5,0,3,-.5,1,1.5],[1,0,0,0,1,1.5],[1,.5,5.5,0,.5,0],[-.5,0,7,-.5,-1,4.5],[-1,0,10,0,-1,4.5]];return function(){if(hb)if("n"!=kernel.getProp("giiVRC")&&"g"==kernel.getProp("input"))kb.hide();else{a=kernel.getProp("colcube").match(/#[0-9a-fA-F]{3}/g);kb.show();b=hb[0].getContext("2d");var e=kernel.getProp("imgSize")/60;hb.width(10/4.5*21*e+"em");hb.height(21*
e+"em");hb.attr("width",300);hb.attr("height",135);for(e=0;6>e;e++){for(var f=e,n=eb,h=c[f].slice(),r=0;r<h.length;r++)h[r]*=30;for(r=0;3>r;r++)for(var w=0;3>w;w++)$.ctxDrawPolygon(b,a["DLBURF".indexOf(n[3*(3*f+w)+r])],[[r,r,r+1,r+1],[w,w+1,w+1,w]],h)}}}}(),n=0,Ua=0,Ya=$.noop,fb=mathlib.SOLVED_FACELET,ob=new c,cb=new c,eb=fb,lb=new c,bb=0,sb=0,nb=[],rb=0,vb,ub=null,wb=0,zb=null,yb=new c;$(function(){kernel.regListener("giiker","scramble",Sa);kernel.regListener("giiker","scrambling",Sa);kernel.regListener("giiker",
"scrambleX",Sa);kernel.regListener("giiker","timestd",Sa);kernel.regListener("giiker","property",Sa,/^(?:giiVRC|imgSize|preScrT?|isTrainScr)$/);tools.regTool("giikerutil",TOOLS_GIIKER,z)});return{setCallback:function(a){Ya=a},markSolved:y,checkScramble:function(){return scrHinter.checkScramble(cb)},markScrambled:function(a){var b=cb;a&&(b=scrHinter.getScrCubie());b.isEqual(cb)||(DEBUG&&console.log("[bluetooth] scramble equal, start hack!"),zb=new mathlib.CubieCube,yb.invFrom(cb),c.EdgeMult(b,yb,zb),
c.CornMult(b,yb,zb),rb=nb.length,Ya(b.toFaceCube(),["U "],[null,$.now()]));wb=nb.length-rb;Oa();Ra(mb,"Pretty(N/A)")},init:Wa,stop:Ta,isSync:function(){return null==zb},reSync:function(){zb&&(zb=null,Ya(eb,["U "],[null,$.now()]))},tsLinearFix:h,updateBattery:r,setLastSolve:function(a){Ra(mb,"Pretty",kernel.getConjMoves(vb),a)}}},[mathlib.CubieCube]);var metronome=execMain(function(){function c(a){return 99<a?a:" "+a}function Na(a){a?(a.empty().append("BPM: ",h,Ra,"<br />").append("Vol: ",Oa,x,"<br />",ab,"<br />").append("<br />",$("<label>").append(Za,'<span class="click"> Beep at</span>'),"<br />",Ta),h.unbind().on("input",function(){$.waitUser.call();f&&(Ra.html(c(h.val())),r())}),Oa.unbind().on("input",function(){$.waitUser.call();f&&(x.html(c(Oa.val())),Wa.gain.value=Oa.val()/100)}),ab.html(Sa?"Stop!":"Start!"),ab.unbind().click(function(){$.waitUser.call();
Sa=!Sa;ab.html(Sa?"Stop!":"Start!");r()}),z()):(null!=Pa&&(clearInterval(Pa),Pa=null),Sa=!1)}function z(){Za.unbind("change").change(e).prop("checked",kernel.getProp("beepEn"));Ta.unbind("change").change(e).val(kernel.getProp("beepAt"));e()}function r(){null!=Pa&&(clearInterval(Pa),Pa=null);if(Sa){var a=6E4/~~h.val();Pa=setInterval(b,a)}}function b(a){if(f){var b=f.createOscillator();b.type="sine";b.frequency.value=a||440;b.connect(Wa);b.start(f.currentTime);b.stop(f.currentTime+.1)}}function e(b){b&&
$.waitUser.call();Za.prop("checked")?a(Ta.val()):null!=$a&&(clearInterval($a),$a=null);kernel.setProp("beepEn",Za.prop("checked"));kernel.blur()}function a(a){null!=$a&&(clearInterval($a),$a=null);a=a.split(",");for(var b=0;b<a.length;b++)a[b]=~~(1E3*a[b].trim())/1E3;a=a.filter(Number);a.sort(function(a,b){return a-b});Qa=a;Ta.val(a.join(","));kernel.setProp("beepAt",a.join(","));$a=setInterval(y,100)}function y(){var a=~~timer.getCurTime()/1E3;if(0==a)gb=0;else{for(var c=!1;gb<Qa.length&&a>Qa[gb]-
.05;)++gb,c=!0;c&&b(550)}}var f,ab=$('<span style="display:inline-block; text-align:center; width:100%;"/>').addClass("click"),h=$('<input type="range" value="60" min="10" max="360" style="width:7em;" />'),Oa=$('<input type="range" value="30" min="0" max="100" style="width:7em;" />'),Ra=$("<span />").html(" 60"),x=$("<span />").html(" 30"),Wa,Ta=$('<input type="text" style="width:7em;" />'),Za=$('<input type="checkbox" />'),Sa=!1,Pa=null,$a=null,Qa=[],gb=0;$(function(){kernel.regProp("tools","beepEn",
-6,"Beep Enable",[!1]);kernel.regProp("tools","beepAt",-6,"Beep At",["5,10,15,20"]);var a=window.AudioContext||window.webkitAudioContext;void 0!==a&&($.waitUser.reg(function(){f=new a;Wa=f.createGain();Wa.gain.value=.3;Wa.connect(f.destination)}),tools.regTool("mtrnm",TOOLS_METRONOME,Na));z()});return{playTick:b}});var onlinecomp=execMain(function(){function c(a,b){for(;kb.length>b;)kb.pop().remove();var e=a;if(-1!=ib.indexOf(e))e=null;else{var f=[];e+="|";for(var n=e.length,h=$('<select style="max-width: unset;">'),r=0;r<ib.length;r++)if(ib[r].startsWith(e)){var w=ib[r].slice(n).split("|",1)[0];-1==f.indexOf(w)&&(f.push(w),h.append($("<option>").val(w).html(w)))}e=0==f.length?null:h.change(Na)}e&&(kb[b]=e,Pa.append(kb[b]),c(a+"|"+kb[b].val(),b+1))}function Na(a){a=$(a.target).prevAll("select").length;for(var b=
"",e=0;e<=a;e++)b=b+"|"+kb[e].val();c(b,a+1);f();b=="|"+OLCOMP_UPDATELIST+"..."&&z()}function z(){Sa.val("...");$.post("https://cstimer.net/comp.php",{action:"list"},function(a){ib=[];a=JSON.parse(a).data;for(var b=0;b<a.length;b++){var e=a[b].fullname;Xa[e]=a[b].name;for(var n=JSON.parse(a[b].value),h=0;h<n.length;h++)ib.push("|"+e+"|"+n[h])}ib.push("|"+OLCOMP_UPDATELIST+"...");Xa[OLCOMP_UPDATELIST+"..."]="update";c("",0);f();Sa.hide()}).error(function(){logohint.push("Network Error");Sa.val(OLCOMP_UPDATELIST)})}
function r(){for(var a="",b=0;b<kb.length;b++)a+="|"+kb[b].val();if(-1==ib.indexOf(a))alert("Invalid Input");else return b=a.slice(1).split("|",1)[0],a=a.slice(b.length+2),b=Xa[b],[b,a]}function b(){var a=r();$.post("https://cstimer.net/comp.php",{action:"scramble",comp:a[0],path:a[1]},function(a){a=JSON.parse(a);0==a.retcode&&a.data?(n=a=a.data,Ua=$.map(a,function(a){return(a=/^\$T([a-zA-Z0-9]+)\$\s*(.*)$/.exec(a))?scramble.getTypeName(a[1]):"???"}),f(!0),kernel.setProp("scrType","remoteComp")):
logohint.push(a.reason||"Server Error")}).error(function(){logohint.push("Network Error")})}function e(){var b=prompt(OLCOMP_SUBMITAS,exportFunc.getDataId("locData","compid"));if(null==b)return!1;if(!exportFunc.isValidId(b))return alert(EXPORT_INVID),!1;localStorage.locData=JSON.stringify({id:exportFunc.getDataId("locData","id"),compid:b});a();return b}function a(){Wa.empty().append("ID: ");Ta.empty();Za.empty();if(exportFunc.getDataId("wcaData","cstimer_token")){var b=exportFunc.getDataId("wcaData",
"wca_me").wca_id;Ta.append(b||"WCA Account"," (WCA)").click(function(){exportFunc.logoutFromWCA(!0);a()});Wa.append(Ta)}else Ta.append(EXPORT_LOGINWCA),Ta.click(function(){location.href=exportFunc.wcaLoginUrl}),(b=exportFunc.getDataId("locData","compid"))?Za.append(b+" ("+OLCOMP_ANONYM+")"):Za.append("N/A ("+OLCOMP_ANONYM+")"),Wa.append(Za.unbind("click").click(e)," | ",Ta)}function y(b,e){!b||db?db=!!b:(b.empty().append($('<div style="font-size: 0.75em; text-align: center;">').append(Wa,Sa,Pa).append($a).append(Qa,
" ",gb," ").append($("<label>").append(hb,OLCOMP_WITHANONYM)," ",mb)),c("",0),a(),f(),db=!0)}function f(a,b){Va=[];a||(n=[],Ua=[]);b||(w=!1);ab()}function ab(){Qa.unbind("click");gb.unbind("click");mb.unbind("click").click(Ra);if(2>kb.length)Qa.attr("disabled",!0).val(OLCOMP_START),gb.attr("disabled",!0);else{$a.empty();if(0==Ua.length)kb[0].val().startsWith("*")||kb[0].val().startsWith("+")||w?w?Qa.attr("disabled",!0).val(OLCOMP_SUBMIT):Qa.attr("disabled",!0).val(OLCOMP_START):Qa.removeAttr("disabled").val(OLCOMP_START).click(b);
else{for(var a=0;a<Ua.length;a++)/^\$T([a-zA-Z0-9]+)\$\s*(.*)$/.exec(Ua[a]),$a.append(a+1+". "+(Va[a]?stats.pretty(Va[a][0]):Ua[a]),"<br>");Va.length!=Ua.length||w?Qa.attr("disabled",!0):(Qa.removeAttr("disabled"),Qa.val(OLCOMP_SUBMIT).click(h))}gb.removeAttr("disabled").click(Oa)}kernel.blur()}function h(){if(!w){var a=exportFunc.getDataId("wcaData","cstimer_token")||exportFunc.getDataId("locData","compid")||e();if(a){var b=r();$.post("https://cstimer.net/comp.php",{action:"submit",comp:b[0],path:b[1],
uid:a,value:JSON.stringify(Va)},function(a){'{"retcode":0}'==a?(w=!0,logohint.push("Submitted")):logohint.push("Network Error");ab()}).error(function(){logohint.push("Network Error")})}}}function Oa(){if(0==Va.length||w||confirm(OLCOMP_ABORT)){f(!1,!0);var a=r(),b=hb.prop("checked")?1:0;$.post("https://cstimer.net/comp.php",{action:"result",comp:a[0],path:a[1],anonym:b},function(a){try{a=JSON.parse(a)}catch(zb){a={}}if(0!==a.retcode)logohint.push("Server Error");else{var b=$.sha256("cstimer_public_salt_"+
exportFunc.getDataId("locData","compid")),c=(exportFunc.getDataId("wcaData","wca_me")||{}).wca_id,e=a.scramble;a=$.map(a.data,function(a){var b=JSON.parse(a.value);if(5==b.length){var c=new TimeStat([5],b.length,function(a){return-1==b[a][0][0]?-1:b[a][0][0]+b[a][0][1]});c.getAllStats();return{uid:a.uid,wca_id:a.wca_id,value:b,ao5:c.lastAvg[0][0],bo5:c.bestTime}}});a.sort(function(a,b){var c=TimeStat.dnfsort(a.ao5,b.ao5);return 0==c?TimeStat.dnfsort(a.bo5,b.bo5):c});for(var f=['<table class="table"><tr><th></th><th>User</th><th>ao5</th><th>bo5</th><th>Results</th></tr>'],
n=0;n<a.length;n++){var h=a[n].uid,r=a[n].value,w=a[n].ao5,x=a[n].bo5,y=a[n].wca_id;f.push("<tr><td>"+(n+1)+"</td>");void 0!==y?(h=y?'<a target="_blank" href="https://www.worldcubeassociation.org/persons/'+y+'">'+y+"</a>":OLCOMP_WCAACCOUNT,f.push(y==c?"<th>"+OLCOMP_ME+":"+h+"</th><td>":"<td>"+h+"</td><td>")):f.push(h==b?"<th>"+OLCOMP_ME+"</th><td>":"<td>"+OLCOMP_ANONYM+"</td><td>");f.push(kernel.pretty(w)+"</td><td>"+kernel.pretty(x)+"</td><td>");for(h=0;h<r.length;h++)4<r[h].length?(r[h][1]=scramble.scrStd("",
e[h]||"")[1],f.push('<a target="_blank" class="click" href="'+stats.getReviewUrl(r[h])+'">'+stats.pretty(r[h][0])+"</a> ")):f.push(stats.pretty(r[h][0])+" ");f.push("</td>");f.push("</tr>")}f.push("</table>");$a.empty().html(f.join(""))}}).error(function(){logohint.push("Network Error")})}}function Ra(){if(0==Va.length||w||confirm(OLCOMP_ABORT)){f(!1,!0);var a=exportFunc.getDataId("wcaData","cstimer_token")||exportFunc.getDataId("locData","compid")||e();a&&$.post("https://cstimer.net/comp.php",{action:"myresult",
uid:a},function(a){try{a=JSON.parse(a)}catch(bb){a={}}if(0!==a.retcode)logohint.push("Server Error");else{a=a.data;for(var b=['<table class="table"><tr><th></th><th>Comp.</th><th>ao5</th><th>bo5</th><th>Results</th></tr>'],c=0;c<a.length;c++){var e=JSON.parse(a[c].value);if(5!=e.length)return;var f=new TimeStat([5],e.length,function(a){return-1==e[a][0][0]?-1:e[a][0][0]+e[a][0][1]});f.getAllStats();b.push("<tr><td>"+(c+1)+"</td>");b.push("<td>"+a[c].fullname+"|"+a[c].path+"</td>");b.push("<td>"+kernel.pretty(f.lastAvg[0][0])+
"</td>");b.push("<td>"+kernel.pretty(f.bestTime)+"</td><td>");for(f=0;f<e.length;f++)4<e[f].length?(e[f][1]=scramble.scrStd("",JSON.parse(a[c].scramble)[f]||"")[1],b.push('<a target="_blank" class="click" href="'+stats.getReviewUrl(e[f])+'">'+stats.pretty(e[f][0])+"</a> ")):b.push(stats.pretty(e[f][0])+" ");b.push("</td>");b.push("</tr>")}b.push("</table>");$a.empty().html(b.join(""))}}).error(function(){logohint.push("Network Error")})}}function x(b,c){if(db)if("export"==b)a();else{c=JSON.parse(JSON.stringify(c));
var e=c[1];c[1]="";c[2]="";if("timestd"==b)for(var f=Va.length;f<n.length;f++){var h=scramble.scrStd("",n[f])[1];if(h!=e)c[0]=[-1,1],Va.push(c);else{Va.push(c);break}}else if("timepnt"==b)for(f=0;f<Va.length;f++)if(h=scramble.scrStd("",n[f])[1],h==e){Va[f]=c;break}ab()}}var Wa=$("<div>"),Ta=$('<span class="click">'),Za=$('<span class="click">'),Sa=$('<input type="button">').val(OLCOMP_UPDATELIST).click(z),Pa=$("<div>"),$a=$('<div class="noScrollBar" style="max-height: 8em; overflow-y: auto;">'),Qa=
$('<input type="button">'),gb=$('<input type="button">').val(OLCOMP_VIEWRESULT),mb=$('<input type="button">').val(OLCOMP_VIEWMYRESULT),hb=$('<input type="checkbox">'),kb=[],ib=[],Xa={},db=!1,Va=[],w=!1,n=[],Ua=[];$(function(){tools.regTool("onlinecomp",OLCOMP_OLCOMP,y);kernel.regListener("onlinecomp","timestd",x);kernel.regListener("onlinecomp","timepnt",x);kernel.regListener("onlinecomp","export",x,/^account$/)});return{getScrambles:function(){return 0==Va.length?Promise.resolve(n.slice()):Promise.reject()}}});var battle=execMain(function(){function c(a){$a&&Qa&&Sa.isConnected()&&(!a&&Pa&&(clearTimeout(Pa),Pa=0),a&&Sa.pushMsg({action:"heartBeat",roomId:$a,accountId:Qa}),Pa=setTimeout(c.bind(null,!0),15E3))}function Na(a){if(a||!$a){a=prompt(TOOLS_BATTLE_JOINALERT+" [a-zA-Z0-9]",$a||100+~~(900*Math.random()));if(!/^[0-9a-zA-Z]{3,20}$/.exec(a)){alert("invalid room ID");return}$a=a}Sa.isConnected()?r()&&$a&&Sa.remoteCall({action:"joinRoom",roomId:$a,accountId:Qa,scramble:scramble_333.getRandomScramble().trim()}).then(function(a){DEBUG&&
console.log("[battle] joinRoom ret=",JSON.stringify(a));c()}):Sa.connect().then(Na.bind(null,!1))}function z(b){r(!0)&&$a&&(b||confirm(TOOLS_BATTLE_LEAVEALERT+"?"))&&(Sa.remoteCall({action:"leaveRoom",roomId:$a,accountId:Qa}).then(Sa.close,Sa.close),gb=null,a(),c())}function r(a){return!gb&&a||!Sa.isConnected()?Qa=null:Qa=exportFunc.getDataId("wcaData","cstimer_token")||exportFunc.getDataId("locData","compid")||f()}function b(a){r(!0)&&$a&&Sa.remoteCall({action:"updateStatus",roomId:$a,accountId:Qa,
status:a}).then(function(a){DEBUG&&console.log("[battle] update status ret=",a);c()})}function e(a,b){if(r(!0)&&$a){var e=a[1];if(e==gb.cur[1]||e==gb.last[1])if(!mb||mb[1]!=a[1]||b&&a[0][1]==mb[0][1])mb=a,Sa.remoteCall({action:"uploadSolve",roomId:$a,accountId:Qa,solveId:e==gb.cur[1]?gb.cur[0]:gb.last[0],time:a,scramble:scramble_333.getRandomScramble().trim()}).then(function(a){DEBUG&&console.log("[battle] upload solve ret=",a);c()})}}function a(){DEBUG&&console.log("[battle] render room",gb);gb?
Oa.hide():Oa.show();hb.empty();var a=TOOLS_BATTLE_TITLE.split("|").slice(0,3);a.splice(1,0,"ELO");hb.append($("<tr>").append($("<td colspan=5>").append(Wa[0]+": ",Ta,"&nbsp;",Za)));hb.append("<tr><td colspan=2>"+a.join("</td><td>")+"</td></tr>");Ta.unbind("click");Za.unbind("click");if(gb){Ta.removeClass("click").html(gb.roomId);Za.click(z.bind(null,!1)).show();a=gb.players;for(var b=gb.solves,c={},e=!1,f=("???|"+TOOLS_BATTLE_STATUS).split("|"),h=0;h<b.length;h++){var r=b[h],x=r.accountId;c[x]=c[x]||
{};c[x][r.solveId]=[r.time,r.soltime];r.solveId==gb.cur[0]&&(e=!0)}a.sort(function(a,b){return b.elo-a.elo});b=gb.cur[0];for(h=0;h<a.length;h++){r=a[h];x=r.accountId;-1!=x.indexOf("|")?x="<b>"+x.split("|")[1]+"</b>":10<x.length&&(x=x.slice(0,4)+"..."+x.slice(x.length-3));var y=(c[r.accountId]||{})[b],Qa="SOLVED"==r.status,Pa=(c[r.accountId]||{})[b-1];Pa=(Pa=Qa?y:Pa)?stats.pretty(Pa[0],!0):"N/A";e&&!Qa&&(Pa='<span style="color:#888">'+Pa+"</span>");hb.append("<tr><td>"+(h+1)+"</td><td>"+x+"</td><td>"+
r.elo+"</td><td>"+f[["READY","INSPECT","SOLVING","SOLVED","LOSS"].indexOf(r.status)+1]+"</td><td>"+Pa+"</td></tr>")}}else hb.append('<tr><td colspan=5 style="width:0;">'+TOOLS_BATTLE_INFO+"</td></tr>"),Ta.addClass("click").html(Wa[1]).click(Na.bind(null,!0)),Za.hide()}function y(){Oa.empty().append("ID: ");Ra.empty();x.empty();if(exportFunc.getDataId("wcaData","cstimer_token")){var a=exportFunc.getDataId("wcaData","wca_me").wca_id;Ra.append(a||"WCA Account"," (WCA)").click(function(){exportFunc.logoutFromWCA(!0);
y()});Oa.append(Ra)}else Ra.append(EXPORT_LOGINWCA),Ra.click(function(){location.href=exportFunc.wcaLoginUrl}),a=exportFunc.getDataId("locData","compid"),x.append((a||"N/A")+" ("+OLCOMP_ANONYM+")"),Oa.append(x.unbind("click").click(f)," | ",Ra)}function f(){var a=prompt(OLCOMP_SUBMITAS,exportFunc.getDataId("locData","compid"));if(null==a)return!1;if(!exportFunc.isValidId(a))return alert(EXPORT_INVID),!1;localStorage.locData=JSON.stringify({id:exportFunc.getDataId("locData","id"),compid:a});y();return a}
function ab(b,c){!b||kb?(kb=!!b,b||Sa.close()):(b.empty().append($('<div style="font-size: 0.75em; text-align: center;">').append(Oa,hb)),y(),a(),kb=!0)}function h(a,c){if(kb)if("export"==a)y();else if("timerStatus"==a){var f="READY";0<c?f="SOLVING":-2>c&&(f="INSPECT");f!=ib&&(ib=f,b(f))}else c=JSON.parse(JSON.stringify(c)),"timestd"==a?e(c,!1):"timepnt"==a&&e(c,!0)}var Oa=$("<div>"),Ra=$('<span class="click">'),x=$('<span class="click">'),Wa=TOOLS_BATTLE_HEAD.split("|"),Ta=$('<span class="click">').html(Wa[1]),
Za=$('<span class="click">').html("[X]"),Sa=function(){function a(a){for(h=!0;0<z.length;)z.pop()()}function b(a){h=!1;y&&y("close")}function c(a){h=!1;y&&y("error")}function e(a){a=JSON.parse(a.data);var b=a.msgid;if(b in x){var c=x[b];delete x[b];c(a)}else y&&y("msg",a)}var f,h=!1,r=1,x=[],y=null,z=[];return{connect:function(){return h?Promise.resolve():new Promise(function(n,h){z.push(n);f=new WebSocket("wss://cstimer.net/ws20230409");f.onopen=a;f.onclose=b;f.onerror=c;f.onmessage=e})},close:function(){if(!h)return-1;
f.close();h=!1;return 0},isConnected:function(){return h},setCallback:function(a){y=a},pushMsg:function(a){if(!h)return-1;f.send(JSON.stringify(a));return 0},remoteCall:function(a){return new Promise(function(b,c){h?(a.msgid=r,x[r]=b,r++,f.send(JSON.stringify(a)),setTimeout(function(a){a(-2)}.bind(null,c),5E3)):c(-1)})}}}(),Pa=0,$a,Qa,gb,mb=[[-1,1],null];Sa.setCallback(function(b,c){"msg"==b?"roomInfo"in c&&(gb=c.roomInfo,gb&&gb.cur[1]&&gb.cur[1]!=mb[1]&&(Xa&&Xa(["$T333$"+gb.cur[1]]),Xa=null,"remoteBattle"!=
kernel.getProp("scrType")&&kernel.setProp("scrType","remoteBattle"))):(gb=null,"remoteBattle"==kernel.getProp("scrType")&&kernel.pushSignal("ctrl",["scramble","next"]));a()});var hb,kb=!1,ib="READY",Xa;$(function(){hb=$('<table class="table">');tools.regTool("battle",TOOLS_BATTLE,ab);kernel.regListener("battle","timestd",h);kernel.regListener("battle","timepnt",h);kernel.regListener("battle","timerStatus",h);kernel.regListener("battle","export",h,/^account$/)});return{getScrambles:function(){return gb?
gb.cur[1]&&gb.cur[1]!=mb[1]?Promise.resolve(["$T333$"+gb.cur[1]]):new Promise(function(a,b){Xa=a}):Promise.reject()}}});execMain(function(){function c(){var a=prompt(TOOLS_SYNCSEED_INPUTA);kernel.blur();null!=a&&(/^[a-zA-Z0-9]+$/.exec(a)?Na(a):logohint.push("Invalid Value"))}function Na(b){h=!0;Oa=Oa||mathlib.getSeed();mathlib.setSeed(0,"syncseed"+b);scramble.setCacheEnable(!1);a.html(b).addClass("click");kernel.pushSignal("ctrl",["scramble","next"])}function z(){h&&confirm(TOOLS_SYNCSEED_DISABLE)&&(h&&(h=!1,mathlib.setSeed(0,Oa[1]+""+Oa[0]),Oa=void 0,scramble.setCacheEnable(!0),kernel.pushSignal("ctrl",["scramble",
"next"])),a.html("N/A").unbind("click").removeClass("click"))}function r(){Na(""+~~((new Date).getTime()/1E3/30));kernel.blur()}function b(){alert(TOOLS_SYNCSEED_HELP)}function e(e){e&&e.empty().append(TOOLS_SYNCSEED_SEED,y.unbind("click").click(b),": ",a.unbind("click").click(z)).append("<br><br>",f.unbind("click").click(c)).append("<br>",ab.unbind("click").click(r))}var a=$("<span>").html("N/A"),y=$('<span class="click">').html("[?]"),f=$('<input type="button">').val(TOOLS_SYNCSEED_INPUT),ab=$('<input type="button">').val(TOOLS_SYNCSEED_30S),
h=!1,Oa;$(function(){tools.regTool("syncseed",TOOLS_SYNCSEED,e)})});var bldhelper=execMain(function(){function c(a,b){if(void 0==b){for(var e=[],f=0;f<a;f++){var n=c(a,f+1);e.push.apply(e,n)}return e}if(a<b||1>a||1>b)return[];if(a==b)return[mathlib.valuedArray(a,1)];e=c(a-1,b-1);for(f=0;f<e.length;f++)e[f].push(1);var h=c(a-b,b);for(f=0;f<h.length;f++){n=h[f];for(var r=0;r<n.length;r++)n[r]++}return e.concat(h)}function Na(a,b,c,e,f,h,r,w,x){for(var n=0,y=0,z=0,Qa=0;Qa<w.length;Qa++)1==w[Qa]?y++:(z+=w[Qa],n++);x&&3==(a&3)&&(a&=-3);var Pa=0,Oa=null;for(Qa=0;3>Qa;Qa++)if(0!=
(a>>Qa&1)){var Na=n-(Qa>>1),Ra=z+n-2*(Qa>>1);if(!(Na<f[0]||Na>f[1]||Ra<h[0]||Ra>h[1])){Ra=1==Qa?1:0;var Ua=c+Ra;Na=b+c+(2>Qa?1:0);if(!(y<Math.max(Na,e[0]+Ra)||c>e[1])){var Sa=y-Na,Ta=0,Va=null,Wa=0;for(Ra=Math.max(e[0]-c,0);Ra<=Math.min(e[1]-c,Sa);Ra++){var Xa=n+y;var Ya=r,$a=y-Ua-Ra,cb=Ua+Ra;if($a+cb>Xa)Xa=[0,null];else{for(var Za=0,ab=[],eb=$a;eb<Xa-1;eb++){var bb=eb<$a+cb?1:0;bb=mathlib.rn(Ya-bb)+bb;ab.push(bb);Za+=bb}if($a+cb<Xa)ab.push((Ya*Xa-Za)%Ya),Xa=[Math.pow(Ya-1,cb)*Math.pow(Ya,Xa-$a-cb-
1),mathlib.valuedArray($a,0).concat(ab)];else{var lb=mathlib.valuedArray(Ya,0);lb[0]=1;for(eb=0;eb<cb;eb++){bb=mathlib.valuedArray(Ya,0);for(var db=1;db<Ya;db++)for(var fb=0;fb<Ya;fb++)bb[(db+fb)%Ya]+=lb[fb];lb=bb}if(0==lb[0])Xa=[0,null];else{for(Za=(Ya*Xa-Za)%Ya;0==Za&&0<cb;){Za=0;ab=[];for(eb=$a;eb<Xa-1;eb++)bb=eb<$a+cb?1:0,bb=mathlib.rn(Ya-bb)+bb,ab.push(bb),Za+=bb;Za=(Ya*Xa-Za)%Ya}ab.push(Za);Xa=[lb[0],mathlib.valuedArray($a,0).concat(ab)]}}}$a=Xa[0]*mathlib.Cnk[Sa][Ra];Ta+=$a;mathlib.rndHit($a/
Ta)&&(Va=Xa[1],Wa=Ra)}if(0!=Ta||x){Ta*=Math.pow(r,z-n);Ua=w.slice(0,w.length-Na);Ra=y+z-Na;for(Xa=1;0<Ua.length;){Ya=Ua.pop();$a=1;Xa*=mathlib.Cnk[Ra][Ya]*mathlib.fact[Ya-1];for(Ra-=Ya;Ua[Ua.length-1]==Ya;)Ua.pop(),$a++,Xa*=mathlib.Cnk[Ra][Ya]*mathlib.fact[Ya-1],Xa/=$a,Ra-=Ya;1==Ya&&2==Qa&&(Xa*=z,Xa/=y+z-Na)}Ra=(x?1:Ta)*Xa;Pa+=Ra;if(mathlib.rndHit(Ra/Pa)){Ta=[];for(Ra=0;Ra<n;Ra++){Oa=Va.pop();Ya=w[Ra];for($a=0;$a<Ya-1;$a++)Xa=mathlib.rn(r),Ta.push(Xa),Oa+=r-Xa;Ta.push(Oa%r)}Oa=mathlib.rndPerm(Sa);
for(Ra=0;Ra<Oa.length;Ra++)Oa[Ra]<Wa?Ta.push(Va.pop()):Ta.push(Va.shift());2>Qa?(Ta.unshift(0==Qa?Va.shift():Va.pop()),Ta.splice.apply(Ta,[1,0].concat(Va))):Ta.splice.apply(Ta,[0,0].concat(Va));Ua=w.slice(0,w.length-Na);Oa=[];Va=[0];$a=2==Qa?1:0;0==$a&&(Oa[0]=[0,Ta.shift()]);for(Ra=1;Ra<z+y;Ra++)Ra>=1+b+c?(Va[$a]=Ra,$a++):Oa[Ra]=[Ra,Ta.shift()];Ra=y+z-Na;Na=mathlib.rndPerm(Ra);2==Qa&&Na.indexOf(0)>=z&&(Ra=(Na.indexOf(0)-mathlib.rn(z)+Ra)%Ra,Na=Na.slice(Ra).concat(Na.slice(0,Ra)));Wa=[];for(Ra=0;Ra<
Ua.length;Ra++)for(Xa=Na.slice(0,Ua[Ra]),Wa.push(Xa),Na=Na.slice(Ua[Ra]),Sa=0;Sa<Xa.length;Sa++)Oa[Va[Xa[Sa]]]=[Va[Xa[(Sa+1)%Xa.length]],Ta.shift()]}}}}}return[Pa,Oa]}function z(a){for(var b=0,c=0;c<a.length;c++)b^=a[c]+1;return b&1}function r(a,b){for(var e=a.cfix.split(" "),f=[],n=[],r=/^(UFR|UFL|UBL|UBR|DFR|DFL|DBL|DBR)(\+?)$/i,w=h.split(" "),x=0;x<e.length;x++){var y=r.exec(e[x]);y&&y[1]!=w[a.cbuff[0]%8]&&(y[2]?n.push(w.indexOf(y[1])):f.push(w.indexOf(y[1])))}var Qa=a.efix.split(" ");e=[];var Pa=
[];r=/^(UR|UF|UL|UB|DR|DF|DL|DB|FR|FL|BL|BR)(\+?)$/i;for(x=0;x<Qa.length;x++)(y=r.exec(Qa[x]))&&y[1]!=w[a.ebuff[0]%12+8]&&(y[2]?Pa.push(w.indexOf(y[1])-8):e.push(w.indexOf(y[1])-8));Qa=a.ceparity;w=[0,0];y=[null,null];var Oa=c(8);for(x=0;x<Oa.length;x++){var Ra=z(Oa[x]);0!=(Qa>>Ra&1)&&(r=Na(a.cbuff[1],f.length,n.length,a.cnerrLR,a.cscycLR,a.cncodeLR,3,Oa[x]),w[Ra]+=r[0],mathlib.rndHit(r[0]/w[Ra])&&(y[Ra]=r[1]))}Oa=[0,0];var Ua=[null,null],Sa=c(12);for(x=0;x<Sa.length;x++)Ra=z(Sa[x]),0!=(Qa>>Ra&1)&&
(r=Na(a.ebuff[1],e.length,Pa.length,a.enerrLR,a.escycLR,a.encodeLR,2,Sa[x]),Oa[Ra]+=r[0],mathlib.rndHit(r[0]/Oa[Ra])&&(Ua[Ra]=r[1]));x=w[0]*Oa[0]+w[1]*Oa[1];r=[x,y[1],Ua[1]];mathlib.rndHit(w[0]*Oa[0]/x)&&(r=[x,y[0],Ua[0]]);if(!b)return r;if(0==r[0])return"N/A";w=[a.cbuff[0]%8].concat(f,n);e=[a.ebuff[0]%12].concat(e,Pa);for(x=0;8>x;x++)-1==w.indexOf(x)&&w.push(x);for(x=0;12>x;x++)-1==e.indexOf(x)&&e.push(x);f=[];n=[];for(x=0;8>x;x++)f[w[x]]=w[r[1][x][0]]|r[1][x][1]<<3;for(x=0;12>x;x++)n[e[x]]=e[r[2][x][0]]<<
1|r[2][x][1];Pa=new mathlib.CubieCube;x=mathlib.rndEl(" Rw Rw2 Rw' Fw Fw'".split(" "));e=mathlib.rndEl(["","Uw","Uw2","Uw'"]);r=Pa.selfMoveStr(x);w=Pa.selfMoveStr(e);Pa.init(f,n);Pa.ori=0;if(Pa.isEqual())return"U U'";null!=w&&Pa.selfMoveStr("URFDLB".charAt(~~(w/3))+" 2'".charAt(w%3),!0);null!=r&&Pa.selfMoveStr("URFDLB".charAt(~~(r/3))+" 2'".charAt(r%3),!0);f=Pa.toFaceCube();return(scramble_333.genFacelet(f)+" "+x+" "+e).replace(/ +/g," ")||"U U'"}function b(b){var c=$(b.target);if(b=c.attr("id")){if(/^[ce]buff[01]$/.exec(b))Oa[b.slice(0,
5)][~~b[5]]=~~c.val(),f();else if(b.endsWith("LR")){var e=/^(\d{1,2})-(\d{1,2})$/.exec(c.val())||/^((\d{1,2}))$/.exec(c.val());if(!e)return;var n=~~e[1];e=~~e[2];Oa[b]=[Math.min(n,e),Math.max(n,e)]}else if("ceparity"==b)Oa[b]=~~c.val();else if(b.endsWith("fix")){var r=c.val().toUpperCase().split(" ");c={};for(var x="cfix"==b?/^(UFR|UFL|UBL|UBR|DFR|DFL|DBL|DBR)(\+?)$/:/^(UR|UF|UL|UB|DR|DF|DL|DB|FR|FL|BL|BR)(\+?)$/,z=0;z<r.length;z++)(e=x.exec(r[z]))&&(c[e[1]]=e[2]);e=[];for(n in c)e.push(n+c[n]);Oa[b]=
e.join(" ")}else if("bldsClr"==b||"bldsEg"==b)for(e in n={cnerrLR:[0,7],cscycLR:[0,3],cncodeLR:[0,10],enerrLR:[0,11],escycLR:[0,5],encodeLR:[0,16]},"bldsClr"==b?(n.cfix="",n.efix="",n.ceparity=3):(n.cfix="UBL DFR+",n.efix="DR DF+",n.ceparity=1),n)Oa[e]=n[e];else if("bldsEdge"==b||"bldsCorn"==b)e=~~c.val(),b="bldsEdge"==b?"e":"c",Oa[b+"fix"]="",Oa[b+"scycLR"]="e"==b?[0,5]:[0,3],1==e?(Oa[b+"buff"]=[Oa[b+"buff"][0],1],Oa[b+"nerrLR"]=[0,0],Oa[b+"ncodeLR"]=[0,0]):2==e&&(Oa[b+"buff"]=[Oa[b+"buff"][0],7],
Oa[b+"nerrLR"]="e"==b?[0,11]:[0,7],Oa[b+"ncodeLR"]="e"==b?[0,16]:[0,10]);else if("scheme"==b){e=c.val();if("speffz"==e)Oa.scheme="CJM DIF ARE BQN VKP ULG XSH WTO BM CI DE AQ VO UK XG WS JP LF RH TN";else if("chichu"==e)Oa.scheme="JLK ABC DFE GHI XYZ WNM OPQ RTS GH AB CD EF OP IJ KL MN QR ST WX YZ";else if("custom"==e||"customed"==e){b=prompt("Code for "+h,Oa.scheme);if(!b){y();return}if(!/^([^\s]{3} ){8}([^\s]{2} ){11}[^\s]{2}$/i.exec(b)){alert("Invalid Scheme!");y();return}Oa.scheme=b}f()}kernel.setProp("bldSets",
JSON.stringify(Oa));a(Oa,w)}}function e(a,b){return a[b][0]+"-"+a[b][1]}function a(a,c){c.empty();Wa.empty();gb.empty();for(var f=Oa.scheme,n=0;24>n;n++){var w=~~(n/8),z=n%8,Na=h.slice(4*z,4*z+3);Na=Na.slice(w)+Na.slice(0,w)+" ["+f.charAt(4*z+w)+"]";Wa.append('<option value="'+n+'">'+Na+"</option>")}for(n=0;24>n;n++)w=~~(n/12),z=n%12,Na=h.slice(32+3*z,3*z+34),Na=Na.slice(w)+Na.slice(0,w)+" ["+f.charAt(32+3*z+w)+"]",gb.append('<option value="'+n+'">'+Na+"</option>");Za.val(a.cfix);Sa.val(e(a,"cnerrLR"));
Pa.val(e(a,"cscycLR"));$a.val(e(a,"cncodeLR"));hb.val(a.efix);kb.val(e(a,"enerrLR"));ib.val(e(a,"escycLR"));Xa.val(e(a,"encodeLR"));x.val(0);Qa.val(0);Wa.val(a.cbuff[0]);gb.val(a.ebuff[0]);Ta.val(a.cbuff[1]);mb.val(a.ebuff[1]);db.val(a.ceparity);f=r(a);c.append($("<tr>").append($("<th>Coder</th>"),$("<td colspan=2>").append(Ra)));c.append($("<tr>").append($('<td colspan=3 style="width:0;">').append(Va)));c.append($("<tr>").append($('<td colspan=3 style="height:0.2em;border:none;">')));c.append($("<tr>").append('<th colspan=3>Scrambler|<span class="click" id="bldsClr">clr</span>|<span class="click" id="bldsEg">eg.</span></th>'));
c.append($("<tr>").append($("<td>").append(db),$("<td>").append(x),$("<td>").append(Qa)));c.append($("<tr>").append("<td>buffer</td>",$("<td>").append(Wa,Ta),$("<td>").append(gb,mb)));c.append($("<tr>").append("<td>fixed</td>",$("<td>").append(Za),$("<td>").append(hb)));c.append($("<tr>").append("<td>flip</td>",$("<td>").append(Sa),$("<td>").append(kb)));c.append($("<tr>").append("<td>ex-cyc</td>",$("<td>").append(Pa),$("<td>").append(ib)));c.append($("<tr>").append("<td>#codes</td>",$("<td>").append($a),
$("<td>").append(Xa)));n=f[0]/4.325200327448986E19;c.append($("<tr>").append("<td>probs</td>",$("<td colspan=2>").append((0==f[0]?0:.001>n?n.toExponential(3):Math.round(1E6*n)/1E4+"%")+(1E-8>n?"<br>N="+(1E8<f[0]?f[0].toExponential(3):f[0]):""))));c.find("input,select").css({padding:0}).unbind("change").change(b);c.find("span.click").unbind("click").click(b);c.find("td,th").css({padding:0});y();return c}function y(){var a=Oa.scheme;"CJM DIF ARE BQN VKP ULG XSH WTO BM CI DE AQ VO UK XG WS JP LF RH TN"==
a?Ra.val("speffz"):"JLK ABC DFE GHI XYZ WNM OPQ RTS GH AB CD EF OP IJ KL MN QR ST WX YZ"==a?Ra.val("chichu"):Ra.val("customed")}function f(){var a=tools.getCurScramble(),b=cubeutil.getScrambledState(a),c=Oa.scheme,e=Oa.cbuff[0],f=Oa.ebuff[0];a=~~(e/8);e%=8;165>>e&1&&(a=(3-a)%3);var h=~~(f/12);f%=12;for(var r=[],w=0;8>w;w++)r[w]=c.slice(4*w,4*w+3);var x=[];for(w=0;12>w;w++)x[w]=c.slice(32+3*w,3*w+34);c=[];var y=[],z=new mathlib.CubieCube;z.init(b.ca,b.ea);b=1<<e;for(w=0;8>w;w++)z.ca[w]==w&&(b|=1<<
w);for(;255!=b;)if(w=z.ca[e]&7,w==e){for(w=-1;b>>++w&1;);mathlib.circle(z.ca,w,e);c.push(w)}else c.push(z.ca[e]),z.ca[e]=(z.ca[w]+(z.ca[e]&248))%24,z.ca[w]=w,b|=1<<w;b=1<<f;for(w=0;12>w;w++)z.ea[w]==2*w&&(b|=1<<w);for(;4095!=b;)if(w=z.ea[f]>>1,w==f){for(w=-1;b>>++w&1;);mathlib.circle(z.ea,w,f);y.push(2*w)}else y.push(z.ea[f]),z.ea[f]=z.ea[w]^z.ea[f]&1,z.ea[w]=w<<1,b|=1<<w;e=[[],[]];for(w=0;w<c.length;w++)f=c[w]&7,z=((c[w]>>3)+3-a)%3,165>>f&1&&(z=(3-z)%3),e[0].push(r[f].charAt((3-z)%3)),1==w%2&&e[0].push(" ");
for(w=0;w<y.length;w++)f=y[w]^h,e[1].push(x[f>>1].charAt(f&1)),1==w%2&&e[1].push(" ");Va.html("C: "+e[0].join("")+"<br>E: "+e[1].join(""))}function ab(b){b&&(tools.isPuzzle("333")?(b.empty().append(w),a(Oa,w),f()):b.html(IMAGE_UNAVAILABLE))}scrMgr.reg("nocache_333bldspec",function(){return r(Oa,!0)});var h="UFR UFL UBL UBR DFR DFL DBL DBR UR UF UL UB DR DF DL DB FR FL BL BR",Oa={cbuff:[0,7],cfix:"",cnerrLR:[0,7],cscycLR:[0,3],cncodeLR:[0,10],ebuff:[1,7],efix:"",enerrLR:[0,11],escycLR:[0,5],encodeLR:[0,
16],ceparity:3,scheme:"CJM DIF ARE BQN VKP ULG XSH WTO BM CI DE AQ VO UK XG WS JP LF RH TN"},Ra,x,Wa,Ta,Za,Sa,Pa,$a,Qa,gb,mb,hb,kb,ib,Xa,db,Va=$('<div style="text-align:left;">'),w=$('<table style="border-spacing:0; border:none;" class="table">');$(function(){var a=JSON.parse(kernel.getProp("bldSets","{}"));for(b in Oa)b in a&&(Oa[b]=a[b]);Ra=$('<select id="scheme">');var b=[["customed","Customed"],["speffz","Speffz"],["chichu","ChiChu"],["custom","Custom"]];for(a=0;a<b.length;a++)Ra.append('<option value="'+
b[a][0]+'">'+b[a][1]+"</option>");x=$('<select id="bldsCorn">');Wa=$('<select data="bufcorn" id="cbuff0" style="width:2em">');Ta=$('<select id="cbuff1" style="width:2em">');Za=$('<input id="cfix" type="text" style="width:4em" value="" pattern="[URFDLBurfdlb +]*">');Sa=$('<input id="cnerrLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');Pa=$('<input id="cscycLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');$a=$('<input id="cncodeLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');
Qa=$('<select id="bldsEdge">');gb=$('<select data="bufedge" id="ebuff0" style="width:2em">');mb=$('<select id="ebuff1" style="width:2em">');hb=$('<input id="efix" type="text" style="width:4em" value="" pattern="[URFDLBurfdlb +]*">');kb=$('<input id="enerrLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');ib=$('<input id="escycLR" type="text" style="width:4em" value=""> pattern="d{1,2}-d{1,2}"');Xa=$('<input id="encodeLR" type="text" style="width:4em" value="" pattern="d{1,2}-d{1,2}">');
db=$('<select id="ceparity">');b=[["any",7],["ok",1],["flip",2],["move",4],["not ok",6],["ok/flip",3],["ok/move",5]];for(a=0;a<b.length;a++)Ta.append('<option value="'+b[a][1]+'">'+b[a][0]+"</option>"),mb.append('<option value="'+b[a][1]+'">'+b[a][0]+"</option>");b=[["parity",3],["even",1],["odd",2]];for(a=0;a<b.length;a++)db.append('<option value="'+b[a][1]+'">'+b[a][0]+"</option>");b=[["$",0],["solved",1],["any",2]];for(a=0;a<b.length;a++)x.append('<option value="'+b[a][1]+'">'+b[a][0].replace("$",
"Corner")+"</option>"),Qa.append('<option value="'+b[a][1]+'">'+b[a][0].replace("$","Edge")+"</option>");tools.regTool("bldhelper",TOOLS_BLDHELPER,ab)})});var replay=execMain(function(){function c(a){a!=Ya&&(Ya=a,hb.html(Ya?"":""))}function Na(){db&&(clearTimeout(db),db=0);Xa=+new Date-Ua;c(1);a()}function z(a,b){return b?0>a?-1:a*Pa[$a]:0>a?-2E3:a/Pa[$a]}function r(b){if(b>n)for(var c=n;c<b;c++)3<Math.abs(b-1-c)?Ra.applyMoves([w[c][0]]):Ra.addMoves([w[c][0]]);else if(b<n)for(c=n-1;c>=b;c--){var e=Ra.moveInv(w[c][0]);3<Math.abs(b-1-c)?Ra.applyMoves([e]):Ra.addMoves([e])}n=b;b=w[Math.max(0,b-1)];Ua=z(b?b[1]:0);a()}function b(a){a=$(a.target);if(a.hasClass("click")||
a.is("input")){var b=a.attr("data"),e=Ya,h=z(Ua,!0);c(0);if("l"==b)0<n&&r(n-1);else if("n"==b)n<w.length&&r(n+1);else if("p"==b)0==e&&0<w.length&&Ua>=z(w[w.length-1][1])&&r(0),c(1-e),1==Ya&&Na();else if("s"==b)r(0);else if("e"==b)r(w.length);else if("r"==b)a:{a=Za.val();for(b=0;b<w.length;b++)if(w[b][1]>=a){r(b);break a}r(w.length)}else"s+"==b?($a=Math.min($a+1,Pa.length-1),Qa.html(Pa[$a]+"x"),Ua=z(h)):"s-"==b?($a=Math.max($a-1,0),Qa.html(Pa[$a]+"x"),Ua=z(h)):"a"==b?$.clipboardCopy(gb)&&logohint.push("share link copied"):
"o"==b&&((Ta=!Ta)?a.html(ob[1]):a.html(ob[0]),r(0),f(Wa))}}function e(){var a=+new Date-Xa;db&&(clearTimeout(db),db=0);if(0==Ya)return Ua;for(;n<w.length&&z(w[n][1])<=a;)Ra.addMoves([w[n][0]]),n++;if(n>=w.length)return a;db=setTimeout(e,z(w[n][1])-a);return a}function a(){Ua=e();var b=0<w.length?w[w.length-1][1]:0;Ua=Math.min(Ua,z(b));Za.val(z(Ua,!0));Sa.html((0<=Ua?kernel.pretty(z(Ua,!0)):"--")+"/"+kernel.pretty(b));for(var f=[],h=-4;5>h;h++){var r=h+n;if(0>r||r>=w.length)f[h+4]='<span style="color:#888;">~</span>',
pad=mathlib.valuedArray(fb-1," ").join("");else{var x=Ra.move2str(w[r][0]);pad=mathlib.valuedArray(fb-x.length," ").join("");Ra.isRotation(w[r][0])&&(x='<span style="color:#888;">'+x+"</span>");f[h+4]=x}0==h&&(f[h+4]="<b><u>"+f[h+4]+"</u></b>");f[h+4]=pad+f[h+4]}ib.empty();ib.html(f.join("<br>"));Ua>=z(b)&&c(0);1==Ya&&requestAnimFrame(a)}function y(a,b){if(!Ta||!/^\d+$/.exec(x))return b?[]:a;var c=kernel.getProp("giiOri");if("auto"==c)return b?[]:a;if(b)return Ra.parseScramble(mathlib.CubieCube.rot2str[c]);
c=mathlib.CubieCube.rotMulI[0][~~c];var e="URFDLB".indexOf(a[2]);e=mathlib.CubieCube.rotMulM[c][3*e]/3;a=a.slice();a[2]="URFDLB".charAt(e);return a}function f(a){Wa=a;mb.attr("href","https://alg.cubing.net/?alg="+encodeURIComponent((a||"").replace(/@(\d+)/g,"/*$1*/").replace(/-/g,"&#45;"))+"&setup="+encodeURIComponent(kb||""));var b=a.split(" "),c=[];a=[];for(var e=0;e<b.length;e++){var f=/^(.*)@(\d+)$/.exec(b[e]);f&&(c.push(f[1]),a.push(~~f[2]))}b=Ra.parseScramble(c.join(" "));if(b.length!=a.length)console.log("parse error");
else{Za.attr("min",-1);Za.attr("max",a[a.length-1]);w=y(null,!0);for(e=0;e<w.length;e++)w[e]=[w[e],-1];for(e=0;e<b.length;e++)0==a[e]&&Ra.isRotation(b[e])&&--a[e],w.push([y(b[e]),a[e]]);for(e=fb=0;e<w.length;e++)fb=Math.max(fb,(""+Ra.move2str(w[e][0])).length);n=0;Ua=z(-1);Na()}}function ab(a,e,n){x=n||tools.puzzleType(tools.getCurScramble()[0]);n="222 333 444 555 666 777 888 999 101010 111111".split(" ").indexOf(x);kb=a;gb=(new URL("?vrcreplay="+LZString.compressToEncodedURIComponent(JSON.stringify([a,
e,x])),location)).toString();var r={puzzle:"cube3"};-1!=n?r.puzzle="cube"+(n+2):-1!=["skb","mgm","pyr","sq1","clk"].indexOf(x)&&(r.puzzle=x);kernel.showDialog([h,function(){c(0)},void 0,function(){c(0)}],"share",VRCREPLAY_TITLE,function(){puzzleFactory.init(r,$.noop,Oa,function(c,n){h.unbind("click").click(b);Za.unbind("input click").bind("input",b);(Ra=c)&&Ra.resize();Va=Ra.parseScramble(a);Ra.applyMoves(Va);f(e)})})}var h,Oa,Ra,x,Wa,Ta=!0,Za,Sa,Pa=[.2,.3,.5,.7,1,1.5,2,3,5],$a=4,Qa,gb,mb,hb,kb,ib,
Xa=0,db=0,Va=[],w=[],n=0,Ua=0,Ya=0,fb=0,ob=VRCREPLAY_ORI.split("|");$(function(){h=$('<table style="height:98%">');Oa=$('<td style="height:80%">');Za=$('<input type="range" style="width:50%;" data="r">');Sa=$('<span style="user-select:none;"></span>');Qa=$('<span style="user-select:none;">1x</span>');mb=$('<a target="_blank">⏯Alg</a>');hb=$('<span class="click playbutton" data="%">$</span>'.replace("$","").replace("%","p"));ib=$('<td style="width:0%;font-family:monospace;white-space:pre;">');h.append($("<tr>").append($("<td>").append('<span class="click playbutton" data="%">$</span>'.replace("$",
ob[1]).replace("%","o"),"| ",mb," |",'<span class="click playbutton" data="%">$</span>'.replace("$",VRCREPLAY_SHARE).replace("%","a"))),$("<tr>").append(Oa,ib),$("<tr>").append($('<td style="display:flex;justify-content:center;">').append(Qa," ",Za," ",Sa)),$("<tr>").append($("<td>").append('<span class="click playbutton" data="%">$</span>'.replace("$","").replace("%","s-"),'<span class="click playbutton" data="%">$</span>'.replace("$","").replace("%","s+"),'<span class="click playbutton" data="%">$</span>'.replace("$",
"").replace("%","s"),'<span class="click playbutton" data="%">$</span>'.replace("$","").replace("%","l"),hb,'<span class="click playbutton" data="%">$</span>'.replace("$","").replace("%","n"),'<span class="click playbutton" data="%">$</span>'.replace("$","").replace("%","e"))));var a=$.urlParam("vrcreplay");if(a){$.clearUrl("vrcreplay");try{a=JSON.parse(LZString.decompressFromEncodedURIComponent(decodeURIComponent(a))),setTimeout(function(){ab(a[0],a[1],a[2])},500)}catch(eb){console.log(eb)}}});
return{popupReplay:ab,bindDomElem:function(a,b,c,e){a.hasClass("click")||a.addClass("click");a.unbind("click").click(ab.bind(null,b,c,e))}}});var shortcuts=execMain(function(){function c(b,c){if(kernel.getProp("useKSC")){var a;c.altKey&&c.ctrlKey?a=r[c.which]:c.altKey?a=Na[c.which]:c.ctrlKey&&(a=z[c.which]);void 0!=a&&(void 0==a[1]?kernel.setProp(a[0][0],a[0][1]):kernel.pushSignal(a[1],a[0]),kernel.clrKey(),kernel.blur())}}var Na={49:[["scrType","sqrs"]],50:[["scrType","222so"]],51:[["scrType","333"]],52:[["scrType","444wca"]],53:[["scrType","555wca"]],54:[["scrType","666wca"]],55:[["scrType","777wca"]],67:[["scrType","clkwca"]],77:[["scrType",
"mgmp"]],80:[["scrType","pyrso"]],83:[["scrType","skbso"]],73:[["scrType","input"]],37:[["scramble","last"],"ctrl"],39:[["scramble","next"],"ctrl"],38:[["stats","-"],"ctrl"],40:[["stats","+"],"ctrl"],68:[["stats","clr"],"ctrl"],90:[["stats","undo"],"ctrl"]},z={49:[["stats","OK"],"ctrl"],50:[["stats","+2"],"ctrl"],51:[["stats","DNF"],"ctrl"]},r={84:[["input","t"]],73:[["input","i"]],83:[["input","s"]],77:[["input","m"]],86:[["input","v"]],71:[["input","g"]]};$(function(){kernel.regListener("shortcut",
"keydown",c);kernel.regProp("tools","useKSC",0,PROPERTY_USEKSC,[!0])})});var help=execMain(function(c,Na,z){function r(){$(this).hasClass("enable")||b($(this).html())}function b(b){if(void 0===b)for(b in h)break;a(b)&&e(b)}function e(a,b){Ra.children().appendTo(kernel.temp);for(var c in h)$("<div />").html(c).addClass(c==a?"tab enable":"tab disable").click(r).appendTo(Ra)}function a(a,b){setTimeout(function(){h[a]&&Wa.scrollTop(Wa.scrollTop()+h[a].position().top-3)},0);return!0}function y(){var a=ABOUT_LANG,b;for(b in h)50<h[b].position().top||(a=h[b].is("h1, h2, h3")?
h[b].html():ABOUT_LANG);e(a)}function f(a){var b=$(a.target).val();kernel.blur();$(a.target).val("...");if(b in Ta)Na("vrcKBL",b),ab(b);else if("other"==b&&(a=z("vrcKBL"),a=Ta[a]||a,a=prompt("input keyboard layout",a))){47!=a.length&&alert("Invalid Keyboard Layout");for(b=0;b<a.length;b++)if(-1==a.indexOf(Ta.qwerty.charAt(b))){alert("Invalid Keyboard Layout");return}Na("vrcKBL",a);ab(a)}}function ab(a){a in Ta&&(a=Ta[a]);var b=[];a=a.toUpperCase();for(var c=0;c<Za.length;c++){b.push("<tr>");for(var e=
0;e<Za[c].length;e++)b.push("<td>"+a[Za[c][e]]+"<br><span>"+Sa[c][e]+"</span></td>");b.push("</tr>")}c=$("#vrckey");c.find("tr:not(:first)").remove();e=$("<tr>");var h=$('<select id="vrckeylayout">');h.append($("<option />").val("...").html("select layout"));for(var r in Ta)h.append($("<option />").val(r).html(r));h.append($("<option />").val("other").html("..."));h.unbind("change").change(f);c.append(e.append($('<th colspan="10">').append("Layout: ",h)));c.append(b.join(""));b=Ta.qwerty.toUpperCase();
a=a.toUpperCase();r={96:192,45:189,61:187,91:219,93:221,92:220,59:186,39:222,44:188,46:190,47:191};Pa={};for(c=0;c<b.length;c++)e=b.charCodeAt(c),h=a.charCodeAt(c),e=r[e]||e,h=r[h]||h,e!=h&&(Pa[h]=e),186==h&&(Pa[59]=e)}var h={},Oa=$('<table class="options" />'),Ra=$("<td />"),x=$("<td />").addClass("tabValue"),Wa=$('<div class="noScrollBar helptable">');Oa.append($("<tr />").append(Ra,x.append(Wa)));var Ta={qwerty:"`1234567890-=qwertyuiop[]\\asdfghjkl;'zxcvbnm,./",dvorak:"`1234567890[]',.pyfgcrl/=\\aoeuidhtns-;qjkxbmwvz",
colemak:"`1234567890-=qwfpgjluy;[]\\arstdhneio'zxcvbkm,./"},Za=[[1,2,3,4,5,6,7,8,9,10],[13,14,15,16,17,18,19,20,21,22],[26,27,28,29,30,31,32,33,34,35],[37,38,39,40,41,42,43,44,45,46]],Sa=[" S',  E,&lt;,&gt;,  M,  M,&lt;,&gt;, E',  S".split(",")," z';  B; L';Lw';  x;  x; Rw;  R; B';  z".split(";")," y';  D;  L; U'; F';  F;  U; R'; D';  y".split(";")," Dw; M';Uw'; Lw; x'; x';Rw'; Uw; M';Dw'".split(";")],Pa={};$(function(){for(var a=$("#about").children(),e=0;e<a.length;e++){var f=a.eq(e),r=f.appendTo(Wa).html();
f.is("h1, h2, h3")&&!a.eq(e+1).is("h1, h2, h3")?h[r]=f:h[ABOUT_LANG]=h[ABOUT_LANG]||f}b();$("#about").html(Oa);Wa.scrollTop();Wa.unbind("scroll").scroll(y);c("vrc","vrcKBL",-6,"VRC Keyboard Layout",["qwerty"]);a=z("vrcKBL");ab(a)});return{getMappedCode:function(a){return Pa[a]||a}}},[kernel.regProp,kernel.setProp,kernel.getProp]);var stackmat=execMain(function(){function c(c){e=c;a=b.createMediaStreamSource(c);y=b.createScriptProcessor(1024,1,1);y.onaudioprocess=function(a){a=a.inputBuffer.getChannelData(0);for(var b=0;b<a.length;b++){Oa=Math.max(1E-4,Oa+(a[b]*a[b]-Oa)*Ra);var c=1/Math.sqrt(Oa)*a[b];x.unshift(c);if((x.pop()-c)*(Wa?1:-1)>Za&&Math.abs(c-(Wa?1:-1))-1>Ta&&Sa>.6*f){for(var e=0;e<Math.round(Sa/f);e++)ab(Wa);Wa^=1;Sa=0}else Sa>2*f&&(ab(Wa),Sa-=f);Sa++;10>hb?Pa=Math.max(1E-4,Pa+(Math.pow(c-(Wa?1:-1),2)-Pa)*Ra):100<
hb&&(Pa=1)}};a.connect(y);y.connect(b.destination)}function Na(a){$a.push(a);a!=mb?(mb=a,hb=1):hb++;kb++;if(10<hb)gb=a,$a=[],0!=Qa.length&&(Qa=[]),100<hb&&Xa.on?(Xa.on=!1,Xa.noise=Math.min(1,Pa)||0,Xa.power=Oa,db(Xa)):700<kb&&(kb=100,Xa.noise=Math.min(1,Pa)||0,Xa.power=Oa,db(Xa));else if(10==$a.length)if($a[0]==gb||$a[9]!=gb)$a=$a.slice(1);else{a=0;for(var b=8;0<b;b--)a=a<<1|($a[b]==gb?1:0);Qa.push(String.fromCharCode(a));a:if(a=Qa,9==a.length||10==a.length){DEBUG&&console.log("[stackmat]",a);b=/[0-9]/;
var c=a[0];if(/[ SILRCA]/.exec(c)){for(var e=64,f=1;f<a.length-3;f++){if(!b.exec(a[f]))break a;e+=~~a[f]}e==a[a.length-3].charCodeAt(0)&&z(c,6E4*~~a[1]+1E3*~~(a[2]+a[3])+~~(a[4]+a[5]+(10==a.length?a[6]:"0")),9==a.length?10:1)}}$a=[]}}function z(a,b,c){var e=$.now();200<e-ib&&DEBUG&&console.log("[stackmat] signal miss ",e-ib);ib=e;e={};e.time_milli=b;e.unit=c;e.on=!0;kernel.getProp("stkHead")||(a="S");b=c==Xa.unit?e.time_milli>Xa.time_milli:Math.floor(e.time_milli/10)>Math.floor(Xa.time_milli/10);
e.greenLight="A"==a;e.leftHand="L"==a||"A"==a||"C"==a;e.rightHand="R"==a||"A"==a||"C"==a;e.running=("S"!=a||"S"==Xa.signalHeader)&&(" "==a||b);e.signalHeader=a;e.unknownRunning=!Xa.on;e.noise=Math.min(1,Pa)||0;e.power=Oa;Xa=e;kb=0;db(Xa)}function r(a){if(mb!=gb&&1==hb&&($a.push(a),24==$a.length)){for(var b=0,c=5;0<=c;c--){b*=10;for(var e=0;4>e;e++)b+=$a[4*c+e]<<e}$a=[];z("S",b,1)}a!=mb?(mb=a,hb=1):hb++;10<hb&&(gb=a,$a=[],Qa=[],1E3<hb&&Xa.on?(Xa.on=!1,Xa.noise=Math.min(1,Pa)||0,Xa.power=Oa,db(Xa)):
4E3<hb&&(hb=1E3,Xa.noise=Math.min(1,Pa)||0,Xa.power=Oa,db(Xa)))}var b,e,a,y,f,ab,h,Oa=1,Ra=1E-4,x=[],Wa=0,Ta=.2,Za=.7,Sa=0,Pa=0,$a=[],Qa=[],gb=0,mb=0,hb=0,kb=0,ib=0,Xa={time_milli:0,unit:10,on:!1,greenLight:!1,leftHand:!1,rightHand:!1,running:!1,unknownRunning:!0,signalHeader:"I",noise:1,power:1},db=$.noop;return{init:function(a,w,n){h=a;void 0===navigator.mediaDevices&&(navigator.mediaDevices={});void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(a){var b=
navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return b?new Promise(function(c,e){b.call(navigator,a,c,e)}):Promise.reject(Error("getUserMedia is not implemented in this browser"))});b=new (window.AudioContext||window.webkitAudioContext);"m"==h?(f=b.sampleRate/8E3,ab=r):(f=b.sampleRate/1200,ab=Na);Ra=.001/f;x.length=Math.ceil(f/6);$a=[];Qa=[];a={echoCancellation:!1,noiseSuppression:!1};w&&(a.deviceId={exact:w});return void 0==e?navigator.mediaDevices.getUserMedia({audio:a}).then(function(a){if("suspended"==
b.state&&!n)return Promise.reject();c(a)},console.log):Promise.resolve()},stop:function(){if(void 0!=e){try{a.disconnect(y),y.disconnect(b.destination),e.stop&&e.stop()}catch(Va){}e=void 0}},updateInputDevices:function(){var a=[],b=Promise.resolve(a);return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(c){for(var e=0;e<c.length;e++){var f=c[e];"audioinput"===f.kind&&a.push([f.deviceId,f.label||"microphone "+(a.length+1)])}return b}):
b},setCallBack:function(a){db=a}}});
execMain(function(){window.nativeStackmat&&(stackmat=function(){DEBUG&&console.log("Use Native Stackmat");var c="stackmat_callback_"+~~(1E7*Math.random()),Na;nativeStackmat.setCallback(c);window[c]=function(c){DEBUG&&console.log(JSON.stringify(c));Na&&Na(c)};return{init:function(){nativeStackmat.init();return Promise.resolve()},stop:function(){nativeStackmat.stop();return Promise.resolve()},updateInputDevices:function(){return Promise.resolve([[void 0,"native"]])},setCallBack:function(c){Na=c}}}())});var stackmatutil=execMain(function(c){function Na(a){a?(e=!0,a.empty().append(r,"<br>","Device:&nbsp;&nbsp;",b)):e=!1}function z(){stackmat.updateInputDevices().then(function(a){b.empty();for(var c=0;c<a.length;c++)b.append($("<option>").val(a[c][0]).text(a[c][1]));b.unbind("change").change(function(){stackmat.stop();console.log("select device ",b.val());stackmat.init(void 0,b.val(),!0);kernel.blur()})})}var r=$("<span>").html("status:  unknown"),b=$('<select style="font-size: 1rem;">'),e=!1;$(function(){tools.regTool("stackmatutil",
"stackmat",Na);kernel.regProp("timer","stkHead",0,PROPERTY_STKHEAD,[!0]);z()});return{init:function(a,b){return stackmat.init(a,void 0,b).then(z)},stop:stackmat.stop,setCallBack:function(a){stackmat.setCallBack(function(b){if(e){var c="status:  "+(b.on?"on":"off")+"<br>";c+="noise:   "+~~(100*b.noise)+"%<br>";c+="power:   "+~~(100*Math.log10(b.power))/10+"dB<br>";c+="header:  "+b.signalHeader+"<br>";c+="pad:     "+(b.leftHand?"L":" ")+(b.rightHand?"R":" ")+"<br>";c+="running: "+(b.running?"yes":"no");
r.html(c.replace(/ /g,"&nbsp;"))}a&&a(b)})}}});var GiikerCube=execMain(function(){function c(a,b){return a.toUpperCase()==b.toUpperCase()}function Na(){return r?Promise.resolve(z&&z.clear()).then(function(){r.removeEventListener("gattserverdisconnected",f);r.gatt.disconnect();r=null}):Promise.resolve()}var z=void 0,r=null,b=function(){function a(a){b(a.target.value)}function b(a){for(var b=$.now(),c=[],e=0;20>e;e++)c.push(a.getUint8(e));if(167==c[18]){a=[176,81,104,224,86,137,237,119,38,26,193,161,210,126,150,81,93,13,236,249,89,235,88,24,113,
81,214,131,130,199,2,169,39,165,171,41];var x=c[19]>>4&15,y=c[19]&15;for(e=0;18>e;e++)c[e]+=a[e+x]+a[e+y];c=c.slice(0,18)}a=[];for(e=0;e<c.length;e++)a.push(c[e]>>4&15),a.push(c[e]&15);e=[];for(c=0;3>c;c++)for(x=8;0!=x;x>>=1)e.push(a[c+28]&x?1:0);x=new mathlib.CubieCube;y=[-1,1,-1,1,1,-1,1,-1];for(c=0;8>c;c++)x.ca[c]=a[c]-1|(3+a[c+8]*y[c])%3<<3;for(c=0;12>c;c++)x.ea[c]=a[c+16]-1<<1|e[c];e=x.toFaceCube(h,r);y=a.slice(32,40);x=[];for(c=0;c<y.length;c+=2)x.push("BDLURF".charAt(y[c]-1)+" 2'".charAt((y[c+
1]-1)%7));if(DEBUG){y=[];for(c=0;40>c;c++)y.push("0123456789abcdef".charAt(a[c]));console.log("[giiker]","Raw Data: ",a.join(""));console.log("[giiker]","Current State: ",e);console.log("[giiker]","A Valid Generator: ",scramble_333.genFacelet(e));console.log("[giiker]","Previous Moves: ",x.reverse().join(" "));x.reverse()}ab(e,x,[b,b],f);return[e,x]}var c=null,e=null,f,h=[[26,15,29],[20,8,9],[18,38,6],[24,27,44],[51,35,17],[45,11,2],[47,0,36],[53,42,33]],r=[[25,28],[23,12],[19,7],[21,41],[32,16],
[5,10],[3,37],[30,43],[52,34],[48,14],[46,1],[50,39]];return{init:function(h){f=h.name.startsWith("Gi")?"Giiker":"Mi Smart";return h.gatt.connect().then(function(a){c=a;return a.getPrimaryService("0000aadb-0000-1000-8000-00805f9b34fb")}).then(function(a){return a.getCharacteristic("0000aadc-0000-1000-8000-00805f9b34fb")}).then(function(a){e=a;return e.startNotifications()}).then(function(){return e.readValue()}).then(function(c){b(c)[0]!=kernel.getProp("giiSolved",mathlib.SOLVED_FACELET)&&(c=kernel.getProp("giiRST"),
("a"==c||"p"==c&&confirm(CONFIRM_GIIRST))&&giikerutil.markSolved());return e.addEventListener("characteristicvaluechanged",a)})},opservs:["0000aadb-0000-1000-8000-00805f9b34fb","0000aaaa-0000-1000-8000-00805f9b34fb"],getBatteryLevel:function(){var a,b,e,h=function(a){e([a.target.value.getUint8(1),f]);b.removeEventListener("characteristicvaluechanged",h);b.stopNotifications()};return c.getPrimaryService("0000aaaa-0000-1000-8000-00805f9b34fb").then(function(b){a=b;return b.getCharacteristic("0000aaab-0000-1000-8000-00805f9b34fb")}).then(function(a){b=
a;return b.startNotifications()}).then(function(){return b.addEventListener("characteristicvaluechanged",h)}).then(function(){return a.getCharacteristic("0000aaac-0000-1000-8000-00805f9b34fb")}).then(function(a){a.writeValue((new Uint8Array([181])).buffer);return new Promise(function(a){e=a})})},clear:$.noop}}(),e=function(){function a(a){for(var b=[],c=0;c<a.byteLength;c++)b[c]=a.getUint8(c);if(null==cb)return b;a=cb.iv||[];if(16<b.length){var e=b.length-16,f=cb.decrypt(b.slice(e));for(c=0;16>c;c++)b[c+
e]=f[c]^~~a[c]}cb.decrypt(b);for(c=0;16>c;c++)b[c]^=~~a[c];return b}function b(){DEBUG&&console.log("[gancube] v1init start");return Xa.getCharacteristic("00002a28-0000-1000-8000-00805f9b34fb").then(function(a){return a.readValue()}).then(function(a){var b=a.getUint8(0)<<16|a.getUint8(1)<<8|a.getUint8(2);DEBUG&&console.log("[gancube] version",b.toString(16));cb=null;if(65543<b&&65536==(b&16776704))return Xa.getCharacteristic("00002a23-0000-1000-8000-00805f9b34fb").then(function(a){return a.readValue()}).then(function(a){var c=
bb[b>>8&255];if(c){c=JSON.parse(LZString.decompressFromEncodedURIComponent(c));for(var e=0;6>e;e++)c[e]=c[e]+a.getUint8(5-e)&255;a=c}else a=void 0;a?(DEBUG&&console.log("[gancube] key",JSON.stringify(a)),cb=$.aes128(a)):logohint.push("Not support your Gan cube")});logohint.push("Not support your Gan cube")}).then(function(){return ib.getCharacteristics()}).then(function(a){for(var b=0;b<a.length;b++){var e=a[b];DEBUG&&console.log("[gancube] v1init find chrct",e.uuid);c(e.uuid,"0000fff2-0000-1000-8000-00805f9b34fb")?
db=e:c(e.uuid,"0000fff5-0000-1000-8000-00805f9b34fb")?Va=e:c(e.uuid,"0000fff6-0000-1000-8000-00805f9b34fb")?w=e:c(e.uuid,"0000fff7-0000-1000-8000-00805f9b34fb")&&(n=e)}}).then(gb)}function e(){if(!r||!r.watchAdvertisements)return Promise.reject(-1);var a=new AbortController;return new Promise(function(b,c){var e=function(c){DEBUG&&console.log("[gancube] receive adv event",c);a:if(c=c.manufacturerData,!(c instanceof DataView)){for(var f=$jscomp.makeIterator(ob),h=f.next();!h.done;h=f.next())if(h=h.value,
c.has(h)){DEBUG&&console.log("[gancube] found Manufacturer Data under CIC = 0x"+h.toString(16).padStart(4,"0"));c=c.get(h);break a}DEBUG&&console.log("[gancube] Looks like this cube has new unknown CIC");c=void 0}if(c&&6<=c.byteLength){f=[];for(h=0;6>h;h++)f.push((c.getUint8(c.byteLength-h-1)+256).toString(16).slice(1));r&&r.removeEventListener("advertisementreceived",e);a.abort();b(f.join(":"))}};r.addEventListener("advertisementreceived",e);r.watchAdvertisements({signal:a.signal});setTimeout(function(){r&&
r.removeEventListener("advertisementreceived",e);a.abort();c(-2)},5E3)})}function f(a,b,c){var e=JSON.parse(kernel.getProp("giiMacMap","{}")),f=e[eb];if(!f||a)f=prompt((b?"The key provided might be wrong. ":"")+"MAC address (xx:xx:xx:xx:xx:xx) of your cube, can be found in CubeStation or about://bluetooth-internals/#devices",f||"xx:xx:xx:xx:xx:xx");/^([0-9a-f]{2}[:-]){5}[0-9a-f]{2}$/i.exec(f)?(f!=e[eb]&&(e[eb]=f,kernel.setProp("giiMacMap",JSON.stringify(e))),h(f,c)):(logohint.push("Not a valid mac address, cannot connect to your Gan cube"),
cb=null)}function h(a,b){for(var c=[],e=0;6>e;e++)c.push(parseInt(a.slice(3*e,3*e+2),16));var f=b||0;e=JSON.parse(LZString.decompressFromEncodedURIComponent(bb[2+2*f]));f=JSON.parse(LZString.decompressFromEncodedURIComponent(bb[3+2*f]));for(var h=0;6>h;h++)e[h]=(e[h]+c[5-h])%255,f[h]=(f[h]+c[5-h])%255;c=[e,f];DEBUG&&console.log("[gancube] ver=",b," key=",JSON.stringify(c));cb=$.aes128(c[0]);cb.iv=c[1]}function y(a){var b=mathlib.valuedArray(20,0);b[0]=a;if(fb){a=b.slice();if(null!=cb){for(var c=cb.iv||
[],e=0;16>e;e++)a[e]^=~~c[e];cb.encrypt(a);if(16<a.length){var f=a.length-16,h=a.slice(f);for(e=0;16>e;e++)h[e]^=~~c[e];cb.encrypt(h);for(e=0;16>e;e++)a[e+f]=h[e]}}DEBUG&&console.log("[gancube] v2sendRequest",b,a);b=fb.writeValue((new Uint8Array(a)).buffer)}else DEBUG&&console.log("[gancube] v2sendRequest cannot find v2write chrct"),b=void 0;return b}function z(a){DEBUG&&console.log("[gancube] v2init start");Cb=0;if(lb){var b=JSON.parse(kernel.getProp("giiMacMap","{}")),e=b[eb];e&&e.toUpperCase()==
lb.toUpperCase()?DEBUG&&console.log("[gancube] v2init mac matched"):(DEBUG&&console.log("[gancube] v2init mac updated"),b[eb]=lb,kernel.setProp("giiMacMap",JSON.stringify(b)));h(lb,a)}else f(!0,!1,a);return Ua.getCharacteristics().then(function(a){DEBUG&&console.log("[gancube] v2init find chrcts",a);for(var b=0;b<a.length;b++){var e=a[b];DEBUG&&console.log("[gancube] v2init find chrct",e.uuid);c(e.uuid,"28be4cb6-cd67-11e9-a32f-2a2ae2dbcce4")?Ya=e:c(e.uuid,"28be4a4a-cd67-11e9-a32f-2a2ae2dbcce4")&&
(fb=e)}Ya||DEBUG&&console.log("[gancube] v2init cannot find v2read chrct")}).then(function(){DEBUG&&console.log("[gancube] v2init v2read start notifications");return Ya.startNotifications()}).then(function(){DEBUG&&console.log("[gancube] v2init v2read notification started");return Ya.addEventListener("characteristicvaluechanged",mb)}).then(function(){return y(5)}).then(function(){return y(4)}).then(function(){return y(9)})}function Pa(){var a=$.now();DEBUG&&console.log("[gancube]","init cube state");
ab(ub,sb,[null,a],eb);rb.fromFacelet(ub);Fb=yb;ub!=kernel.getProp("giiSolved",mathlib.SOLVED_FACELET)&&(a=kernel.getProp("giiRST"),("a"==a||"p"==a&&confirm(CONFIRM_GIIRST))&&giikerutil.markSolved())}function Na(){return 50>pb?Promise.resolve(!1):db.readValue().then(function(b){b=a(b);for(var c=[],e=0;e<b.length-2;e+=3)for(var f=b[e^1]<<16|b[e+1^1]<<8|b[e+2^1],h=21;0<=h;h-=3)c.push("URFDLB".charAt(f>>h&7)),12==h&&c.push("URFDLB".charAt(e/3));ub=c.join("");pb=0;if(-1==Fb)Pa();else return Promise.resolve(!0)})}
function Qa(a,b){var c=yb-Fb&255;DEBUG&&1<c&&console.log("[gancube]","bluetooth event was lost, moveDiff = "+c);Fb=yb;pb+=c;c>sb.length&&(pb=50,c=sb.length);for(var e=wb+zb,f=c-1;0<=f;f--)e+=nb[f];2E3<Math.abs(a-e)&&(DEBUG&&console.log("[gancube]","time adjust",a-e,"@",a),wb+=a-e);for(f=c-1;0<=f;f--)c=3*"URFDLB".indexOf(sb[f][0])+" 2'".indexOf(sb[f][1]),mathlib.CubieCube.EdgeMult(rb,mathlib.CubieCube.moveCube[c],vb),mathlib.CubieCube.CornMult(rb,mathlib.CubieCube.moveCube[c],vb),wb+=nb[f],ab(vb.toFaceCube(),
sb.slice(f),[wb,0==f?a:null],eb+(b?"*":"")),c=vb,vb=rb,rb=c,DEBUG&&console.log("[gancube] move",sb[f],nb[f]);zb=a-wb}function gb(){if(r)return Va.readValue().then(function(b){b=a(b);var c=$.now();yb=b[12];if(yb!=Fb){sb=[];for(var e=0;6>e;e++){var f=b[13+e];sb.unshift("URFDLB".charAt(~~(f/3))+" 2'".charAt(f%3))}var h;return w.readValue().then(function(b){h=b=a(b);return Na()}).then(function(a){if(!a){nb=[];for(var b=0;9>b;b++)nb.unshift(h[2*b+1]|h[2*b+2]<<8);Qa(c,0);a&&rb.toFaceCube()!=ub&&(DEBUG&&
console.log("[gancube]","Cube state check error"),DEBUG&&console.log("[gancube]","calc",rb.toFaceCube()),DEBUG&&console.log("[gancube]","read",ub),rb.fromFacelet(ub))}})}}).then(gb)}function mb(a){null!=cb&&hb(a.target.value)}function hb(b){var c=$.now();b=a(b);for(var e=0;e<b.length;e++)b[e]=(b[e]+256).toString(2).slice(1);b=b.join("");e=parseInt(b.slice(0,4),2);if(1!=e)if(2==e){if(DEBUG&&console.log("[gancube]","v2 received move event",b),yb=parseInt(b.slice(4,12),2),yb!=Fb)if(-1==Fb)Fb=yb;else{nb=
[];sb=[];var f=0;for(e=0;7>e;e++){var h=parseInt(b.slice(12+5*e,17+5*e),2);nb[e]=parseInt(b.slice(47+16*e,63+16*e),2);sb[e]="URFDLB".charAt(h>>1)+" '".charAt(h&1);12<=h&&(sb[e]="U ",f=1)}Cb+=f;0==f&&Qa(c,1)}}else if(4==e){if(DEBUG&&console.log("[gancube]","v2 received facelets event",b),yb=parseInt(b.slice(4,12),2),yb==Fb||-1==Fb){f=new mathlib.CubieCube;h=0;var n=3840;for(e=0;7>e;e++){var r=parseInt(b.slice(12+3*e,15+3*e),2),w=parseInt(b.slice(33+2*e,35+2*e),2);n-=w<<3;n^=r;f.ca[e]=w<<3|r}f.ca[7]=
(n&4088)%24|n&7;for(e=0;11>e;e++)r=parseInt(b.slice(47+4*e,51+4*e),2),w=parseInt(b.slice(91+e,92+e),2),h^=r<<1|w,f.ea[e]=r<<1|w;f.ea[11]=h;0!=f.verify()?Cb++:(ub=f.toFaceCube(),-1==Fb?Pa():rb.toFaceCube()!=ub&&(DEBUG&&console.log("[gancube]","Cube state check error"),DEBUG&&console.log("[gancube]","calc",rb.toFaceCube()),DEBUG&&console.log("[gancube]","read",ub),rb.fromFacelet(ub),ab(ub,sb,[null,c],eb+"*")),Fb=yb)}}else if(5==e){DEBUG&&console.log("[gancube]","v2 received hardware info event",b);
c=parseInt(b.slice(8,16),2)+"."+parseInt(b.slice(16,24),2);f=parseInt(b.slice(24,32),2)+"."+parseInt(b.slice(32,40),2);h="";for(e=0;8>e;e++)h+=String.fromCharCode(parseInt(b.slice(40+8*e,48+8*e),2));b=1===parseInt(b.slice(104,105),2);DEBUG&&console.log("[gancube]","Hardware Version",c);DEBUG&&console.log("[gancube]","Software Version",f);DEBUG&&console.log("[gancube]","Device Name",h);DEBUG&&console.log("[gancube]","Gyro Enabled",b)}else 9==e?(DEBUG&&console.log("[gancube]","v2 received battery event",
b),Eb=parseInt(b.slice(8,16),2),giikerutil.updateBattery([Eb,eb+"*"])):DEBUG&&console.log("[gancube]","v2 received unknown event",b)}function kb(){Ua=Xa=ib=null;var a=Promise.resolve();Ya&&(Ya.removeEventListener("characteristicvaluechanged",mb),a=Ya.stopNotifications()["catch"]($.noop),Ya=null);lb=null;sb=[];nb=[];rb=new mathlib.CubieCube;vb=new mathlib.CubieCube;ub=mathlib.SOLVED_FACELET;wb=0;Fb=-1;Eb=100;return a}var ib,Xa,db,Va,w,n,Ua,Ya,fb,ob=[1,1281],cb=null,eb=null,lb=null,bb="NoRgnAHANATADDWJYwMxQOxiiEcfYgSK6Hpr4TYCs0IG1OEAbDszALpA NoNg7ANATFIQnARmogLBRUCs0oAYN8U5J45EQBmFADg0oJAOSlUQF0g NoRgNATGBs1gLABgQTjCeBWSUDsYBmKbCeMADjNnXxHIoIF0g NoRg7ANAzBCsAMEAsioxBEIAc0Cc0ATJkgSIYhXIjhMQGxgC6QA NoVgNAjAHGBMYDYCcdJgCwTFBkYVgAY9JpJYUsYBmAXSA NoRgNAbAHGAsAMkwgMyzClH0LFcArHnAJzIqIBMGWEAukA".split(" "),
sb=[],nb=[],rb=new mathlib.CubieCube,vb=new mathlib.CubieCube,ub=mathlib.SOLVED_FACELET,wb=0,zb=0,yb=-1,Fb=-1,pb=1E3,Eb=100,Cb=0;$.parseV2Data=hb;return{init:function(a){kb();eb=a.name;DEBUG&&console.log("[gancube] init gan cube start");return e().then(function(a){DEBUG&&console.log("[gancube] init, found cube bluetooth hardware MAC = "+a);lb=a},function(a){DEBUG&&console.log("[gancube] init, unable to automatically determine cube MAC, error code = "+a)}).then(function(){return a.gatt.connect()}).then(function(a){return a.getPrimaryServices()}).then(function(a){for(var e=
0;e<a.length;e++){var f=a[e];DEBUG&&console.log("[gancube] checkHardware find service",f.uuid);c(f.uuid,"0000180a-0000-1000-8000-00805f9b34fb")?Xa=f:c(f.uuid,"0000fff0-0000-1000-8000-00805f9b34fb")?ib=f:c(f.uuid,"6e400001-b5a3-f393-e0a9-e50e24dc4179")&&(Ua=f)}if(Ua)return z((eb||"").startsWith("AiCube")?1:0);if(ib&&Xa)return b();logohint.push("Not support your Gan cube")})},opservs:["0000fff0-0000-1000-8000-00805f9b34fb","0000180a-0000-1000-8000-00805f9b34fb","6e400001-b5a3-f393-e0a9-e50e24dc4179"],
cics:ob,getBatteryLevel:function(){return Ua?Promise.resolve([Eb,eb+"*"]):n?n.readValue().then(function(b){b=a(b);return Promise.resolve([b[7],eb])}):Promise.resolve([Eb,eb])},clear:kb}}(),a=function(){function a(a){a=a.target.value;var c=$.now();if(!(4>a.byteLength)&&42==a.getUint8(0)&&13==a.getUint8(a.byteLength-2)&&10==a.getUint8(a.byteLength-1)){var e=a.getUint8(2),x=a.byteLength-6;if(1==e)for(e=0;e<x;e+=2){var w=y[a.getUint8(3+e)>>1],n=[0,2][a.getUint8(3+e)&1],Oa=3*w+n;DEBUG&&console.log("move",
"URFDLB".charAt(w)+" 2'".charAt(n));mathlib.CubieCube.EdgeMult(kb,mathlib.CubieCube.moveCube[Oa],hb);mathlib.CubieCube.CornMult(kb,mathlib.CubieCube.moveCube[Oa],hb);mb=hb.toFaceCube();ab(mb,["URFDLB".charAt(w)+" 2'".charAt(n)],[c,c],h);w=hb;hb=kb;kb=w;20<++gb&&(gb=0,f.writeValue((new Uint8Array([51])).buffer))}else if(2==e){c=[];for(x=0;6>x;x++)for(w=9*y[x],n=Na[x],c[w+4]="BFUDRL".charAt(a.getUint8(3+9*x)),e=0;8>e;e++)c[w+z[(e+n)%8]]="BFUDRL".charAt(a.getUint8(3+9*x+e+1));a=c.join("");a!=mb&&(DEBUG&&
console.log("facelet",a),hb.fromFacelet(a))}else 3!=e&&(5==e?(r=a.getUint8(3),DEBUG&&console.log("battery level",r)):7==e?DEBUG&&console.log("offline stats",b(a)):8==e&&DEBUG&&console.log("cube type",b(a)))}}function b(a){for(var b=[],c=0;c<a.byteLength;c++)b.push(a.getUint8(c)>>4&15),b.push(a.getUint8(c)&15);return b}var c,e,f,h,r,y=[5,2,0,3,1,4],z=[0,1,2,5,8,7,6,3],Na=[0,0,6,2,0,0],gb=100,mb=mathlib.SOLVED_FACELET,hb=new mathlib.CubieCube,kb=new mathlib.CubieCube;return{init:function(b){h=b.name.startsWith("GoCube")?
"GoCube":"Rubiks Connected";return b.gatt.connect().then(function(a){return a.getPrimaryService("6e400001-b5a3-f393-e0a9-e50e24dcca9e")}).then(function(a){c=a;return c.getCharacteristic("6e400002-b5a3-f393-e0a9-e50e24dcca9e")}).then(function(a){f=a;return c.getCharacteristic("6e400003-b5a3-f393-e0a9-e50e24dcca9e")}).then(function(a){e=a;return e.startNotifications()}).then(function(){return e.addEventListener("characteristicvaluechanged",a)}).then(function(){return f.writeValue((new Uint8Array([51])).buffer)})},
opservs:["6e400001-b5a3-f393-e0a9-e50e24dcca9e"],getBatteryLevel:function(){f.writeValue((new Uint8Array([50])).buffer);return Promise.resolve([r,h])},clear:$.noop}}(),y=function(){function a(a,b){if("turn"==a){var c=b.target.value,f=$.now();if(!(1>c.byteLength)){var h=c.getUint8(0);if(!(c.byteLength<1+6*h))for(var r=0;r<h;r++){var x=1+6*r,w=c.getUint8(x+1)<<24|c.getUint8(x+0)<<16|c.getUint8(x+3)<<8|c.getUint8(x+2);w=Math.round(w/65536*1E3);var n=c.getUint8(x+4),Oa=Math.round(c.getUint8(x+5)/36);
x=y[n];Oa=y[n]+Oa;y[n]=(Oa+9)%9;n=[3,4,5,1,2,0][n];if(5<=x&&4>=Oa)x=2;else if(4>=x&&5<=Oa)x=0;else continue;w+=gb;Oa=3*n+x;DEBUG&&console.log("move","URFDLB".charAt(n)+" 2'".charAt(x));mathlib.CubieCube.EdgeMult(Qa,mathlib.CubieCube.moveCube[Oa],Na);mathlib.CubieCube.CornMult(Qa,mathlib.CubieCube.moveCube[Oa],Na);z=Na.toFaceCube();ab(z,["URFDLB".charAt(n)+" 2'".charAt(x)],[w,f],e);w=Na;Na=Qa;Qa=w}}}}var b,e,f,h,r,y=[0,0,0,0,0,0],z=mathlib.SOLVED_FACELET,Na=new mathlib.CubieCube,Qa=new mathlib.CubieCube,
gb=0;return{init:function(x){e=x.name;return x.gatt.connect().then(function(a){return a.getPrimaryService("00001000-0000-1000-8000-00805f9b34fb")}).then(function(a){b=a;return b.getCharacteristics()}).then(function(a){for(var b=0;b<a.length;b++){var e=a[b];DEBUG&&console.log("[moyucube] init find chrct",e.uuid);c(e.uuid,"00001001-0000-1000-8000-00805f9b34fb")||(c(e.uuid,"00001002-0000-1000-8000-00805f9b34fb")?f=e:c(e.uuid,"00001003-0000-1000-8000-00805f9b34fb")?h=e:c(e.uuid,"00001004-0000-1000-8000-00805f9b34fb")&&
(r=e))}}).then(function(){f.addEventListener("characteristicvaluechanged",a.bind(null,"read"));h.addEventListener("characteristicvaluechanged",a.bind(null,"turn"));r.addEventListener("characteristicvaluechanged",a.bind(null,"gyro"));f.startNotifications();h.startNotifications();r.startNotifications()})},opservs:["00001000-0000-1000-8000-00805f9b34fb"],getBatteryLevel:$.noop,clear:$.noop}}(),f=function(a,b){var c=Promise.resolve();"disconnect"==a&&(c=Promise.resolve(Na()));return c.then(function(){return"function"==
typeof h&&h(a,b)})}.bind(null,"disconnect"),ab=$.noop,h=$.noop;return{init:function(c){if(!window.navigator||!window.navigator.bluetooth)return alert("Bluetooth API is not available. Ensure https access, and try chrome with chrome://flags/#enable-experimental-web-platform-features enabled"),Promise.reject();c=Promise.resolve(!0);window.navigator.bluetooth.getAvailability&&(c=window.navigator.bluetooth.getAvailability());return c.then(function(c){DEBUG&&console.log("[bluetooth]","is available",c);
return c?window.navigator.bluetooth.requestDevice({filters:[{namePrefix:"Gi"},{namePrefix:"Mi Smart"},{namePrefix:"GAN"},{namePrefix:"MG"},{namePrefix:"AiCube"},{namePrefix:"GoCube"},{namePrefix:"Rubiks"},{namePrefix:"MHC"}],optionalServices:[].concat(b.opservs,e.opservs,a.opservs,y.opservs),optionalManufacturerData:[].concat(e.cics)}):Promise.reject("Bluetooth is not available. Ensure HTTPS access, and check bluetooth is enabled on your device")}).then(function(c){DEBUG&&console.log("[bluetooth]",
c);r=c;c.addEventListener("gattserverdisconnected",f);return c.name.startsWith("Gi")||c.name.startsWith("Mi Smart Magic Cube")?(z=b,b.init(c)):c.name.startsWith("GAN")||c.name.startsWith("MG")||c.name.startsWith("AiCube")?(z=e,e.init(c)):c.name.startsWith("GoCube")||c.name.startsWith("Rubiks")?(z=a,a.init(c)):c.name.startsWith("MHC")?(z=y,y.init(c)):Promise.reject("Cannot detect device type")})},stop:Na,isConnected:function(){return null!=r},setCallback:function(a){ab=a},setEventCallback:function(a){h=
a},getCube:function(){return z}}});var GanTimerState={};GanTimerState[GanTimerState.DISCONNECT=0]="DISCONNECT";GanTimerState[GanTimerState.GET_SET=1]="GET_SET";GanTimerState[GanTimerState.HANDS_OFF=2]="HANDS_OFF";GanTimerState[GanTimerState.RUNNING=3]="RUNNING";GanTimerState[GanTimerState.STOPPED=4]="STOPPED";GanTimerState[GanTimerState.IDLE=5]="IDLE";GanTimerState[GanTimerState.HANDS_ON=6]="HANDS_ON";GanTimerState[GanTimerState.FINISHED=7]="FINISHED";
var GanTimerDriver=execMain(function(){function c(a){var b=[];if(a)for(var c=0;c<a.byteLength;c++)b.push(a.getUint8(c).toString(16).padStart(2,"0"));return b.join(" ")}function Na(b){b=b.target.value;try{if(b&&0!=b.byteLength&&254==b.getUint8(0)){var e=b.getUint16(b.byteLength-2,!0),f=b.buffer.slice(2,b.byteLength-2),r=new DataView(f);f=65535;for(var y=0;y<r.byteLength;++y){f^=r.getUint8(y)<<8;for(var x=0;8>x;++x)f=0<(f&32768)?f<<1^4129:f<<1}var z=e==(f&65535)}else z=!1}catch(Ta){z=!1}z?"function"==
typeof a&&(z=a,e={state:b.getUint8(3)},e.state==GanTimerState.STOPPED&&(r=b.getUint8(4),f=b.getUint8(5),b=b.getUint16(6,!0),e.recordedTime={minutes:r,seconds:f,milliseconds:b,asTimestamp:6E4*r+1E3*f+b}),z(e)):console.log("[GanTimerDriver] Invalid event data received from Timer: "+c(b))}function z(){b().then(function(){"function"==typeof a&&a({state:GanTimerState.DISCONNECT})})}function r(a){var b=new AbortController;return new Promise(function(c,e){if(a.watchAdvertisements){var f=function(e){DEBUG&&
console.log("[GanTimerDriver] received advertisement packet from device",e);delete a.stopWaiting;a.removeEventListener("advertisementreceived",f);b.abort();c(a)};a.stopWaiting=function(){DEBUG&&console.log("[GanTimerDriver] cancel waiting for device advertisements");delete a.stopWaiting;a.removeEventListener("advertisementreceived",f);b.abort()};a.addEventListener("advertisementreceived",f);a.watchAdvertisements({signal:b.signal});DEBUG&&console.log("[GanTimerDriver] start waiting for device advertisement packet")}else e("Bluetooth Advertisements API is not supported by this browser")})}
function b(){e&&e.stopWaiting&&e.stopWaiting();return y?(DEBUG&&console.log("[GanTimerDriver] disconnecting from timer device"),y.service.device.removeEventListener("gattserverdisconnected",z),y.removeEventListener("characteristicvaluechanged",Na),y.stopNotifications()["catch"]($.noop)["finally"](function(){y.service.device.gatt.disconnect();y=void 0})):Promise.resolve()}var e,a,y;return{connect:function(a){if(!window.navigator.bluetooth)return Promise.reject("Bluetooth API is not supported by this browser. Try fresh Chrome version!");
var b=Promise.resolve(!0);window.navigator.bluetooth.getAvailability&&(b=window.navigator.bluetooth.getAvailability());return b.then(function(a){if(!a)return Promise.reject("Bluetooth is not available. Ensure HTTPS access, and check bluetooth is enabled on your device")}).then(function(){DEBUG&&console.log("[GanTimerDriver] requesting for bluetooth device, reconnect = "+!!a);return e&&a?r(e):navigator.bluetooth.requestDevice({filters:[{namePrefix:"GAN"},{namePrefix:"gan"},{namePrefix:"Gan"}],optionalServices:["0000fff0-0000-1000-8000-00805f9b34fb"]})}).then(function(a){DEBUG&&
console.log("[GanTimerDriver] connecting to GATT server");e=a;a.addEventListener("gattserverdisconnected",z);return a.gatt.connect()}).then(function(a){DEBUG&&console.log("[GanTimerDriver] getting timer primary service");return a.getPrimaryService("0000fff0-0000-1000-8000-00805f9b34fb")}).then(function(a){DEBUG&&console.log("[GanTimerDriver] getting timer state characteristic");return a.getCharacteristic("0000fff5-0000-1000-8000-00805f9b34fb")}).then(function(a){DEBUG&&console.log("[GanTimerDriver] start listening to state characteristic value updates");
y=a;y.addEventListener("characteristicvaluechanged",Na);y.startNotifications()})},isConnected:function(){return!!y},disconnect:b,setStateUpdateCallback:function(b){a=b}}});var csTimerWorker=execBoth(function(){if(!window.Worker)return{};var c=new Worker("js/cstimer.js"),Na={},z=0;c.onmessage=function(c){c=c.data;var b=Na[c[0]];delete Na[c[0]];b&&b(c[2])};c.postMessage([0,"set",["SCRAMBLE_NOOBST",SCRAMBLE_NOOBST]]);c.postMessage([0,"set",["SCRAMBLE_NOOBSS",SCRAMBLE_NOOBSS]]);return{getScramble:function(r,b){++z;Na[z]=b;c.postMessage([z,"scramble",r]);return z}}},function(){self.onmessage=function(c){var Na=c.data;c=Na[0];var z=Na[1];Na=Na[2];var r=void 0;switch(z){case "scramble":r=
scrMgr.scramblers[Na[0]];r=r.apply(r,Na);break;case "set":self[Na[0]]=Na[1]}postMessage([c,z,r])};"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports={getScrambleTypes:function(){var c=[],Na;for(Na in scrMgr.scramblers)c.push(Na);return c},getScramble:function(){var c=scrMgr.scramblers[arguments[0]];return c.apply(c,arguments)},setGlobal:function(c,Na){self[c]=Na}})});
